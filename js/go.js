/*
 * GoJS v1.6.0-beta3 JavaScript Library for HTML Diagrams
 * Northwoods Software, http://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2016 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.6.0-beta3/doc/license.html.
 */
(function(window) { var g,ea={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),f=Math.max(8,16-(c-a)),h=window.setTimeout(function(){b(c+f)},f);a=c+f;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();ea.Debug=null;
var v={fd:1,Gc:2,Tc:4,Sc:8,Um:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),OH:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),PH:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),qK:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Edge/"),Vm:void 0!==window.navigator&&void 0!==window.navigator.platform&&0<=window.navigator.platform.toUpperCase().indexOf("MAC"),
tE:void 0!==window.navigator&&void 0!==window.navigator.platform&&null!==window.navigator.platform.match(/(iPhone|iPod|iPad)/i),ND:function(a,b,c){var d=-1;return function(){var e=this,f=arguments;-1!==d&&v.clearTimeout(d);d=v.setTimeout(function(){d=-1;c||a.apply(e,f)},b);c&&!d&&a.apply(e,f)}},setTimeout:function(a,b){return window.setTimeout(a,b)},clearTimeout:function(a){window.clearTimeout(a)},createElement:function(a){return window.document.createElement(a)},k:function(a){throw Error(a);},I:function(a,
b){if(a.Ea){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);v.k(c)}},C:function(a,b,c,d){a instanceof b||(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Ad(a,b,c))},j:function(a,b,c,d){typeof a!==b&&(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Ad(a,b,c))},Te:function(a,b,c){"number"===typeof a&&isFinite(a)||(b=v.getTypeName(b),void 0!==c&&(b+="."+c),v.k(b+" must be a real number type, and not NaN or Infinity: "+a))},qb:function(a,b,c,d){a instanceof
fa&&a.je===b||(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Ad(a,"a constant of class "+v.nf(b),c))},QJ:function(a,b){"string"===typeof a?ga(a)||v.k('Color "'+a+'" is not a valid color string for '+b):a instanceof ha||v.k("Value for "+b+" must be a color string or a Brush, not "+a)},Ad:function(a,b,c,d){b=v.getTypeName(b);c=v.getTypeName(c);void 0!==d&&(c+="."+d);"string"===typeof a?v.k(c+" value is not an instance of "+b+': "'+a+'"'):v.k(c+" value is not an instance of "+b+": "+a)},ua:function(a,
b,c,d){c=v.getTypeName(c);void 0!==d&&(c+="."+d);v.k(c+" is not in the range "+b+": "+a)},dd:function(a){v.k(v.nf(a)+" constructor cannot take any arguments.")},Ka:function(a){v.k("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(a){window.console&&window.console.log(a)},Wa:function(a){return"object"===typeof a&&null!==a},isArray:function(a){return Array.isArray(a)||
a instanceof NodeList||a instanceof HTMLCollection},QH:function(a){return Array.isArray(a)},oz:function(a,b,c){v.isArray(a)||v.Ad(a,"Array or NodeList or HTMLCollection",b,c)},Va:function(a){return a.length},$k:function(a){return Array.prototype.slice.call(a)},Pa:function(a,b){Array.isArray(a);return a[b]},xD:function(a,b,c){Array.isArray(a)?a[b]=c:v.k("Cannot replace an object in an HTMLCollection or NodeList at "+b)},nz:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},Mi:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):v.k("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Th:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):v.k("Cannot remove an object from an HTMLCollection or NodeList at "+b)},Lx:[],M:function(){var a=v.Lx.pop();return void 0===a?new w:a},Rb:function(a,b){var c=v.Lx.pop();if(void 0===c)return new w(a,b);c.x=a;c.y=b;return c},v:function(a){v.Lx.push(a)},
$A:[],El:function(){var a=v.$A.pop();return void 0===a?new ia:a},Wj:function(a){v.$A.push(a)},Mx:[],Uf:function(){var a=v.Mx.pop();return void 0===a?new z:a},ek:function(a,b,c,d){var e=v.Mx.pop();if(void 0===e)return new z(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e},fc:function(a){v.Mx.push(a)},aB:[],nh:function(){var a=v.aB.pop();return void 0===a?new ja:a},Xe:function(a){v.aB.push(a)},Nx:null,q:function(){var a=v.Nx;return null!==a?(v.Nx=null,a):new ka},s:function(a){a.reset();v.Nx=a},ZA:[],
jb:function(){var a=v.ZA.pop();return void 0===a?[]:a},ra:function(a){a.length=0;v.ZA.push(a)},qh:Object.freeze([]),Il:1,cc:function(a){a.__gohashid=v.Il++},ht:function(a){var b=a.__gohashid;void 0===b&&(b=v.Il++,a.__gohashid=b);return b},cd:function(a){return a.__gohashid},ga:function(a,b){b.Ux=a;ea[a]=b},Ga:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},Uh:function(a){a.hG=!0},defineProperty:function(a,b,c,d,e){v.j(a,"function","Util.defineProperty:classfunc");
v.j(b,"object","Util.defineProperty:propobj");v.j(c,"function","Util.defineProperty:getter");v.j(d,"function","Util.defineProperty:setter");for(var f in b){b=b[f];c={get:c,set:d};if(void 0!==e)for(var h in e)c[h]=e[h];Object.defineProperty(a.prototype,f,c);e=Object.getOwnPropertyDescriptor(a.prototype,f);b&&e&&Object.defineProperty(a.prototype,b,e);break}},rJ:!1,u:function(a,b,c,d){v.j(a,"function","Util.defineReadOnlyProperty:classfunc");v.j(b,"object","Util.defineReadOnlyProperty:propobj");v.j(c,
"function","Util.defineReadOnlyProperty:getter");for(var e in b){var f=b[e];b={get:c,set:function(a){v.k('The property "'+f+'" is read-only and cannot be set to '+a)}};if(void 0!==d)for(var h in d)b[h]=d[h];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);f&&d&&Object.defineProperty(a.prototype,f,d);break}},Jd:function(a,b){for(var c in b)b[c]=!0;a.prototype.AC=b},getTypeName:function(a){return void 0===a?"":"string"===typeof a?a:"function"===typeof a?v.nf(a):
null===a?"*":""},nf:function(a){if("function"===typeof a){if(a.Ux)return a.Ux;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.Ux=b}else if("object"===typeof a&&a.constructor)return v.nf(a.constructor);return typeof a},p:function(a,b,c){v.j(a,"function","Util.defineEnumValue:classfunc");v.j(b,"string","Util.defineEnumValue:name");v.j(c,"number","Util.defineEnumValue:num");c=new fa(a,b,c);Object.freeze(c);a[b]=c;var d=a.fu;d instanceof ma||(d=
new ma("string",fa),a.fu=d);d.add(b,c);return c},kb:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){}return c},Ha:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){}},Rt:function(a,b){v.j(a,"object","Setting properties requires Objects as arguments");v.j(b,"object","Setting properties requires Objects as arguments");
var c=a instanceof C,d=a instanceof E,e;for(e in b){""===e&&v.k("Setting properties requires non-empty property names");var f=a,h=e;if(c||d){var k=e.indexOf(".");if(0<k){var l=e.substring(0,k);if(c)f=a.Yd(l);else if(f=a[l],void 0===f||null===f)f=a.wb[l];v.Wa(f)?h=e.substr(k+1):v.k("Unable to find object named: "+l+" in "+a.toString()+" when trying to set property: "+e)}}if("_"!==h[0]&&!v.Lz(f,h))if(d&&"ModelChanged"===h){a.uG(b[h]);continue}else if(d&&"Changed"===h){a.zm(b[h]);continue}else if(d&&
v.Lz(a.wb,h))f=a.wb;else if(d&&na(a,h)){a.iz(h,b[h]);continue}else if(a instanceof F&&"Changed"===h){a.zm(b[h]);continue}else v.k('Trying to set undefined property "'+h+'" on object: '+f.toString());f[h]=b[e];"_"===h[0]&&(k=f.Nl,v.isArray(k)||(k=[],f.Nl=k),k.push(h))}},Lz:function(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.AC;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},BD:function(a,b){if(!v.Wa(b)||
b instanceof Element||b instanceof CanvasRenderingContext2D||b instanceof oa||b instanceof pa)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=v.kb(b,d);null===e||"function"===typeof e||v.Lz(b,d)||(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},tw:function(a,b){if(null!==b&&"number"!==typeof b&&"string"!==typeof b&&"boolean"!==typeof b&&"function"!==
typeof b)if(void 0!==v.cd(b)){if(!v.Mv.contains(b))if(v.Mv.add(b),v.ov.add(v.BD(a,b)),b instanceof G||b instanceof H||b instanceof ma)for(var c=b.i;c.next();)v.tw(a+"["+c.key+"]",c.value);else for(c in b){var d=v.kb(b,c);if(void 0!==d&&null!==d&&v.Wa(d)&&d!==b.AC){if(b instanceof ra){if(d===b.sj)continue}else if(b instanceof C){if("data"===c||d===b.uh)continue;if("itemArray"===c||d===b.si)continue;if(b instanceof J&&d===b.Mk)continue}else if(!(b instanceof E))if(b instanceof sa){if("archetypeGroupData"===
c||d===b.Qx)continue}else if(b instanceof ua){if("archetypeLinkData"===c||d===b.Sx)continue;if("archetypeLabelNodeData"===c||d===b.Rx)continue}else if(b instanceof va){if("archetypeNodeData"===c||d===b.sk)continue}else if(b instanceof F){if("nodeDataArray"===c||d===b.kf)continue;if("linkDataArray"===c||d===b.jf||d===b.cm)continue;if(d===b.rc)continue;if(d===b.yh)continue}else if(b instanceof wa||b instanceof ya||b instanceof Aa)continue;v.tw(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)v.tw(a+
"["+c+"]",b[c]);else v.ov.add(v.BD(a,b))},check:function(a){void 0===v.Mv?v.Mv=new H(Object):v.Mv.clear();v.ov=new Ba;v.tw("",a);a=v.ov.toString();v.ov=null;return a},BI:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,f="",h=0;h<a.length;h++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(h)^b[(b[c]+b[d])%256]);return f},CH:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>
4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},og:function(a){return v.BI(v.CH(a))},Gl:null,adym:"7da71ca0ad381e90",GG:"@COLOR1",HG:"@COLOR2"};
v.Gl=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[v.og("7ca11abfd022028846")]=v.og("398c3597c01238");for(var c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[v.og("7ca11abfd7330390")](v.og(c[d-1]),10,15*d+0);b[v.og("7ca11abfd022028846")]=v.og("39f046ebb36e4b");for(d=1;5>d;d++)b[v.og("7ca11abfd7330390")](v.og(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])v.p=function(a,b){var c=new fa(a,b,2);Object.freeze(c);a[b]=c;var d=a.fu;d instanceof ma||(d=new ma("string",fa),a.fu=d);d.add(b,c);return c};return a}();function fa(a,b,c){v.cc(this);this.jB=a;this.Ob=b;this.mG=c}fa.prototype.toString=function(){return v.nf(this.jB)+"."+this.Ob};v.u(fa,{je:"classType"},function(){return this.jB});v.u(fa,{name:"name"},function(){return this.Ob});v.u(fa,{value:"value"},function(){return this.mG});var Da;
fa.findName=Da=function(a,b){if(void 0===b||null===b||""===b)return null;v.j(a,"function","findName:classfunc");v.j(b,"string","EnumValue.findName:name");var c=a.fu;return c instanceof ma?c.la(b):null};function Ba(){this.hB=[]}Ba.prototype.toString=function(){return this.hB.join("")};Ba.prototype.add=function(a){""!==a&&this.hB.push(a)};function pa(){}
function Fa(a){void 0===a&&(a=42);this.seed=a;this.Ex=48271;this.eu=2147483647;this.XA=this.eu/this.Ex;this.PF=this.eu%this.Ex;this.LF=1/this.eu;this.random()}Fa.prototype.random=function(){var a=this.seed%this.XA*this.Ex-this.seed/this.XA*this.PF;this.seed=0<a?a:a+this.eu;return this.seed*this.LF};function Ha(){}v.u(Ha,{i:"iterator"},function(){return this});Ha.prototype.reset=Ha.prototype.reset=function(){};Ha.prototype.next=Ha.prototype.hasNext=Ha.prototype.next=function(){return!1};
Ha.prototype.first=Ha.prototype.first=function(){return null};Ha.prototype.any=function(){return!1};Ha.prototype.all=function(){return!0};Ha.prototype.each=function(){return this};Ha.prototype.map=function(){return this};Ha.prototype.filter=function(){return this};Ha.prototype.concat=function(a){return a.i};v.u(Ha,{count:"count"},function(){return 0});Ha.prototype.xf=function(){};Ha.prototype.toString=function(){return"EmptyIterator"};var Ia=new Ha;function Ja(a){this.key=-1;this.value=a}
v.Jd(Ja,{key:!0,value:!0});v.u(Ja,{i:"iterator"},function(){return this});Ja.prototype.reset=Ja.prototype.reset=function(){this.key=-1};Ja.prototype.next=Ja.prototype.hasNext=Ja.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};Ja.prototype.first=Ja.prototype.first=function(){this.key=0;return this.value};Ja.prototype.any=function(a){this.key=-1;return a(this.value)};Ja.prototype.all=function(a){this.key=-1;return a(this.value)};
Ja.prototype.each=function(a){this.key=-1;a(this.value);return this};Ja.prototype.map=function(a){return new Ja(a(this.value))};Ja.prototype.filter=function(a){return a(this.value)?new Ja(this.value):Ia};Ja.prototype.concat=function(a){return new Ka(this,a.i)};v.u(Ja,{count:"count"},function(){return 1});Ja.prototype.xf=function(){this.value=null};Ja.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ka(a,b){this.Ek=a;this.Fk=b;this.iu=!1}v.Jd(Ka,{key:!0,value:!0});
v.u(Ka,{i:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=function(){this.Ek.reset();this.Fk.reset();this.iu=!1};Ka.prototype.next=Ka.prototype.hasNext=Ka.prototype.next=function(){if(!this.iu){var a=this.Ek;if(a.next())return this.key=a.key,this.value=a.value,!0;this.iu=!0}return this.iu&&(a=this.Fk,a.next())?(this.key=a.key,this.value=a.value,!0):!1};Ka.prototype.first=Ka.prototype.first=function(){this.reset();return this.next()?this.value:null};
Ka.prototype.any=function(a){return this.Ek.any(a)||this.Fk.any(a)?!0:!1};Ka.prototype.all=function(a){return this.Ek.all(a)&&this.Fk.all(a)?!0:!1};Ka.prototype.each=function(a){this.Ek.each(a);this.Fk.each(a);return this};Ka.prototype.map=function(a){return new Ka(this.Ek.map(a),this.Fk.map(a))};Ka.prototype.filter=function(a){return new Ka(this.Ek.filter(a),this.Fk.filter(a))};Ka.prototype.concat=function(a){return new Ka(this,a.i)};v.u(Ka,{count:"count"},function(){return this.Ek.count+this.Fk.count});
Ka.prototype.xf=function(){this.value=this.key=null};Ka.prototype.toString=function(){return"ConcatIterator()"};function La(a){this.qc=a;this.Ih=null;this.reset()}v.Jd(La,{key:!0,value:!0});v.u(La,{i:"iterator"},function(){return this});v.defineProperty(La,{$m:"predicate"},function(){return this.Ih},function(a){this.Ih=a});La.prototype.reset=La.prototype.reset=function(){var a=this.qc;a.Wb=null;this.cb=a.F;this.Ic=-1};
La.prototype.next=La.prototype.hasNext=La.prototype.next=function(){var a=this.qc;if(a.F!==this.cb){if(0>this.key)return!1;v.Ka(a)}var a=a.n,b=a.length,c=++this.Ic,d=this.Ih;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Ic=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.xf()}return!1};
La.prototype.first=La.prototype.first=function(){var a=this.qc;this.cb=a.F;this.Ic=0;var a=a.n,b=a.length,c=this.Ih;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Ic=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};La.prototype.any=function(a){var b=this.qc;b.Wb=null;var c=b.F;this.Ic=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k)){if(a(k))return!0;b.F!==c&&v.Ka(b)}}return!1};
La.prototype.all=function(a){var b=this.qc;b.Wb=null;var c=b.F;this.Ic=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k)){if(!a(k))return!1;b.F!==c&&v.Ka(b)}}return!0};La.prototype.each=function(a){var b=this.qc;b.Wb=null;var c=b.F;this.Ic=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k))a(k),b.F!==c&&v.Ka(b)}return this};
La.prototype.map=function(a){var b=this.qc;b.Wb=null;var c=b.F;this.Ic=-1;for(var d=[],e=b.n,f=e.length,h=this.Ih,k=0;k<f;k++){var l=e[k];if(null===h||h(l))d.push(a(l)),b.F!==c&&v.Ka(b)}a=new G;a.n=d;a.wc();return a.i};La.prototype.filter=function(a){var b=this.qc;b.Wb=null;var c=b.F;this.Ic=-1;for(var d=[],e=b.n,f=e.length,h=this.Ih,k=0;k<f;k++){var l=e[k];if(null===h||h(l))a(l)&&d.push(l),b.F!==c&&v.Ka(b)}a=new G(b.ia);a.n=d;a.wc();return a.i};
La.prototype.concat=function(a){this.qc.Wb=null;return new Ka(this,a.i)};v.u(La,{count:"count"},function(){var a=this.Ih;if(null!==a){for(var b=0,c=this.qc.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.qc.n.length});La.prototype.xf=function(){this.key=-1;this.value=null;this.cb=-1;this.Ih=null;this.qc.Wb=this};La.prototype.toString=function(){return"ListIterator@"+this.Ic+"/"+this.qc.count};function Ma(a){this.qc=a;this.reset()}v.Jd(Ma,{key:!0,value:!0});v.u(Ma,{i:"iterator"},function(){return this});
Ma.prototype.reset=Ma.prototype.reset=function(){var a=this.qc;a.qj=null;this.cb=a.F;this.Ic=a.n.length};Ma.prototype.next=Ma.prototype.hasNext=Ma.prototype.next=function(){var a=this.qc;if(a.F!==this.cb){if(0>this.key)return!1;v.Ka(a)}var b=--this.Ic;if(0<=b)return this.key=b,this.value=a.n[b],!0;this.xf();return!1};Ma.prototype.first=Ma.prototype.first=function(){var a=this.qc;this.cb=a.F;var b=a.n;this.Ic=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};
Ma.prototype.any=function(a){var b=this.qc;b.qj=null;var c=b.F,d=b.n,e=d.length;this.Ic=e;for(e-=1;0<=e;e--){if(a(d[e]))return!0;b.F!==c&&v.Ka(b)}return!1};Ma.prototype.all=function(a){var b=this.qc;b.qj=null;var c=b.F,d=b.n,e=d.length;this.Ic=e;for(e-=1;0<=e;e--){if(!a(d[e]))return!1;b.F!==c&&v.Ka(b)}return!0};Ma.prototype.each=function(a){var b=this.qc;b.qj=null;var c=b.F,d=b.n,e=d.length;this.Ic=e;for(e-=1;0<=e;e--)a(d[e]),b.F!==c&&v.Ka(b);return this};
Ma.prototype.map=function(a){var b=this.qc;b.qj=null;var c=b.F,d=[],e=b.n,f=e.length;this.Ic=f;for(f-=1;0<=f;f--)d.push(a(e[f])),b.F!==c&&v.Ka(b);a=new G;a.n=d;a.wc();return a.i};Ma.prototype.filter=function(a){var b=this.qc;b.qj=null;var c=b.F,d=[],e=b.n,f=e.length;this.Ic=f;for(f-=1;0<=f;f--){var h=e[f];a(h)&&d.push(h);b.F!==c&&v.Ka(b)}a=new G(b.ia);a.n=d;a.wc();return a.i};Ma.prototype.concat=function(a){this.qc.qj=null;return new Ka(this,a.i)};v.u(Ma,{count:"count"},function(){return this.qc.n.length});
Ma.prototype.xf=function(){this.key=-1;this.value=null;this.cb=-1;this.qc.qj=this};Ma.prototype.toString=function(){return"ListIteratorBackwards("+this.Ic+"/"+this.qc.count+")"};
function G(a){v.cc(this);this.Ea=!1;this.n=[];this.F=0;this.qj=this.Wb=null;void 0===a||null===a?this.ia=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.ia=a:v.ua(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.ia=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:v.ua(a,"null, a primitive type name, or a class type",
"List constructor: type")}v.ga("List",G);G.prototype.wc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};G.prototype.freeze=G.prototype.freeze=function(){this.Ea=!0;return this};G.prototype.thaw=G.prototype.Na=function(){this.Ea=!1;return this};G.prototype.toString=function(){return"List("+v.getTypeName(this.ia)+")#"+v.cd(this)};G.prototype.add=G.prototype.push=G.prototype.add=function(a){null!==a&&(v.I(this,a),this.n.push(a),this.wc())};
G.prototype.addAll=G.prototype.Yc=function(a){if(null===a)return this;v.I(this);var b=this.n;if(v.isArray(a))for(var c=v.Va(a),d=0;d<c;d++){var e=v.Pa(a,d);b.push(e)}else for(a=a.i;a.next();)e=a.value,b.push(e);this.wc();return this};G.prototype.clear=G.prototype.clear=function(){v.I(this);this.n.length=0;this.wc()};G.prototype.contains=G.prototype.has=G.prototype.contains=function(a){return null===a?!1:-1!==this.n.indexOf(a)};
G.prototype.indexOf=G.prototype.indexOf=function(a){return null===a?-1:this.n.indexOf(a)};G.prototype.elt=G.prototype.get=G.prototype.ha=function(a){var b=this.n;(0>a||a>=b.length)&&v.ua(a,"0 <= i < length",G,"elt:i");return b[a]};G.prototype.setElt=G.prototype.set=G.prototype.zg=function(a,b){var c=this.n;(0>a||a>=c.length)&&v.ua(a,"0 <= i < length",G,"setElt:i");v.I(this,a);c[a]=b};G.prototype.first=G.prototype.first=function(){var a=this.n;return 0===a.length?null:a[0]};
G.prototype.last=G.prototype.Nd=function(){var a=this.n,b=a.length;return 0<b?a[b-1]:null};G.prototype.pop=G.prototype.pop=function(){v.I(this);var a=this.n;return 0<a.length?a.pop():null};G.prototype.any=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.F!==c&&v.Ka(this)}return!1};G.prototype.all=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.F!==c&&v.Ka(this)}return!0};
G.prototype.each=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++)a(b[e]),this.F!==c&&v.Ka(this);return this};G.prototype.map=function(a){for(var b=new G,c=[],d=this.n,e=this.F,f=d.length,h=0;h<f;h++)c.push(a(d[h])),this.F!==e&&v.Ka(this);b.n=c;b.wc();return b};G.prototype.filter=function(a){for(var b=new G(this.ia),c=[],d=this.n,e=this.F,f=d.length,h=0;h<f;h++){var k=d[h];a(k)&&c.push(k);this.F!==e&&v.Ka(this)}b.n=c;b.wc();return b};G.prototype.concat=function(a){return this.copy().Yc(a)};
G.prototype.insertAt=G.prototype.xd=function(a,b){0>a&&v.ua(a,">= 0",G,"insertAt:i");v.I(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.wc();return!0};G.prototype.remove=G.prototype["delete"]=G.prototype.remove=function(a){if(null===a)return!1;v.I(this,a);var b=this.n;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.wc();return!0};
G.prototype.removeAt=G.prototype.Rc=function(a){var b=this.n;(0>a||a>=b.length)&&v.ua(a,"0 <= i < length",G,"removeAt:i");v.I(this,a);a===b.length-1?b.pop():b.splice(a,1);this.wc()};G.prototype.removeRange=G.prototype.removeRange=function(a,b){var c=this.n;(0>a||a>=c.length)&&v.ua(a,"0 <= from < length",G,"elt:from");(0>b||b>=c.length)&&v.ua(b,"0 <= to < length",G,"elt:to");v.I(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.wc()};
G.prototype.copy=function(){var a=new G(this.ia),b=this.n;0<b.length&&(a.n=Array.prototype.slice.call(b));return a};G.prototype.toArray=G.prototype.ed=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};G.prototype.toSet=G.prototype.wF=function(){for(var a=new H(this.ia),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};G.prototype.sort=G.prototype.sort=function(a){v.I(this);this.n.sort(a);this.wc();return this};
G.prototype.sortRange=G.prototype.Fp=function(a,b,c){var d=this.n,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);v.I(this);var f=c-b;if(1>=f)return this;(0>b||b>=e-1)&&v.ua(b,"0 <= from < length",G,"sortRange:from");if(2===f)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.wc()),this;if(0===b)if(c>=e)d.sort(a);else for(f=d.slice(0,c),f.sort(a),a=0;a<c;a++)d[a]=f[a];else if(c>=e)for(f=d.slice(b),f.sort(a),a=b;a<e;a++)d[a]=f[a-b];else for(f=d.slice(b,c),f.sort(a),a=b;a<c;a++)d[a]=f[a-b];this.wc();
return this};G.prototype.reverse=G.prototype.reverse=function(){v.I(this);this.n.reverse();this.wc();return this};v.u(G,{count:"count"},function(){return this.n.length});v.u(G,{size:"size"},function(){return this.n.length});v.u(G,{length:"length"},function(){return this.n.length});v.u(G,{i:"iterator"},function(){if(0>=this.n.length)return Ia;var a=this.Wb;return null!==a?(a.reset(),a):new La(this)});
v.u(G,{Wm:"iteratorBackwards"},function(){if(0>=this.n.length)return Ia;var a=this.qj;return null!==a?(a.reset(),a):new Ma(this)});function Oa(a){this.Kh=a;this.reset()}v.Jd(Oa,{key:!0,value:!0});v.u(Oa,{i:"iterator"},function(){return this});Oa.prototype.reset=Oa.prototype.reset=function(){var a=this.Kh;a.Wb=null;this.cb=a.F;this.bb=null};
Oa.prototype.next=Oa.prototype.hasNext=Oa.prototype.next=function(){var a=this.Kh;if(a.F!==this.cb){if(null===this.key)return!1;v.Ka(a)}var b=this.bb,b=null===b?a.Aa:b.Ua;if(null!==b)return this.bb=b,this.value=b.value,this.key=b.key,!0;this.xf();return!1};Oa.prototype.first=Oa.prototype.first=function(){var a=this.Kh;this.cb=a.F;a=a.Aa;if(null!==a){this.bb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Oa.prototype.any=function(a){var b=this.Kh;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(a(d.value))return!0;b.F!==c&&v.Ka(b);d=d.Ua}return!1};Oa.prototype.all=function(a){var b=this.Kh;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(!a(d.value))return!1;b.F!==c&&v.Ka(b);d=d.Ua}return!0};Oa.prototype.each=function(a){var b=this.Kh;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;)a(d.value),b.F!==c&&v.Ka(b),d=d.Ua;return this};
Oa.prototype.map=function(a){var b=this.Kh;b.Wb=null;for(var c=new G,d=b.F,e=b.Aa;null!==e;)c.add(a(e.value)),b.F!==d&&v.Ka(b),e=e.Ua;return c.i};Oa.prototype.filter=function(a){var b=this.Kh;b.Wb=null;for(var c=new G(b.ia),d=b.F,e=b.Aa;null!==e;){var f=e.value;a(f)&&c.add(f);b.F!==d&&v.Ka(b);e=e.Ua}return c.i};Oa.prototype.concat=function(a){this.Kh.Wb=null;return new Ka(this,a.i)};v.u(Oa,{count:"count"},function(){return this.Kh.hd});
Oa.prototype.xf=function(){this.value=this.key=null;this.cb=-1;this.Kh.Wb=this};Oa.prototype.toString=function(){return null!==this.bb?"SetIterator@"+this.bb.value:"SetIterator"};
function H(a){v.cc(this);this.Ea=!1;void 0===a||null===a?this.ia=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.ia=a:v.ua(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.ia=a===Object?"object":a===String?"string":a===Number?"number":a:v.ua(a,"null, a primitive type name, or a class type","Set constructor: type");this.jd={};this.hd=0;this.Wb=null;this.F=0;this.Eh=this.Aa=null}v.ga("Set",H);
H.prototype.wc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};H.prototype.freeze=H.prototype.freeze=function(){this.Ea=!0;return this};H.prototype.thaw=H.prototype.Na=function(){this.Ea=!1;return this};H.prototype.toString=function(){return"Set("+v.getTypeName(this.ia)+")#"+v.cd(this)};
H.prototype.add=H.prototype.add=function(a){if(null===a)return!1;v.I(this,a);var b=a;v.Wa(a)&&(b=v.ht(a));return void 0===this.jd[b]?(this.hd++,a=new Qa(a,a),this.jd[b]=a,b=this.Eh,null===b?this.Aa=a:(a.lo=b,b.Ua=a),this.Eh=a,this.wc(),!0):!1};H.prototype.addAll=H.prototype.Yc=function(a){if(null===a)return this;v.I(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.add(v.Pa(a,c));else for(a=a.i;a.next();)this.add(a.value);return this};
H.prototype.contains=H.prototype.has=H.prototype.contains=function(a){if(null===a)return!1;var b=a;return v.Wa(a)&&(b=v.cd(a),void 0===b)?!1:void 0!==this.jd[b]};H.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(!this.contains(a.value))return!1;return!0};H.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(this.contains(a.value))return!0;return!1};H.prototype.first=H.prototype.first=function(){var a=this.Aa;return null===a?null:a.value};
H.prototype.any=function(a){for(var b=this.F,c=this.Aa;null!==c;){if(a(c.value))return!0;this.F!==b&&v.Ka(this);c=c.Ua}return!1};H.prototype.all=function(a){for(var b=this.F,c=this.Aa;null!==c;){if(!a(c.value))return!1;this.F!==b&&v.Ka(this);c=c.Ua}return!0};H.prototype.each=function(a){for(var b=this.F,c=this.Aa;null!==c;)a(c.value),this.F!==b&&v.Ka(this),c=c.Ua;return this};H.prototype.map=function(a){for(var b=new H,c=this.F,d=this.Aa;null!==d;)b.add(a(d.value)),this.F!==c&&v.Ka(this),d=d.Ua;return b};
H.prototype.filter=function(a){for(var b=new H(this.ia),c=this.F,d=this.Aa;null!==d;){var e=d.value;a(e)&&b.add(e);this.F!==c&&v.Ka(this);d=d.Ua}return b};H.prototype.concat=function(a){return this.copy().Yc(a)};
H.prototype.remove=H.prototype["delete"]=H.prototype.remove=function(a){if(null===a)return!1;v.I(this,a);var b=a;if(v.Wa(a)&&(b=v.cd(a),void 0===b))return!1;a=this.jd[b];if(void 0===a)return!1;var c=a.Ua,d=a.lo;null!==c&&(c.lo=d);null!==d&&(d.Ua=c);this.Aa===a&&(this.Aa=c);this.Eh===a&&(this.Eh=d);delete this.jd[b];this.hd--;this.wc();return!0};
H.prototype.removeAll=H.prototype.tA=function(a){if(null===a)return this;v.I(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.remove(v.Pa(a,c));else for(a=a.i;a.next();)this.remove(a.value);return this};H.prototype.retainAll=function(a){if(null===a||0===this.count)return this;v.I(this);var b=new H(this.ia);b.Yc(a);a=[];for(var c=this.i;c.next();){var d=c.value;b.contains(d)||a.push(d)}this.tA(a);return this};
H.prototype.clear=H.prototype.clear=function(){v.I(this);this.jd={};this.hd=0;this.Eh=this.Aa=null;this.wc()};H.prototype.copy=function(){var a=new H(this.ia),b=this.jd,c;for(c in b)a.add(b[c].value);return a};H.prototype.toArray=H.prototype.ed=function(){var a=Array(this.hd),b=this.jd,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};H.prototype.toList=function(){var a=new G(this.ia),b=this.jd,c;for(c in b)a.add(b[c].value);return a};v.u(H,{count:"count"},function(){return this.hd});
v.u(H,{size:"size"},function(){return this.hd});v.u(H,{i:"iterator"},function(){if(0>=this.hd)return Ia;var a=this.Wb;return null!==a?(a.reset(),a):new Oa(this)});function Ra(a){this.Da=a;this.reset()}v.Jd(Ra,{key:!0,value:!0});v.u(Ra,{i:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){this.cb=this.Da.F;this.bb=null};
Ra.prototype.next=Ra.prototype.hasNext=Ra.prototype.next=function(){var a=this.Da;if(a.F!==this.cb){if(null===this.key)return!1;v.Ka(a)}var b=this.bb,b=null===b?a.Aa:b.Ua;if(null!==b)return this.bb=b,this.value=this.key=a=b.key,!0;this.xf();return!1};Ra.prototype.first=Ra.prototype.first=function(){var a=this.Da;this.cb=a.F;a=a.Aa;return null!==a?(this.bb=a,this.value=this.key=a=a.key):null};
Ra.prototype.any=function(a){var b=this.Da,c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(a(d.key))return!0;b.F!==c&&v.Ka(b);d=d.Ua}return!1};Ra.prototype.all=function(a){var b=this.Da,c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(!a(d.key))return!1;b.F!==c&&v.Ka(b);d=d.Ua}return!0};Ra.prototype.each=function(a){var b=this.Da,c=b.F;this.bb=null;for(var d=b.Aa;null!==d;)a(d.key),b.F!==c&&v.Ka(b),d=d.Ua;return this};
Ra.prototype.map=function(a){var b=this.Da,c=b.F;this.bb=null;for(var d=new G,e=b.Aa;null!==e;)d.add(a(e.key)),b.F!==c&&v.Ka(b),e=e.Ua;return d.i};Ra.prototype.filter=function(a){var b=this.Da,c=b.F;this.bb=null;for(var d=new G(b.ti),e=b.Aa;null!==e;){var f=e.key;a(f)&&d.add(f);b.F!==c&&v.Ka(b);e=e.Ua}return d.i};Ra.prototype.concat=function(a){return new Ka(this,a.i)};v.u(Ra,{count:"count"},function(){return this.Da.hd});Ra.prototype.xf=function(){this.value=this.key=null;this.cb=-1};
Ra.prototype.toString=function(){return null!==this.bb?"MapKeySetIterator@"+this.bb.value:"MapKeySetIterator"};function Sa(a){v.cc(this);this.Ea=!0;this.Da=a}v.Ga(Sa,H);Sa.prototype.freeze=function(){return this};Sa.prototype.Na=function(){return this};Sa.prototype.toString=function(){return"MapKeySet("+this.Da.toString()+")"};Sa.prototype.add=Sa.prototype.set=Sa.prototype.add=function(){v.k("This Set is read-only: "+this.toString());return!1};
Sa.prototype.contains=Sa.prototype.has=Sa.prototype.contains=function(a){return this.Da.contains(a)};Sa.prototype.remove=Sa.prototype["delete"]=Sa.prototype.remove=function(){v.k("This Set is read-only: "+this.toString());return!1};Sa.prototype.clear=Sa.prototype.clear=function(){v.k("This Set is read-only: "+this.toString())};Sa.prototype.first=Sa.prototype.first=function(){var a=this.Da.Aa;return null!==a?a.key:null};
Sa.prototype.any=function(a){for(var b=this.Da.Aa;null!==b;){if(a(b.key))return!0;b=b.Ua}return!1};Sa.prototype.all=function(a){for(var b=this.Da.Aa;null!==b;){if(!a(b.key))return!1;b=b.Ua}return!0};Sa.prototype.each=function(a){for(var b=this.Da.Aa;null!==b;)a(b.key),b=b.Ua;return this};Sa.prototype.map=function(a){for(var b=new H,c=this.Da.Aa;null!==c;)b.add(a(c.key)),c=c.Ua;return b};
Sa.prototype.filter=function(a){for(var b=new H(this.Da.ti),c=this.Da.Aa;null!==c;){var d=c.key;a(d)&&b.add(d);c=c.Ua}return b};Sa.prototype.concat=function(a){return this.wF().Yc(a)};Sa.prototype.copy=function(){return new Sa(this.Da)};Sa.prototype.toSet=Sa.prototype.wF=function(){var a=new H(this.Da.ti),b=this.Da.jd,c;for(c in b)a.add(b[c].key);return a};Sa.prototype.toArray=Sa.prototype.ed=function(){var a=this.Da.jd,b=Array(this.Da.hd),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};
Sa.prototype.toList=function(){var a=new G(this.ia),b=this.Da.jd,c;for(c in b)a.add(b[c].key);return a};v.u(Sa,{count:"count"},function(){return this.Da.hd});v.u(Sa,{size:"size"},function(){return this.Da.hd});v.u(Sa,{i:"iterator"},function(){return 0>=this.Da.hd?Ia:new Ra(this.Da)});function Ua(a){this.Da=a;this.reset()}v.Jd(Ua,{key:!0,value:!0});v.u(Ua,{i:"iterator"},function(){return this});Ua.prototype.reset=Ua.prototype.reset=function(){var a=this.Da;a.rj=null;this.cb=a.F;this.bb=null};
Ua.prototype.next=Ua.prototype.hasNext=Ua.prototype.next=function(){var a=this.Da;if(a.F!==this.cb){if(null===this.key)return!1;v.Ka(a)}var b=this.bb,b=null===b?a.Aa:b.Ua;if(null!==b)return this.bb=b,this.value=b.value,this.key=b.key,!0;this.xf();return!1};Ua.prototype.first=Ua.prototype.first=function(){var a=this.Da;this.cb=a.F;a=a.Aa;if(null!==a){this.bb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Ua.prototype.any=function(a){var b=this.Da;b.rj=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(a(d.value))return!0;b.F!==c&&v.Ka(b);d=d.Ua}return!1};Ua.prototype.all=function(a){var b=this.Da;b.rj=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(!a(d.value))return!1;b.F!==c&&v.Ka(b);d=d.Ua}return!0};Ua.prototype.each=function(a){var b=this.Da;b.rj=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;)a(d.value),b.F!==c&&v.Ka(b),d=d.Ua;return this};
Ua.prototype.map=function(a){var b=this.Da;b.rj=null;var c=b.F;this.bb=null;for(var d=new G,e=b.Aa;null!==e;)d.add(a(e.value)),b.F!==c&&v.Ka(b),e=e.Ua;return d.i};Ua.prototype.filter=function(a){var b=this.Da;b.rj=null;var c=b.F;this.bb=null;for(var d=new G(b.ti),e=b.Aa;null!==e;){var f=e.value;a(f)&&d.add(f);b.F!==c&&v.Ka(b);e=e.Ua}return d.i};Ua.prototype.concat=function(a){this.Da.rj=null;return new Ka(this,a.i)};v.u(Ua,{count:"count"},function(){return this.Da.hd});
Ua.prototype.xf=function(){this.value=this.key=null;this.cb=-1;this.Da.rj=this};Ua.prototype.toString=function(){return null!==this.bb?"MapValueSetIterator@"+this.bb.value:"MapValueSetIterator"};function Qa(a,b){this.key=a;this.value=b;this.lo=this.Ua=null}v.Jd(Qa,{key:!0,value:!0});Qa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Va(a){this.Da=a;this.reset()}v.Jd(Va,{key:!0,value:!0});v.u(Va,{i:"iterator"},function(){return this});
Va.prototype.reset=Va.prototype.reset=function(){var a=this.Da;a.Wb=null;this.cb=a.F;this.bb=null};Va.prototype.next=Va.prototype.hasNext=Va.prototype.next=function(){var a=this.Da;if(a.F!==this.cb){if(null===this.key)return!1;v.Ka(a)}var b=this.bb,b=null===b?a.Aa:b.Ua;if(null!==b)return this.bb=b,this.key=b.key,this.value=b.value,!0;this.xf();return!1};
Va.prototype.first=Va.prototype.first=function(){var a=this.Da;this.cb=a.F;a=a.Aa;return null!==a?(this.bb=a,this.key=a.key,this.value=a.value,a):null};Va.prototype.any=function(a){var b=this.Da;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(a(d))return!0;b.F!==c&&v.Ka(b);d=d.Ua}return!1};Va.prototype.all=function(a){var b=this.Da;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;){if(!a(d))return!1;b.F!==c&&v.Ka(b);d=d.Ua}return!0};
Va.prototype.each=function(a){var b=this.Da;b.Wb=null;var c=b.F;this.bb=null;for(var d=b.Aa;null!==d;)a(d),b.F!==c&&v.Ka(b),d=d.Ua;return this};Va.prototype.map=function(a){var b=this.Da;b.Wb=null;var c=b.F;this.bb=null;for(var d=new G,e=b.Aa;null!==e;)d.add(a(e)),b.F!==c&&v.Ka(b),e=e.Ua;return d.i};Va.prototype.filter=function(a){var b=this.Da;b.Wb=null;var c=b.F;this.bb=null;for(var d=new G,e=b.Aa;null!==e;)a(e)&&d.add(e),b.F!==c&&v.Ka(b),e=e.Ua;return d.i};
Va.prototype.concat=function(a){this.Da.Wb=null;return new Ka(this,a.i)};v.u(Va,{count:"count"},function(){return this.Da.hd});Va.prototype.xf=function(){this.value=this.key=null;this.cb=-1;this.Da.Wb=this};Va.prototype.toString=function(){return null!==this.bb?"MapIterator@"+this.bb:"MapIterator"};
function ma(a,b){v.cc(this);this.Ea=!1;void 0===a||null===a?this.ti=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.ti=a:v.ua(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.ti=a===Object?"object":a===String?"string":a===Number?"number":a:v.ua(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.zs=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===
b||"function"===b?this.zs=b:v.ua(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.zs=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:v.ua(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.jd={};this.hd=0;this.rj=this.Wb=null;this.F=0;this.Eh=this.Aa=null}v.ga("Map",ma);
ma.prototype.wc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};ma.prototype.freeze=ma.prototype.freeze=function(){this.Ea=!0;return this};ma.prototype.thaw=ma.prototype.Na=function(){this.Ea=!1;return this};ma.prototype.toString=function(){return"Map("+v.getTypeName(this.ti)+","+v.getTypeName(this.zs)+")#"+v.cd(this)};
ma.prototype.add=ma.prototype.set=ma.prototype.add=function(a,b){v.I(this,a);var c=a;v.Wa(a)&&(c=v.ht(a));var d=this.jd[c];if(void 0===d)return this.hd++,d=new Qa(a,b),this.jd[c]=d,c=this.Eh,null===c?this.Aa=d:(d.lo=c,c.Ua=d),this.Eh=d,this.wc(),!0;d.value=b;return!1};ma.prototype.addAll=ma.prototype.Yc=function(a){if(null===a)return this;if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Pa(a,c);this.add(d.key,d.value)}else for(a=a.i;a.next();)this.add(a.key,a.value);return this};
ma.prototype.first=ma.prototype.first=function(){return this.Aa};ma.prototype.any=function(a){for(var b=this.F,c=this.Aa;null!==c;){if(a(c))return!0;this.F!==b&&v.Ka(this);c=c.Ua}return!1};ma.prototype.all=function(a){for(var b=this.F,c=this.Aa;null!==c;){if(!a(c))return!1;this.F!==b&&v.Ka(this);c=c.Ua}return!0};ma.prototype.each=function(a){for(var b=this.F,c=this.Aa;null!==c;)a(c),this.F!==b&&v.Ka(this),c=c.Ua;return this};
ma.prototype.map=function(a){for(var b=new ma(this.ti),c=this.F,d=this.Aa;null!==d;)b.add(d.key,a(d)),this.F!==c&&v.Ka(this),d=d.Ua;return b};ma.prototype.filter=function(a){for(var b=new ma(this.ti,this.zs),c=this.F,d=this.Aa;null!==d;)a(d)&&b.add(d.key,d.value),this.F!==c&&v.Ka(this),d=d.Ua;return b};ma.prototype.concat=function(a){return this.copy().Yc(a)};ma.prototype.contains=ma.prototype.has=ma.prototype.contains=function(a){var b=a;return v.Wa(a)&&(b=v.cd(a),void 0===b)?!1:void 0!==this.jd[b]};
ma.prototype.getValue=ma.prototype.get=ma.prototype.la=function(a){var b=a;if(v.Wa(a)&&(b=v.cd(a),void 0===b))return null;a=this.jd[b];return void 0===a?null:a.value};
ma.prototype.remove=ma.prototype["delete"]=ma.prototype.remove=function(a){if(null===a)return!1;v.I(this,a);var b=a;if(v.Wa(a)&&(b=v.cd(a),void 0===b))return!1;a=this.jd[b];if(void 0===a)return!1;var c=a.Ua,d=a.lo;null!==c&&(c.lo=d);null!==d&&(d.Ua=c);this.Aa===a&&(this.Aa=c);this.Eh===a&&(this.Eh=d);delete this.jd[b];this.hd--;this.wc();return!0};ma.prototype.clear=ma.prototype.clear=function(){v.I(this);this.jd={};this.hd=0;this.Eh=this.Aa=null;this.wc()};
ma.prototype.copy=function(){var a=new ma(this.ti,this.zs),b=this.jd,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ma.prototype.toArray=ma.prototype.ed=function(){var a=this.jd,b=Array(this.hd),c=0,d;for(d in a){var e=a[d];b[c]=new Qa(e.key,e.value);c++}return b};ma.prototype.toKeySet=ma.prototype.Yi=function(){return new Sa(this)};v.u(ma,{count:"count"},function(){return this.hd});v.u(ma,{size:"size"},function(){return this.hd});
v.u(ma,{i:"iterator"},function(){if(0>=this.count)return Ia;var a=this.Wb;return null!==a?(a.reset(),a):new Va(this)});v.u(ma,{zK:"iteratorKeys"},function(){return 0>=this.count?Ia:new Ra(this)});v.u(ma,{zE:"iteratorValues"},function(){if(0>=this.count)return Ia;var a=this.rj;return null!==a?(a.reset(),a):new Ua(this)});function w(a,b){void 0===a?this.y=this.x=0:(this.x=a,this.y=b);this.Ea=!1}v.ga("Point",w);v.Uh(w);v.Jd(w,{x:!0,y:!0});w.prototype.assign=function(a){this.x=a.x;this.y=a.y};
w.prototype.setTo=w.prototype.m=function(a,b){this.x=a;this.y=b;return this};w.prototype.set=w.prototype.set=function(a){this.I();this.x=a.x;this.y=a.y;return this};w.prototype.copy=function(){var a=new w;a.x=this.x;a.y=this.y;return a};g=w.prototype;g.Ma=function(){this.Ea=!0;Object.freeze(this);return this};g.aa=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.Ea=!0;return this};
g.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;return this};g.I=function(a){if(this.Ea){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};w.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new w(c,e)}return new w};
w.stringify=function(a){return a instanceof w?a.x.toString()+" "+a.y.toString():a.toString()};w.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};w.prototype.equals=w.prototype.L=function(a){return a instanceof w?this.x===a.x&&this.y===a.y:!1};w.prototype.equalTo=w.prototype.Bw=function(a,b){return this.x===a&&this.y===b};w.prototype.equalsApprox=w.prototype.Ie=function(a){return K.D(this.x,a.x)&&K.D(this.y,a.y)};
w.prototype.add=w.prototype.add=function(a){this.I();this.x+=a.x;this.y+=a.y;return this};w.prototype.subtract=w.prototype.Yt=function(a){this.I();this.x-=a.x;this.y-=a.y;return this};w.prototype.offset=w.prototype.offset=function(a,b){this.I();this.x+=a;this.y+=b;return this};
w.prototype.rotate=w.prototype.rotate=function(a){this.I();if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=0,e=0;360<=a?a-=360:0>a&&(a+=360);90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.x=d*b-e*c;this.y=e*b+d*c;return this};w.prototype.scale=w.prototype.scale=function(a,b){this.x*=a;this.y*=b;return this};w.prototype.distanceSquaredPoint=w.prototype.Tj=function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a};
w.prototype.distanceSquared=w.prototype.Po=function(a,b){var c=a-this.x,d=b-this.y;return c*c+d*d};w.prototype.normalize=w.prototype.normalize=function(){this.I();var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};w.prototype.directionPoint=w.prototype.Wg=function(a){return Wa(a.x-this.x,a.y-this.y)};w.prototype.direction=w.prototype.direction=function(a,b){return Wa(a-this.x,b-this.y)};
function Wa(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}w.prototype.projectOntoLineSegment=function(a,b,c,d){K.Ym(a,b,c,d,this.x,this.y,this);return this};w.prototype.projectOntoLineSegmentPoint=function(a,b){K.Ym(a.x,a.y,b.x,b.y,this.x,this.y,this);return this};w.prototype.snapToGrid=function(a,b,c,d){K.Xs(this.x,this.y,a,b,c,d,this);return this};
w.prototype.snapToGridPoint=function(a,b){K.Xs(this.x,this.y,a.x,a.y,b.width,b.height,this);return this};w.prototype.setRectSpot=w.prototype.St=function(a,b){this.I();this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};w.prototype.setSpot=w.prototype.Ut=function(a,b,c,d,e){this.I();this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};w.prototype.transform=function(a){a.xb(this);return this};function Xa(a,b){b.Xh(a);return a}var Ya;
w.distanceLineSegmentSquared=Ya=function(a,b,c,d,e,f){var h=e-c,k=f-d,l=h*h+k*k;c-=a;d-=b;var m=-c*h-d*k;if(0>=m||m>=l)return h=e-a,k=f-b,Math.min(c*c+d*d,h*h+k*k);a=h*d-k*c;return a*a/l};var Za;w.distanceSquared=Za=function(a,b,c,d){a=c-a;b=d-b;return a*a+b*b};var $a;w.direction=$a=function(a,b,c,d){a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};
w.prototype.isReal=w.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)};function ia(a,b){void 0===a?this.height=this.width=0:(this.width=a,this.height=b);this.Ea=!1}v.ga("Size",ia);v.Uh(ia);v.Jd(ia,{width:!0,height:!0});ia.prototype.assign=function(a){this.width=a.width;this.height=a.height};ia.prototype.setTo=ia.prototype.m=function(a,b){this.width=a;this.height=b;return this};ia.prototype.set=ia.prototype.set=function(a){this.I();this.width=a.width;this.height=a.height;return this};
ia.prototype.copy=function(){var a=new ia;a.width=this.width;a.height=this.height;return a};g=ia.prototype;g.Ma=function(){this.Ea=!0;Object.freeze(this);return this};g.aa=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.Ea=!0;return this};g.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;return this};
g.I=function(a){if(this.Ea){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};ia.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new ia(c,e)}return new ia};ia.stringify=function(a){return a instanceof ia?a.width.toString()+" "+a.height.toString():a.toString()};
ia.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};ia.prototype.equals=ia.prototype.L=function(a){return a instanceof ia?this.width===a.width&&this.height===a.height:!1};ia.prototype.equalTo=ia.prototype.Bw=function(a,b){return this.width===a&&this.height===b};ia.prototype.equalsApprox=ia.prototype.Ie=function(a){return K.D(this.width,a.width)&&K.D(this.height,a.height)};ia.prototype.isReal=ia.prototype.H=function(){return isFinite(this.width)&&isFinite(this.height)};
function z(a,b,c,d){void 0===a?this.height=this.width=this.y=this.x=0:a instanceof w?b instanceof w?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof ia?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):v.k("Incorrect arguments supplied to Rect constructor"):(this.x=a,this.y=b,this.width=c,this.height=d);this.Ea=!1}v.ga("Rect",z);v.Uh(z);v.Jd(z,{x:!0,y:!0,width:!0,height:!0});
z.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};function eb(a,b,c){a.width=b;a.height=c}z.prototype.setTo=z.prototype.m=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;return this};z.prototype.set=z.prototype.set=function(a){this.I();this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};z.prototype.setPoint=z.prototype.vf=function(a){this.I();this.x=a.x;this.y=a.y;return this};
z.prototype.setSize=function(a){this.I();this.width=a.width;this.height=a.height;return this};z.prototype.copy=function(){var a=new z;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};g=z.prototype;g.Ma=function(){this.Ea=!0;Object.freeze(this);return this};g.aa=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.Ea=!0;return this};g.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;return this};
g.I=function(a){if(this.Ea){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};z.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var h=0;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return new z(c,e,f,h)}return new z};
z.stringify=function(a){return a instanceof z?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};z.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};z.prototype.equals=z.prototype.L=function(a){return a instanceof z?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:!1};z.prototype.equalTo=z.prototype.Bw=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};
z.prototype.equalsApprox=z.prototype.Ie=function(a){return K.D(this.x,a.x)&&K.D(this.y,a.y)&&K.D(this.width,a.width)&&K.D(this.height,a.height)};z.prototype.containsPoint=z.prototype.Ca=function(a){return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};z.prototype.containsRect=z.prototype.Sj=function(a){return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
z.prototype.contains=z.prototype.contains=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};z.prototype.reset=function(){this.I();this.height=this.width=this.y=this.x=0};z.prototype.offset=z.prototype.offset=function(a,b){this.I();this.x+=a;this.y+=b;return this};z.prototype.inflate=z.prototype.Kf=function(a,b){return jb(this,b,a,b,a)};
z.prototype.addMargin=z.prototype.hw=function(a){return jb(this,a.top,a.right,a.bottom,a.left)};z.prototype.subtractMargin=z.prototype.cJ=function(a){return jb(this,-a.top,-a.right,-a.bottom,-a.left)};z.prototype.grow=function(a,b,c,d){return jb(this,a,b,c,d)};function jb(a,b,c,d,e){a.I();var f=a.width;c+e<=-f?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}z.prototype.intersectRect=function(a){return pb(this,a.x,a.y,a.width,a.height)};
z.prototype.intersect=function(a,b,c,d){return pb(this,a,b,c,d)};function pb(a,b,c,d,e){a.I();var f=Math.max(a.x,b),h=Math.max(a.y,c);b=Math.min(a.x+a.width,b+d);c=Math.min(a.y+a.height,c+e);a.x=f;a.y=h;a.width=Math.max(0,b-f);a.height=Math.max(0,c-h);return a}z.prototype.intersectsRect=z.prototype.tg=function(a){return this.mE(a.x,a.y,a.width,a.height)};
z.prototype.intersects=z.prototype.mE=function(a,b,c,d){var e=this.width,f=this.x;if(Infinity!==e&&Infinity!==c&&(e+=f,c+=a,isNaN(c)||isNaN(e)||f>c||a>e))return!1;a=this.height;c=this.y;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};function qb(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;if(e>d+f||f>c+e)return!1;c=a.height;d=b.height+10+10;e=a.y;f=b.y-10;return e>d+f||f>c+e?!1:!0}z.prototype.unionPoint=z.prototype.Zi=function(a){return rb(this,a.x,a.y,0,0)};
z.prototype.unionRect=z.prototype.bi=function(a){return rb(this,a.x,a.y,a.width,a.height)};z.prototype.union=z.prototype.FF=function(a,b,c,d){this.I();void 0===c&&(c=0);void 0===d&&(d=0);return rb(this,a,b,c,d)};function rb(a,b,c,d,e){var f=Math.min(a.x,b),h=Math.min(a.y,c);b=Math.max(a.x+a.width,b+d);c=Math.max(a.y+a.height,c+e);a.x=f;a.y=h;a.width=b-f;a.height=c-h;return a}
z.prototype.setSpot=z.prototype.Ut=function(a,b,c){this.I();this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var sb;z.contains=sb=function(a,b,c,d,e,f,h,k){void 0===h&&(h=0);void 0===k&&(k=0);return a<=e&&e+h<=a+c&&b<=f&&f+k<=b+d};z.intersects=function(a,b,c,d,e,f,h,k){c+=a;h+=e;if(a>h||e>c)return!1;a=d+b;k+=f;return b>k||f>a?!1:!0};v.defineProperty(z,{left:"left"},function(){return this.x},function(a){this.I(a);this.x=a});
v.defineProperty(z,{top:"top"},function(){return this.y},function(a){this.I(a);this.y=a});v.defineProperty(z,{right:"right"},function(){return this.x+this.width},function(a){this.I(a);this.x+=a-(this.x+this.width)});v.defineProperty(z,{bottom:"bottom"},function(){return this.y+this.height},function(a){this.I(a);this.y+=a-(this.y+this.height)});v.defineProperty(z,{position:"position"},function(){return new w(this.x,this.y)},function(a){this.I(a);this.x=a.x;this.y=a.y});
v.defineProperty(z,{size:"size"},function(){return new ia(this.width,this.height)},function(a){this.I(a);this.width=a.width;this.height=a.height});v.defineProperty(z,{Zk:"center"},function(){return new w(this.x+this.width/2,this.y+this.height/2)},function(a){this.I(a);this.x=a.x-this.width/2;this.y=a.y-this.height/2});v.defineProperty(z,{oa:"centerX"},function(){return this.x+this.width/2},function(a){this.I(a);this.x=a-this.width/2});
v.defineProperty(z,{va:"centerY"},function(){return this.y+this.height/2},function(a){this.I(a);this.y=a-this.height/2});z.prototype.isReal=z.prototype.H=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};z.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function tb(a,b,c,d){void 0===a?this.left=this.bottom=this.right=this.top=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):v.k("Invalid arguments to Margin constructor");this.Ea=!1}v.ga("Margin",tb);v.Uh(tb);v.Jd(tb,{top:!0,right:!0,bottom:!0,left:!0});tb.prototype.assign=function(a){this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
tb.prototype.setTo=tb.prototype.m=function(a,b,c,d){this.I();this.top=a;this.right=b;this.bottom=c;this.left=d;return this};tb.prototype.set=tb.prototype.set=function(a){this.I();this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};tb.prototype.copy=function(){var a=new tb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};g=tb.prototype;g.Ma=function(){this.Ea=!0;Object.freeze(this);return this};
g.aa=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.Ea=!0;return this};g.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;return this};g.I=function(a){if(this.Ea){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};
tb.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new tb;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new tb(c);for(var f=NaN;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));if(isNaN(f))return new tb(c,e);for(var h=NaN;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return isNaN(h)?new tb(c,e):new tb(c,e,f,h)}return new tb};
tb.stringify=function(a){return a instanceof tb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};tb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};tb.prototype.equals=tb.prototype.L=function(a){return a instanceof tb?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:!1};
tb.prototype.equalTo=tb.prototype.Bw=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};tb.prototype.equalsApprox=tb.prototype.Ie=function(a){return K.D(this.top,a.top)&&K.D(this.right,a.right)&&K.D(this.bottom,a.bottom)&&K.D(this.left,a.left)};tb.prototype.isReal=tb.prototype.H=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ja(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}v.Uh(ja);
v.Jd(ja,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});ja.prototype.set=ja.prototype.set=function(a){this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};ja.prototype.copy=function(){var a=new ja;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ja.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
ja.prototype.equals=ja.prototype.L=function(a){return a instanceof ja?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};ja.prototype.isIdentity=ja.prototype.nt=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};ja.prototype.reset=ja.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0;return this};
ja.prototype.multiply=ja.prototype.multiply=function(a){var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,f=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ja.prototype.multiplyInverted=ja.prototype.JE=function(a){var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,f=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),k=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*f;e=this.m12*e+this.m22*f;f=this.m11*h+this.m21*k+this.dx;h=this.m12*h+this.m22*k+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=f;this.dy=h;return this};
ja.prototype.invert=ja.prototype.Pz=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ja.prototype.rotate=ja.prototype.rotate=function(a,b,c){360<=a?a-=360:0>a&&(a+=360);if(0===a)return this;this.translate(b,c);var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var f=this.m11*-e+this.m21*d,h=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=f;this.m22=h;this.translate(-b,-c);return this};
ja.prototype.translate=ja.prototype.translate=function(a,b){this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this};ja.prototype.scale=ja.prototype.scale=function(a,b){void 0===b&&(b=a);this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b;return this};ja.prototype.transformPoint=ja.prototype.xb=function(a){var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};
ja.prototype.invertedTransformPoint=ja.prototype.Xh=function(a){var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),f=a.x,h=a.y;a.x=f*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=f*c+h*d+e;return a};
ja.prototype.transformRect=ja.prototype.DF=function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=this.m11,h=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy,p=b*f+c*k+m,q=b*h+c*l+n,r=d*f+c*k+m,c=d*h+c*l+n,s=b*f+e*k+m,b=b*h+e*l+n,f=d*f+e*k+m,d=d*h+e*l+n,e=p,h=q,p=Math.min(p,r),e=Math.max(e,r),h=Math.min(h,c),q=Math.max(q,c),p=Math.min(p,s),e=Math.max(e,s),h=Math.min(h,b),q=Math.max(q,b),p=Math.min(p,f),e=Math.max(e,f),h=Math.min(h,d),q=Math.max(q,d);a.x=p;a.y=h;a.width=e-p;a.height=q-h;return a};
function L(a,b,c,d){void 0===a?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.Ea=!1}v.ga("Spot",L);v.Uh(L);v.Jd(L,{x:!0,y:!0,offsetX:!0,offsetY:!0});L.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};L.prototype.setTo=L.prototype.m=function(a,b,c,d){this.I();this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};
L.prototype.set=L.prototype.set=function(a){this.I();this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};L.prototype.copy=function(){var a=new L;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};g=L.prototype;g.Ma=function(){this.Ea=!0;Object.freeze(this);return this};g.aa=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.Ea=!0;return this};
g.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;return this};g.I=function(a){if(this.Ea){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};function ub(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}var wb;
L.parse=wb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return xb;if("TopLeft"===a)return zb;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return Ab;if("TopRight"===a)return Gb;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return Jb;if("Center"===a)return Kb;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return Lb;if("BottomLeft"===a)return Rb;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return Ub;if("BottomRight"===a)return Vb;if("TopSide"===a)return Wb;if("LeftSide"===
a)return Xb;if("RightSide"===a)return Yb;if("BottomSide"===a)return Zb;if("TopBottomSides"===a)return $b;if("LeftRightSides"===a)return ac;if("TopLeftSides"===a)return bc;if("TopRightSides"===a)return ic;if("BottomLeftSides"===a)return lc;if("BottomRightSides"===a)return mc;if("NotTopSide"===a)return nc;if("NotLeftSide"===a)return oc;if("NotRightSide"===a)return pc;if("NotBottomSide"===a)return wc;if("AllSides"===a)return xc;if("Default"===a)return yc;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(f=parseFloat(d));for(var h=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(h=parseFloat(d));return new L(c,e,f,h)}return new L};L.stringify=function(a){return a instanceof L?a.yd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
L.prototype.toString=function(){return this.yd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(xb)?"None":this.L(zb)?"TopLeft":this.L(Ab)?"Top":this.L(Gb)?"TopRight":this.L(Jb)?"Left":this.L(Kb)?"Center":this.L(Lb)?"Right":this.L(Rb)?"BottomLeft":this.L(Ub)?"Bottom":this.L(Vb)?"BottomRight":this.L(Wb)?"TopSide":this.L(Xb)?"LeftSide":this.L(Yb)?"RightSide":this.L(Zb)?"BottomSide":this.L($b)?"TopBottomSides":this.L(ac)?
"LeftRightSides":this.L(bc)?"TopLeftSides":this.L(ic)?"TopRightSides":this.L(lc)?"BottomLeftSides":this.L(mc)?"BottomRightSides":this.L(nc)?"NotTopSide":this.L(oc)?"NotLeftSide":this.L(pc)?"NotRightSide":this.L(wc)?"NotBottomSide":this.L(xc)?"AllSides":this.L(yc)?"Default":"None"};L.prototype.equals=L.prototype.L=function(a){return a instanceof L?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:!1};
L.prototype.opposite=function(){return new L(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)};L.prototype.includesSide=function(a){if(!this.ap()||!a.ap())return!1;a=a.offsetY;return(this.offsetY&a)===a};L.prototype.isSpot=L.prototype.yd=function(){return!isNaN(this.x)&&!isNaN(this.y)};L.prototype.isNoSpot=L.prototype.me=function(){return isNaN(this.x)||isNaN(this.y)};L.prototype.isSide=L.prototype.ap=function(){return this.me()&&1===this.offsetX&&0!==this.offsetY};
L.prototype.isDefault=L.prototype.Oc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var xb;L.None=xb=ub(new L(0,0,0,0),0).Ma();var yc;L.Default=yc=ub(new L(0,0,-1,0),-1).Ma();var zb;L.TopLeft=zb=(new L(0,0,0,0)).Ma();var Ab;L.TopCenter=Ab=(new L(.5,0,0,0)).Ma();var Gb;L.TopRight=Gb=(new L(1,0,0,0)).Ma();var Jb;L.LeftCenter=Jb=(new L(0,.5,0,0)).Ma();var Kb;L.Center=Kb=(new L(.5,.5,0,0)).Ma();var Lb;L.RightCenter=Lb=(new L(1,.5,0,0)).Ma();var Rb;
L.BottomLeft=Rb=(new L(0,1,0,0)).Ma();var Ub;L.BottomCenter=Ub=(new L(.5,1,0,0)).Ma();var Vb;L.BottomRight=Vb=(new L(1,1,0,0)).Ma();var zc;L.MiddleTop=zc=Ab;var Ac;L.MiddleLeft=Ac=Jb;var Bc;L.MiddleRight=Bc=Lb;var Cc;L.MiddleBottom=Cc=Ub;L.Top=Ab;L.Left=Jb;L.Right=Lb;L.Bottom=Ub;var Wb;L.TopSide=Wb=ub(new L(0,0,1,v.fd),1).Ma();var Xb;L.LeftSide=Xb=ub(new L(0,0,1,v.Gc),1).Ma();var Yb;L.RightSide=Yb=ub(new L(0,0,1,v.Tc),1).Ma();var Zb;L.BottomSide=Zb=ub(new L(0,0,1,v.Sc),1).Ma();var $b;
L.TopBottomSides=$b=ub(new L(0,0,1,v.fd|v.Sc),1).Ma();var ac;L.LeftRightSides=ac=ub(new L(0,0,1,v.Gc|v.Tc),1).Ma();var bc;L.TopLeftSides=bc=ub(new L(0,0,1,v.fd|v.Gc),1).Ma();var ic;L.TopRightSides=ic=ub(new L(0,0,1,v.fd|v.Tc),1).Ma();var lc;L.BottomLeftSides=lc=ub(new L(0,0,1,v.Sc|v.Gc),1).Ma();var mc;L.BottomRightSides=mc=ub(new L(0,0,1,v.Sc|v.Tc),1).Ma();var nc;L.NotTopSide=nc=ub(new L(0,0,1,v.Gc|v.Tc|v.Sc),1).Ma();var oc;L.NotLeftSide=oc=ub(new L(0,0,1,v.fd|v.Tc|v.Sc),1).Ma();var pc;
L.NotRightSide=pc=ub(new L(0,0,1,v.fd|v.Gc|v.Sc),1).Ma();var wc;L.NotBottomSide=wc=ub(new L(0,0,1,v.fd|v.Gc|v.Tc),1).Ma();var xc;L.AllSides=xc=ub(new L(0,0,1,v.fd|v.Gc|v.Tc|v.Sc),1).Ma();function Dc(){this.$e=[1,0,0,1,0,0]}Dc.prototype.copy=function(){var a=new Dc;a.$e[0]=this.$e[0];a.$e[1]=this.$e[1];a.$e[2]=this.$e[2];a.$e[3]=this.$e[3];a.$e[4]=this.$e[4];a.$e[5]=this.$e[5];return a};function Hc(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.ED=[]}
Hc.prototype.addColorStop=function(a,b){this.ED.push({offset:a,color:b})};
function Ic(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.Xw=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.document=b||document;this.VD=c;this.Uw=null;this.path=[];this.Qi=new Dc;this.stack=[];this.of=[];this.zw=a;this.uI="http://www.w3.org/2000/svg";this.width=this.zw.width;this.height=
this.zw.height;this.Cl=Jc(this,"svg",{width:this.width+"px",height:this.height+"px",sL:"0 0 "+this.zw.width+" "+this.zw.height});this.Cl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.Cl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");Kc(this,1,0,0,1,0,0);a=v.Il++;b=Jc(this,"clipPath",{id:"mainClip"+a});b.appendChild(Jc(this,"rect",{x:0,y:0,width:this.width,height:this.height}));this.Cl.appendChild(b);this.of[0].setAttributeNS(null,
"clip-path","url(#mainClip"+a+")")}g=Ic.prototype;g.arc=function(a,b,c,d,e,f){Sc(this,a,b,c,d,e,f)};g.beginPath=function(){this.path=[]};g.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])};g.clearRect=function(){};g.clip=function(){Tc(this,"clipPath",this.path,new Dc)};g.closePath=function(){this.path.push(["z"])};g.createLinearGradient=function(a,b,c,d){var e=new Hc("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};g.createPattern=function(){};
g.createRadialGradient=function(a,b,c,d,e,f){var h=new Hc("radial");h.x1=a;h.y1=b;h.r1=c;h.x2=d;h.y2=e;h.r2=f;return h};
g.drawImage=function(a,b,c,d,e,f,h,k,l){a=[b,c,d,e,f,h,k,l,a];b=this.Qi;e=a[8];c="";e instanceof HTMLCanvasElement&&(c=e.toDataURL());e instanceof HTMLImageElement&&(c=e.src);c={x:0,y:0,width:a[6],height:a[7],href:c};d="";f=a[6]/a[2];h=a[7]/a[3];if(0!==a[4]||0!==a[5])d+=" translate("+a[4]+", "+a[5]+")";if(1!==f||1!==h)d+=" scale("+f+", "+h+")";if(0!==a[0]||0!==a[1])d+=" translate("+-a[0]+", "+-a[1]+")";if(0!==a[0]||0!==a[1]||a[2]!==e.naturalWidth||a[3]!==e.naturalHeight)e="CLIP"+v.Il++,f=Jc(this,
"clipPath",{id:e}),f.appendChild(Jc(this,"rect",{x:a[0],y:a[1],width:a[2],height:a[3]})),this.Cl.appendChild(f),c["clip-path"]="url(#"+e+")";Uc(this,"image",c,b,d);this.addElement("image",c)};g.fill=function(){Tc(this,"fill",this.path,this.Qi)};g.fillRect=function(a,b,c,d){Vc(this,"fill",[a,b,c,d],this.Qi)};
g.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};Uc(this,"fill",b,this.Qi);this.addElement("text",b,a[0])};g.lineTo=function(a,b){this.path.push(["L",a,b])};g.moveTo=function(a,b){this.path.push(["M",a,b])};g.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};g.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
g.restore=function(){this.Qi=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.Xw=a.Xw;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
g.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Xw:this.Xw,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.Qi.copy())};
g.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||Kc(this,a,b,c,d,e,f)};g.scale=function(){};g.stroke=function(){Tc(this,"stroke",this.path,this.Qi)};g.strokeRect=function(a,b,c,d){Vc(this,"stroke",[a,b,c,d],this.Qi)};function Jc(a,b,c,d){a=a.document.createElementNS(a.uI,b);if(v.Wa(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}
g.addElement=function(a,b,c){a=Jc(this,a,b,c);0<this.of.length?this.of[this.of.length-1].appendChild(a):this.Cl.appendChild(a);return this.Uw=a};
function Uc(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"===b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof Hc?Wc(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"===b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof Hc?Wc(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.$e;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function Wc(a,b){var c="GRAD"+v.Il++,d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=Jc(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=Jc(a,"radialGradient",d);else throw Error("invalid gradient");for(var e=b.ED,f=e.length,h=[],k=0;k<f;k++){var l=e[k],m=l.color,l={offset:l.offset,"stop-color":m};/^rgba\(/.test(m)&&(m=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m),
l["stop-color"]="rgb("+m[1]+","+m[2]+","+m[3]+")",l["stop-opacity"]=m[4]);h.push(l)}h.sort(function(a,b){return a.offset>b.offset?1:-1});for(k=0;k<f;k++)d.appendChild(Jc(a,"stop",h[k]));a.Cl.appendChild(d);return"url(#"+c+")"}function Vc(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};Uc(a,b,c,d);a.addElement("rect",c)}
function Tc(a,b,c,d){for(var e=[],f=0;f<c.length;f++){var h=v.$k(c[f]),k=[h.shift()];if("A"===k[0])k.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)k.push(h.shift()+","+h.shift());e.push(k.join(" "))}c={d:e.join(" ")};Uc(a,b,c,d);"clipPath"===b?(b="CLIP"+v.Il++,d=Jc(a,"clipPath",{id:b}),d.appendChild(Jc(a,"path",c)),a.Cl.appendChild(d),0<a.of.length&&a.of[a.of.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function Sc(a,b,c,d,e,f,h){var k=Math.abs(e-f);if(e!==f){var l=b+d*Math.cos(f);f=c+d*Math.sin(f);k>=2*Math.PI?(Sc(a,b,c,d,e,e+Math.PI,h),Sc(a,b,c,d,e+Math.PI,e+2*Math.PI,h),a.path.push(["M",l,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),k=180*k/Math.PI,e=h?0:1,h=180<=k===!!h?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,k,h,e,l,f]))}}function Kc(a,b,c,d,e,f,h){var k=new Dc;k.$e=[b,c,d,e,f,h];b={};Uc(a,"g",b,k);k=a.addElement("g",b);a.of.push(k)}
g.Ya=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+v.Il++,b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,f,h;c=Jc(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",iL:this.shadowBlur/2});d=Jc(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=Jc(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});f=Jc(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});h=Jc(this,"feMerge",{});h.appendChild(Jc(this,"feMergeNode",{"in":"offsetBlur"}));h.appendChild(Jc(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);b.appendChild(h);0<this.of.length&&this.of[this.of.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};
function oa(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.Kd=c;c.getContext&&c.getContext("2d")||v.k("Browser does not support HTML Canvas Element");this.NG=c.getContext("2d");c.W=a;Object.seal(this)}g=oa.prototype;g.getContext=function(){return this.NG};g.toDataURL=function(a,b){return this.Kd.toDataURL(a,b)};g.getBoundingClientRect=function(){return this.Kd.getBoundingClientRect()};g.focus=function(){return this.Kd.focus()};
g.addEventListener=function(a,b,c){this.Kd.addEventListener(a,b,c)};g.removeEventListener=function(a,b,c){this.Kd.removeEventListener(a,b,c)};v.defineProperty(oa,{width:"width"},function(){return this.Kd.width},function(a){this.Kd.width=a});v.defineProperty(oa,{height:"height"},function(){return this.Kd.height},function(a){this.Kd.height=a});v.defineProperty(oa,{style:"style"},function(){return this.Kd.style},function(a){this.Kd.style=a});
var K={za:4*((Math.sqrt(2)-1)/3),fk:(new w(0,0)).Ma(),SF:(new z(0,0,0,0)).Ma(),Mp:(new tb(0,0,0,0)).Ma(),QF:(new tb(2,2,2,2)).Ma(),RF:(new ia(Infinity,Infinity)).Ma(),NF:(new w(-Infinity,-Infinity)).Ma(),MF:(new w(Infinity,Infinity)).Ma(),Np:(new ia(0,0)).Ma(),Ix:(new ia(1,1)).Ma(),Lp:(new ia(6,6)).Ma(),Fx:(new ia(8,8)).Ma(),OF:(new w(NaN,NaN)).Ma(),Jx:new pa,aj:new pa,YA:null,sqrt:function(a){if(0>=a)return 0;var b=K.YA;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);K.YA=b}return 1>a?
(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)},D:function(a,b){var c=a-b;return.5>c&&-.5<c},sb:function(a,b){var c=a-b;return 5E-8>c&&-5E-8<c},zd:function(a,b,c,d,e,f,h){0>=e&&(e=1E-6);var k=0,l=0,m=0,n=0;a<c?(l=a,k=c):(l=c,k=a);b<d?(n=b,m=d):(n=d,m=b);if(a===c)return n<=h&&h<=m&&a-e<=f&&f<=a+e;if(b===d)return l<=f&&f<=k&&b-e<=h&&h<=b+e;k+=e;l-=e;if(l<=f&&f<=k&&(m+=e,n-=e,n<=h&&h<=m))if(k-l>m-n)if(a-c>e||c-a>e){if(f=(d-b)/(c-a)*(f-a)+b,f-e<=h&&h<=f+e)return!0}else return!0;else if(b-
d>e||d-b>e){if(h=(c-a)/(d-b)*(h-b)+a,h-e<=f&&f<=h+e)return!0}else return!0;return!1},rw:function(a,b,c,d,e,f,h,k,l,m,n,p){if(K.zd(a,b,h,k,p,c,d)&&K.zd(a,b,h,k,p,e,f))return K.zd(a,b,h,k,p,m,n);var q=(a+c)/2,r=(b+d)/2,s=(c+e)/2,t=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(q+s)/2;c=(r+t)/2;var s=(s+e)/2,t=(t+f)/2,u=(d+s)/2,x=(c+t)/2;return K.rw(a,b,q,r,d,c,u,x,l,m,n,p)||K.rw(u,x,s,t,e,f,h,k,l,m,n,p)},DG:function(a,b,c,d,e,f,h,k,l){var m=(c+e)/2,n=(d+f)/2;l.x=(((a+c)/2+m)/2+(m+(e+h)/2)/2)/2;l.y=(((b+d)/2+n)/2+(n+
(f+k)/2)/2)/2;return l},CG:function(a,b,c,d,e,f,h,k){var l=(c+e)/2,m=(d+f)/2;return $a(((a+c)/2+l)/2,((b+d)/2+m)/2,(l+(e+h)/2)/2,(m+(f+k)/2)/2)},Fo:function(a,b,c,d,e,f,h,k,l,m){if(K.zd(a,b,h,k,l,c,d)&&K.zd(a,b,h,k,l,e,f))rb(m,a,b,0,0),rb(m,h,k,0,0);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2;K.Fo(a,b,n,p,d,c,s,t,l,m);K.Fo(s,t,q,r,e,f,h,k,l,m)}return m},De:function(a,b,c,d,e,f,h,k,l,m){if(K.zd(a,b,h,k,l,c,d)&&
K.zd(a,b,h,k,l,e,f))0===m.length&&(m.push(a),m.push(b)),m.push(h),m.push(k);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2;K.De(a,b,n,p,d,c,s,t,l,m);K.De(s,t,q,r,e,f,h,k,l,m)}return m},mA:function(a,b,c,d,e,f,h,k,l,m){if(K.zd(a,b,e,f,m,c,d))return K.zd(a,b,e,f,m,k,l);var n=(a+c)/2,p=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var q=(n+c)/2,r=(p+d)/2;return K.mA(a,b,n,p,q,r,h,k,l,m)||K.mA(q,r,c,d,e,f,h,k,l,m)},aL:function(a,b,c,
d,e,f,h){h.x=((a+c)/2+(c+e)/2)/2;h.y=((b+d)/2+(d+f)/2)/2;return h},lA:function(a,b,c,d,e,f,h,k){if(K.zd(a,b,e,f,h,c,d))rb(k,a,b,0,0),rb(k,e,f,0,0);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var n=(l+c)/2,p=(m+d)/2;K.lA(a,b,l,m,n,p,h,k);K.lA(n,p,c,d,e,f,h,k)}return k},rp:function(a,b,c,d,e,f,h,k){if(K.zd(a,b,e,f,h,c,d))0===k.length&&(k.push(a),k.push(b)),k.push(e),k.push(f);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var n=(l+c)/2,p=(m+d)/2;K.rp(a,b,l,m,n,p,h,k);K.rp(n,p,c,d,e,f,h,k)}return k},
Ms:function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){0>=q&&(q=1E-6);if(K.zd(a,b,h,k,q,c,d)&&K.zd(a,b,h,k,q,e,f)){var s=(a-h)*(m-p)-(b-k)*(l-n);if(0===s)return!1;q=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/s;s=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/s;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(h=l=0,b<k?(l=b,h=k):(l=k,h=b),s<l||s>h)return!1}else if(a<h?l=a:(l=h,h=a),q<l||q>h)return!1;r.x=q;r.y=s;return!0}var s=(a+c)/2,t=(b+d)/2;c=(c+e)/2;d=(d+f)/2;e=(e+h)/2;f=(f+k)/2;var u=(s+c)/2,x=(t+d)/2;c=(c+e)/2;d=(d+f)/2;var y=(u+c)/2,A=(x+d)/
2,B=(n-l)*(n-l)+(p-m)*(p-m),I=!1;K.Ms(a,b,s,t,u,x,y,A,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<B&&(B=b,I=!0));a=r.x;s=r.y;K.Ms(y,A,c,d,e,f,h,k,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<B?I=!0:(r.x=a,r.y=s));return I},Ns:function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=0;0>=q&&(q=1E-6);if(K.zd(a,b,h,k,q,c,d)&&K.zd(a,b,h,k,q,e,f)){q=(a-h)*(m-p)-(b-k)*(l-n);if(0===q)return r;var s=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/q,t=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/q;if(s>=n)return r;if((l>n?l-n:n-l)<
(m>p?m-p:p-m)){if(a=l=0,b<k?(l=b,a=k):(l=k,a=b),t<l||t>a)return r}else if(a<h?(l=a,a=h):l=h,s<l||s>a)return r;0<q?r++:0>q&&r--}else{var s=(a+c)/2,t=(b+d)/2,u=(c+e)/2,x=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(s+u)/2;c=(t+x)/2;var u=(u+e)/2,x=(x+f)/2,y=(d+u)/2,A=(c+x)/2,r=r+K.Ns(a,b,s,t,d,c,y,A,l,m,n,p,q),r=r+K.Ns(y,A,u,x,e,f,h,k,l,m,n,p,q)}return r},Ym:function(a,b,c,d,e,f,h){if(K.sb(a,c)){var k=0;c=0;b<d?(k=b,c=d):(k=d,c=b);d=f;if(d<k)return h.x=a,h.y=k,!1;if(d>c)return h.x=a,h.y=c,!1;h.x=a;h.y=d;return!0}if(K.sb(b,
d)){a<c?k=a:(k=c,c=a);d=e;if(d<k)return h.x=k,h.y=b,!1;if(d>c)return h.x=c,h.y=b,!1;h.x=d;h.y=b;return!0}k=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>k)return h.x=a,h.y=b,!1;if(1.000005<k)return h.x=c,h.y=d,!1;h.x=a+k*(c-a);h.y=b+k*(d-b);return!0},bh:function(a,b,c,d,e,f,h,k,l){if(K.D(a,c)&&K.D(b,d))return l.x=a,l.y=b,!1;if(K.sb(e,h)){if(K.sb(a,c))return K.Ym(a,b,c,d,e,f,l),!1;f=(d-b)/(c-a)*(e-a)+b;return K.Ym(a,b,c,d,e,f,l)}k=(k-f)/(h-e);if(K.sb(a,c)){f=k*(a-e)+f;c=h=0;b<d?(h=b,
c=d):(h=d,c=b);if(f<h)return l.x=a,l.y=h,!1;if(f>c)return l.x=a,l.y=c,!1;l.x=a;l.y=f;return!0}h=(d-b)/(c-a);if(K.sb(k,h))return K.Ym(a,b,c,d,e,f,l),!1;e=(h*a-k*e+f-b)/(h-k);if(K.sb(h,0)){a<c?h=a:(h=c,c=a);if(e<h)return l.x=h,l.y=b,!1;if(e>c)return l.x=c,l.y=b,!1;l.x=e;l.y=b;return!0}f=h*(e-a)+b;return K.Ym(a,b,c,d,e,f,l)},BK:function(a,b,c,d,e){return K.bh(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},kK:function(a,b,c,d,e,f,h,k,l,m){function n(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<p&&(p=e,l.x=c,l.y=d)}var p=
Infinity;n(l.x,l.y);var q=0,r=0,s=0,t=0;e<h?(q=e,r=h):(q=h,r=e);f<k?(s=e,t=h):(s=h,t=e);q=(r-q)/2+m;m=(t-s)/2+m;e=(e+h)/2;f=(f+k)/2;if(0===q||0===m)return l;if(.5>(c>a?c-a:a-c)){q=1-(c-e)*(c-e)/(q*q);if(0>q)return l;q=Math.sqrt(q);d=-m*q+f;n(c,m*q+f);n(c,d)}else{c=(d-b)/(c-a);d=1/(q*q)+c*c/(m*m);k=2*c*(b-c*a)/(m*m)-2*c*f/(m*m)-2*e/(q*q);q=k*k-4*d*(2*c*a*f/(m*m)-2*b*f/(m*m)+f*f/(m*m)+e*e/(q*q)-1+(b-c*a)*(b-c*a)/(m*m));if(0>q)return l;q=Math.sqrt(q);m=(-k+q)/(2*d);n(m,c*m-c*a+b);q=(-k-q)/(2*d);n(q,
c*q-c*a+b)}return l},ml:function(a,b,c,d,e,f,h,k,l){var m=1E21,n=a,p=b;if(K.bh(a,b,a,d,e,f,h,k,l)){var q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f);q<m&&(m=q,n=l.x,p=l.y)}K.bh(c,b,c,d,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));K.bh(a,b,c,b,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));K.bh(a,d,c,d,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));l.x=n;l.y=p;return 1E21>m},Mw:function(a,b,c){var d=b.x,e=b.y,f=c.x,h=c.y,k=a.left,l=a.right,
m=a.top,n=a.bottom;return d===f?(f=a=0,e<h?(a=e,f=h):(a=h,f=e),k<=d&&d<=l&&a<=n&&f>=m):e===h?(d<f?a=d:(a=f,f=d),m<=e&&e<=n&&a<=l&&f>=k):a.Ca(b)||a.Ca(c)||K.Lw(k,m,l,m,d,e,f,h)||K.Lw(l,m,l,n,d,e,f,h)||K.Lw(l,n,k,n,d,e,f,h)||K.Lw(k,n,k,m,d,e,f,h)?!0:!1},Lw:function(a,b,c,d,e,f,h,k){return 0>=K.vw(a,b,c,d,e,f)*K.vw(a,b,c,d,h,k)&&0>=K.vw(e,f,h,k,a,b)*K.vw(e,f,h,k,c,d)},vw:function(a,b,c,d,e,f){c-=a;d-=b;a=e-a;b=f-b;f=a*d-b*c;0===f&&(f=a*c+b*d,0<f&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0)));return 0>f?-1:0<f?1:0},
Et:function(a){0>a&&(a+=360);360<=a&&(a-=360);return a},MD:function(a,b,c,d,e,f){var h=Math.PI;f||(d*=h/180,e*=h/180);f=d<e?1:-1;var k=[],l=h/2,m=d;for(d=Math.min(2*h,Math.abs(e-d));1E-5<d;)e=m+f*Math.min(d,l),k.push(K.TG(c,m,e,a,b)),d-=Math.abs(e-m),m=e;return k},TG:function(a,b,c,d,e){var f=(c-b)/2,h=a*Math.cos(f),k=a*Math.sin(f),l=-k,m=h*h+l*l,n=m+h*h+l*k,m=4/3*(Math.sqrt(2*m*n)-n)/(h*k-l*h),k=h-m*l,h=l+m*h,l=-h,m=f+b,f=Math.cos(m),m=Math.sin(m);return[d+a*Math.cos(b),e+a*Math.sin(b),d+k*f-h*m,
e+k*m+h*f,d+k*f-l*m,e+k*m+l*f,d+a*Math.cos(c),e+a*Math.sin(c)]},Xs:function(a,b,c,d,e,f,h){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/f)*f+d;var k=c;c+e-a<e/2&&(k=c+e);a=d;d+f-b<f/2&&(a=d+f);h.m(k,a);return h},eE:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(0<e);return f},bH:function(a,b,c,d){var e=0>c,f=0>d,h=0,k=h=0;a<b?(h=1,k=0):(h=0,k=1);var l=0,m=0,n=0,l=0===h?a:b,m=0===h?c:d;if(0===h?e:f)m=-m;h=k;n=0===h?c:d;if(0===h?e:f)n=-n;return K.cH(l,0===h?a:b,m,
n,0,0)},cH:function(a,b,c,d,e,f){e=0;if(0<d)if(0<c){f=a*a;e=b*b;a*=c;var h=b*d,k=-e+h,l=-e+Math.sqrt(a*a+h*h);b=k;for(var m=0;9999999999>m;++m){b=.5*(k+l);if(b===k||b===l)break;var n=a/(b+f),p=h/(b+e),n=n*n+p*p-1;if(0<n)k=b;else if(0>n)l=b;else break}c=f*c/(b+f)-c;d=e*d/(b+e)-d;e=Math.sqrt(c*c+d*d)}else e=Math.abs(d-b);else d=a*a-b*b,e=a*c,e<d?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,e=Math.sqrt(c*c+f*f)):e=Math.abs(c-a);return e}};
function Xc(a){1<arguments.length&&v.k("Geometry constructor can take at most one optional argument, the Geometry type.");v.cc(this);this.Ea=!1;void 0===a&&(a=cd);this.ia=a;this.Db=this.yb=this.xc=this.tc=0;this.hj=new G(dd);this.Pu=this.hj.F;this.Au=(new z).freeze();this.Za=!0;this.Fi=zb;this.Gi=Vb;this.Tn=this.Vn=NaN;this.mi=ed}v.ga("Geometry",Xc);v.Uh(Xc);
Xc.prototype.copy=function(){var a=new Xc;a.ia=this.ia;a.tc=this.tc;a.xc=this.xc;a.yb=this.yb;a.Db=this.Db;for(var b=this.hj.n,c=b.length,d=a.hj,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.Pu=this.Pu;a.Au.assign(this.Au);a.Za=this.Za;a.Fi=this.Fi.aa();a.Gi=this.Gi.aa();a.Vn=this.Vn;a.Tn=this.Tn;a.mi=this.mi;return a};var fd;Xc.Line=fd=v.p(Xc,"Line",0);var gd;Xc.Rectangle=gd=v.p(Xc,"Rectangle",1);var hd;Xc.Ellipse=hd=v.p(Xc,"Ellipse",2);var cd;Xc.Path=cd=v.p(Xc,"Path",3);
Xc.prototype.Ma=function(){this.freeze();Object.freeze(this);return this};Xc.prototype.freeze=function(){this.Ea=!0;var a=this.Ub;a.freeze();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].freeze();return this};Xc.prototype.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;var a=this.Ub;a.Na();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].Na();return this};
Xc.prototype.equalsApprox=Xc.prototype.Ie=function(a){if(!(a instanceof Xc))return!1;if(this.type!==a.type)return this.type===fd&&a.type===cd?rd(this,a):a.type===fd&&this.type===cd?rd(a,this):!1;if(this.type===cd){var b=this.Ub.n;a=a.Ub.n;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Ie(a[d]))return!1;return!0}return K.D(this.Ia,a.Ia)&&K.D(this.Ja,a.Ja)&&K.D(this.J,a.J)&&K.D(this.K,a.K)};
function rd(a,b){if(a.type!==fd||b.type!==cd)return!1;if(1===b.Ub.count){var c=b.Ub.ha(0);if(1===c.vb.count&&K.D(a.Ia,c.Ia)&&K.D(a.Ja,c.Ja)&&(c=c.vb.ha(0),c.type===sd&&K.D(a.J,c.J)&&K.D(a.K,c.K)))return!0}return!1}var td;Xc.stringify=td=function(a){return a.toString()};
Xc.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case fd:return 0>a?"M"+this.Ia.toString()+" "+this.Ja.toString()+"L"+this.J.toString()+" "+this.K.toString():"M"+this.Ia.toFixed(a)+" "+this.Ja.toFixed(a)+"L"+this.J.toFixed(a)+" "+this.K.toFixed(a);case gd:var b=new z(this.Ia,this.Ja,0,0);b.FF(this.J,this.K,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case hd:b=new z(this.Ia,this.Ja,0,0);b.FF(this.J,this.K,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case cd:for(var b="",c=this.Ub.n,d=c.length,e=0;e<d;e++){var f=c[e];0<e&&(b+=" x ");f.mt&&(b+="F ");b+=f.toString(a)}return b;default:return this.type.toString()}};
Xc.fillPath=function(a){"string"!==typeof a&&v.Ad(a,"string",Xc,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var ud;
Xc.parse=ud=function(a,b){function c(){return m>=t-1?!0:null!==l[m+1].match(/[A-Za-z]/)}function d(){m++;return l[m]}function e(){var a=new w(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function f(){return s=e()}function h(){return r=e()}function k(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?s:new w(2*s.x-r.x,2*s.y-r.y)}void 0===b&&(b=!1);"string"!==typeof a&&v.Ad(a,"string",Xc,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var l=a.split(" "),m=-1,n="",p="",q=new w(0,0),r=new w(0,0),s=new w(0,
0),t=l.length,u=v.q(),x=!1,y=!1,A=!0;!(m>=t-1);)if(p=n,n=d(),""!==n)switch(n.toUpperCase()){case "X":A=!0;y=x=!1;break;case "M":var B=f();null===u.Sb||!0===A?(M(u,B.x,B.y,x,!1,!y),A=!1):u.moveTo(B.x,B.y);for(q=s;!c();)B=f(),u.lineTo(B.x,B.y);break;case "L":for(;!c();)B=f(),u.lineTo(B.x,B.y);break;case "H":for(;!c();)s=B=new w((n===n.toLowerCase()?s.x:0)+parseFloat(d()),s.y),u.lineTo(s.x,s.y);break;case "V":for(;!c();)s=B=new w(s.x,(n===n.toLowerCase()?s.y:0)+parseFloat(d())),u.lineTo(s.x,s.y);break;
case "C":for(;!c();){var I=e(),D=h(),B=f();O(u,I.x,I.y,D.x,D.y,B.x,B.y)}break;case "S":for(;!c();)I=k(),D=h(),B=f(),O(u,I.x,I.y,D.x,D.y,B.x,B.y);break;case "Q":for(;!c();)D=h(),B=f(),vd(u,D.x,D.y,B.x,B.y);break;case "T":for(;!c();)r=D=k(),B=f(),vd(u,D.x,D.y,B.x,B.y);break;case "B":for(;!c();){var B=parseFloat(d()),I=parseFloat(d()),D=parseFloat(d()),V=parseFloat(d()),ba=parseFloat(d()),U=ba,N=!1;c()||(U=parseFloat(d()),c()||(N=0!==parseFloat(d())));n===n.toLowerCase()&&(D+=s.x,V+=s.y);u.arcTo(B,I,
D,V,ba,U,N)}break;case "A":for(;!c();)I=Math.abs(parseFloat(d())),D=Math.abs(parseFloat(d())),V=parseFloat(d()),ba=!!parseFloat(d()),U=!!parseFloat(d()),B=f(),wd(u,I,D,V,ba,U,B.x,B.y);break;case "Z":B=u.o.Ub.n[u.o.Ub.length-1];P(u);s=q;break;case "F":B="";for(I=1;l[m+I];)if(null!==l[m+I].match(/[Uu]/))I++;else if(null===l[m+I].match(/[A-Za-z]/))I++;else{B=l[m+I];break}B.match(/[Mm]/)?x=!0:xd(u);break;case "U":B="";for(I=1;l[m+I];)if(null!==l[m+I].match(/[Ff]/))I++;else if(null===l[m+I].match(/[A-Za-z]/))I++;
else{B=l[m+I];break}B.match(/[Mm]/)?y=!0:u.Ya(!1)}q=u.o;v.s(u);if(b)for(u=q.Ub.i;u.next();)B=u.value,B.mt=!0;return q};function yd(a,b){for(var c=a.length,d=v.M(),e=0;e<c;e++){var f=a[e];d.x=f[0];d.y=f[1];b.xb(d);f[0]=d.x;f[1]=d.y;d.x=f[2];d.y=f[3];b.xb(d);f[2]=d.x;f[3]=d.y;d.x=f[4];d.y=f[5];b.xb(d);f[4]=d.x;f[5]=d.y;d.x=f[6];d.y=f[7];b.xb(d);f[6]=d.x;f[7]=d.y}v.v(d)}
Xc.prototype.Tz=function(){if(this.Za||this.Pu!==this.Ub.F)return!0;for(var a=this.Ub.n,b=a.length,c=0;c<b;c++)if(a[c].Tz())return!0;return!1};Xc.prototype.PA=function(){this.Za=!1;this.Pu=this.Ub.F;for(var a=this.Ub.n,b=a.length,c=0;c<b;c++)a[c].PA()};Xc.prototype.Ug=function(){var a=this.Au;a.Na();isNaN(this.Vn)||isNaN(this.Tn)?a.m(0,0,0,0):a.m(0,0,this.Vn,this.Tn);zd(this,a,!1);rb(a,0,0,0,0);a.freeze()};
Xc.prototype.computeBoundsWithoutOrigin=Xc.prototype.KG=function(){var a=new z;zd(this,a,!0);return a};
function zd(a,b,c){switch(a.type){case fd:case gd:case hd:c?b.m(a.tc,a.xc,0,0):rb(b,a.tc,a.xc,0,0);rb(b,a.yb,a.Db,0,0);break;case cd:var d=a.Ub;a=d.n;for(var d=d.length,e=0;e<d;e++){var f=a[e];c&&0===e?b.m(f.Ia,f.Ja,0,0):rb(b,f.Ia,f.Ja,0,0);for(var h=f.vb.n,k=h.length,l=f.Ia,m=f.Ja,n=0;n<k;n++){var p=h[n];switch(p.type){case sd:case Ad:l=p.J;m=p.K;rb(b,l,m,0,0);break;case Bd:K.Fo(l,m,p.ic,p.Qc,p.ih,p.jh,p.J,p.K,.5,b);l=p.J;m=p.K;break;case Cd:K.lA(l,m,p.ic,p.Qc,p.J,p.K,.5,b);l=p.J;m=p.K;break;case Dd:case Fd:var q=
p.type===Dd?Gd(p,f):Hd(p,f,l,m),r=q.length;if(0===r){l=p.oa;m=p.va;rb(b,l,m,0,0);break}for(var p=null,s=0;s<r;s++)p=q[s],K.Fo(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,b);null!==p&&(l=p[6],m=p[7]);break;default:v.k("Unknown Segment type: "+p.type)}}}break;default:v.k("Unknown Geometry type: "+a.type)}}Xc.prototype.normalize=Xc.prototype.normalize=function(){v.I(this);var a=this.KG();this.offset(-a.x,-a.y);return new w(-a.x,-a.y)};
Xc.prototype.offset=Xc.prototype.offset=function(a,b){v.I(this);this.transform(1,0,0,1,a,b);return this};Xc.prototype.scale=Xc.prototype.scale=function(a,b){v.I(this);this.transform(a,0,0,b,0,0);return this};Xc.prototype.rotate=Xc.prototype.rotate=function(a,b,c){v.I(this);void 0===b&&(b=0);void 0===c&&(c=0);var d=v.nh();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);v.Xe(d);return this};
Xc.prototype.transform=Xc.prototype.transform=function(a,b,c,d,e,f){var h=0,k=0;switch(this.type){case fd:case gd:case hd:h=this.tc;k=this.xc;this.tc=h*a+k*c+e;this.xc=h*b+k*d+f;h=this.yb;k=this.Db;this.yb=h*a+k*c+e;this.Db=h*b+k*d+f;break;case cd:for(var l=this.Ub.n,m=l.length,n=0;n<m;n++){var p=l[n],h=p.Ia,k=p.Ja;p.Ia=h*a+k*c+e;p.Ja=h*b+k*d+f;for(var p=p.vb.n,q=p.length,r=0;r<q;r++){var s=p[r];switch(s.type){case sd:case Ad:h=s.J;k=s.K;s.J=h*a+k*c+e;s.K=h*b+k*d+f;break;case Bd:h=s.ic;k=s.Qc;s.ic=
h*a+k*c+e;s.Qc=h*b+k*d+f;h=s.ih;k=s.jh;s.ih=h*a+k*c+e;s.jh=h*b+k*d+f;h=s.J;k=s.K;s.J=h*a+k*c+e;s.K=h*b+k*d+f;break;case Cd:h=s.ic;k=s.Qc;s.ic=h*a+k*c+e;s.Qc=h*b+k*d+f;h=s.J;k=s.K;s.J=h*a+k*c+e;s.K=h*b+k*d+f;break;case Dd:h=s.oa;k=s.va;s.oa=h*a+k*c+e;s.va=h*b+k*d+f;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.Ne+=h);0>a&&(s.Ne=180-s.Ne,s.Sf=-s.Sf);0>d&&(s.Ne=-s.Ne,s.Sf=-s.Sf);s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case Fd:h=s.J;k=s.K;s.J=h*
a+k*c+e;s.K=h*b+k*d+f;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.$i+=h);0>a&&(s.$i=180-s.$i,s.ql=!s.ql);0>d&&(s.$i=-s.$i,s.ql=!s.ql);s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:v.k("Unknown Segment type: "+s.type)}}}}this.Za=!0;return this};
Xc.prototype.Ca=function(a,b,c,d){var e=a.x,f=a.y,h=this.pb.x-20;a=a.y;for(var k=0,l=0,m=0,n=0,p=0,q=0,r=this.Ub.n,s=r.length,t=0;t<s;t++){var u=r[t];if(u.mt){if(c&&u.Ca(e,f,b))return!0;for(var x=u.vb,l=u.Ia,m=u.Ja,y=l,A=m,B=x.n,I=0;I<=x.length;I++){var D,V;I!==x.length?(D=B[I],V=D.type,p=D.J,q=D.K):(V=sd,p=y,q=A);switch(V){case Ad:n=Id(e,f,h,a,l,m,y,A);if(isNaN(n))return!0;k+=n;y=p;A=q;break;case sd:n=Id(e,f,h,a,l,m,p,q);if(isNaN(n))return!0;k+=n;break;case Bd:n=K.Ns(l,m,D.ic,D.Qc,D.ih,D.jh,p,q,
h,a,e,f,.5);k+=n;break;case Cd:n=K.Ns(l,m,(l+2*D.ic)/3,(m+2*D.Qc)/3,(D.ic+2*p)/3,(D.ic+2*p)/3,p,q,h,a,e,f,.5);k+=n;break;case Dd:case Fd:V=D.type===Dd?Gd(D,u):Hd(D,u,l,m);var ba=V.length;if(0===ba){n=Id(e,f,h,a,l,m,D.oa,D.va);if(isNaN(n))return!0;k+=n;break}for(var U=null,N=0;N<ba;N++){U=V[N];if(0===N){n=Id(e,f,h,a,l,m,U[0],U[1]);if(isNaN(n))return!0;k+=n}n=K.Ns(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],h,a,e,f,.5);k+=n}null!==U&&(p=U[6],q=U[7]);break;default:v.k("Unknown Segment type: "+D.type)}l=
p;m=q}if(0!==k)return!0;k=0}else if(u.Ca(e,f,d?b:b+2))return!0}return 0!==k};function Id(a,b,c,d,e,f,h,k){if(K.zd(e,f,h,k,.05,a,b))return NaN;var l=(a-c)*(f-k);if(0===l)return 0;var m=((a*d-b*c)*(e-h)-(a-c)*(e*k-f*h))/l;b=(a*d-b*c)*(f-k)/l;if(m>=a)return 0;if((e>h?e-h:h-e)<(f>k?f-k:k-f)){if(e=a=0,f<k?(a=f,e=k):(a=k,e=f),b<a||b>e)return 0}else if(e<h?(a=e,e=h):a=h,m<a||m>e)return 0;return 0<l?1:-1}function Jd(a,b,c,d){a=a.Ub.n;for(var e=a.length,f=0;f<e;f++)if(a[f].Ca(b,c,d))return!0;return!1}
Xc.prototype.getPointAlongPath=function(a){(0>a||1<a)&&v.ua(a,"0 <= fraction <= 1",Xc,"getPointAlongPath:fraction");var b=this.Ub.first(),c=v.jb(),d=[];d.push(b.Ia);d.push(b.Ja);for(var e=b.Ia,f=b.Ja,h=e,k=f,l=b.vb.n,m=l.length,n=0;n<m;n++){var p=l[n];switch(p.ia){case Ad:c.push(d);d=[];d.push(p.J);d.push(p.K);e=p.J;f=p.K;h=e;k=f;break;case sd:d.push(p.J);d.push(p.K);e=p.J;f=p.K;break;case Bd:K.De(e,f,p.md,p.Ae,p.gg,p.hg,p.yb,p.Db,.5,d);e=p.J;f=p.K;break;case Cd:K.rp(e,f,p.md,p.Ae,p.yb,p.Db,.5,d);
e=p.J;f=p.K;break;case Dd:var q=Gd(p,b),r=q.length;if(0===r){d.push(p.oa);d.push(p.va);e=p.oa;f=p.va;break}for(var s=0;s<r;s++){var t=q[s];K.De(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d);e=t[6];f=t[7]}break;case Fd:q=Hd(p,b,e,f);r=q.length;for(s=0;s<r;s++)t=q[s],K.De(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d),e=t[6],f=t[7];break;default:v.k("Segment not of valid type")}p.Dh&&(d.push(h),d.push(k))}c.push(d);q=0;h=c.length;for(k=d=b=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n+=2)e=l[n],f=l[n+1],0!==n&&(p=Math.sqrt(Za(b,
d,e,f)),q+=p),b=e,d=f;a*=q;for(k=q=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n++){e=l[n];f=l[n+1];if(0!==n){p=Math.sqrt(Za(b,d,e,f));if(q+p>a)return n=(a-q)/p,v.ra(c),new w(b+(e-b)*n,d+(f-d)*n);q+=p}b=e;d=f}v.ra(c);return null};v.defineProperty(Xc,{type:"type"},function(){return this.ia},function(a){this.ia!==a&&(v.I(this,a),this.ia=a,this.Za=!0)});v.defineProperty(Xc,{Ia:"startX"},function(){return this.tc},function(a){this.tc!==a&&(v.I(this,a),this.tc=a,this.Za=!0)});
v.defineProperty(Xc,{Ja:"startY"},function(){return this.xc},function(a){this.xc!==a&&(v.I(this,a),this.xc=a,this.Za=!0)});v.defineProperty(Xc,{J:"endX"},function(){return this.yb},function(a){this.yb!==a&&(v.I(this,a),this.yb=a,this.Za=!0)});v.defineProperty(Xc,{K:"endY"},function(){return this.Db},function(a){this.Db!==a&&(v.I(this,a),this.Db=a,this.Za=!0)});v.defineProperty(Xc,{Ub:"figures"},function(){return this.hj},function(a){this.hj!==a&&(v.I(this,a),this.hj=a,this.Za=!0)});
Xc.prototype.add=Xc.prototype.add=function(a){this.hj.add(a);return this};v.defineProperty(Xc,{A:"spot1"},function(){return this.Fi},function(a){v.I(this,a);this.Fi=a.aa()});v.defineProperty(Xc,{B:"spot2"},function(){return this.Gi},function(a){v.I(this,a);this.Gi=a.aa()});v.defineProperty(Xc,{Hd:"defaultStretch"},function(){return this.mi},function(a){v.I(this,a);this.mi=a});v.u(Xc,{pb:"bounds"},function(){this.Tz()&&(this.PA(),this.Ug());return this.Au});
function dd(a,b,c,d){v.cc(this);this.Ea=!1;void 0===c&&(c=!0);this.Sl=c;void 0===d&&(d=!0);this.Wn=d;this.tc=void 0!==a?a:0;this.xc=void 0!==b?b:0;this.po=new G(Kd);this.Nv=this.po.F;this.Za=!0}v.ga("PathFigure",dd);v.Uh(dd);dd.prototype.copy=function(){var a=new dd;a.Sl=this.Sl;a.Wn=this.Wn;a.tc=this.tc;a.xc=this.xc;for(var b=this.po.n,c=b.length,d=a.po,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.Nv=this.Nv;a.Za=this.Za;return a};
dd.prototype.equalsApprox=dd.prototype.Ie=function(a){if(!(a instanceof dd&&K.D(this.Ia,a.Ia)&&K.D(this.Ja,a.Ja)))return!1;var b=this.vb.n;a=a.vb.n;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Ie(a[d]))return!1;return!0};g=dd.prototype;g.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.Ia.toString()+" "+this.Ja.toString():"M"+this.Ia.toFixed(a)+" "+this.Ja.toFixed(a),c=this.vb.n,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};
g.freeze=function(){this.Ea=!0;var a=this.vb;a.freeze();for(var b=a.n,a=a.length,c=0;c<a;c++)b[c].freeze();return this};g.Na=function(){this.Ea=!1;var a=this.vb;a.Na();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].Na();return this};g.Tz=function(){if(this.Za)return!0;var a=this.vb;if(this.Nv!==a.F)return!0;for(var a=a.n,b=a.length,c=0;c<b;c++)if(a[c].Za)return!0;return!1};g.PA=function(){this.Za=!1;var a=this.vb;this.Nv=a.F;for(var a=a.n,b=a.length,c=0;c<b;c++){var d=a[c];d.Za=!1;d.Xf=null}};
v.defineProperty(dd,{mt:"isFilled"},function(){return this.Sl},function(a){v.I(this,a);this.Sl=a});v.defineProperty(dd,{tl:"isShadowed"},function(){return this.Wn},function(a){v.I(this,a);this.Wn=a});v.defineProperty(dd,{Ia:"startX"},function(){return this.tc},function(a){v.I(this,a);this.tc=a;this.Za=!0});v.defineProperty(dd,{Ja:"startY"},function(){return this.xc},function(a){v.I(this,a);this.xc=a;this.Za=!0});
v.defineProperty(dd,{vb:"segments"},function(){return this.po},function(a){v.I(this,a);this.po=a;this.Za=!0});dd.prototype.add=dd.prototype.add=function(a){this.po.add(a);return this};
dd.prototype.Ca=function(a,b,c){for(var d=this.Ia,e=this.Ja,f=d,h=e,k=this.vb.n,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.type){case Ad:f=n.J;h=n.K;d=n.J;e=n.K;break;case sd:if(K.zd(d,e,n.J,n.K,c,a,b))return!0;d=n.J;e=n.K;break;case Bd:if(K.rw(d,e,n.ic,n.Qc,n.ih,n.jh,n.J,n.K,.5,a,b,c))return!0;d=n.J;e=n.K;break;case Cd:if(K.mA(d,e,n.ic,n.Qc,n.J,n.K,.5,a,b,c))return!0;d=n.J;e=n.K;break;case Dd:case Fd:var p=n.type===Dd?Gd(n,this):Hd(n,this,d,e),q=p.length;if(0===q){if(K.zd(d,e,n.oa,n.va,c,a,b))return!0;
d=n.oa;e=n.va;break}for(var r=null,s=0;s<q;s++)if(r=p[s],0===s&&K.zd(d,e,r[0],r[1],c,a,b)||K.rw(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5,a,b,c))return!0;null!==r&&(d=r[6],e=r[7]);break;default:v.k("Unknown Segment type: "+n.type)}if(n.Ow&&(d!==f||e!==h)&&K.zd(d,e,f,h,c,a,b))return!0}return!1};
function Kd(a,b,c,d,e,f,h,k){v.cc(this);this.Ea=!1;void 0===a&&(a=sd);this.ia=a;this.yb=void 0!==b?b:0;this.Db=void 0!==c?c:0;a===Fd?(void 0!==f&&(a=f%360,0>a&&(a+=360),this.md=a),void 0!==d&&(this.gg=Math.max(d,0)),void 0!==e&&(this.hg=Math.max(e,0)),this.$n=!!h,this.rn=!!k):(void 0!==d&&(this.md=d),void 0!==e&&(this.Ae=e),void 0!==f&&(a===Dd&&(f=Math.max(f,0)),this.gg=f),void 0!==h&&"number"===typeof h&&(a===Dd&&(h=Math.max(h,0)),this.hg=h));this.Dh=!1;this.Za=!0;this.Xf=null}
v.ga("PathSegment",Kd);v.Uh(Kd);Kd.prototype.copy=function(){var a=new Kd;a.ia=this.ia;a.yb=this.yb;a.Db=this.Db;void 0!==this.md&&(a.md=this.md);void 0!==this.Ae&&(a.Ae=this.Ae);void 0!==this.gg&&(a.gg=this.gg);void 0!==this.hg&&(a.hg=this.hg);void 0!==this.$n&&(a.$n=this.$n);void 0!==this.rn&&(a.rn=this.rn);a.Dh=this.Dh;a.Za=this.Za;return a};
Kd.prototype.equalsApprox=Kd.prototype.Ie=function(a){if(!(a instanceof Kd)||this.type!==a.type||this.Ow!==a.Ow)return!1;switch(this.type){case Ad:case sd:return K.D(this.J,a.J)&&K.D(this.K,a.K);case Bd:return K.D(this.J,a.J)&&K.D(this.K,a.K)&&K.D(this.ic,a.ic)&&K.D(this.Qc,a.Qc)&&K.D(this.ih,a.ih)&&K.D(this.jh,a.jh);case Cd:return K.D(this.J,a.J)&&K.D(this.K,a.K)&&K.D(this.ic,a.ic)&&K.D(this.Qc,a.Qc);case Dd:return K.D(this.Ne,a.Ne)&&K.D(this.Sf,a.Sf)&&K.D(this.oa,a.oa)&&K.D(this.va,a.va)&&K.D(this.radiusX,
a.radiusX)&&K.D(this.radiusY,a.radiusY);case Fd:return this.ql===a.ql&&this.Rw===a.Rw&&K.D(this.$i,a.$i)&&K.D(this.J,a.J)&&K.D(this.K,a.K)&&K.D(this.radiusX,a.radiusX)&&K.D(this.radiusY,a.radiusY);default:return!1}};
Kd.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case Ad:b=0>a?"M"+this.J.toString()+" "+this.K.toString():"M"+this.J.toFixed(a)+" "+this.K.toFixed(a);break;case sd:b=0>a?"L"+this.J.toString()+" "+this.K.toString():"L"+this.J.toFixed(a)+" "+this.K.toFixed(a);break;case Bd:b=0>a?"C"+this.ic.toString()+" "+this.Qc.toString()+" "+this.ih.toString()+" "+this.jh.toString()+" "+this.J.toString()+" "+this.K.toString():"C"+this.ic.toFixed(a)+" "+this.Qc.toFixed(a)+" "+this.ih.toFixed(a)+
" "+this.jh.toFixed(a)+" "+this.J.toFixed(a)+" "+this.K.toFixed(a);break;case Cd:b=0>a?"Q"+this.ic.toString()+" "+this.Qc.toString()+" "+this.J.toString()+" "+this.K.toString():"Q"+this.ic.toFixed(a)+" "+this.Qc.toFixed(a)+" "+this.J.toFixed(a)+" "+this.K.toFixed(a);break;case Dd:b=0>a?"B"+this.Ne.toString()+" "+this.Sf.toString()+" "+this.oa.toString()+" "+this.va.toString()+" "+this.radiusX:"B"+this.Ne.toFixed(a)+" "+this.Sf.toFixed(a)+" "+this.oa.toFixed(a)+" "+this.va.toFixed(a)+" "+this.radiusX;
break;case Fd:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.$i.toString()+" "+(this.Rw?1:0)+" "+(this.ql?1:0)+" "+this.J.toString()+" "+this.K.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.$i.toFixed(a)+" "+(this.Rw?1:0)+" "+(this.ql?1:0)+" "+this.J.toFixed(a)+" "+this.K.toFixed(a);break;default:b=this.type.toString()}return b+(this.Dh?"z":"")};var Ad;Kd.Move=Ad=v.p(Kd,"Move",0);var sd;Kd.Line=sd=v.p(Kd,"Line",1);var Bd;
Kd.Bezier=Bd=v.p(Kd,"Bezier",2);var Cd;Kd.QuadraticBezier=Cd=v.p(Kd,"QuadraticBezier",3);var Dd;Kd.Arc=Dd=v.p(Kd,"Arc",4);var Fd;Kd.SvgArc=Fd=v.p(Kd,"SvgArc",4);Kd.prototype.freeze=function(){this.Ea=!0;return this};Kd.prototype.Na=function(){this.Ea=!1;return this};Kd.prototype.close=Kd.prototype.close=function(){this.Dh=!0;return this};
function Gd(a,b){if(null!==a.Xf&&!1===b.Za)return a.Xf;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);if(0===c||0===d)return a.Xf=[],a.Xf;var e=a.md,f=a.Ae,h=K.MD(0,0,c<d?c:d,a.Ne,a.Ne+a.Sf,!1);if(c!==d){var k=v.nh();k.reset();c<d?k.scale(1,d/c):k.scale(c/d,1);yd(h,k);v.Xe(k)}c=h.length;for(d=0;d<c;d++)k=h[d],k[0]+=e,k[1]+=f,k[2]+=e,k[3]+=f,k[4]+=e,k[5]+=f,k[6]+=e,k[7]+=f;a.Xf=h;return a.Xf}
function Hd(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos(f(a,b,c,d))}function f(a,b,c,d){return(a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d))}if(null!==a.Xf&&!1===b.Za)return a.Xf;b=a.gg;var h=a.hg;if(0===b||0===h)return a.Xf=[],a.Xf;var k=Math.PI/180*a.md,l=a.$n,m=a.rn,n=a.yb,p=a.Db,q=Math.cos(k),r=Math.sin(k),s=q*(c-n)/2+r*(d-p)/2,k=-r*(c-n)/2+q*(d-p)/2,t=s*s/(b*b)+k*k/(h*h);1<t&&(b*=Math.sqrt(t),h*=Math.sqrt(t));t=(l===m?-1:1)*Math.sqrt((b*b*h*h-b*b*k*k-h*h*s*s)/(b*b*k*k+h*h*
s*s));isNaN(t)&&(t=0);l=t*b*k/h;t=t*-h*s/b;isNaN(l)&&(l=0);isNaN(t)&&(t=0);c=(c+n)/2+q*l-r*t;d=(d+p)/2+r*l+q*t;p=e(1,0,(s-l)/b,(k-t)/h);q=(s-l)/b;n=(k-t)/h;s=(-s-l)/b;l=(-k-t)/h;k=e(q,n,s,l);s=f(q,n,s,l);-1>=s?k=Math.PI:1<=s&&(k=0);!m&&0<k&&(k-=2*Math.PI);m&&0>k&&(k+=2*Math.PI);m=b>h?1:b/h;s=b>h?h/b:1;b=K.MD(0,0,b>h?b:h,p,p+k,!0);h=v.nh();h.reset();h.translate(c,d);h.rotate(a.md,0,0);h.scale(m,s);yd(b,h);v.Xe(h);a.Xf=b;return a.Xf}
v.defineProperty(Kd,{Ow:"isClosed"},function(){return this.Dh},function(a){this.Dh!==a&&(this.Dh=a,this.Za=!0)});v.defineProperty(Kd,{type:"type"},function(){return this.ia},function(a){v.I(this,a);this.ia=a;this.Za=!0});v.defineProperty(Kd,{J:"endX"},function(){return this.yb},function(a){v.I(this,a);this.yb=a;this.Za=!0});v.defineProperty(Kd,{K:"endY"},function(){return this.Db},function(a){v.I(this,a);this.Db=a;this.Za=!0});
v.defineProperty(Kd,{ic:"point1X"},function(){return this.md},function(a){v.I(this,a);this.md=a;this.Za=!0});v.defineProperty(Kd,{Qc:"point1Y"},function(){return this.Ae},function(a){v.I(this,a);this.Ae=a;this.Za=!0});v.defineProperty(Kd,{ih:"point2X"},function(){return this.gg},function(a){v.I(this,a);this.gg=a;this.Za=!0});v.defineProperty(Kd,{jh:"point2Y"},function(){return this.hg},function(a){v.I(this,a);this.hg=a;this.Za=!0});
v.defineProperty(Kd,{oa:"centerX"},function(){return this.md},function(a){v.I(this,a);this.md=a;this.Za=!0});v.defineProperty(Kd,{va:"centerY"},function(){return this.Ae},function(a){v.I(this,a);this.Ae=a;this.Za=!0});v.defineProperty(Kd,{radiusX:"radiusX"},function(){return this.gg},function(a){0>a&&v.ua(a,">= zero",Kd,"radiusX");v.I(this,a);this.gg=a;this.Za=!0});
v.defineProperty(Kd,{radiusY:"radiusY"},function(){return this.hg},function(a){0>a&&v.ua(a,">= zero",Kd,"radiusY");v.I(this,a);this.hg=a;this.Za=!0});v.defineProperty(Kd,{Ne:"startAngle"},function(){return this.yb},function(a){this.yb!==a&&(v.I(this,a),a%=360,0>a&&(a+=360),this.yb=a,this.Za=!0)});v.defineProperty(Kd,{Sf:"sweepAngle"},function(){return this.Db},function(a){v.I(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Db=a;this.Za=!0});
v.defineProperty(Kd,{ql:"isClockwiseArc"},function(){return this.rn},function(a){v.I(this,a);this.rn=a;this.Za=!0});v.defineProperty(Kd,{Rw:"isLargeArc"},function(){return this.$n},function(a){v.I(this,a);this.$n=a;this.Za=!0});v.defineProperty(Kd,{$i:"xAxisRotation"},function(){return this.md},function(a){a%=360;0>a&&(a+=360);v.I(this,a);this.md=a;this.Za=!0});
function Ld(){this.W=null;this.gz=(new w(0,0)).freeze();this.ly=(new w(0,0)).freeze();this.wu=this.rv=0;this.xu=1;this.fv="";this.cw=this.Mu=!1;this.Iu=this.zu=0;this.bj=this.Tu=this.cv=!1;this.zq=null;this.aw=0;this.ig=this.Yv=null}v.ga("InputEvent",Ld);
Ld.prototype.copy=function(){var a=new Ld;a.W=this.W;a.gz.assign(this.ef);a.ly.assign(this.ea);a.rv=this.rv;a.wu=this.wu;a.xu=this.xu;a.fv=this.fv;a.Mu=this.Mu;a.cw=this.cw;a.zu=this.zu;a.Iu=this.Iu;a.cv=this.cv;a.Tu=this.Tu;a.bj=this.bj;a.zq=this.zq;a.aw=this.aw;a.Yv=this.Yv;a.ig=this.ig;return a};
Ld.prototype.toString=function(){var a="^";0!==this.pd&&(a+="M:"+this.pd);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.Ue&&(a+="C:"+this.Ue);0!==this.el&&(a+="D:"+this.el);this.Nc&&(a+="h");this.bubbles&&(a+="b");null!==this.ea&&(a+="@"+this.ea.toString());return a};v.defineProperty(Ld,{g:"diagram"},function(){return this.W},function(a){this.W=a});v.defineProperty(Ld,{ef:"viewPoint"},function(){return this.gz},function(a){v.C(a,w,Ld,"viewPoint");this.gz.assign(a)});
v.defineProperty(Ld,{ea:"documentPoint"},function(){return this.ly},function(a){v.C(a,w,Ld,"documentPoint");this.ly.assign(a)});v.defineProperty(Ld,{pd:"modifiers"},function(){return this.rv},function(a){this.rv=a});v.defineProperty(Ld,{button:"button"},function(){return this.wu},function(a){this.wu=a;if(null===this.event)switch(a){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}});
v.defineProperty(Ld,{buttons:"buttons"},function(){return this.xu},function(a){this.xu=a});v.defineProperty(Ld,{key:"key"},function(){return this.fv},function(a){this.fv=a});v.defineProperty(Ld,{gl:"down"},function(){return this.Mu},function(a){this.Mu=a});v.defineProperty(Ld,{up:"up"},function(){return this.cw},function(a){this.cw=a});v.defineProperty(Ld,{Ue:"clickCount"},function(){return this.zu},function(a){this.zu=a});
v.defineProperty(Ld,{el:"delta"},function(){return this.Iu},function(a){this.Iu=a});v.defineProperty(Ld,{ot:"isMultiTouch"},function(){return this.cv},function(a){this.cv=a});v.defineProperty(Ld,{Nc:"handled"},function(){return this.Tu},function(a){this.Tu=a});v.defineProperty(Ld,{bubbles:"bubbles"},function(){return this.bj},function(a){this.bj=a});v.defineProperty(Ld,{event:"event"},function(){return this.zq},function(a){this.zq=a});
v.u(Ld,{Zj:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});v.defineProperty(Ld,{timestamp:"timestamp"},function(){return this.aw},function(a){this.aw=a});v.defineProperty(Ld,{Ag:"targetDiagram"},function(){return this.Yv},function(a){this.Yv=a});v.defineProperty(Ld,{qe:"targetObject"},function(){return this.ig},function(a){this.ig=a});
v.defineProperty(Ld,{control:"control"},function(){return 0!==(this.pd&1)},function(a){this.pd=a?this.pd|1:this.pd&-2});v.defineProperty(Ld,{shift:"shift"},function(){return 0!==(this.pd&4)},function(a){this.pd=a?this.pd|4:this.pd&-5});v.defineProperty(Ld,{alt:"alt"},function(){return 0!==(this.pd&2)},function(a){this.pd=a?this.pd|2:this.pd&-3});v.defineProperty(Ld,{xt:"meta"},function(){return 0!==(this.pd&8)},function(a){this.pd=a?this.pd|8:this.pd&-9});
v.defineProperty(Ld,{left:"left"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?0===this.button:0!==(this.buttons&1)},function(a){this.buttons=a?this.buttons|1:this.buttons&-2});v.defineProperty(Ld,{right:"right"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?2===this.button:0!==(this.buttons&2)},function(a){this.buttons=a?this.buttons|2:this.buttons&-3});
v.defineProperty(Ld,{LK:"middle"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?1===this.button:0!==(this.buttons&4)},function(a){this.buttons=a?this.buttons|4:this.buttons&-5});function Md(){this.W=null;this.Ob="";this.zv=this.Tv=null;this.yu=!1}v.ga("DiagramEvent",Md);Md.prototype.copy=function(){var a=new Md;a.W=this.W;a.Ob=this.Ob;a.Tv=this.Tv;a.zv=this.zv;a.yu=this.yu;return a};
Md.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");null!==this.HA&&(a+=":"+this.HA.toString());null!==this.kA&&(a+="("+this.kA.toString()+")");return a};v.defineProperty(Md,{g:"diagram"},function(){return this.W},function(a){this.W=a});v.defineProperty(Md,{name:"name"},function(){return this.Ob},function(a){this.Ob=a});v.defineProperty(Md,{HA:"subject"},function(){return this.Tv},function(a){this.Tv=a});
v.defineProperty(Md,{kA:"parameter"},function(){return this.zv},function(a){this.zv=a});v.defineProperty(Md,{cancel:"cancel"},function(){return this.yu},function(a){this.yu=a});function Nd(){this.$p=Od;this.mm=this.qv="";this.wr=this.xr=this.Ar=this.Br=this.zr=this.W=this.Rd=null}v.ga("ChangedEvent",Nd);var Pd;Nd.Transaction=Pd=v.p(Nd,"Transaction",-1);var Od;Nd.Property=Od=v.p(Nd,"Property",0);var Qd;Nd.Insert=Qd=v.p(Nd,"Insert",1);var be;Nd.Remove=be=v.p(Nd,"Remove",2);
Nd.prototype.clear=Nd.prototype.clear=function(){this.wr=this.xr=this.Ar=this.Br=this.zr=this.W=this.Rd=null};Nd.prototype.copy=function(){var a=new Nd;a.Rd=this.Rd;a.W=this.W;a.$p=this.$p;a.qv=this.qv;a.mm=this.mm;a.zr=this.zr;var b=this.Br;a.Br=v.Wa(b)&&"function"===typeof b.aa?b.aa():b;b=this.Ar;a.Ar=v.Wa(b)&&"function"===typeof b.aa?b.aa():b;b=this.xr;a.xr=v.Wa(b)&&"function"===typeof b.aa?b.aa():b;b=this.wr;a.wr=v.Wa(b)&&"function"===typeof b.aa?b.aa():b;return a};
Nd.prototype.toString=function(){var a="",a=this.Ac===Pd?a+"* ":this.Ac===Od?a+(null!==this.da?"!m":"!d"):a+((null!==this.da?"!m":"!d")+this.Ac);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.cf&&this.cf!==this.propertyName&&(a+=" "+this.cf);a+=": ";this.Ac===Pd?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=ce(this.object)),null!==this.oldValue&&(a+="  old: "+ce(this.oldValue)),null!==this.xg&&(a+=" "+this.xg),null!==this.newValue&&
(a+="  new: "+ce(this.newValue)),null!==this.vg&&(a+=" "+this.vg));return a};Nd.prototype.getValue=Nd.prototype.la=function(a){return a?this.oldValue:this.newValue};Nd.prototype.getParam=function(a){return a?this.xg:this.vg};Nd.prototype.canUndo=Nd.prototype.canUndo=function(){return null!==this.da||null!==this.g?!0:!1};Nd.prototype.undo=Nd.prototype.undo=function(){this.canUndo()&&(null!==this.da?this.da.Em(this,!0):null!==this.g&&this.g.Em(this,!0))};
Nd.prototype.canRedo=Nd.prototype.canRedo=function(){return null!==this.da||null!==this.g?!0:!1};Nd.prototype.redo=Nd.prototype.redo=function(){this.canRedo()&&(null!==this.da?this.da.Em(this,!1):null!==this.g&&this.g.Em(this,!1))};v.defineProperty(Nd,{da:"model"},function(){return this.Rd},function(a){this.Rd=a});v.defineProperty(Nd,{g:"diagram"},function(){return this.W},function(a){this.W=a});v.defineProperty(Nd,{Ac:"change"},function(){return this.$p},function(a){this.$p=a});
v.defineProperty(Nd,{cf:"modelChange"},function(){return this.qv},function(a){this.qv=a});v.defineProperty(Nd,{propertyName:"propertyName"},function(){return this.mm},function(a){this.mm=a});v.u(Nd,{xE:"isTransactionFinished"},function(){return this.$p===Pd&&("CommittedTransaction"===this.mm||"FinishedUndo"===this.mm||"FinishedRedo"===this.mm)});v.defineProperty(Nd,{object:"object"},function(){return this.zr},function(a){this.zr=a});
v.defineProperty(Nd,{oldValue:"oldValue"},function(){return this.Br},function(a){this.Br=a});v.defineProperty(Nd,{xg:"oldParam"},function(){return this.Ar},function(a){this.Ar=a});v.defineProperty(Nd,{newValue:"newValue"},function(){return this.xr},function(a){this.xr=a});v.defineProperty(Nd,{vg:"newParam"},function(){return this.wr},function(a){this.wr=a});
function F(a){1<arguments.length&&v.k("Model constructor can only take one optional argument, the Array of node data.");v.cc(this);this.nq=this.Ob="";this.qi=!1;this.Ny={};this.kf=[];this.rc=new ma(null,Object);this.Aj="key";this.vn=this.fm=null;this.fq=this.Cu=!1;this.Tp=null;this.hm="category";this.yh=new ma(null,H);this.uj=null;this.Ei=!1;this.fz=null;this.ja=new de;void 0!==a&&(this.dh=a)}v.ga("Model",F);
F.prototype.cloneProtected=function(a){a.Ob=this.Ob;a.nq=this.nq;a.qi=this.qi;a.Aj=this.Aj;a.fm=this.fm;a.vn=this.vn;a.qJ=this.Cu;a.fq=this.fq;a.Tp=this.Tp;a.hm=this.hm};F.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};F.prototype.clear=F.prototype.clear=function(){this.kf=[];this.rc.clear();this.yh.clear();this.ja.clear()};g=F.prototype;
g.toString=function(a){void 0===a&&(a=0);if(1<a)return this.KA();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.dh;for(var c=v.Va(a),d=0;d<c;d++)var e=v.Pa(a,d),b=b+(" "+this.mb(e)+":"+ce(e))}return b};
g.Ip=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.cl&&(a+=',\n  "dataFormat": '+this.quote(this.cl));this.gb&&(a+=',\n  "isReadOnly": '+this.gb);"key"!==this.wl&&"string"===typeof this.wl&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.wl));this.wz&&(a+=',\n  "copiesArrays": true');this.vz&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.Zm&&"string"===typeof this.Zm&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Zm));return a};
g.Ht=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.cl=a.dataFormat);a.isReadOnly&&(this.gb=a.isReadOnly);a.nodeKeyProperty&&(this.wl=a.nodeKeyProperty);a.copiesArrays&&(this.wz=a.copiesArrays);a.copiesArrayObjects&&(this.vz=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.Zm=a.nodeCategoryProperty)};function ee(a){var b=a.yt,c=!1,d;for(d in b)if(!fe(d,b[d])){c=!0;break}return c?',\n  "modelData": '+ge(a,b):""}function he(a,b){var c=b.modelData;v.Wa(c)&&(a.Kt(c),a.yt=c)}
g.SA=function(){return ee(this)+',\n  "nodeDataArray": '+re(this,this.dh,!0)};g.pA=function(a){he(this,a);a=a.nodeDataArray;v.isArray(a)&&(this.Kt(a),this.dh=a)};
g.RA=function(a,b){var c=ee(this),d=this,e=new H,f=new H,h=new H;a.Gf.each(function(a){a.da===d&&("nodeDataArray"===a.cf?a.Ac===Qd?e.add(a.newValue):a.Ac===be&&h.add(a.oldValue):d.Fe(a.object)&&f.add(a.object))});var k=new H;e.each(function(a){k.add(d.mb(a));b||f.add(a)});var l=new H;h.each(function(a){l.add(d.mb(a));b&&f.add(a)});return c+(b?',\n  "removedNodeKeys": ':',\n  "insertedNodeKeys": ')+re(this,k.ed(),!0)+',\n  "modifiedNodeData": '+re(this,f.ed(),!0)+(b?',\n  "insertedNodeKeys": ':',\n  "removedNodeKeys": ')+
re(this,l.ed(),!0)};
g.oA=function(a){he(this,a);var b=a.insertedNodeKeys;if(v.isArray(b))for(var c=v.Va(b),d=0;d<c;d++){var e=v.Pa(b,d),f=this.ke(e);null===f&&(f=this.copyNodeData({}),this.vx(f,e),this.Vk(f))}b=a.modifiedNodeData;if(v.isArray(b))for(c=v.Va(b),d=0;d<c;d++){var h=v.Pa(b,d),e=this.mb(h),f=this.ke(e);if(null!==f)for(var k in h)"__gohashid"!==k&&k!==this.wl&&this.setDataProperty(f,k,h[k])}a=a.removedNodeKeys;if(v.isArray(a))for(c=v.Va(a),d=0;d<c;d++)e=v.Pa(a,d),f=this.ke(e),null!==f&&this.mx(f)};
F.prototype.toIncrementalJson=F.prototype.toIncrementalJSON=function(a,b){v.C(a,Nd,F,"toIncrementalJson:e");a.Ac!==Pd&&v.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+a.toString());var c=a.object;if(!(a.xE&&c instanceof se))return'{ "incremental": 0 }';void 0===b&&(b=this.constructor===F?"go.Model":this.constructor===Q?"go.GraphLinksModel":this.constructor===te?"go.TreeModel":v.nf(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.Ip()+this.RA(c,"FinishedUndo"===
a.propertyName)+"}"};F.prototype.toJson=F.prototype.toJSON=F.prototype.KA=function(a){void 0===a&&(a=this.constructor===F?"go.Model":this.constructor===Q?"go.GraphLinksModel":this.constructor===te?"go.TreeModel":v.nf(this));return'{ "class": '+this.quote(a)+this.Ip()+this.SA()+"}"};
F.prototype.applyIncrementalJson=F.prototype.applyIncrementalJSON=function(a){var b=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{b=window.JSON.parse(a)}catch(c){}else v.trace("WARNING: no JSON.parse available");else"object"===typeof a?b=a:v.k("Unable to modify a Model from: "+a);var d=b.incremental;"number"!==typeof d&&v.k("Unable to apply non-incremental changes to Model: "+a);0!==d&&(this.Qb("applyIncrementalJson"),this.oA(b),this.wd("applyIncrementalJson"))};
F.fromJson=F.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&v.C(b,F,F,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){}else v.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:v.k("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var f=c["class"];if("string"===typeof f)try{var h=null;0===f.indexOf("go.")?(f=f.substr(3),h=ea[f]):(h=ea[f],void 0===h&&(h=window[f]));"function"===typeof h&&
(e=new h)}catch(k){}null===e||e instanceof F?b=e:v.k("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new Q);b.Ht(c);b.pA(c);return b};
F.prototype.replaceJsonObjects=F.prototype.Kt=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Pa(a,c);v.Wa(d)&&v.xD(a,c,this.Kt(d))}else if(v.Wa(a)){for(c in a)if(d=a[c],v.Wa(d)&&(d=this.Kt(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,f=0;f<d.length;f++)if("number"!==typeof d[f]){e=!1;break}if(e){e=new G(w);for(f=0;f<d.length/2;f++)e.add(new w(d[2*f],d[2*f+1]));e.freeze();a[c]=e}}if("object"===typeof a){c=a;d=a["class"];if("NaN"===d)c=NaN;else if("Date"===
d)c=new Date(a.value);else if("go.Point"===d)c=new w(ue(a.x),ue(a.y));else if("go.Size"===d)c=new ia(ue(a.width),ue(a.height));else if("go.Rect"===d)c=new z(ue(a.x),ue(a.y),ue(a.width),ue(a.height));else if("go.Margin"===d)c=new tb(ue(a.top),ue(a.right),ue(a.bottom),ue(a.left));else if("go.Spot"===d)c="string"===typeof a["enum"]?wb(a["enum"]):new L(ue(a.x),ue(a.y),ue(a.offsetX),ue(a.offsetY));else if("go.Brush"===d){if(c=new ha,c.type=Da(ha,a.type),"string"===typeof a.color&&(c.color=a.color),a.start instanceof
L&&(c.start=a.start),a.end instanceof L&&(c.end=a.end),"number"===typeof a.startRadius&&(c.Xt=ue(a.startRadius)),"number"===typeof a.endRadius&&(c.Us=ue(a.endRadius)),a=a.colorStops,v.Wa(a))for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d?(b=null,b="string"===typeof a.path?ud(a.path):new Xc,b.type=Da(Xc,a.type),"number"===typeof a.startX&&(b.Ia=ue(a.startX)),"number"===typeof a.startY&&(b.Ja=ue(a.startY)),"number"===typeof a.endX&&(b.J=ue(a.endX)),"number"===typeof a.endY&&(b.K=
ue(a.endY)),a.spot1 instanceof L&&(b.A=a.spot1),a.spot2 instanceof L&&(b.B=a.spot2),c=b):"go.EnumValue"===d&&(b=a.classType,0===b.indexOf("go.")&&(b=b.substr(3)),c=Da(ea[b],a.name));a=c}}return a};F.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
F.prototype.writeJsonValue=F.prototype.du=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.du(a.valueOf()):v.isArray(a)?re(this,a):v.Wa(a)?ge(this,a):"function"===typeof a?"null":a.toString()};
function re(a,b,c){void 0===c&&(c=!1);var d=v.Va(b);if(0>=d)return"[]";var e=new Ba;e.add("[ ");c&&1<d&&e.add("\n");for(var f=0;f<d;f++){var h=v.Pa(b,f);void 0!==h&&(0<f&&(e.add(","),c&&e.add("\n")),e.add(a.du(h)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function fe(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function ve(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function ge(a,b){var c=b;if(c instanceof w){var d=c;b={"class":"go.Point",x:ve(d.x),y:ve(d.y)}}else if(c instanceof ia){var e=c;b={"class":"go.Size",width:ve(e.width),height:ve(e.height)}}else if(c instanceof z)b={"class":"go.Rect",x:ve(c.x),y:ve(c.y),width:ve(c.width),height:ve(c.height)};else if(c instanceof tb)b={"class":"go.Margin",top:ve(c.top),right:ve(c.right),bottom:ve(c.bottom),left:ve(c.left)};else if(c instanceof L)e=c,b=e.yd()?{"class":"go.Spot",x:ve(e.x),y:ve(e.y),offsetX:ve(e.offsetX),
offsetY:ve(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof ha){b={"class":"go.Brush",type:c.type.name};if(c.type===we)b.color=c.color;else if(c.type===xe||c.type===ye)b.start=c.start,b.end=c.end,c.type===ye&&(0!==c.Xt&&(b.startRadius=ve(c.Xt)),isNaN(c.Us)||(b.endRadius=ve(c.Us)));if(null!==c.Rs){for(var f={},h=c.Rs.i;h.next();)f[h.key]=h.value;b.colorStops=f}}else if(c instanceof Xc)b={"class":"go.Geometry",type:c.type.name},0!==c.Ia&&(b.startX=ve(c.Ia)),0!==c.Ja&&(b.startY=
ve(c.Ja)),0!==c.J&&(b.endX=ve(c.J)),0!==c.K&&(b.endY=ve(c.K)),c.A.L(zb)||(b.spot1=c.A),c.B.L(Vb)||(b.spot2=c.B),c.type===cd&&(b.path=td(c));else if(c instanceof fa)b={"class":"go.EnumValue",classType:v.nf(c.je),name:c.name};else if(c instanceof R||c instanceof E||c instanceof ze||c instanceof F||c instanceof Le||c instanceof sa||c instanceof Me||c instanceof wa||c instanceof de||c instanceof se)return v.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+
c.toString()),"{}";f="{";c=!0;for(d in b)if(e=v.kb(b,d),!fe(d,e))if(c?c=!1:f+=", ",f+='"'+d+'":',"points"===d&&e instanceof G&&e.ia===w){h=e;e="[";for(h=h.i;h.next();){var k=h.value;1<e.length&&(e+=",");e+=a.du(k.x);e+=",";e+=a.du(k.y)}e+="]";f+=e}else f+=a.du(e);return f+"}"}function ue(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}
v.defineProperty(F,{name:"name"},function(){return this.Ob},function(a){var b=this.Ob;b!==a&&(v.j(a,"string",F,"name"),this.Ob=a,this.h("name",b,a))});v.defineProperty(F,{cl:"dataFormat"},function(){return this.nq},function(a){var b=this.nq;b!==a&&(v.j(a,"string",F,"dataFormat"),this.nq=a,this.h("dataFormat",b,a))});v.defineProperty(F,{gb:"isReadOnly"},function(){return this.qi},function(a){var b=this.qi;b!==a&&(v.j(a,"boolean",F,"isReadOnly"),this.qi=a,this.h("isReadOnly",b,a))});
v.defineProperty(F,{yt:"modelData"},function(){return this.Ny},function(a){var b=this.Ny;b!==a&&(v.j(a,"object",F,"modelData"),this.Ny=a,this.h("modelData",b,a),this.Ib(a))});F.prototype.addChangedListener=F.prototype.zm=function(a){v.j(a,"function",F,"addChangedListener:listener");null===this.uj&&(this.uj=new G("function"));this.uj.add(a)};
F.prototype.removeChangedListener=F.prototype.It=function(a){v.j(a,"function",F,"removeChangedListener:listener");null!==this.uj&&(this.uj.remove(a),0===this.uj.count&&(this.uj=null))};F.prototype.sw=function(a){this.lb||this.ja.jE(a);if(null!==this.uj){var b=this.uj,c=b.length;if(1===c)b=b.ha(0),b(a);else if(0!==c)for(var d=b.ed(),e=0;e<c;e++)b=d[e],b(a)}};F.prototype.raiseChangedEvent=F.prototype.Ec=function(a,b,c,d,e,f,h){Ne(this,"",a,b,c,d,e,f,h)};
F.prototype.raiseChanged=F.prototype.h=function(a,b,c,d,e){Ne(this,"",Od,a,this,b,c,d,e)};F.prototype.raiseDataChanged=F.prototype.nA=function(a,b,c,d,e,f){Ne(this,"",Od,b,a,c,d,e,f)};function Ne(a,b,c,d,e,f,h,k,l){void 0===k&&(k=null);void 0===l&&(l=null);var m=new Nd;m.da=a;m.Ac=c;m.cf=b;m.propertyName=d;m.object=e;m.oldValue=f;m.xg=k;m.newValue=h;m.vg=l;a.sw(m)}
v.defineProperty(F,{ja:"undoManager"},function(){return this.fz},function(a){var b=this.fz;b!==a&&(v.C(a,de,F,"undoManager"),null!==b&&b.EI(this),this.fz=a,null!==a&&a.tG(this))});v.defineProperty(F,{lb:"skipsUndoManager"},function(){return this.Ei},function(a){v.j(a,"boolean",F,"skipsUndoManager");this.Ei=a});
F.prototype.Em=function(a,b){if(null!==a&&a.da===this)if(a.Ac===Od){var c=a.object,d=a.propertyName,e=a.la(b);v.Ha(c,d,e)}else a.Ac===Qd?"nodeDataArray"===a.cf?(c=a.newValue,v.Wa(c)&&(d=this.mb(c),void 0!==d&&(b?(v.Th(this.kf,a.vg),this.rc.remove(d)):(v.Mi(this.kf,a.vg,c),this.rc.add(d,c))))):""===a.cf?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.kb(a.object,a.propertyName)),v.isArray(c)&&(d=a.newValue,e=a.vg,b?v.Th(c,e):v.Mi(c,e,d))):v.k("unknown ChangedEvent.Insert object: "+a.toString()):a.Ac===
be?"nodeDataArray"===a.cf?(c=a.oldValue,v.Wa(c)&&(d=this.mb(c),void 0!==d&&(b?(v.Mi(this.kf,a.xg,c),this.rc.add(d,c)):(v.Th(this.kf,a.xg),this.rc.remove(d))))):""===a.cf?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.kb(a.object,a.propertyName)),v.isArray(c)&&(d=a.oldValue,e=a.xg,b?v.Mi(c,e,d):v.Th(c,e))):v.k("unknown ChangedEvent.Remove object: "+a.toString()):a.Ac!==Pd&&v.k("unknown ChangedEvent: "+a.toString())};F.prototype.startTransaction=F.prototype.Qb=function(a){return this.ja.Qb(a)};
F.prototype.commitTransaction=F.prototype.wd=function(a){return this.ja.wd(a)};F.prototype.rollbackTransaction=F.prototype.wp=function(){return this.ja.wp()};F.prototype.updateTargetBindings=F.prototype.Ib=function(a,b){void 0===b&&(b="");Ne(this,"SourceChanged",Pd,b,a,null,null)};
v.defineProperty(F,{wl:"nodeKeyProperty"},function(){return this.Aj},function(a){var b=this.Aj;b!==a&&(Oe(a,F,"nodeKeyProperty"),""===a&&v.k("Model.nodeKeyProperty may not be the empty string"),0<this.rc.count&&v.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Aj=a,this.h("nodeKeyProperty",b,a))});function Oe(a,b,c){"string"!==typeof a&&"function"!==typeof a&&v.Ad(a,"string or function",b,c)}
F.prototype.getKeyForNodeData=F.prototype.mb=function(a){if(null!==a){var b=this.Aj;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("Key value for node data "+a+" is not a number or a string: "+b)}}};
F.prototype.setKeyForNodeData=F.prototype.vx=function(a,b){void 0!==b&&null!==b&&Pe(b)||v.Ad(b,"number or string",F,"setKeyForNodeData:key");if(null!==a){var c=this.Aj;if(""!==c)if(this.Fe(a)){var d=v.kb(a,c);d!==b&&null===this.ke(b)&&(v.Ha(a,c,b),this.rc.remove(d),this.rc.add(b,a),Ne(this,"nodeKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c),this.Jt(d,b))}else v.Ha(a,c,b)}};
v.defineProperty(F,{DK:"makeUniqueKeyFunction"},function(){return this.fm},function(a){var b=this.fm;b!==a&&(null!==a&&v.j(a,"function",F,"makeUniqueKeyFunction"),this.fm=a,this.h("makeUniqueKeyFunction",b,a))});function Pe(a){return"number"===typeof a||"string"===typeof a}F.prototype.containsNodeData=F.prototype.Fe=function(a){var b=this.mb(a);return void 0===b?!1:this.rc.la(b)===a};
F.prototype.findNodeDataForKey=F.prototype.ke=function(a){null===a&&v.k("Model.findNodeDataForKey:key must not be null");return void 0!==a&&Pe(a)?this.rc.la(a):null};
v.defineProperty(F,{dh:"nodeDataArray"},function(){return this.kf},function(a){var b=this.kf;if(b!==a){v.oz(a,F,"nodeDataArray");this.rc.clear();this.NA();for(var c=v.Va(a),d=0;d<c;d++){var e=v.Pa(a,d);if(!v.Wa(e)){v.k("Model.nodeDataArray must only contain Objects, not: "+e);return}v.ht(e)}this.kf=a;for(var f=new G(Object),d=0;d<c;d++){var e=v.Pa(a,d),h=this.mb(e);void 0===h?f.add(e):null!==this.rc.la(h)?f.add(e):this.rc.add(h,e)}for(d=f.i;d.next();)e=d.value,this.EE(e),f=this.mb(e),void 0!==f&&
this.rc.add(f,e);Ne(this,"nodeDataArray",Od,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=v.Pa(a,d),this.vp(e),this.tp(e);this.DD();v.QH(a)||(this.gb=!0)}});
F.prototype.makeNodeDataKeyUnique=F.prototype.EE=function(a){if(null!==a){var b=this.Aj;if(""!==b){var c=this.mb(a);if(void 0===c||this.rc.contains(c)){var d=this.fm;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.rc.contains(c))){v.Ha(a,b,c);return}if("string"===typeof c){for(d=2;this.rc.contains(c+d);)d++;v.Ha(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.rc.count-1;this.rc.contains(d);)d--;v.Ha(a,b,d)}else v.k("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};F.prototype.addNodeData=F.prototype.Vk=function(a){if(null!==a){v.ht(a);var b=this.mb(a);if(void 0===b||this.rc.la(b)!==a)this.EE(a),b=this.mb(a),void 0===b?v.k("Model.makeNodeDataKeyUnique failed on "+a+".  Data not added to Model."):(this.rc.add(b,a),b=v.Va(this.kf),v.Mi(this.kf,b,a),Ne(this,"nodeDataArray",Qd,"nodeDataArray",this,null,a,null,b),this.vp(a),this.tp(a))}};
F.prototype.addNodeDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.Vk(v.Pa(a,c));else for(a=a.i;a.next();)this.Vk(a.value)};F.prototype.removeNodeData=F.prototype.mx=function(a){if(null!==a){var b=this.mb(a);void 0!==b&&this.rc.contains(b)&&(this.rc.remove(b),b=v.nz(this.kf,a),0>b||(v.Th(this.kf,b),Ne(this,"nodeDataArray",be,"nodeDataArray",this,a,null,b,null),this.bu(a)))}};
F.prototype.removeNodeDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.mx(v.Pa(a,c));else for(a=a.i;a.next();)this.mx(a.value)};g=F.prototype;g.Jt=function(a,b){var c=Qe(this,a);c instanceof H&&this.yh.add(b,c)};g.NA=function(){};g.vp=function(){};g.tp=function(){};g.bu=function(){};function Re(a,b,c){if(void 0!==b){var d=a.yh.la(b);null===d&&(d=new H(Object),a.yh.add(b,d));d.add(c)}}
function Se(a,b,c){if(void 0!==b){var d=a.yh.la(b);d instanceof H&&(void 0===c||null===c?a.yh.remove(b):(d.remove(c),0===d.count&&a.yh.remove(b)))}}function Qe(a,b){if(void 0===b)return null;var c=a.yh.la(b);return c instanceof H?c:null}F.prototype.clearUnresolvedReferences=F.prototype.DD=function(a){void 0===a?this.yh.clear():this.yh.remove(a)};
v.defineProperty(F,{TJ:"copyNodeDataFunction"},function(){return this.vn},function(a){var b=this.vn;b!==a&&(null!==a&&v.j(a,"function",F,"copyNodeDataFunction"),this.vn=a,this.h("copyNodeDataFunction",b,a))});v.defineProperty(F,{wz:"copiesArrays"},function(){return this.Cu},function(a){var b=this.Cu;b!==a&&(null!==a&&v.j(a,"boolean",F,"copiesArrays"),this.Cu=a,this.h("copiesArrays",b,a))});
v.defineProperty(F,{vz:"copiesArrayObjects"},function(){return this.fq},function(a){var b=this.fq;b!==a&&(null!==a&&v.j(a,"boolean",F,"copiesArrayObjects"),this.fq=a,this.h("copiesArrayObjects",b,a))});F.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.vn,b=null!==b?b(a,this):Te(this,a,!0);v.Wa(b)&&v.cc(b);return b};
function Te(a,b,c){if(a.wz&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=Te(a,b[c],a.vz);d.push(e)}v.cc(d);return d}if(c&&v.Wa(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=v.kb(b,d),f;f=e;f instanceof R||f instanceof E||f instanceof ze||f instanceof Ue||f instanceof $e||f instanceof Le||f instanceof sa||f instanceof Me||f instanceof Ld||f instanceof Md?("_"!==d[0]&&v.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+
d+'" of data object: '+b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+f.toString()),f=!0):f=f instanceof F||f instanceof de||f instanceof se||f instanceof Nd?!0:!1;f||(e=Te(a,e,!1));v.Ha(c,d,e)}v.cc(c);return c}return b instanceof w?b.copy():b instanceof ia?b.copy():b instanceof z?b.copy():b instanceof L?b.copy():b instanceof tb?b.copy():b}
v.defineProperty(F,{vG:"afterCopyFunction"},function(){return this.Tp},function(a){var b=this.Tp;b!==a&&(null!==a&&v.j(a,"function",F,"afterCopyFunction"),this.Tp=a,this.h("afterCopyFunction",b,a))});var af=!1;
F.prototype.setDataProperty=function(a,b,c){if(this.Fe(a))if(b===this.wl)this.vx(a,c);else{if(b===this.Zm){this.sx(a,c);return}}else!af&&a instanceof R&&(af=!0,v.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.kb(a,b);d!==c&&(v.Ha(a,b,c),this.nA(a,b,d,c))};F.prototype.addArrayItem=function(a,b){this.KH(a,-1,b)};
F.prototype.insertArrayItem=F.prototype.KH=function(a,b,c){a===this.kf&&v.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=v.Va(a));v.Mi(a,b,c);Ne(this,"",Qd,"",a,null,c,null,b)};F.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1);a===this.kf&&v.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=v.Va(a)-1);var c=v.Pa(a,b);v.Th(a,b);Ne(this,"",be,"",a,c,null,b,null)};
v.defineProperty(F,{Zm:"nodeCategoryProperty"},function(){return this.hm},function(a){var b=this.hm;b!==a&&(Oe(a,F,"nodeCategoryProperty"),this.hm=a,this.h("nodeCategoryProperty",b,a))});F.prototype.getCategoryForNodeData=F.prototype.Iz=function(a){if(null===a)return"";var b=this.hm;if(""===b)return"";b=v.kb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
F.prototype.setCategoryForNodeData=F.prototype.sx=function(a,b){v.j(b,"string",F,"setCategoryForNodeData:cat");if(null!==a){var c=this.hm;if(""!==c)if(this.Fe(a)){var d=v.kb(a,c);void 0===d&&(d="");d!==b&&(v.Ha(a,c,b),Ne(this,"nodeCategory",Od,c,a,d,b))}else v.Ha(a,c,b)}};
function Q(a,b){2<arguments.length&&v.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");F.call(this);this.jf=[];this.cm=new H(Object);this.ld=new ma(null,Object);this.Hk="";this.sk=this.un=this.fr=null;this.Fh="from";this.Gh="to";this.em=this.dm="";this.bm="category";this.cg="";this.ho="isGroup";this.Ng="group";this.gq=!1;void 0!==a&&(this.dh=a);void 0!==b&&(this.$h=b)}v.Ga(Q,F);v.ga("GraphLinksModel",Q);
Q.prototype.cloneProtected=function(a){F.prototype.cloneProtected.call(this,a);a.Hk=this.Hk;a.fr=this.fr;a.un=this.un;a.Fh=this.Fh;a.Gh=this.Gh;a.dm=this.dm;a.em=this.em;a.bm=this.bm;a.cg=this.cg;a.ho=this.ho;a.Ng=this.Ng;a.gq=this.gq};Q.prototype.clear=Q.prototype.clear=function(){F.prototype.clear.call(this);this.jf=[];this.ld.clear();this.cm.clear()};g=Q.prototype;
g.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.KA();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.dh;for(var c=v.Va(a),d=0,d=0;d<c;d++)var e=v.Pa(a,d),b=b+(" "+this.mb(e)+":"+ce(e));b+="\n link data:";a=this.$h;c=v.Va(a);for(d=0;d<c;d++)e=v.Pa(a,d),b+=" "+this.kl(e)+"--\x3e"+this.nl(e)}return b};
g.Ip=function(){var a=F.prototype.Ip.call(this),b="";"category"!==this.st&&"string"===typeof this.st&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.st));""!==this.$j&&"string"===typeof this.$j&&(b+=',\n  "linkKeyProperty": '+this.quote(this.$j));"from"!==this.ep&&"string"===typeof this.ep&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.ep));"to"!==this.gp&&"string"===typeof this.gp&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.gp));""!==this.tt&&"string"===typeof this.tt&&(b+=',\n  "linkFromPortIdProperty": '+
this.quote(this.tt));""!==this.vt&&"string"===typeof this.vt&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.vt));""!==this.ut&&"string"===typeof this.ut&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.ut));"isGroup"!==this.Dt&&"string"===typeof this.Dt&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Dt));"group"!==this.pp&&"string"===typeof this.pp&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.pp));return a+b};
g.Ht=function(a){F.prototype.Ht.call(this,a);a.linkKeyProperty&&(this.$j=a.linkKeyProperty);a.linkFromKeyProperty&&(this.ep=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.gp=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.tt=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.vt=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.st=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.ut=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.Dt=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&
(this.pp=a.nodeGroupKeyProperty)};g.SA=function(){var a=F.prototype.SA.call(this),b=',\n  "linkDataArray": '+re(this,this.$h,!0);return a+b};g.pA=function(a){F.prototype.pA.call(this,a);a=a.linkDataArray;v.isArray(a)&&(this.Kt(a),this.$h=a)};
g.RA=function(a,b){""===this.$j&&v.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var c=F.prototype.RA.call(this,a,b),d=this,e=new H,f=new H,h=new H;a.Gf.each(function(a){a.da===d&&("linkDataArray"===a.cf?a.Ac===Qd?e.add(a.newValue):a.Ac===be&&h.add(a.oldValue):d.Vg(a.object)&&f.add(a.object))});var k=new H;e.each(function(a){k.add(d.Jf(a));b||f.add(a)});var l=new H;h.each(function(a){l.add(d.Jf(a));b&&f.add(a)});return c+(b?',\n  "removedLinkKeys": ':
',\n  "insertedLinkKeys": ')+re(this,k.ed(),!0)+',\n  "modifiedLinkData": '+re(this,f.ed(),!0)+(b?',\n  "insertedLinkKeys": ':',\n  "removedLinkKeys": ')+re(this,l.ed(),!0)};
g.oA=function(a){F.prototype.oA.call(this,a);var b=a.insertedLinkKeys;if(v.isArray(b))for(var c=v.Va(b),d=0;d<c;d++){var e=v.Pa(b,d),f=this.Ew(e);null===f&&(f=this.xz({}),this.lF(f,e),this.Gs(f))}b=a.modifiedLinkData;if(v.isArray(b))for(c=v.Va(b),d=0;d<c;d++){var h=v.Pa(b,d),e=this.Jf(h),f=this.Ew(e);if(null!==f)for(var k in h)"__gohashid"!==k&&k!==this.$j&&this.setDataProperty(f,k,h[k])}a=a.removedLinkKeys;if(v.isArray(a))for(c=v.Va(a),d=0;d<c;d++)e=v.Pa(a,d),f=this.Ew(e),null!==f&&this.lx(f)};
g.Em=function(a,b){var c=null;if(a.Ac===Qd){if("linkDataArray"===a.cf?c=this.jf:"linkLabelKeys"===a.cf&&(c=this.Xj(a.object)),v.isArray(c)){if(b)v.Th(c,a.vg),c===this.jf&&(c=this.Jf(a.newValue),void 0!==c&&this.ld.remove(c));else if(v.Mi(c,a.vg,a.newValue),c===this.jf){var d=a.newValue,c=this.Jf(d);void 0!==c&&this.ld.add(c,d)}return}}else if(a.Ac===be&&("linkDataArray"===a.cf?c=this.jf:"linkLabelKeys"===a.cf&&(c=this.Xj(a.object)),v.isArray(c))){b?(v.Mi(c,a.xg,a.oldValue),c===this.jf&&(d=a.newValue,
c=this.Jf(d),void 0!==c&&this.ld.add(c,d))):(v.Th(c,a.xg),c===this.jf&&(c=this.Jf(a.newValue),void 0!==c&&this.ld.remove(c)));return}F.prototype.Em.call(this,a,b)};v.defineProperty(Q,{mz:"archetypeNodeData"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(null!==a&&v.C(a,Object,Q,"archetypeNodeData"),this.sk=a,this.h("archetypeNodeData",b,a))});Q.prototype.Xm=function(a){if(void 0!==a){var b=this.sk;if(null!==b){var c=this.ke(a);null===c&&(c=this.copyNodeData(b),v.Ha(c,this.Aj,a),this.Vk(c))}return a}};
v.defineProperty(Q,{ep:"linkFromKeyProperty"},function(){return this.Fh},function(a){var b=this.Fh;b!==a&&(Oe(a,Q,"linkFromKeyProperty"),this.Fh=a,this.h("linkFromKeyProperty",b,a))});Q.prototype.getFromKeyForLinkData=Q.prototype.kl=function(a){if(null!==a){var b=this.Fh;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setFromKeyForLinkData=Q.prototype.tx=function(a,b){null===b&&(b=void 0);void 0===b||Pe(b)||v.Ad(b,"number or string",Q,"setFromKeyForLinkData:key");if(null!==a){var c=this.Fh;if(""!==c)if(b=this.Xm(b),this.Vg(a)){var d=v.kb(a,c);d!==b&&(Se(this,d,a),v.Ha(a,c,b),null===this.ke(b)&&Re(this,b,a),Ne(this,"linkFromKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
v.defineProperty(Q,{gp:"linkToKeyProperty"},function(){return this.Gh},function(a){var b=this.Gh;b!==a&&(Oe(a,Q,"linkToKeyProperty"),this.Gh=a,this.h("linkToKeyProperty",b,a))});Q.prototype.getToKeyForLinkData=Q.prototype.nl=function(a){if(null!==a){var b=this.Gh;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setToKeyForLinkData=Q.prototype.wx=function(a,b){null===b&&(b=void 0);void 0===b||Pe(b)||v.Ad(b,"number or string",Q,"setToKeyForLinkData:key");if(null!==a){var c=this.Gh;if(""!==c)if(b=this.Xm(b),this.Vg(a)){var d=v.kb(a,c);d!==b&&(Se(this,d,a),v.Ha(a,c,b),null===this.ke(b)&&Re(this,b,a),Ne(this,"linkToKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
v.defineProperty(Q,{tt:"linkFromPortIdProperty"},function(){return this.dm},function(a){var b=this.dm;b!==a&&(Oe(a,Q,"linkFromPortIdProperty"),this.dm=a,this.h("linkFromPortIdProperty",b,a))});Q.prototype.getFromPortIdForLinkData=Q.prototype.sH=function(a){if(null===a)return"";var b=this.dm;if(""===b)return"";a=v.kb(a,b);return void 0===a?"":a};
Q.prototype.setFromPortIdForLinkData=Q.prototype.AA=function(a,b){v.j(b,"string",Q,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.dm;if(""!==c)if(this.Vg(a)){var d=v.kb(a,c);void 0===d&&(d="");d!==b&&(v.Ha(a,c,b),Ne(this,"linkFromPortId",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};v.defineProperty(Q,{vt:"linkToPortIdProperty"},function(){return this.em},function(a){var b=this.em;b!==a&&(Oe(a,Q,"linkToPortIdProperty"),this.em=a,this.h("linkToPortIdProperty",b,a))});
Q.prototype.getToPortIdForLinkData=Q.prototype.vH=function(a){if(null===a)return"";var b=this.em;if(""===b)return"";a=v.kb(a,b);return void 0===a?"":a};Q.prototype.setToPortIdForLinkData=Q.prototype.EA=function(a,b){v.j(b,"string",Q,"setToPortIdForLinkData:portname");if(null!==a){var c=this.em;if(""!==c)if(this.Vg(a)){var d=v.kb(a,c);void 0===d&&(d="");d!==b&&(v.Ha(a,c,b),Ne(this,"linkToPortId",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
v.defineProperty(Q,{ut:"linkLabelKeysProperty"},function(){return this.cg},function(a){var b=this.cg;b!==a&&(Oe(a,Q,"linkLabelKeysProperty"),this.cg=a,this.h("linkLabelKeysProperty",b,a))});Q.prototype.getLabelKeysForLinkData=Q.prototype.Xj=function(a){if(null===a)return v.qh;var b=this.cg;if(""===b)return v.qh;a=v.kb(a,b);return void 0===a?v.qh:a};
Q.prototype.setLabelKeysForLinkData=Q.prototype.mF=function(a,b){v.oz(b,Q,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.cg;if(""!==c)if(this.Vg(a)){var d=v.kb(a,c);void 0===d&&(d=v.qh);if(d!==b){for(var e=v.Va(d),f=0;f<e;f++){var h=v.Pa(d,f);Se(this,h,a)}v.Ha(a,c,b);e=v.Va(b);for(f=0;f<e;f++)h=v.Pa(b,f),null===this.ke(h)&&Re(this,h,a);Ne(this,"linkLabelKeys",Od,c,a,d,b);"string"===typeof c&&this.Ib(a,c)}}else v.Ha(a,c,b)}};
Q.prototype.addLabelKeyForLinkData=Q.prototype.jz=function(a,b){if(null!==b&&void 0!==b&&(Pe(b)||v.Ad(b,"number or string",Q,"addLabelKeyForLinkData:key"),null!==a)){var c=this.cg;if(""!==c){var d=v.kb(a,c);void 0===d?(c=[],c.push(b),this.mF(a,c)):v.isArray(d)?0<=v.nz(d,b)||(v.Mi(d,Infinity,b),this.Vg(a)&&(null===this.ke(b)&&Re(this,b,a),Ne(this,"linkLabelKeys",Qd,c,a,null,b))):v.k(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
Q.prototype.removeLabelKeyForLinkData=Q.prototype.TE=function(a,b){if(null!==b&&void 0!==b&&(Pe(b)||v.Ad(b,"number or string",Q,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.cg;if(""!==c){var d=v.kb(a,c);if(v.isArray(d)){var e=v.nz(d,b);0>e||(v.Th(d,e),this.Vg(a)&&(Se(this,b,a),Ne(this,"linkLabelKeys",be,c,a,b,null)))}else void 0!==d&&v.k(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
v.defineProperty(Q,{$h:"linkDataArray"},function(){return this.jf},function(a){var b=this.jf;if(b!==a){v.oz(a,Q,"linkDataArray");this.ld.clear();for(var c=v.Va(a),d=0;d<c;d++){var e=v.Pa(a,d);if(!v.Wa(e)){v.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}v.ht(e)}this.jf=a;if(""!==this.$j){for(var f=new G(Object),d=0;d<c;d++){var e=v.Pa(a,d),h=this.Jf(e);void 0===h?f.add(e):null!==this.ld.la(h)?f.add(e):this.ld.add(h,e)}for(d=f.i;d.next();)e=d.value,this.DE(e),f=this.Jf(e),
void 0!==f&&this.ld.add(f,e)}f=new H(Object);for(d=0;d<c;d++)e=v.Pa(a,d),f.add(e);this.cm=f;Ne(this,"linkDataArray",Od,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=v.Pa(a,d),bf(this,e)}});v.defineProperty(Q,{$j:"linkKeyProperty"},function(){return this.Hk},function(a){var b=this.Hk;if(b!==a){Oe(a,Q,"linkKeyProperty");this.Hk=a;this.ld.clear();for(var c=v.Va(this.$h),d=0;d<c;d++){var e=v.Pa(this.$h,d),f=this.Jf(e);void 0!==f&&this.ld.add(f,e)}this.h("linkKeyProperty",b,a)}});
Q.prototype.getKeyForLinkData=Q.prototype.Jf=function(a){if(null!==a){var b=this.Hk;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("Key value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setKeyForLinkData=Q.prototype.lF=function(a,b){void 0!==b&&null!==b&&Pe(b)||v.Ad(b,"number or string",Q,"setKeyForLinkData:key");if(null!==a){var c=this.Hk;if(""!==c)if(this.Vg(a)){var d=v.kb(a,c);d!==b&&null===this.Ew(b)&&(v.Ha(a,c,b),this.ld.remove(d),this.ld.add(b,a),Ne(this,"linkKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
v.defineProperty(Q,{EK:"makeUniqueLinkKeyFunction"},function(){return this.fr},function(a){var b=this.fr;b!==a&&(null!==a&&v.j(a,"function",Q,"makeUniqueLinkKeyFunction"),this.fr=a,this.h("makeUniqueLinkKeyFunction",b,a))});Q.prototype.findLinkDataForKey=Q.prototype.Ew=function(a){null===a&&v.k("GraphLinksModel.findLinkDataForKey:key must not be null");return void 0!==a&&Pe(a)?this.ld.la(a):null};
Q.prototype.makeLinkDataKeyUnique=Q.prototype.DE=function(a){if(null!==a){var b=this.Hk;if(""!==b){var c=this.Jf(a);if(void 0===c||this.ld.contains(c)){var d=this.fm;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.ld.contains(c))){v.Ha(a,b,c);return}if("string"===typeof c){for(d=2;this.ld.contains(c+d);)d++;v.Ha(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.ld.count-1;this.ld.contains(d);)d--;v.Ha(a,b,d)}else v.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+
c)}}}};Q.prototype.containsLinkData=Q.prototype.Vg=function(a){return null===a?!1:this.cm.contains(a)};
Q.prototype.addLinkData=Q.prototype.Gs=function(a){if(null!==a){if(void 0===v.cd(a))v.cc(a);else if(this.Vg(a))return;if(""!==this.$j){var b=this.Jf(a);if(void 0!==b&&this.ld.la(b)===a)return;this.DE(a);b=this.Jf(a);if(void 0===b){v.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+a+". Data not added to model.");return}this.ld.add(b,a)}this.cm.add(a);b=v.Va(this.jf);v.Mi(this.jf,b,a);Ne(this,"linkDataArray",Qd,"linkDataArray",this,null,a,null,b);bf(this,a)}};
Q.prototype.addLinkDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.Gs(v.Pa(a,c));else for(a=a.i;a.next();)this.Gs(a.value)};
Q.prototype.removeLinkData=Q.prototype.lx=function(a){if(null!==a){this.cm.remove(a);var b=this.Jf(a);void 0!==b&&this.ld.remove(b);b=this.jf.indexOf(a);if(!(0>b)){v.Th(this.jf,b);Ne(this,"linkDataArray",be,"linkDataArray",this,a,null,b,null);b=this.kl(a);Se(this,b,a);b=this.nl(a);Se(this,b,a);var c=this.Xj(a);if(v.isArray(c))for(var d=v.Va(c),e=0;e<d;e++)b=v.Pa(c,e),Se(this,b,a)}}};
Q.prototype.removeLinkDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.lx(v.Pa(a,c));else for(a=a.i;a.next();)this.lx(a.value)};function bf(a,b){var c=a.kl(b),c=a.Xm(c);null===a.ke(c)&&Re(a,c,b);c=a.nl(b);c=a.Xm(c);null===a.ke(c)&&Re(a,c,b);var d=a.Xj(b);if(v.isArray(d))for(var e=v.Va(d),f=0;f<e;f++)c=v.Pa(d,f),null===a.ke(c)&&Re(a,c,b)}
v.defineProperty(Q,{SJ:"copyLinkDataFunction"},function(){return this.un},function(a){var b=this.un;b!==a&&(null!==a&&v.j(a,"function",Q,"copyLinkDataFunction"),this.un=a,this.h("copyLinkDataFunction",b,a))});Q.prototype.copyLinkData=Q.prototype.xz=function(a){if(null===a)return null;var b=null,b=this.un,b=null!==b?b(a,this):Te(this,a,!0);v.Wa(b)&&(v.cc(b),""!==this.Fh&&v.Ha(b,this.Fh,void 0),""!==this.Gh&&v.Ha(b,this.Gh,void 0),""!==this.cg&&v.Ha(b,this.cg,[]));return b};
v.defineProperty(Q,{Dt:"nodeIsGroupProperty"},function(){return this.ho},function(a){var b=this.ho;b!==a&&(Oe(a,Q,"nodeIsGroupProperty"),this.ho=a,this.h("nodeIsGroupProperty",b,a))});Q.prototype.isGroupForNodeData=Q.prototype.Rz=function(a){if(null===a)return!1;var b=this.ho;return""===b?!1:v.kb(a,b)?!0:!1};v.defineProperty(Q,{pp:"nodeGroupKeyProperty"},function(){return this.Ng},function(a){var b=this.Ng;b!==a&&(Oe(a,Q,"nodeGroupKeyProperty"),this.Ng=a,this.h("nodeGroupKeyProperty",b,a))});
v.defineProperty(Q,{Im:"copiesGroupKeyOfNodeData"},function(){return this.gq},function(a){this.gq!==a&&(v.j(a,"boolean",Q,"copiesGroupKeyOfNodeData"),this.gq=a)});Q.prototype.getGroupKeyForNodeData=Q.prototype.Rm=function(a){if(null!==a){var b=this.Ng;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setGroupKeyForNodeData=Q.prototype.ux=function(a,b){null===b&&(b=void 0);void 0===b||Pe(b)||v.Ad(b,"number or string",Q,"setGroupKeyForNodeData:key");if(null!==a){var c=this.Ng;if(""!==c)if(this.Fe(a)){var d=v.kb(a,c);d!==b&&(Se(this,d,a),v.Ha(a,c,b),null===this.ke(b)&&Re(this,b,a),Ne(this,"nodeGroupKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
Q.prototype.copyNodeData=function(a){if(null===a)return null;a=F.prototype.copyNodeData.call(this,a);this.Im||""===this.Ng||void 0===v.kb(a,this.Ng)||v.Ha(a,this.Ng,void 0);return a};
Q.prototype.setDataProperty=function(a,b,c){if(this.Fe(a))if(b===this.wl)this.vx(a,c);else{if(b===this.Zm){this.sx(a,c);return}if(b===this.pp){this.ux(a,c);return}b===this.Dt&&v.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.Vg(a)){if(b===this.ep){this.tx(a,c);return}if(b===this.gp){this.wx(a,c);return}if(b===this.tt){this.AA(a,c);return}if(b===this.vt){this.EA(a,c);return}if(b===this.$j){this.lF(a,c);return}if(b===this.st){this.kF(a,c);return}if(b===
this.ut){this.mF(a,c);return}}else!af&&a instanceof R&&(af=!0,v.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.kb(a,b);d!==c&&(v.Ha(a,b,c),this.nA(a,b,d,c))};g=Q.prototype;
g.Jt=function(a,b){F.prototype.Jt.call(this,a,b);for(var c=this.rc.i;c.next();)this.vA(c.value,a,b);for(var d=this.cm.i;d.next();){var e=c.value,f=a,h=b;if(this.kl(e)===f){var k=this.Fh;v.Ha(e,k,h);Ne(this,"linkFromKey",Od,k,e,f,h);"string"===typeof k&&this.Ib(e,k)}this.nl(e)===f&&(k=this.Gh,v.Ha(e,k,h),Ne(this,"linkToKey",Od,k,e,f,h),"string"===typeof k&&this.Ib(e,k));var l=this.Xj(e);if(v.isArray(l))for(var m=v.Va(l),k=this.cg,n=0;n<m;n++)v.Pa(l,n)===f&&(v.xD(l,n,h),Ne(this,"linkLabelKeys",Qd,k,
e,f,h))}};g.vA=function(a,b,c){if(this.Rm(a)===b){var d=this.Ng;v.Ha(a,d,c);Ne(this,"nodeGroupKey",Od,d,a,b,c);"string"===typeof d&&this.Ib(a,d)}};g.NA=function(){F.prototype.NA.call(this);for(var a=this.$h,b=v.Va(a),c=0;c<b;c++){var d=v.Pa(a,c);bf(this,d)}};
g.vp=function(a){F.prototype.vp.call(this,a);a=this.mb(a);var b=Qe(this,a);if(null!==b){for(var c=new G(Object),b=b.i;b.next();){var d=b.value;if(this.Fe(d)){if(this.Rm(d)===a){var e=this.Ng;Ne(this,"nodeGroupKey",Od,e,d,a,a);"string"===typeof e&&this.Ib(d,e);c.add(d)}}else{this.kl(d)===a&&(e=this.Fh,Ne(this,"linkFromKey",Od,e,d,a,a),"string"===typeof e&&this.Ib(d,e),c.add(d));this.nl(d)===a&&(e=this.Gh,Ne(this,"linkToKey",Od,e,d,a,a),"string"===typeof e&&this.Ib(d,e),c.add(d));var f=this.Xj(d);if(v.isArray(f))for(var h=
v.Va(f),e=this.cg,k=0;k<h;k++)v.Pa(f,k)===a&&(Ne(this,"linkLabelKeys",Qd,e,d,a,a),c.add(d))}}for(c=c.i;c.next();)Se(this,a,c.value)}};g.tp=function(a){F.prototype.tp.call(this,a);var b=this.Rm(a);null===this.ke(b)&&Re(this,b,a)};g.bu=function(a){F.prototype.bu.call(this,a);var b=this.Rm(a);Se(this,b,a)};v.defineProperty(Q,{st:"linkCategoryProperty"},function(){return this.bm},function(a){var b=this.bm;b!==a&&(Oe(a,Q,"linkCategoryProperty"),this.bm=a,this.h("linkCategoryProperty",b,a))});
Q.prototype.getCategoryForLinkData=Q.prototype.Iw=function(a){if(null===a)return"";var b=this.bm;if(""===b)return"";b=v.kb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
Q.prototype.setCategoryForLinkData=Q.prototype.kF=function(a,b){v.j(b,"string",Q,"setCategoryForLinkData:cat");if(null!==a){var c=this.bm;if(""===c)return"";if(this.Vg(a)){var d=v.kb(a,c);void 0===d&&(d="");d!==b&&(v.Ha(a,c,b),Ne(this,"linkCategory",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
function te(a){1<arguments.length&&v.k("TreeModel constructor can only take one optional argument, the Array of node data.");F.call(this);this.Og="parent";this.hq=!1;this.jm="parentLinkCategory";void 0!==a&&(this.dh=a)}v.Ga(te,F);v.ga("TreeModel",te);te.prototype.cloneProtected=function(a){F.prototype.cloneProtected.call(this,a);a.Og=this.Og;a.hq=this.hq;a.jm=this.jm};
te.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.KA();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.dh;for(var c=v.Va(a),d=0;d<c;d++)var e=v.Pa(a,d),b=b+(" "+this.mb(e)+":"+ce(e))}return b};te.prototype.Ip=function(){var a=F.prototype.Ip.call(this),b="";"parent"!==this.qp&&"string"===typeof this.qp&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.qp));return a+b};
te.prototype.Ht=function(a){F.prototype.Ht.call(this,a);a.nodeParentKeyProperty&&(this.qp=a.nodeParentKeyProperty)};te.prototype.Xm=function(a){return a};v.defineProperty(te,{qp:"nodeParentKeyProperty"},function(){return this.Og},function(a){var b=this.Og;b!==a&&(Oe(a,te,"nodeParentKeyProperty"),this.Og=a,this.h("nodeParentKeyProperty",b,a))});
v.defineProperty(te,{Jm:"copiesParentKeyOfNodeData"},function(){return this.hq},function(a){this.hq!==a&&(v.j(a,"boolean",te,"copiesParentKeyOfNodeData"),this.hq=a)});te.prototype.getParentKeyForNodeData=te.prototype.Sm=function(a){if(null!==a){var b=this.Og;if(""!==b&&(b=v.kb(a,b),void 0!==b)){if(Pe(b))return b;v.k("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
te.prototype.setParentKeyForNodeData=te.prototype.mh=function(a,b){null===b&&(b=void 0);void 0===b||Pe(b)||v.Ad(b,"number or string",te,"setParentKeyForNodeData:key");if(null!==a){var c=this.Og;if(""!==c)if(b=this.Xm(b),this.Fe(a)){var d=v.kb(a,c);d!==b&&(Se(this,d,a),v.Ha(a,c,b),null===this.ke(b)&&Re(this,b,a),Ne(this,"nodeParentKey",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
v.defineProperty(te,{ZK:"parentLinkCategoryProperty"},function(){return this.jm},function(a){var b=this.jm;b!==a&&(Oe(a,te,"parentLinkCategoryProperty"),this.jm=a,this.h("parentLinkCategoryProperty",b,a))});te.prototype.getParentLinkCategoryForNodeData=te.prototype.uH=function(a){if(null===a)return"";var b=this.jm;if(""===b)return"";b=v.kb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
te.prototype.setParentLinkCategoryForNodeData=te.prototype.UI=function(a,b){v.j(b,"string",te,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.jm;if(""===c)return"";if(this.Fe(a)){var d=v.kb(a,c);void 0===d&&(d="");d!==b&&(v.Ha(a,c,b),Ne(this,"parentLinkCategory",Od,c,a,d,b),"string"===typeof c&&this.Ib(a,c))}else v.Ha(a,c,b)}};
te.prototype.copyNodeData=function(a){if(null===a)return null;a=F.prototype.copyNodeData.call(this,a);this.Jm||""===this.Og||void 0===v.kb(a,this.Og)||v.Ha(a,this.Og,void 0);return a};
te.prototype.setDataProperty=function(a,b,c){if(this.Fe(a))if(b===this.wl)this.vx(a,c);else{if(b===this.Zm){this.sx(a,c);return}if(b===this.qp){this.mh(a,c);return}}else!af&&a instanceof R&&(af=!0,v.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.kb(a,b);d!==c&&(v.Ha(a,b,c),this.nA(a,b,d,c))};g=te.prototype;g.Jt=function(a,b){F.prototype.Jt.call(this,a,b);for(var c=this.rc.i;c.next();)this.vA(c.value,a,b)};
g.vA=function(a,b,c){if(this.Sm(a)===b){var d=this.Og;v.Ha(a,d,c);Ne(this,"nodeParentKey",Od,d,a,b,c);"string"===typeof d&&this.Ib(a,d)}};g.vp=function(a){F.prototype.vp.call(this,a);a=this.mb(a);var b=Qe(this,a);if(null!==b){for(var c=new G(Object),b=b.i;b.next();){var d=b.value;if(this.Fe(d)&&this.Sm(d)===a){var e=this.Og;Ne(this,"nodeParentKey",Od,e,d,a,a);"string"===typeof e&&this.Ib(d,e);c.add(d)}}for(c=c.i;c.next();)Se(this,a,c.value)}};
g.tp=function(a){F.prototype.tp.call(this,a);var b=this.Sm(a),b=this.Xm(b);null===this.ke(b)&&Re(this,b,a)};g.bu=function(a){F.prototype.bu.call(this,a);var b=this.Sm(a);Se(this,b,a)};
function cf(a,b,c){v.cc(this);this.Ea=!1;void 0===a?a="":v.j(a,"string",cf,"constructor:targetprop");void 0===b?b=a:v.j(b,"string",cf,"constructor:sourceprop");void 0===c?c=null:null!==c&&v.j(c,"function",cf,"constructor:conv");this.SC=-1;this.ig=null;this.Zv=a;this.Xv=this.$y=0;this.OC=null;this.dz=!1;this.Qv=b;this.Zx=c;this.My=df;this.Tx=null}v.ga("Binding",cf);var df;cf.OneWay=df=v.p(cf,"OneWay",1);var ef;cf.TwoWay=ef=v.p(cf,"TwoWay",2);
cf.parseEnum=function(a,b){v.j(a,"function",cf,"parseEnum:ctor");v.qb(b,a,cf,"parseEnum:defval");return function(c){c=Da(a,c);return null===c?b:c}};var ce;cf.toString=ce=function(a){var b=a;v.Wa(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};
cf.prototype.toString=function(){return"Binding("+this.Ax+":"+this.qF+(-1!==this.Dl?" "+this.Dl:"")+" "+this.mode.name+")"};cf.prototype.freeze=function(){this.Ea=!0;return this};cf.prototype.Na=function(){this.Ea=!1;return this};v.defineProperty(cf,{Dl:null},function(){return this.SC},function(a){v.I(this);v.j(a,"number",cf,"targetId");this.SC=a});v.defineProperty(cf,{Ax:"targetProperty"},function(){return this.Zv},function(a){v.I(this);v.j(a,"string",cf,"targetProperty");this.Zv=a});
v.defineProperty(cf,{dn:"sourceName"},function(){return this.OC},function(a){v.I(this);null!==a&&v.j(a,"string",cf,"sourceName");this.OC=a;null!==a&&(this.dz=!1)});v.defineProperty(cf,{$t:"toModel"},function(){return this.dz},function(a){v.I(this);v.j(a,"boolean",cf,"toModel");this.dz=a});v.defineProperty(cf,{qF:"sourceProperty"},function(){return this.Qv},function(a){v.I(this);v.j(a,"string",cf,"sourceProperty");this.Qv=a});
v.defineProperty(cf,{OG:"converter"},function(){return this.Zx},function(a){v.I(this);null!==a&&v.j(a,"function",cf,"converter");this.Zx=a});v.defineProperty(cf,{BG:"backConverter"},function(){return this.Tx},function(a){v.I(this);null!==a&&v.j(a,"function",cf,"backConverter");this.Tx=a});v.defineProperty(cf,{mode:"mode"},function(){return this.My},function(a){v.I(this);v.qb(a,cf,cf,"mode");this.My=a});
cf.prototype.makeTwoWay=cf.prototype.fI=function(a){void 0===a&&(a=null);null!==a&&v.j(a,"function",cf,"makeTwoWay");this.mode=ef;this.BG=a;return this};cf.prototype.ofObject=cf.prototype.ax=function(a){void 0===a&&(a="");this.dn=a;this.$t=!1;return this};cf.prototype.ofModel=function(){this.dn=null;this.$t=!0;return this};cf.prototype.ofData=function(){this.dn=null;this.$t=!1;return this};function ff(a,b,c){a=a.dn;var d=null;return d=null===a||""===a?b:"."===a?c:".."===a?c.T:b.Yd(a)}
cf.prototype.updateTarget=cf.prototype.GF=function(a,b,c){var d=this.Qv;if(void 0===c||d===c){c=this.Zv;var e=this.Zx;if(null===e&&""===c)v.trace("Binding error: target property is the empty string: "+this.toString());else{var f=b;""!==d&&(f=v.kb(b,d));if(void 0!==f)if(null===e)""!==c&&v.Ha(a,c,f);else try{if(""!==c){var h=e(f,a);v.Ha(a,c,h)}else e(f,a)}catch(k){}}}};
cf.prototype.updateSource=cf.prototype.Bx=function(a,b,c,d){void 0===d&&(d=null);if(this.My===ef){var e=this.Zv;if(void 0===c||e===c){c=this.Qv;var f=this.Tx;if(null!==f||""!==c){var h=a;""!==e&&(h=v.kb(a,e));if(void 0!==h)if(null===f)null!==d&&d.da?d.da.setDataProperty(b,c,h):v.Ha(b,c,h);else try{if(""!==c){var k=f(h,b);null!==d&&d.da?d.da.setDataProperty(b,c,k):v.Ha(b,c,k)}else f(h,b)}catch(l){}}}}};function se(){this.TF=(new G(Nd)).freeze();this.Ob="";this.UB=!1}v.ga("Transaction",se);
se.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Gf.count.toString()+(this.lt?"":", incomplete");if(void 0!==a&&0<a){a=this.Gf.count;for(var c=0;c<a;c++){var d=this.Gf.ha(c);null!==d&&(b+="\n  "+d.toString())}}return b};se.prototype.clear=se.prototype.clear=function(){var a=this.Gf;a.Na();for(var b=a.count-1;0<=b;b--){var c=a.ha(b);null!==c&&c.clear()}a.clear();a.freeze()};se.prototype.canUndo=se.prototype.canUndo=function(){return this.lt};
se.prototype.undo=se.prototype.undo=function(){if(this.canUndo())for(var a=this.Gf.count-1;0<=a;a--){var b=this.Gf.ha(a);null!==b&&b.undo()}};se.prototype.canRedo=se.prototype.canRedo=function(){return this.lt};se.prototype.redo=se.prototype.redo=function(){if(this.canRedo())for(var a=this.Gf.count,b=0;b<a;b++){var c=this.Gf.ha(b);null!==c&&c.redo()}};v.u(se,{Gf:"changes"},function(){return this.TF});v.defineProperty(se,{name:"name"},function(){return this.Ob},function(a){this.Ob=a});
v.defineProperty(se,{lt:"isComplete"},function(){return this.UB},function(a){this.UB=a});function de(){this.Oy=new H(F);this.Pe=!1;this.XF=(new G(se)).freeze();this.Hg=-1;this.iC=999;this.ri=!1;this.Hu=null;this.Tk=0;this.iB=!1;this.Mg=(new G("string")).freeze();this.fo=new G("number");this.uy=!0;this.Hy=!1}v.ga("UndoManager",de);
de.prototype.toString=function(a){for(var b="UndoManager "+this.Ti+"<"+this.history.count+"<="+this.FE,b=b+"[",c=this.KE.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.KE.ha(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.ha(d).toString(a-1);return b};
de.prototype.clear=de.prototype.clear=function(){var a=this.history;a.Na();for(var b=a.count-1;0<=b;b--){var c=a.ha(b);null!==c&&c.clear()}a.clear();this.Hg=-1;a.freeze();this.ri=!1;this.Hu=null;this.Tk=0;this.Mg.Na();this.Mg.clear();this.Mg.freeze();this.fo.clear()};de.prototype.addModel=de.prototype.tG=function(a){this.Oy.add(a)};de.prototype.removeModel=de.prototype.EI=function(a){this.Oy.remove(a)};
de.prototype.startTransaction=de.prototype.Qb=function(a){void 0===a&&(a="");null===a&&(a="");if(this.ib)return!1;!0===this.uy&&(this.uy=!1,this.Tk++,this.Xc("StartingFirstTransaction",a,this.Pi),0<this.Tk&&this.Tk--);this.isEnabled&&(this.Mg.Na(),this.Mg.add(a),this.Mg.freeze(),null===this.Pi?this.fo.add(0):this.fo.add(this.Pi.Gf.count));this.Tk++;var b=1===this.ph;b&&this.Xc("StartedTransaction",a,this.Pi);return b};
de.prototype.commitTransaction=de.prototype.wd=function(a){void 0===a&&(a="");return gf(this,!0,a)};de.prototype.rollbackTransaction=de.prototype.wp=function(){return gf(this,!1,"")};
function gf(a,b,c){if(a.ib)return!1;a.pz&&1>a.ph&&v.trace("Ending transaction without having started a transaction: "+c);var d=1===a.ph;d&&b&&a.isEnabled&&a.Xc("CommittingTransaction",c,a.Pi);var e=0;if(0<a.ph&&(a.Tk--,a.isEnabled)){var f=a.Mg.count;0<f&&(""===c&&(c=a.Mg.ha(0)),a.Mg.Na(),a.Mg.Rc(f-1),a.Mg.freeze());f=a.fo.count;0<f&&(e=a.fo.ha(f-1),a.fo.Rc(f-1))}f=a.Pi;if(d){if(b){a.Hy=!1;if(a.isEnabled&&null!==f){b=f;b.lt=!0;b.name=c;d=a.history;d.Na();for(e=d.count-1;e>a.Ti;e--)f=d.ha(e),null!==
f&&f.clear(),d.Rc(e),a.Hy=!0;e=a.FE;0===e&&(e=1);0<e&&d.count>=e&&(f=d.ha(0),null!==f&&f.clear(),d.Rc(0),a.Hg--);d.add(b);a.Hg++;d.freeze();f=b}a.Xc("CommittedTransaction",c,f)}else{a.ri=!0;try{a.isEnabled&&null!==f&&(f.lt=!0,f.undo())}finally{a.Xc("RolledBackTransaction",c,f),a.ri=!1}null!==f&&f.clear()}a.Hu=null;return!0}if(a.isEnabled&&!b&&null!==f){a=e;c=f.Gf;for(b=c.count-1;b>=a;b--)d=c.ha(b),null!==d&&d.undo(),c.Na(),c.Rc(b);c.freeze()}return!1}
de.prototype.canUndo=de.prototype.canUndo=function(){if(!this.isEnabled||0<this.ph||this.ib)return!1;var a=this.BF;return null!==a&&a.canUndo()?!0:!1};de.prototype.undo=de.prototype.undo=function(){if(this.canUndo()){var a=this.BF;try{this.Xc("StartingUndo","Undo",a),this.ri=!0,this.Hg--,a.undo()}catch(b){v.trace("undo error: "+b.toString())}finally{this.ri=!1,this.Xc("FinishedUndo","Undo",a)}}};
de.prototype.canRedo=de.prototype.canRedo=function(){if(!this.isEnabled||0<this.ph||this.ib)return!1;var a=this.AF;return null!==a&&a.canRedo()?!0:!1};de.prototype.redo=de.prototype.redo=function(){if(this.canRedo()){var a=this.AF;try{this.Xc("StartingRedo","Redo",a),this.ri=!0,this.Hg++,a.redo()}catch(b){v.trace("redo error: "+b.toString())}finally{this.ri=!1,this.Xc("FinishedRedo","Redo",a)}}};
de.prototype.Xc=function(a,b,c){void 0===c&&(c=null);var d=new Nd;d.Ac=Pd;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.nI;a.next();)b=a.value,d.da=b,b.sw(d)};de.prototype.handleChanged=de.prototype.jE=function(a){if(this.isEnabled&&!this.ib&&!this.skipsEvent(a)){var b=this.Pi;null===b&&(this.Hu=b=new se);var c=a.copy(),b=b.Gf;b.Na();b.add(c);b.freeze();this.pz&&0>=this.ph&&!this.uy&&(a=a.g,null!==a&&!1===a.ve||v.trace("Change not within a transaction: "+c.toString()))}};
de.prototype.skipsEvent=function(a){if(null===a||0>a.Ac.value)return!0;a=a.object;if(a instanceof R){if(a=a.layer,null!==a&&a.Bc)return!0}else if(a instanceof ze&&a.Bc)return!0;return!1};v.u(de,{nI:"models"},function(){return this.Oy.i});v.defineProperty(de,{isEnabled:"isEnabled"},function(){return this.Pe},function(a){this.Pe=a});v.u(de,{BF:"transactionToUndo"},function(){return 0<=this.Ti&&this.Ti<=this.history.count-1?this.history.ha(this.Ti):null});
v.u(de,{AF:"transactionToRedo"},function(){return this.Ti<this.history.count-1?this.history.ha(this.Ti+1):null});v.u(de,{ib:"isUndoingRedoing"},function(){return this.ri});v.u(de,{history:"history"},function(){return this.XF});v.defineProperty(de,{FE:"maxHistoryLength"},function(){return this.iC},function(a){this.iC=a});v.u(de,{Ti:"historyIndex"},function(){return this.Hg});v.u(de,{Pi:"currentTransaction"},function(){return this.Hu});v.u(de,{ph:"transactionLevel"},function(){return this.Tk});
v.u(de,{uE:"isInTransaction"},function(){return 0<this.Tk});v.defineProperty(de,{pz:"checksTransactionLevel"},function(){return this.iB},function(a){this.iB=a});v.u(de,{KE:"nestedTransactionNames"},function(){return this.Mg});function sa(){0<arguments.length&&v.dd(sa);v.cc(this);this.W=null;this.BB=this.lB=!0;this.nB=this.oB=this.CB=this.pB=!1;this.Lk=this.Qx=null;this.kD=1.05;this.zB=1;this.Iy=NaN;this.fC=null;this.lD=NaN;this.rm=null}v.ga("CommandHandler",sa);var hf=null,jf="";
sa.prototype.toString=function(){return"CommandHandler"};v.u(sa,{g:"diagram"},function(){return this.W});sa.prototype.Fc=function(a){this.W=a};
sa.prototype.doKeyDown=function(){var a=this.g;if(null!==a){var b=a.O,c=v.Vm?b.xt:b.control,d=b.shift,e=b.alt,f=b.key;!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():"Del"===f||"Backspace"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===f?this.canSelectAll()&&
this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.Ce&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.Ce&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.Be&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.Be&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.Be?a.scroll("page","left"):a.Ce&&a.scroll("page","up"):"PageDown"===f?d&&a.Be?a.scroll("page","right"):a.Ce&&a.scroll("page","down"):"Home"===
f?c&&a.Ce?a.scroll("document","up"):!c&&a.Be&&a.scroll("document","left"):"End"===f?c&&a.Ce?a.scroll("document","down"):!c&&a.Be&&a.scroll("document","right"):" "===f?this.canScrollToPart()&&this.scrollToPart():"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===f?this.canUngroupSelection()&&
this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};sa.prototype.doKeyUp=function(){var a=this.g;null!==a&&(a.O.bubbles=!0)};sa.prototype.stopCommand=function(){var a=this.g;if(null!==a){var b=a.$a;b instanceof kf&&a.lf&&a.uw();null!==b&&b.doCancel()}};sa.prototype.canStopCommand=function(){return!0};
sa.prototype.selectAll=function(){var a=this.g;if(null!==a){a.pa();try{a.Yb="wait";a.ya("ChangingSelection");for(var b=a.bk;b.next();)b.value.hb=!0;for(var c=a.wg;c.next();)c.value.hb=!0;for(var d=a.links;d.next();)d.value.hb=!0}finally{a.ya("ChangedSelection"),a.Yb=""}}};sa.prototype.canSelectAll=function(){var a=this.g;return null!==a&&a.lf};
sa.prototype.deleteSelection=function(){var a=this.g;if(null!==a&&!a.ya("SelectionDeleting",a.selection))try{a.Yb="wait";a.Qb("Delete");a.ya("ChangingSelection");for(var b=new H(J),c=a.selection.i;c.next();)lf(b,c.value,!0,this.$G?Infinity:0,this.TD,function(a){return a.canDelete()});a.uA(b,!0);a.ya("SelectionDeleted",b)}finally{a.ya("ChangedSelection"),a.wd("Delete"),a.Yb=""}};sa.prototype.canDeleteSelection=function(){var a=this.g;return null===a||a.gb||a.rf||!a.Am||0===a.selection.count?!1:!0};
function lf(a,b,c,d,e,f){void 0===f&&(f=null);if(!(a.contains(b)||null!==f&&!f(b)||b instanceof mf))if(a.add(b),b instanceof S){if(c&&b instanceof T)for(var h=b.Pc;h.next();)lf(a,h.value,c,d,e,f);if(e)for(h=b.ne;h.next();){var k=h.value;if(!a.contains(k)){var l=k.U,m=k.ba;null!==l&&a.contains(l)&&null!==m&&a.contains(m)?lf(a,k,c,d,e,f):null!==l&&null!==m||lf(a,k,c,d,e,f)}}if(1<d)for(b=b.aE();b.next();)lf(a,b.value,c,d-1,e,f)}else if(b instanceof W)for(h=b.Mf;h.next();)lf(a,h.value,c,d,e,f)}
sa.prototype.Lo=function(a,b,c){var d=new ma(J,J);for(a=a.i;a.next();)nf(this,a.value,b,d,c);if(null!==b){c=b.da;a=!1;null!==b.wb.Xd&&(a=b.wb.Xd.Ri);for(var e=new H(W),f=new ma(W,W),h=d.i;h.next();){var k=h.value;if(k instanceof W){var l=k;a||null!==l.U&&null!==l.ba||e.add(l)}else if(c instanceof te&&k instanceof S&&null!==k.data){var l=c,m=k,k=h.key,n=k.Pm();null!==n&&(n=d.la(n),null!==n?(l.mh(m.data,l.mb(n.data)),l=b.pg(m.data),k=k.$s(),null!==k&&null!==l&&f.add(k,l)):l.mh(m.data,void 0))}}0<e.count&&
b.uA(e,!1);if(0<f.count)for(c=f.i;c.next();)d.add(c.key,c.value)}if(null!==b&&(b=b.da,c=b.vG,null!==c)){var p=new ma;d.each(function(a){null!==a.key.data&&p.add(a.key.data,a.value.data)});c(p,b,this.g.da)}for(b=d.i;b.next();)b.value.Ib();return d};
function nf(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.la(b);var f=null,h=b.data;if(null!==h&&null!==c){var k=c.da;b instanceof W?k instanceof Q&&(h=k.xz(h),v.Wa(h)&&(k.Gs(h),f=c.pg(h))):(h=k.copyNodeData(h),v.Wa(h)&&(k.Vk(h),f=c.Wh(h)))}else of(b),f=b.copy(),null!==c&&null!==f&&c.add(f);if(!(f instanceof J))return null;f.hb=!1;f.Yg=!1;d.add(b,f);if(b instanceof S){for(k=b.ne;k.next();){h=k.value;if(h.U===b){var l=d.la(h);null!==l&&(l.U=f)}h.ba===b&&(l=d.la(h),null!==
l&&(l.ba=f))}if(b instanceof T&&f instanceof T)for(k=f,b=b.Pc;b.next();)h=nf(a,b.value,c,d,e),h instanceof W||null===h||(h.Sa=k)}else if(b instanceof W)for(k=b.U,null!==k&&(k=d.la(k),null!==k&&(f.U=k)),k=b.ba,null!==k&&(k=d.la(k),null!==k&&(f.ba=k)),b=b.Mf;b.next();)k=nf(a,b.value,c,d,e),null!==k&&(k.ce=f);return f}
sa.prototype.copySelection=function(){var a=this.g;if(null!==a){for(var b=new H(J),a=a.selection.i;a.next();)lf(b,a.value,!0,this.RG?Infinity:0,this.PG,function(a){return a.canCopy()});this.copyToClipboard(b)}};sa.prototype.canCopySelection=function(){var a=this.g;return null!==a&&a.Qj&&a.kz&&0!==a.selection.count?!0:!1};sa.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
sa.prototype.canCutSelection=function(){var a=this.g;return null!==a&&!a.gb&&!a.rf&&a.Qj&&a.Am&&a.kz&&0!==a.selection.count?!0:!1};sa.prototype.copyToClipboard=function(a){var b=this.g;if(null!==b){var c=null;if(null===a)hf=null,jf="";else{var c=b.da,d=!1,e=!1,f=null;try{if(c instanceof te){var h=c,d=h.Jm;h.Jm=this.LD}c instanceof Q&&(h=c,e=h.Im,h.Im=this.KD);f=b.Lo(a,null,!0)}finally{c instanceof te&&(c.Jm=d),c instanceof Q&&(c.Im=e),c=new G(J),c.Yc(f),hf=c,jf=b.da.cl}}b.ya("ClipboardChanged",c)}};
sa.prototype.pasteFromClipboard=function(){var a=new H(J),b=hf;if(null===b)return a;var c=this.g;if(null===c||jf!==c.da.cl)return a;var d=c.da,e=!1,f=!1,h=null;try{if(d instanceof te){var k=d,e=k.Jm;k.Jm=this.LD}d instanceof Q&&(k=d,f=k.Im,k.Im=this.KD);h=c.Lo(b,c,!1)}finally{for(d instanceof te&&(d.Jm=e),d instanceof Q&&(d.Im=f),b=h.i;b.next();)c=b.value,d=b.key,c.location.H()||(d.location.H()?c.location=d.location:!c.position.H()&&d.position.H()&&(c.position=d.position)),a.add(c)}return a};
sa.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Yb="wait";b.Qb("Paste");b.ya("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&pf(b);for(var d=c.i;d.next();)d.value.hb=!0;b.ya("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e){var f=b.wb.Xd;null===f&&(f=new wf,f.Fc(b));var h=f.computeEffectiveCollection(b.selection);f.moveParts(h,new w(a.x-e.oa,a.y-e.va),!1)}}b.ya("ClipboardPasted",c)}finally{b.wd("Paste"),b.Yb=
""}};sa.prototype.canPasteSelection=function(){var a=this.g;return null===a||a.gb||a.rf||!a.Co||!a.kz||null===hf||jf!==a.da.cl?!1:!0};sa.prototype.undo=function(){var a=this.g;null!==a&&a.ja.undo()};sa.prototype.canUndo=function(){var a=this.g;return null===a||a.gb||a.rf?!1:a.tD&&a.ja.canUndo()};sa.prototype.redo=function(){var a=this.g;null!==a&&a.ja.redo()};sa.prototype.canRedo=function(){var a=this.g;return null===a||a.gb||a.rf?!1:a.tD&&a.ja.canRedo()};
sa.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.Dx);v.Te(a,sa,"decreaseZoom:factor");var b=this.g;null!==b&&b.Eo===xf&&(a*=b.scale,a<b.$g||a>b.Zg||(b.scale=a))};sa.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.Dx);v.Te(a,sa,"canDecreaseZoom:factor");var b=this.g;if(null===b||b.Eo!==xf)return!1;a*=b.scale;return a<b.$g||a>b.Zg?!1:b.pw};
sa.prototype.increaseZoom=function(a){void 0===a&&(a=this.Dx);v.Te(a,sa,"increaseZoom:factor");var b=this.g;null!==b&&b.Eo===xf&&(a*=b.scale,a<b.$g||a>b.Zg||(b.scale=a))};sa.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.Dx);v.Te(a,sa,"canIncreaseZoom:factor");var b=this.g;if(null===b||b.Eo!==xf)return!1;a*=b.scale;return a<b.$g||a>b.Zg?!1:b.pw};sa.prototype.resetZoom=function(a){void 0===a&&(a=this.xw);v.Te(a,sa,"resetZoom:newscale");var b=this.g;null===b||a<b.$g||a>b.Zg||(b.scale=a)};
sa.prototype.canResetZoom=function(a){void 0===a&&(a=this.xw);v.Te(a,sa,"canResetZoom:newscale");var b=this.g;return null===b||a<b.$g||a>b.Zg?!1:b.pw};sa.prototype.zoomToFit=function(){var a=this.g;if(null!==a){var b=a.scale,c=a.position;b!==this.lD||isNaN(this.Iy)?(this.Iy=b,this.fC=c.copy(),a.zoomToFit(),this.lD=a.scale):(a.scale=this.Iy,a.position=this.fC)}};sa.prototype.canZoomToFit=function(){var a=this.g;return null===a?!1:a.pw};
sa.prototype.scrollToPart=function(a){void 0===a&&(a=null);null!==a&&v.C(a,J,sa,"part");var b=this.g;if(null!==b){if(null===a){null===this.rm&&(this.rm=b.selection.i);try{this.rm.next()&&(a=this.rm.value)}catch(c){}null===a&&(this.rm=b.selection.i,this.rm.next()&&(a=this.rm.value))}null!==a&&(b.Oa.an("Scroll To Part"),b.eF(a.Z))}};sa.prototype.canScrollToPart=function(a){void 0===a&&(a=null);null!==a&&v.C(a,J,sa,"part");a=this.g;return null===a||0===a.selection.count?!1:a.Be&&a.Ce};
sa.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Qb("Collapse Tree");b.Oa.an("Collapse Tree");var c=new G(S);if(null!==a&&a.od)a.collapseTree(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof S&&(a=e,a.od&&(a.collapseTree(),c.add(a)))}b.ya("TreeCollapsed",c)}finally{b.wd("Collapse Tree")}};
sa.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.gb)return!1;if(null!==a){if(!a.od)return!1;if(0<a.Hw().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof S&&b.od&&0<b.Hw().count)return!0;return!1};
sa.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Qb("Expand Tree");b.Oa.an("Expand Tree");var c=new G(S);if(null===a||a.od)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof S&&(a=e,a.od||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.ya("TreeExpanded",c)}finally{b.wd("Expand Tree")}};
sa.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.gb)return!1;if(null!==a){if(a.od)return!1;if(0<a.Hw().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof S&&!b.od&&0<b.Hw().count)return!0;return!1};
sa.prototype.groupSelection=function(){var a=this.g;if(null!==a){var b=a.da;if(b instanceof Q){var c=this.uD;if(null!==c){var d=null;try{a.Yb="wait";a.Qb("Group");a.ya("ChangingSelection");for(var e=new G(J),f=a.selection.i;f.next();){var h=f.value;h.Ld()&&h.canGroup()&&e.add(h)}for(var k=new G(J),l=e.i;l.next();){for(var m=l.value,f=!1,n=e.i;n.next();)if(m.Yh(n.value)){f=!0;break}f||k.add(m)}if(0<k.count){var p=k.first().Sa;if(null!==p)for(;null!==p;){for(var e=!1,q=k.i;q.next();)if(!q.value.Yh(p)){e=
!0;break}if(e)p=p.Sa;else break}if(c instanceof T)of(c),d=c.copy(),null!==d&&a.add(d);else if(b.Rz(c)){var r=b.copyNodeData(c);v.Wa(r)&&(b.Vk(r),d=a.Gw(r))}if(null!==d){null!==p&&this.isValidMember(p,d)&&(d.Sa=p);for(var s=k.i;s.next();){var t=s.value;this.isValidMember(d,t)&&(t.Sa=d)}a.select(d)}}a.ya("ChangedSelection");a.ya("SelectionGrouped",d)}finally{a.wd("Group"),a.Yb=""}}}}};
sa.prototype.canGroupSelection=function(){var a=this.g;if(null===a||a.gb||a.rf||!a.Co||!a.kw||!(a.da instanceof Q)||null===this.uD)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Ld()&&b.canGroup())return!0}return!1};function yf(a){var b=v.jb();for(a=a.i;a.next();){var c=a.value;c instanceof W||b.push(c)}a=new H(J);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],f=!0,h=0;h<c;h++)if(e.Yh(b[h])){f=!1;break}f&&a.add(e)}v.ra(b);return a}
sa.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof W)return!1;if(null!==a){if(a===b||a.Yh(b))return!1;var c=a.$z;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.$z;return null!==c?c(a,b):!0};
sa.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b){var c=b.da;if(c instanceof Q)try{b.Yb="wait";b.Qb("Ungroup");b.ya("ChangingSelection");var d=new G(T);if(null!==a)d.add(a);else for(var e=b.selection.i;e.next();){var f=e.value;f instanceof T&&(a=f,a.canUngroup()&&d.add(a))}if(0<d.count){b.uw();for(var h=d.i;h.next();){var k=h.value;k.expandSubGraph();var l=k.Sa,m=null!==l&&null!==l.data?c.mb(l.data):void 0,n=new G(J);n.Yc(k.Pc);for(var p=n.i;p.next();){var q=
p.value;q.hb=!0;if(!(q instanceof W)){var r=q.data;null!==r?c.ux(r,m):q.Sa=l}}b.remove(k)}}b.ya("ChangedSelection");b.ya("SelectionUngrouped",d,n)}finally{b.wd("Ungroup"),b.Yb=""}}};sa.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.gb||b.rf||!b.Am||!b.ow||!(b.da instanceof Q))return!1;if(null!==a){if(a.canUngroup())return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof T&&b.canUngroup())return!0;return!1};
sa.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=yf(a).i;d.next();){var e=d.value;null!==e.Sa&&(!b||this.isValidMember(null,e)?e.Sa=null:c=!1)}return c};
sa.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Qb("Collapse SubGraph");b.Oa.an("Collapse SubGraph");var c=new G(T);if(null!==a&&a.be)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof T&&(a=e,a.be&&(a.collapseSubGraph(),c.add(a)))}b.ya("SubGraphCollapsed",c)}finally{b.wd("Collapse SubGraph")}};
sa.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.gb)return!1;if(null!==a)return a.be?!0:!1;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof T&&b.be)return!0;return!1};
sa.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Qb("Expand SubGraph");b.Oa.an("Expand SubGraph");var c=new G(T);if(null===a||a.be)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof T&&(a=e,a.be||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.ya("SubGraphExpanded",c)}finally{b.wd("Expand SubGraph")}};
sa.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.gb)return!1;if(null!==a)return a.be?!1:!0;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof T&&!b.be)return!0;return!1};
sa.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&v.C(a,ra,sa,"editTextBlock");var b=this.g;if(null!==b){var c=b.wb.IA;if(null!==c){if(null===a){a=null;for(var d=b.selection.i;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.Vs(function(a){return a instanceof ra&&a.Dz})}null!==a&&(b.$a=null,c.Cg=a,b.$a=c)}}};
sa.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);null!==a&&v.C(a,ra,sa,"canEditTextBlock");var b=this.g;if(null===b||b.gb||b.rf||!b.nw||null===b.wb.IA)return!1;if(null!==a){if(a=a.V,null!==a&&a.canEdit())return!0}else for(b=b.selection.i;b.next();)if(a=b.value,a.canEdit()&&(a=a.Vs(function(a){return a instanceof ra&&a.Dz}),null!==a))return!0;return!1};
sa.prototype.showContextMenu=function(a){var b=this.g;if(null!==b){var c=b.wb.uz;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new Ld,e=null;a instanceof R?e=a.fb(Kb):b.RH||(e=b.tb,e=new w(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.ef=b.CF(e),d.ea=e,b.O=d);b.$a=c;zf(c,!1,a)}}};
sa.prototype.canShowContextMenu=function(a){var b=this.g;if(null===b)return!1;var c=b.wb.uz;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};v.defineProperty(sa,{PG:"copiesConnectedLinks"},function(){return this.lB},function(a){v.j(a,"boolean",sa,"copiesConnectedLinks");this.lB=a});
v.defineProperty(sa,{TD:"deletesConnectedLinks"},function(){return this.BB},function(a){v.j(a,"boolean",sa,"deletesConnectedLinks");this.BB=a});v.defineProperty(sa,{RG:"copiesTree"},function(){return this.pB},function(a){v.j(a,"boolean",sa,"copiesTree");this.pB=a});v.defineProperty(sa,{$G:"deletesTree"},function(){return this.CB},function(a){v.j(a,"boolean",sa,"deletesTree");this.CB=a});
v.defineProperty(sa,{LD:"copiesParentKey"},function(){return this.oB},function(a){v.j(a,"boolean",sa,"copiesParentKey");this.oB=a});v.defineProperty(sa,{KD:"copiesGroupKey"},function(){return this.nB},function(a){v.j(a,"boolean",sa,"copiesGroupKey");this.nB=a});
v.defineProperty(sa,{uD:"archetypeGroupData"},function(){return this.Qx},function(a){null!==a&&v.C(a,Object,sa,"archetypeGroupData");var b=this.g;null!==b&&(b=b.da,b instanceof Q&&(a instanceof T||b.Rz(a)||v.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.Qx=a});v.defineProperty(sa,{$z:"memberValidation"},function(){return this.Lk},function(a){null!==a&&v.j(a,"function",sa,"memberValidation");this.Lk=a});
v.defineProperty(sa,{xw:"defaultScale"},function(){return this.zB},function(a){v.Te(a,sa,"defaultScale");0<a||v.k("defaultScale must be larger than zero, not: "+a);this.zB=a});v.defineProperty(sa,{Dx:"zoomFactor"},function(){return this.kD},function(a){v.Te(a,sa,"zoomFactor");1<a||v.k("zoomFactor must be larger than 1.0, not: "+a);this.kD=a});function Le(){0<arguments.length&&v.dd(Le);v.cc(this);this.W=null;this.Ob="";this.Pe=!0;this.SB=!1;this.gD=null;this.fw=-1}v.ga("Tool",Le);
Le.prototype.Fc=function(a){this.W=a};Le.prototype.toString=function(){return""!==this.name?this.name+" Tool":v.nf(Object.getPrototypeOf(this))};Le.prototype.updateAdornments=function(){};Le.prototype.canStart=function(){return this.isEnabled};Le.prototype.doStart=function(){};Le.prototype.doActivate=function(){this.qa=!0};Le.prototype.doDeactivate=function(){this.qa=!1};Le.prototype.doStop=function(){};Le.prototype.doCancel=function(){this.stopTool()};
Le.prototype.stopTool=function(){var a=this.g;null!==a&&a.$a===this&&(a.$a=null,a.Yb="")};Le.prototype.doMouseDown=function(){!this.qa&&this.canStart()&&this.doActivate()};Le.prototype.doMouseMove=function(){};Le.prototype.doMouseUp=function(){this.stopTool()};Le.prototype.doMouseWheel=function(){};Le.prototype.canStartMultiTouch=function(){return!0};
Le.prototype.standardPinchZoomStart=function(){var a=this.g;if(null!==a){var b=a.O.event,c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Bf[0])c=a.Bf[0],d=a.Bf[1];else return;this.doCancel();if(a.Wo("hasGestureZoom")){a.vy=!0;a.sC=a.scale;var e=Af(a),f=c,h=f.clientX-e.x,c=f.clientY-e.y,f=d,d=f.clientX-e.x,f=f.clientY-e.y;v.v(e);e=d-h;c=f-c;e=Math.sqrt(e*e+c*c);a.PC=e;b.preventDefault();b.cancelBubble=!0}else Bf(a)}};
Le.prototype.standardPinchZoomMove=function(){var a=this.g;if(null!==a){var b=a.O.event;this.doCancel();Bf(a);var c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Bf[0])c=a.Bf[0],d=a.Bf[1];else return;if(a.Wo("hasGestureZoom")&&a.vy){var e=Af(a),f=c,c=f.clientX-e.x,h=f.clientY-e.y,f=d,d=f.clientX-e.x,f=f.clientY-e.y;v.v(e);var e=d-c,k=f-h,e=Math.sqrt(e*e+k*k)/a.PC,c=new w((Math.min(d,c)+Math.max(d,c))/2,(Math.min(f,
h)+Math.max(f,h))/2),h=a.sC*e,d=a.rb;h!==a.scale&&d.canResetZoom(h)&&(e=a.Hl,a.Hl=c,d.resetZoom(h),a.Hl=e);b.preventDefault();b.cancelBubble=!0}}};Le.prototype.doKeyDown=function(){var a=this.g;null!==a&&"Esc"===a.O.key&&this.doCancel()};Le.prototype.doKeyUp=function(){};Le.prototype.startTransaction=Le.prototype.Qb=function(a){void 0===a&&(a=this.name);this.wf=null;var b=this.g;return null===b?!1:b.Qb(a)};
Le.prototype.stopTransaction=Le.prototype.dk=function(){var a=this.g;return null===a?!1:null===this.wf?a.wp():a.wd(this.wf)};
Le.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.lf){var b=a.O,c=a.Zs(b.ea,!1);if(null!==c)if(v.Vm?b.xt:b.control){a.ya("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Sa;null!==b&&(b.hb=!b.hb);a.ya("ChangedSelection")}else if(b.shift){if(!c.hb){a.ya("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Sa;null!==b&&(b.hb=!0);a.ya("ChangedSelection")}}else{if(!c.hb){for(b=c;null!==b&&!b.canSelect();)b=b.Sa;null!==b&&a.select(b)}}else!b.left||(v.Vm?b.xt:b.control)||
b.shift||a.uw()}};Le.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.Bc});var c=this.g;if(null!==c){var d=c.O,e=c.le(d.ea,a,b);d.qe=e;Cf(e,d,c)}};
function Cf(a,b,c){var d=0;b.left?d=1===b.Ue?1:2===b.Ue?2:1:b.right&&1===b.Ue&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ya(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ya(e)}if(null!==a)for(b.Nc=!1;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.Ts?a.Ts:a.click;break;case 3:c=
a.sz}if(null!==c&&(c(b,a),b.Nc))break;a=a.T}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.Ts?c.Ts:c.click;break;case 3:a=c.sz}null!==a&&a(b)}}
Le.prototype.standardMouseOver=function(){var a=this.g;if(null!==a){var b=a.O;if(null!==b.g&&!0!==a.Oa.sc){var c=a.lb;a.lb=!0;var d=a.le(b.ea,null,null);b.qe=d;var e=!1;if(d!==a.wn){var f=a.wn,h=f;a.wn=d;this.doCurrentObjectChanged(f,d);for(b.Nc=!1;null!==f;){var k=f.At;if(null!==k){if(d===f)break;if(null!==d&&d.rl(f))break;k(b,f,d);e=!0;if(b.Nc)break}f=f.T}f=h;for(b.Nc=!1;null!==d;){k=d.zt;if(null!==k){if(f===d)break;if(null!==f&&f.rl(d))break;k(b,d,f);e=!0;if(b.Nc)break}d=d.T}d=a.wn}if(null!==d){f=
d;for(k="";null!==f;){k=f.cursor;if(""!==k)break;f=f.T}a.Yb=k;b.Nc=!1;for(f=d;null!==f;){k=f.dA;if(null!==k&&(k(b,f),e=!0,b.Nc))break;f=f.T}}else a.Yb="",k=a.dA,null!==k&&(k(b),e=!0);e&&a.de();a.lb=c}}};Le.prototype.doCurrentObjectChanged=function(){};
Le.prototype.standardMouseWheel=function(){var a=this.g;if(null!==a){var b=a.O,c=b.el;if(0!==c&&a.Wd.H()){var d=a.rb,e=a.wb.Bt;if((e===Df&&!b.shift||e===Ef&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.Hl,a.Hl=b.ef,0<c?d.increaseZoom():d.decreaseZoom(),a.Hl=e,b.bubbles=!1;else if(e===Df&&b.shift||e===Ef&&!b.control){d=a.position.copy();e=0<c?c:-c;if(!b.shift&&a.Ce){var f=a.Ot,e=e/40*f;0<c?a.scroll("pixel","up",e):a.scroll("pixel","down",e)}else b.shift&&a.Be&&(f=a.Nt,e=e/40*f,0<c?
a.scroll("pixel","left",e):a.scroll("pixel","right",e));a.position.L(d)||(b.bubbles=!1)}}}};Le.prototype.standardWaitAfter=function(a){v.j(a,"number",Le,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.fw=v.setTimeout(function(){b.doWaitAfter()},a)};Le.prototype.cancelWaitAfter=function(){-1!==this.fw&&v.clearTimeout(this.fw);this.fw=-1};Le.prototype.doWaitAfter=function(){};
Le.prototype.findToolHandleAt=function(a,b){var c=this.g;if(null===c)return null;c=c.le(a,null,function(a){a=a.V;return null===a?!1:null!==a.ec});if(null===c)return null;var d=c.V;return null===d||d.Mc!==b?null:c};Le.prototype.isBeyondDragSize=function(a,b){var c=this.g;if(null===c)return!1;void 0===a&&(a=c.uc.ef);void 0===b&&(b=c.O.ef);var d=c.wb.eH,e=d.width,d=d.height;c.uc.Zj&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};v.u(Le,{g:"diagram"},function(){return this.W});
v.defineProperty(Le,{name:"name"},function(){return this.Ob},function(a){v.j(a,"string",Le,"name");this.Ob=a});v.defineProperty(Le,{isEnabled:"isEnabled"},function(){return this.Pe},function(a){v.j(a,"boolean",Le,"isEnabled");this.Pe=a});v.defineProperty(Le,{qa:"isActive"},function(){return this.SB},function(a){v.j(a,"boolean",Le,"isActive");this.SB=a});v.defineProperty(Le,{wf:"transactionResult"},function(){return this.gD},function(a){null!==a&&v.j(a,"string",Le,"transactionResult");this.gD=a});
function wf(){0<arguments.length&&v.dd(wf);Le.call(this);this.name="Dragging";this.mB=this.WB=!0;this.Mq=this.IB=!1;this.$B=!0;this.wy=(new ia(NaN,NaN)).freeze();this.xy=zb;this.yy=(new w(NaN,NaN)).freeze();this.HB=!1;this.FB=this.kB=this.GB=this.tB=this.Ci=null;this.vq=this.YB=!1;this.to=new w(NaN,NaN);this.Rv=new w;this.Uv=!1;this.Pv=this.VB=!0;this.Gn=100;this.gj=[];this.WF=(new H(J)).freeze()}v.Ga(wf,Le);v.ga("DraggingTool",wf);
v.defineProperty(wf,{rE:"isCopyEnabled"},function(){return this.WB},function(a){v.j(a,"boolean",wf,"isCopyEnabled");this.WB=a});v.defineProperty(wf,{QG:"copiesEffectiveCollection"},function(){return this.mB},function(a){v.j(a,"boolean",wf,"copiesEffectiveCollection");this.mB=a});v.defineProperty(wf,{fH:"dragsTree"},function(){return this.IB},function(a){v.j(a,"boolean",wf,"dragsTree");this.IB=a});
v.defineProperty(wf,{Qw:"isGridSnapEnabled"},function(){return this.Mq},function(a){v.j(a,"boolean",wf,"isGridSnapEnabled");this.Mq=a});v.defineProperty(wf,{LH:"isComplexRoutingRealtime"},function(){return this.VB},function(a){v.j(a,"boolean",wf,"isComplexRoutingRealtime");this.VB=a});v.defineProperty(wf,{NH:"isGridSnapRealtime"},function(){return this.$B},function(a){v.j(a,"boolean",wf,"isGridSnapRealtime");this.$B=a});
v.defineProperty(wf,{iE:"gridSnapCellSize"},function(){return this.wy},function(a){v.C(a,ia,wf,"gridSnapCellSize");this.wy.L(a)||(this.wy=a=a.aa())});v.defineProperty(wf,{wH:"gridSnapCellSpot"},function(){return this.xy},function(a){v.C(a,L,wf,"gridSnapCellSpot");this.xy.L(a)||(this.xy=a=a.aa())});v.defineProperty(wf,{xH:"gridSnapOrigin"},function(){return this.yy},function(a){v.C(a,w,wf,"gridSnapOrigin");this.yy.L(a)||(this.yy=a=a.aa())});
v.defineProperty(wf,{Ri:"dragsLink"},function(){return this.HB},function(a){v.j(a,"boolean",wf,"dragsLink");this.HB=a});v.defineProperty(wf,{Mm:"currentPart"},function(){return this.tB},function(a){null!==a&&v.C(a,J,wf,"currentPart");this.tB=a});v.defineProperty(wf,{nc:"copiedParts"},function(){return this.kB},function(a){this.kB=a});v.defineProperty(wf,{$b:"draggedParts"},function(){return this.GB},function(a){this.GB=a});
v.u(wf,{hK:"draggingParts"},function(){return null!==this.nc?this.nc.Yi():null!==this.$b?this.$b.Yi():this.WF});v.defineProperty(wf,{Zc:"draggedLink"},function(){return this.FB},function(a){null!==a&&v.C(a,W,wf,"draggedLink");this.FB=a});v.defineProperty(wf,{Pw:"isDragOutStarted"},function(){return this.YB},function(a){this.YB=a});v.defineProperty(wf,{ck:"startPoint"},function(){return this.Rv},function(a){v.C(a,w,wf,"startPoint");this.Rv.L(a)||(this.Rv=a=a.aa())});
v.defineProperty(wf,{PD:"delay"},function(){return this.Gn},function(a){v.j(a,"number",wf,"delay");this.Gn=a});wf.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Yk&&!a.Qj&&!a.jw||!a.lf)return!1;var b=a.O;return!b.left||a.$a!==this&&(!this.isBeyondDragSize()||b.Zj&&b.timestamp-a.uc.timestamp<this.Gn)?!1:null!==this.findDraggablePart()};
wf.prototype.findDraggablePart=function(){var a=this.g;if(null===a)return null;a=a.Zs(a.uc.ea,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Sa;return null!==a&&(a.canMove()||a.canCopy())?a:null};wf.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.lf){var b=a.Zs(a.uc.ea,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Sa;this.Mm=b;this.Mm.hb||(a.ya("ChangingSelection"),b=a.O,(v.Vm?b.xt:b.control)||b.shift||pf(a),this.Mm.hb=!0,a.ya("ChangedSelection"))}}};
wf.prototype.doActivate=function(){var a=this.g;if(null!==a){null===this.Mm&&this.standardMouseSelect();var b=this.Mm;null!==b&&(b.canMove()||b.canCopy())&&(this.qa=!0,this.to.set(a.position),Ff(this,a.selection),this.gj.length=0,this.$b=this.computeEffectiveCollection(a.selection),a.Wt=!0,Gf(this,this.$b),this.Qb("Drag"),this.ck=a.uc.ea,a.Le=!0,a.jw&&(this.Pw=!0,this.vq=!1,Hf=this,If=this.g,this.doSimulatedDragOut()))}};
function Ff(a,b){if(a.Ri){var c=a.g;null!==c&&c.Bm&&(c.da instanceof Q&&1===b.count&&b.first()instanceof W?(a.Zc=b.first(),a.Zc.canRelinkFrom()&&a.Zc.canRelinkTo()&&a.Zc.Os(),a.Ci=c.wb.QE,null===a.Ci&&(a.Ci=new Jf,a.Ci.Fc(c))):(a.Zc=null,a.Ci=null))}}
wf.prototype.computeEffectiveCollection=function(a){var b=null!==this.g&&this.g.$a===this,c=new ma(J);if(null===a)return c;for(var d=a.i;d.next();)Kf(this,c,d.value,b);if(null!==this.Zc&&this.Ri)return c;for(d=a.i;d.next();)a=d.value,a instanceof W&&(b=a.U,null===b||c.contains(b)?(b=a.ba,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function Lf(a){return void 0===a?new Mf(K.fk):new Mf(a.copy())}
function Kf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof S){b.add(c,Lf(c.location));if(c instanceof T)for(var e=c.Pc;e.next();)Kf(a,b,e.value,d);for(e=c.ne;e.next();){var f=e.value;if(!b.contains(f)){var h=f.U,k=f.ba;null!==h&&b.contains(h)&&null!==k&&b.contains(k)&&Kf(a,b,f,d)}}if(a.fH)for(c=c.aE();c.next();)Kf(a,b,c.value,d)}else if(c instanceof W)for(f=c,b.add(f,Lf()),e=f.Mf;e.next();)Kf(a,b,e.value,d);else c instanceof mf||b.add(c,Lf(c.location))}
wf.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&Nf(a);Of(this);Zf(this,this.$b);this.$b=this.Mm=null;this.vq=this.Pw=!1;if(0<$f.count){for(var b=$f.length,c=0;c<b;c++){var d=$f.ha(c);ag(d);bg(d);Of(d);null!==d.g&&Nf(d.g)}$f.clear()}ag(this);this.to.m(NaN,NaN);Hf=If=null;bg(this);a.Le=!1;a.Yb="";a.Wt=!1;this.dk()};function Of(a){var b=a.g;if(null!==b){var c=b.lb;b.lb=!0;cg(a,b.O,null);b.lb=c}a.gj.length=0}
function dg(){var a=Hf;bg(a);eg(a);var b=a.g;null!==b&&a.to.H()&&(b.position=a.to);null!==b&&Nf(b)}wf.prototype.doCancel=function(){bg(this);eg(this);var a=this.g;null!==a&&this.to.H()&&(a.position=this.to);this.stopTool()};function Gf(a,b){if(null!==b){a.Uv=!0;for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.Gp=!0)}}}function Zf(a,b){if(null!==b){for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.Gp=!1,d.pl&&fg(d)&&d.gc())}a.Uv=!1}}
wf.prototype.doKeyDown=function(){var a=this.g;null!==a&&(a=a.O,null!==a&&this.qa&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};wf.prototype.doKeyUp=function(){var a=this.g;null!==a&&null!==a.O&&this.qa&&this.doMouseMove()};function gg(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,h=a.i;h.next();){var k=h.value;if(k.Ld()&&k.isVisible()){var l=k.location,k=l.x,l=l.y;isNaN(k)||isNaN(l)||(k<c&&(c=k),l<d&&(d=l),k>e&&(e=k),l>f&&(f=l))}}Infinity===c?b.m(0,0,0,0):b.m(c,d,e-c,f-d)}
function hg(a,b){if(null===a.nc){var c=a.g;if(!(null===c||b&&(c.gb||c.rf))&&null!==a.$b){var d=c.ja;d.isEnabled&&d.uE?null!==d.Pi&&0<d.Pi.Gf.count&&(c.ja.wp(),c.Qb("Drag")):eg(a);c.lb=!b;c.ln=!b;a.ck=c.uc.ea;d=a.QG?a.$b.Yi():c.selection;d=c.Lo(d,c,!0);for(c=d.i;c.next();)c.value.location=c.key.location;c=v.Uf();gg(d,c);v.fc(c);for(var c=new ma(J),e=a.$b.i;e.next();){var f=e.key;f.Ld()&&f.canCopy()&&(f=d.la(f),null!==f&&(f.mf(),c.add(f,Lf(f.location))))}for(d=d.i;d.next();)e=d.value,e instanceof W&&
e.canCopy()&&c.add(e,Lf());a.nc=c;Ff(a,c.Yi());null!==a.Zc&&(c=a.Zc,d=c.cn,c.vl(a.ck.x-(d.x+d.width/2),a.ck.y-(d.y+d.height/2)))}}}function bg(a){var b=a.g;if(null!==b){if(null!==a.nc&&(b.uA(a.nc.Yi(),!1),a.nc=null,null!==a.$b))for(var c=a.$b.i;c.next();)c.key instanceof W&&(c.value.point=new w(0,0));b.lb=!1;b.ln=!1;a.ck=b.uc.ea}}function ag(a){if(null!==a.Zc){if(a.Ri&&null!==a.Ci){var b=a.Ci;b.g.remove(b.re);b.g.remove(b.se)}a.Zc=null;a.Ci=null}}
function ig(a,b,c){var d=a.g;if(null!==d){var e=a.ck,f=v.M();f.assign(d.O.ea);a.moveParts(b,f.Yt(e),c);v.v(f)}}
wf.prototype.moveParts=function(a,b,c){if(null!==a&&(v.C(a,ma,wf,"moveParts:parts"),0!==a.count)){var d=v.M(),e=v.M();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);(b=this.Uv)||Gf(this,a);for(var f=new G(jg),h=new G(Qa),k=a.i;k.next();){var l=k.key;if(l.Ld()){var m=kg(this,l,a);if(null!==m)f.add(new jg(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=v.M(),p=this.computeMove(l,d.add(e),a,n);l.location=p;k.value.nF=n.Yt(m);v.v(n)}}else k.key instanceof W&&h.add(k.bb)}for(c=
f.i;c.next();)f=c.value,m=f.info.point,d.assign(m),f.Dc.location=d.add(f.yH.nF);c=v.M();m=v.M();for(h=h.i;h.next();)if(k=h.value,f=k.key,f instanceof W)if(f.Gp)l=f.U,n=f.ba,null!==this.Zc&&this.Ri?(k=k.value.point,a.add(f,Lf(e)),l=e.x-k.x,k=e.y-k.y,f.vl(l,k)):(null!==l&&(c.assign(l.location),p=a.la(l),null!==p&&c.Yt(p.point)),null!==n&&(m.assign(n.location),p=a.la(n),null!==p&&m.Yt(p.point)),null!==l&&null!==n?c.Ie(m)?(k=k.value.point,l=d,l.assign(c),l.Yt(k),a.add(f,Lf(c)),f.vl(l.x,l.y)):(f.Gp=!1,
f.gc()):(k=k.value.point,n=null!==l?c:null!==n?m:e,a.add(f,Lf(n)),l=n.x-k.x,k=n.y-k.y,f.vl(l,k)));else if(null===f.U||null===f.ba)k=k.value.point,a.add(f,Lf(e)),l=e.x-k.x,k=e.y-k.y,f.vl(l,k);v.v(d);v.v(e);v.v(c);v.v(m);b||Zf(this,a)}};function kg(a,b,c){b=b.Sa;if(null!==b){a=kg(a,b,c);if(null!==a)return a;a=c.la(b);if(null!==a)return a}return null}
function eg(a){if(null!==a.$b){for(var b=a.g,c=a.$b.i;c.next();){var d=c.key;d.Ld()&&(d.location=c.value.point)}for(c=a.$b.i;c.next();)if(d=c.key,d instanceof W&&d.Gp){var e=c.value.point;a.$b.add(d,Lf());d.vl(-e.x,-e.y)}b.Nf()}}
wf.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new w);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.Qw&&(this.NH||null===c||this.g.O.up)&&(e=v.M(),c=e,c.assign(b),null!==a)){var f=this.g;if(null!==f){var h=f.ft,k=this.iE,f=k.width,k=k.height,l=this.xH,m=l.x,l=l.y,n=this.wH;if(null!==h){var p=h.Jw;isNaN(f)&&(f=p.width);isNaN(k)&&(k=p.height);h=h.hE;isNaN(m)&&(m=h.x);isNaN(l)&&(l=h.y)}h=v.Rb(0,0);h.Ut(0,0,f,k,n);K.Xs(b.x,b.y,m+h.x,l+h.y,f,k,c);v.v(h)}}c=null!==a.UD?
a.UD(a,b,e):e;k=a.mI;f=k.x;isNaN(f)&&(f=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);h=a.hI;m=h.x;isNaN(m)&&(m=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);d.m(Math.max(f,Math.min(c.x,m)),Math.max(k,Math.min(c.y,h)));e!==b&&v.v(e);return d};function lg(a,b){if(null===b)return!0;var c=b.V;return null===c||c instanceof mf||c.layer.Bc||a.$b&&a.$b.contains(c)||a.nc&&a.nc.contains(c)?!0:!1}
function mg(a,b,c,d){var e=a.g;if(null!==e){a.Ri&&(null!==a.Zc&&(a.Zc.U=null,a.Zc.ba=null),ng(a,!1));var f=!1;!1===a.Pv&&(f=e.lb,e.lb=!0);var h=og(e,b,null,function(b){return!lg(a,b)}),k=e.O;k.qe=h;var l=e.lb;e.lb=!0;var m=cg(a,k,h);if(a.qa||null!==Hf){if(null===h){var n=e.qI;null!==n&&(n(k),m=!0)}if(a.qa||null!==Hf)if(a.doDragOver(b,h),a.qa||null!==Hf)e.lb=l,m&&e.Nf(),!1===a.Pv&&(e.lb=f),(e.Be||e.Ce)&&(c||d)&&pg(e,k.ef)}}}
function cg(a,b,c){var d=!1,e=a.gj.length,f=0<e?a.gj[0]:null;if(c===f)return!1;b.Nc=!1;for(var h=0;h<e;h++){var k=a.gj[h],l=k.pI;if(null!==l&&(l(b,k,c),d=!0,b.Nc))break}a.gj.length=0;if(!a.qa&&null===Hf||null===c)return d;for(b.Nc=!1;null!==c;)a.gj.push(c),c=xg(c);e=a.gj.length;for(h=0;h<e&&(k=a.gj[h],l=k.oI,null===l||(l(b,k,f),d=!0,!b.Nc));h++);return d}function xg(a){var b=a.T;return null!==b?b:a instanceof J&&!(a instanceof T)&&(a=a.Sa,null!==a&&a.BH)?a:null}
function yg(a,b,c){var d=a.Ci;if(null===d)return null;var e=a.g.Om(b,d.OE,function(a){return d.findValidLinkablePort(a,c)});a=v.M();for(var f=Infinity,h=null,e=e.i;e.next();){var k=e.value;if(null!==k.V){var l=k.fb(Kb,a),l=b.Tj(l);l<f&&(h=k,f=l)}}v.v(a);return h}
function ng(a,b){var c=a.Zc;if(null!==c&&!(2>c.ma)){var d=a.g;if(null!==d&&!d.gb&&(d=a.Ci,null!==d)){var e=null,f=null;null===c.U&&(e=yg(a,c.l(0),!1),null!==e&&(f=e.V));var h=null,k=null;null===c.ba&&(h=yg(a,c.l(c.ma-1),!0),null!==h&&(k=h.V));d.isValidLink(f,e,k,h)?b?(c.An=c.l(0).copy(),c.En=c.l(c.ma-1).copy(),c.Gp=!1,c.U=f,null!==e&&(c.rg=e.Od),c.ba=k,null!==h&&(c.oh=h.Od)):zg(d,f,e,k,h):zg(d,null,null,null,null)}}}wf.prototype.doDragOver=function(){};
function Ag(a,b){var c=a.g;if(null!==c){a.Ri&&ng(a,!0);Of(a);var d=og(c,b,null,function(b){return!lg(a,b)}),e=c.O;e.qe=d;if(null!==d){e.Nc=!1;for(var f=d;null!==f;){var h=f.aA;if(null!==h&&(h(e,f),e.Nc))break;f=xg(f)}}else h=c.aA,null!==h&&h(e);if(a.qa||null!==Hf)if(a.doDropOnto(b,d),a.qa||null!==Hf)for(d=c.selection.i;d.next();)e=d.value,e instanceof S&&Bg(c,e.Z)}}wf.prototype.doDropOnto=function(){};
wf.prototype.doMouseMove=function(){if(this.qa){var a=this.g;if(null!==a&&null!==this.Mm&&null!==this.$b){var b=!1,c=!1;this.mayCopy()?(b=!0,a.Yb="copy",hg(this,!1),Gf(this,this.nc),ig(this,this.nc,!1),Zf(this,this.nc)):this.mayMove()?(c=!0,a.Yb="default",bg(this),ig(this,this.$b,!0)):this.mayDragOut()?(a.Yb="no-drop",hg(this,!1),ig(this,this.nc,!1)):bg(this);mg(this,a.O.ea,c,b)}}};
wf.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.nc?(bg(this),hg(this,!0),Gf(this,this.nc),ig(this,this.nc,!1),Zf(this,this.nc),null!==this.nc&&a.iF(this.nc.Yi())):(b=!0,bg(this),this.mayMove()&&(ig(this,this.$b,!0),this.Pv=!1,mg(this,a.O.ea,!0,!1),this.Pv=!0));this.vq=!0;Ag(this,a.O.ea);if(this.qa){this.nc=null;if(b&&null!==this.$b)for(b=this.$b.i;b.next();){var d=b.key;d instanceof S&&(d=d.Sa,null===d||null===d.placeholder||this.$b.contains(d)||
d.HD&&d.P())}a.oc();Zf(this,this.$b);this.wf=c?"Copy":"Move";a.ya(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};wf.prototype.mayCopy=function(){if(!this.rE)return!1;var a=this.g;if(null===a||a.gb||a.rf||!a.Co||!a.Qj||(v.Vm?!a.O.alt:!a.O.control))return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Ld()&&b.canCopy())return!0}return null!==this.Zc&&this.Ri&&this.Zc.canCopy()?!0:!1};
wf.prototype.mayDragOut=function(){if(!this.rE)return!1;var a=this.g;if(null===a||!a.jw||!a.Qj||a.Yk)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Ld()&&b.canCopy())return!0}return null!==this.Zc&&this.Ri&&this.Zc.canCopy()?!0:!1};wf.prototype.mayMove=function(){var a=this.g;if(null===a||a.gb||!a.Yk)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Ld()&&b.canMove())return!0}return null!==this.Zc&&this.Ri&&this.Zc.canMove()?!0:!1};var $f=new G(wf),Hf=null,If=null;
wf.prototype.mayDragIn=function(){var a=this.g;if(null===a||!a.sD||a.gb||a.rf||!a.Co)return!1;var b=Hf;return null===b||b.g.da.cl!==a.da.cl?!1:!0};wf.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.g;a.Oa.Xi();Cg(a);a=Hf;null!==a&&(a.g.Yb="copy")}};wf.prototype.doSimulatedDragLeave=function(){var a=Hf;null!==a&&a.doSimulatedDragOut();this.doCancel()};
wf.prototype.doSimulatedDragOver=function(){var a=this.g;if(null!==a){var b=Hf;null!==b&&null!==b.$b&&this.mayDragIn()&&(a.Yb="copy",Dg(this,b.$b.Yi(),!1),ig(this,this.nc,!1),mg(this,a.O.ea,!1,!0))}};
wf.prototype.doSimulatedDrop=function(){var a=this.g;if(null!==a){var b=Hf;null!==b&&(b.vq=!0,bg(this),this.mayDragIn()&&(this.Qb("Drop"),Dg(this,b.$b.Yi(),!0),ig(this,this.nc,!1),null!==this.nc&&a.iF(this.nc.Yi()),this.wf="ExternalCopy",Ag(this,a.O.ea),a.oc(),this.nc=null,a.focus(),a.ya("ExternalObjectsDropped",a.selection),this.dk()))}};
function Dg(a,b,c){if(null===a.nc){var d=a.g;if(null!==d&&!d.gb&&!d.rf){d.lb=!c;d.ln=!c;a.ck=d.O.ea;d=d.Lo(b,d,!0);c=v.Uf();gg(b,c);var e=c.x+c.width/2,f=c.y+c.height/2;v.fc(c);var h=a.Rv;c=new ma(J);var k=v.M();for(b=b.i;b.next();){var l=b.value;if(l.Ld()&&l.canCopy()){var m=l.location,l=d.la(l);k.m(h.x-(e-m.x),h.y-(f-m.y));l.location=k;l.mf();c.add(l,Lf(k))}}v.v(k);for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&c.add(e,Lf());a.nc=c;Ff(a,c.Yi());null!==a.Zc&&(c=a.Zc,d=c.cn,c.vl(a.ck.x-
(d.x+d.width/2),a.ck.y-(d.y+d.height/2)))}}}wf.prototype.doSimulatedDragOut=function(){var a=this.g;null!==a&&(this.mayCopy()||this.mayMove()?a.Yb="":a.Yb="no-drop")};function Mf(a){this.point=a;this.nF=K.fk}v.ga("DraggingInfo",Mf);function jg(a,b,c){this.Dc=a;this.info=b;this.yH=c}
function Eg(){0<arguments.length&&v.dd(Eg);Le.call(this);this.DC=100;this.dC=!1;var a=new W,b=new X;b.Lf=!0;b.stroke="blue";a.add(b);b=new X;b.Hp="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.tf="Tool";this.ZC=a;a=new S;b=new X;b.Od="";b.Cb="Rectangle";b.fill=null;b.stroke="magenta";b.nb=2;b.xa=K.Ix;a.add(b);a.zl=!1;a.tf="Tool";this.XC=a;this.YC=b;a=new S;b=new X;b.Od="";b.Cb="Rectangle";b.fill=null;b.stroke="magenta";b.nb=2;b.xa=K.Ix;a.add(b);a.zl=!1;a.tf="Tool";this.$C=a;this.aD=b;this.zC=
this.yC=this.uC=this.tC=this.vC=null;this.ZB=!0;this.lG=new ma(R,"boolean");this.EC=this.Ik=this.TC=null}v.Ga(Eg,Le);v.ga("LinkingBaseTool",Eg);Eg.prototype.doStop=function(){var a=this.g;null!==a&&Nf(a);this.hh=this.gh=this.fh=this.eh=this.pc=null;this.Cx.clear();this.Tf=null};v.defineProperty(Eg,{OE:"portGravity"},function(){return this.DC},function(a){v.j(a,"number",Eg,"portGravity");0<=a&&(this.DC=a)});
v.defineProperty(Eg,{cp:"isUnconnectedLinkValid"},function(){return this.dC},function(a){v.j(a,"boolean",Eg,"isUnconnectedLinkValid");this.dC=a});v.defineProperty(Eg,{Bg:"temporaryLink"},function(){return this.ZC},function(a){v.C(a,W,Eg,"temporaryLink");this.ZC=a});v.defineProperty(Eg,{re:"temporaryFromNode"},function(){return this.XC},function(a){v.C(a,S,Eg,"temporaryFromNode");this.XC=a});
v.defineProperty(Eg,{en:"temporaryFromPort"},function(){return this.YC},function(a){v.C(a,R,Eg,"temporaryFromPort");this.YC=a});v.defineProperty(Eg,{se:"temporaryToNode"},function(){return this.$C},function(a){v.C(a,S,Eg,"temporaryToNode");this.$C=a});v.defineProperty(Eg,{fn:"temporaryToPort"},function(){return this.aD},function(a){v.C(a,R,Eg,"temporaryToPort");this.aD=a});v.defineProperty(Eg,{pc:"originalLink"},function(){return this.vC},function(a){null!==a&&v.C(a,W,Eg,"originalLink");this.vC=a});
v.defineProperty(Eg,{eh:"originalFromNode"},function(){return this.tC},function(a){null!==a&&v.C(a,S,Eg,"originalFromNode");this.tC=a});v.defineProperty(Eg,{fh:"originalFromPort"},function(){return this.uC},function(a){null!==a&&v.C(a,R,Eg,"originalFromPort");this.uC=a});v.defineProperty(Eg,{gh:"originalToNode"},function(){return this.yC},function(a){null!==a&&v.C(a,S,Eg,"originalToNode");this.yC=a});
v.defineProperty(Eg,{hh:"originalToPort"},function(){return this.zC},function(a){null!==a&&v.C(a,R,Eg,"originalToPort");this.zC=a});v.defineProperty(Eg,{$d:"isForwards"},function(){return this.ZB},function(a){v.j(a,"boolean",Eg,"isForwards");this.ZB=a});v.u(Eg,{Cx:"validPortsCache"},function(){return this.lG});v.defineProperty(Eg,{Tf:"targetPort"},function(){return this.TC},function(a){null!==a&&v.C(a,R,Eg,"targetPort");this.TC=a});
Eg.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.xa=b.Z.size;e?(d.Bb=b.Bb,d.Fl=b.Fl):(d.Ab=b.Ab,d.il=b.il);c.Ze=Kb;var f=v.M();c.location=b.fb(Kb,f);v.v(f);d.angle=b.jl();null!==this.ix&&this.ix(a,b,c,d,e)}};Eg.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.xa=K.Ix,b.Ab=xb,b.Bb=xb);null!==a&&(a.location=this.g.O.ea);null!==this.ix&&this.ix(null,null,a,b,c)};Eg.prototype.doMouseDown=function(){this.qa&&this.doMouseMove()};
Eg.prototype.doMouseMove=function(){if(this.qa){var a=this.g;if(null!==a){this.Tf=this.findTargetPort(this.$d);if(null!==this.Tf){var b=this.Tf.V;if(b instanceof S){this.$d?this.copyPortProperties(b,this.Tf,this.se,this.fn,!0):this.copyPortProperties(b,this.Tf,this.re,this.en,!1);return}}this.$d?this.setNoTargetPortProperties(this.se,this.fn,!0):this.setNoTargetPortProperties(this.re,this.en,!1);(a.Be||a.Ce)&&pg(a,a.O.ef)}}};
Eg.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.V;if(!(c instanceof S))return null;for(;null!==a;){var d=b?a.uF:a.cE;if(!0===d&&(null!==a.Od||a instanceof S)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.T}return null};
Eg.prototype.findTargetPort=function(a){var b=this.g,c=b.O.ea,d=this.OE;0>=d&&(d=.1);for(var e=this,f=b.Om(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,f=f.i;f.next();){var h=f.value,k=h.V;if(k instanceof S){var l=h.fb(Kb,v.M()),m=c.x-l.x,n=c.y-l.y;v.v(l);l=m*m+n*n;l<d&&(m=this.Cx.la(h),null!==m?m&&(b=h,d=l):a&&this.isValidLink(this.eh,this.fh,k,h)||!a&&this.isValidLink(k,h,this.gh,this.hh)?(this.Cx.add(h,!0),b=h,d=l):this.Cx.add(h,!1))}}return null!==b&&(c=b.V,
c instanceof S&&(null===c.layer||c.layer.Ks))?b:null};Eg.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.cp;if(this.g.$a===this&&(null!==a.layer&&!a.layer.Ks||!0!==b.cE))return!1;var c=b.qH;if(Infinity>c){if(null!==this.pc&&a===this.eh&&b===this.fh)return!0;var d=b.Od;null===d&&(d="");if(a.Fw(d).count>=c)return!1}return!0};
Eg.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.cp;if(this.g.$a===this&&(null!==a.layer&&!a.layer.Ks||!0!==b.uF))return!1;var c=b.iJ;if(Infinity>c){if(null!==this.pc&&a===this.gh&&b===this.hh)return!0;var d=b.Od;null===d&&(d="");if(a.qg(d).count>=c)return!1}return!0};Eg.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.V,d=b.V;return null!==c&&c===d};
Eg.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.V;if(!(c instanceof S))return!1;var d=a.Od;null===d&&(d="");var e=b.V;if(!(e instanceof S))return!1;var f=b.Od;null===f&&(f="");for(e=e.qg(f);e.next();)if(f=e.value,f.U===c&&f.rg===d)return!0;return!1};
Eg.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.pH&&d.hJ||!this.isInSameNode(b,d))&&(b.oH&&d.gJ||!this.isLinked(b,d)))||null!==this.pc&&(null!==a&&this.isLabelDependentOnLink(a,this.pc)||null!==c&&this.isLabelDependentOnLink(c,this.pc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.pc))return!1;if(null!==a){var e=a.Yw;if(null!==e&&!e(a,b,c,d,this.pc))return!1}if(null!==
c&&(e=c.Yw,null!==e&&!e(a,b,c,d,this.pc)))return!1;e=this.Yw;return null!==e?e(a,b,c,d,this.pc):!0};Eg.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.ce;if(null===c)return!1;if(c===b)return!0;var d=new H(S);d.add(a);return Fg(this,c,b,d)};function Fg(a,b,c,d){if(b===c)return!0;var e=b.U;if(null!==e&&e.qf&&(d.add(e),Fg(a,e.ce,c,d)))return!0;b=b.ba;return null!==b&&b.qf&&(d.add(b),Fg(a,b.ce,c,d))?!0:!1}
Eg.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.cp;var d=this.g.oJ;if(d!==Gg){if(d===Hg){if(null!==c&&!c.Cc)return!0;for(d=b.ne;d.next();){var e=d.value;if(e!==c&&e.Cc&&e.ba===b)return!1}return!Ig(this,a,b,c,!0)}if(d===Jg){if(null!==c&&!c.Cc)return!0;for(d=a.ne;d.next();)if(e=d.value,e!==c&&e.Cc&&e.U===a)return!1;return!Ig(this,a,b,c,!0)}if(d===Kg)return a===b?a=!0:(d=new H(S),d.add(b),a=Lg(this,d,a,b,c)),!a;if(d===Mg)return!Ig(this,a,b,c,!1);if(d===
Ng)return a===b?a=!0:(d=new H(S),d.add(b),a=Xg(this,d,a,b,c)),!a}return!0};function Ig(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var f=b.ne;f.next();){var h=f.value;if(h!==d&&(!e||h.Cc)&&h.ba===b&&(h=h.U,h!==b&&Ig(a,h,c,d,e)))return!0}return!1}function Lg(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.ne;f.next();){var h=f.value;if(h!==e&&h.ba===c&&(h=h.U,h!==c&&Lg(a,b,h,d,e)))return!0}return!1}
function Xg(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.ne;f.next();){var h=f.value;if(h!==e){var k=h.U,h=h.ba,k=k===c?h:k;if(k!==c&&Xg(a,b,k,d,e))return!0}}return!1}v.defineProperty(Eg,{Yw:"linkValidation"},function(){return this.Ik},function(a){null!==a&&v.j(a,"function",Eg,"linkValidation");this.Ik=a});v.defineProperty(Eg,{ix:"portTargeted"},function(){return this.EC},function(a){null!==a&&v.j(a,"function",Eg,"portTargeted");this.EC=a});
function ua(){0<arguments.length&&v.dd(ua);Eg.call(this);this.name="Linking";this.Sx={};this.Rx=null;this.na=ah;this.QC=null}v.Ga(ua,Eg);v.ga("LinkingTool",ua);var ah;ua.Either=ah=v.p(ua,"Either",0);var bh;ua.ForwardsOnly=bh=v.p(ua,"ForwardsOnly",0);var ch;ua.BackwardsOnly=ch=v.p(ua,"BackwardsOnly",0);v.defineProperty(ua,{xG:"archetypeLinkData"},function(){return this.Sx},function(a){null!==a&&v.C(a,Object,ua,"archetypeLinkData");a instanceof R&&v.C(a,W,ua,"archetypeLinkData");this.Sx=a});
v.defineProperty(ua,{vD:"archetypeLabelNodeData"},function(){return this.Rx},function(a){null!==a&&v.C(a,Object,ua,"archetypeLabelNodeData");a instanceof R&&v.C(a,S,ua,"archetypeLabelNodeData");this.Rx=a});v.defineProperty(ua,{direction:"direction"},function(){return this.na},function(a){v.qb(a,ua,ua,"direction");this.na=a});v.defineProperty(ua,{rF:"startObject"},function(){return this.QC},function(a){null!==a&&v.C(a,R,ua,"startObject");this.QC=a});
ua.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.gb||a.rf||!a.Ks)return!1;var b=a.da;return(b instanceof Q||b instanceof te)&&a.O.left&&(a.$a===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
ua.prototype.findLinkablePort=function(){var a=this.g;if(null===a)return null;var b=this.rF;null===b&&(b=a.le(a.uc.ea,null,null));if(null===b||!(b.V instanceof S))return null;a=this.direction;if(a===ah||a===bh){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.$d=!0,c}if(a===ah||a===ch)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.$d=!1,c;return null};
ua.prototype.doActivate=function(){var a=this.g;if(null!==a){var b=this.findLinkablePort();null!==b&&(this.Qb(this.name),a.Le=!0,a.Yb="pointer",this.$d?(this.fh=b,b=this.fh.V,b instanceof S&&(this.eh=b),this.copyPortProperties(this.eh,this.fh,this.re,this.en,!1)):(this.hh=b,b=this.hh.V,b instanceof S&&(this.gh=b),this.copyPortProperties(this.gh,this.hh,this.se,this.fn,!0)),a.add(this.re),a.add(this.se),null!==this.Bg&&(null!==this.re&&(this.Bg.U=this.re),null!==this.se&&(this.Bg.ba=this.se),this.Bg.gc(),
a.add(this.Bg)),this.qa=!0)}};ua.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&(a.remove(this.Bg),a.remove(this.re),a.remove(this.se),a.Le=!1,a.Yb="",this.dk())};ua.prototype.doStop=function(){Eg.prototype.doStop.call(this);this.rF=null};
ua.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null===a)return;var b=this.wf=null,c=null,d=null,e=null,f=this.Tf=this.findTargetPort(this.$d);if(null!==f){var h=f.V;h instanceof S&&(this.$d?(null!==this.eh&&(b=this.eh,c=this.fh),d=h,e=f):(b=h,c=f,null!==this.gh&&(d=this.gh,e=this.hh)))}else this.$d?null!==this.eh&&this.cp&&(b=this.eh,c=this.fh):null!==this.gh&&this.cp&&(d=this.gh,e=this.hh);if(null!==b||null!==d)b=this.insertLink(b,c,d,e),null!==b?(null===f&&(this.$d?b.En=a.O.ea.copy():
b.An=a.O.ea.copy()),a.lf&&a.select(b),this.wf=this.name,a.ya("LinkDrawn",b)):a.da.DD()}this.stopTool()};
ua.prototype.insertLink=function(a,b,c,d){var e=this.g;if(null===e)return null;var f=e.da;if(f instanceof te){var h=a;b=c;e.Md||(h=c,b=a);if(null!==h&&null!==b)return f.mh(b.data,f.mb(h.data)),b.$s()}else if(f instanceof Q)if(h="",null!==a&&(null===b&&(b=a),h=b.Od,null===h&&(h="")),b="",null!==c&&(null===d&&(d=c),b=d.Od,null===b&&(b="")),d=this.xG,d instanceof W){if(of(d),f=d.copy(),null!==f)return f.U=a,f.rg=h,f.ba=c,f.oh=b,e.add(f),a=this.vD,a instanceof S&&(of(a),a=a.copy(),null!==a&&(a.ce=f,e.add(a))),
f}else if(null!==d&&(d=f.xz(d),v.Wa(d)))return null!==a&&f.tx(d,f.mb(a.data)),f.AA(d,h),null!==c&&f.wx(d,f.mb(c.data)),f.EA(d,b),f.Gs(d),a=this.vD,null===a||a instanceof S||(a=f.copyNodeData(a),v.Wa(a)&&(f.Vk(a),a=f.mb(a),void 0!==a&&f.jz(d,a))),f=e.pg(d);return null};
function Jf(){0<arguments.length&&v.dd(Jf);Eg.call(this);this.name="Relinking";var a=new X;a.Cb="Diamond";a.xa=K.Fx;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.pe=0;this.MB=a;a=new X;a.Cb="Diamond";a.xa=K.Fx;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.pe=-1;this.bD=a;this.Vb=null;this.wC=new z}v.Ga(Jf,Eg);v.ga("RelinkingTool",Jf);
Jf.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){var b="RelinkFrom",c=null;if(a.hb&&!this.g.gb){var d=a.Qt;null!==d&&a.canRelinkFrom()&&a.Z.H()&&a.isVisible()&&d.Z.H()&&d.ul()&&(c=a.Qo(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.Mc=b),a.Uk(b,c)))}null===c&&a.yl(b);b="RelinkTo";c=null;a.hb&&!this.g.gb&&(d=a.Qt,null!==d&&a.canRelinkTo()&&a.Z.H()&&a.isVisible()&&d.Z.H()&&d.ul()&&(c=a.Qo(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.Mc=b),a.Uk(b,c))));null===c&&
a.yl(b)}};Jf.prototype.makeAdornment=function(a,b){var c=new mf;c.type=dh;var d=b?this.fJ:this.nH;null!==d&&c.add(d.copy());c.ec=a;return c};v.defineProperty(Jf,{nH:"fromHandleArchetype"},function(){return this.MB},function(a){null!==a&&v.C(a,R,Jf,"fromHandleArchetype");this.MB=a});v.defineProperty(Jf,{fJ:"toHandleArchetype"},function(){return this.bD},function(a){null!==a&&v.C(a,R,Jf,"toHandleArchetype");this.bD=a});v.u(Jf,{handle:"handle"},function(){return this.Vb});
Jf.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.gb||a.rf||!a.Bm)return!1;var b=a.da;if(!(b instanceof Q||b instanceof te)||!a.O.left)return!1;b=this.findToolHandleAt(a.uc.ea,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.uc.ea,"RelinkTo"));return null!==b};
Jf.prototype.doActivate=function(){var a=this.g;if(null!==a){if(null===this.pc){var b=this.findToolHandleAt(a.uc.ea,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.uc.ea,"RelinkTo"));if(null===b)return;var c=b.V;if(!(c instanceof mf&&c.Sh instanceof W))return;this.Vb=b;this.$d=null===c||"RelinkTo"===c.Mc;this.pc=c.Sh}this.Qb(this.name);a.Le=!0;a.Yb="pointer";this.fh=this.pc.$c;this.eh=this.pc.U;this.hh=this.pc.Bd;this.gh=this.pc.ba;this.wC.set(this.pc.Z);null!==this.pc&&0<this.pc.ma&&(null===this.pc.U&&
(null!==this.en&&(this.en.xa=K.Np),null!==this.re&&(this.re.location=this.pc.l(0))),null===this.pc.ba&&(null!==this.fn&&(this.fn.xa=K.Np),null!==this.se&&(this.se.location=this.pc.l(this.pc.ma-1))));this.copyPortProperties(this.eh,this.fh,this.re,this.en,!1);this.copyPortProperties(this.gh,this.hh,this.se,this.fn,!0);a.add(this.re);a.add(this.se);null!==this.Bg&&(null!==this.re&&(this.Bg.U=this.re),null!==this.se&&(this.Bg.ba=this.se),this.copyLinkProperties(this.pc,this.Bg),this.Bg.gc(),a.add(this.Bg));
this.qa=!0}};Jf.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.Is=a.Is;b.yz=a.yz;var c=a.Ge;if(c===eh||c===fh)c=gh;b.Ge=c;b.ww=a.ww;b.ox=a.ox;b.Ep=a.Ep;b.Ab=a.Ab;b.il=a.il;b.dt=a.dt;b.et=a.et;b.Bb=a.Bb;b.Fl=a.Fl;b.Zt=a.Zt;b.au=a.au}};Jf.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&(a.remove(this.Bg),a.remove(this.re),a.remove(this.se),a.Le=!1,a.Yb="",this.dk())};Jf.prototype.doStop=function(){Eg.prototype.doStop.call(this);this.Vb=null};
Jf.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null===a)return;this.wf=null;var b=this.eh,c=this.fh,d=this.gh,e=this.hh,f=this.pc;this.Tf=this.findTargetPort(this.$d);if(null!==this.Tf){var h=this.Tf.V;h instanceof S&&(this.$d?(d=h,e=this.Tf):(b=h,c=this.Tf))}else this.cp?this.$d?e=d=null:c=b=null:f=null;null!==f&&(this.reconnectLink(f,this.$d?d:b,this.$d?e:c,this.$d),null===this.Tf&&(this.$d?f.En=a.O.ea.copy():f.An=a.O.ea.copy(),f.gc()),a.lf&&(f.hb=!0),this.wf=this.name,a.ya("LinkRelinked",
f,this.$d?this.hh:this.fh));hh(this.pc,this.wC)}this.stopTool()};Jf.prototype.reconnectLink=function(a,b,c,d){if(null===this.g)return!1;c=null!==c&&null!==c.Od?c.Od:"";d?(a.ba=b,a.oh=c):(a.U=b,a.rg=c);return!0};function zg(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.re,a.en,!1),a.g.add(a.re)):a.g.remove(a.re);null!==d?(a.copyPortProperties(d,e,a.se,a.fn,!0),a.g.add(a.se)):a.g.remove(a.se)}
function ih(){0<arguments.length&&v.dd(ih);Le.call(this);this.name="LinkReshaping";var a=new X;a.Cb="Rectangle";a.xa=K.Lp;a.fill="lightblue";a.stroke="dodgerblue";this.zk=a;a=new X;a.Cb="Diamond";a.xa=K.Lp;a.fill="lightblue";a.stroke="dodgerblue";this.jC=a;this.FC=3;this.Px=this.Vb=null;this.xC=new w;this.Ty=null}v.Ga(ih,Le);v.ga("LinkReshapingTool",ih);var jh;ih.None=jh=v.p(ih,"None",0);var kh;ih.Horizontal=kh=v.p(ih,"Horizontal",1);var lh;ih.Vertical=lh=v.p(ih,"Vertical",2);var mh;
ih.All=mh=v.p(ih,"All",3);ih.prototype.getReshapingBehavior=ih.prototype.gE=function(a){return a&&a.GC?a.GC:jh};ih.prototype.setReshapingBehavior=ih.prototype.Tt=function(a,b){v.C(a,R,ih,"setReshapingBehavior:obj");v.qb(b,ih,ih,"setReshapingBehavior:behavior");a.GC=b};
ih.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){if(a.hb&&!this.g.gb){var b=a.path;if(null!==b&&a.canReshape()&&a.Z.H()&&a.isVisible()&&b.Z.H()&&b.ul()){var c=a.Qo(this.name);if(null===c||c.bG!==a.ma||c.nG!==a.Lt)c=this.makeAdornment(b),null!==c&&(c.bG=a.ma,c.nG=a.Lt,a.Uk(this.name,c));if(null!==c){c.location=a.position;return}}}a.yl(this.name)}};
ih.prototype.makeAdornment=function(a){var b=a.V,c=b.ma,d=b.hc,e=null;if(null!==b.points&&1<c){e=new mf;e.type=dh;var c=b.at,f=b.Vw,h=d?1:0;if(b.Lt&&b.Ge!==nh)for(var k=c+h;k<f-h;k++){var l=this.makeResegmentHandle(a,k);null!==l&&(l.pe=k,l.qx=.5,e.add(l))}for(k=c+1;k<f;k++)if(l=this.makeHandle(a,k),null!==l){l.pe=k;if(k!==c)if(k===c+1&&d){var h=b.l(c),m=b.l(c+1);K.D(h.x,m.x)&&K.D(h.y,m.y)&&(m=b.l(c-1));K.D(h.x,m.x)?(this.Tt(l,lh),l.cursor="n-resize"):K.D(h.y,m.y)&&(this.Tt(l,kh),l.cursor="w-resize")}else k===
f-1&&d?(h=b.l(f-1),m=b.l(f),K.D(h.x,m.x)&&K.D(h.y,m.y)&&(h=b.l(f+1)),K.D(h.x,m.x)?(this.Tt(l,lh),l.cursor="n-resize"):K.D(h.y,m.y)&&(this.Tt(l,kh),l.cursor="w-resize")):k!==f&&(this.Tt(l,mh),l.cursor="move");e.add(l)}e.Mc=this.name;e.ec=a}return e};ih.prototype.makeHandle=function(){var a=this.gt;return null===a?null:a.copy()};v.defineProperty(ih,{gt:"handleArchetype"},function(){return this.zk},function(a){null!==a&&v.C(a,R,ih,"handleArchetype");this.zk=a});
ih.prototype.makeResegmentHandle=function(){var a=this.lI;return null===a?null:a.copy()};v.defineProperty(ih,{lI:"midHandleArchetype"},function(){return this.jC},function(a){null!==a&&v.C(a,R,ih,"midHandleArchetype");this.jC=a});v.u(ih,{handle:"handle"},function(){return this.Vb});v.u(ih,{Js:"adornedLink"},function(){return this.Px});ih.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.gb&&a.lw&&a.O.left?null!==this.findToolHandleAt(a.uc.ea,this.name):!1};
ih.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Vb=this.findToolHandleAt(a.uc.ea,this.name),null!==this.Vb)){var b=this.Vb.V.Sh;if(b instanceof W){this.Px=b;a.Le=!0;this.Qb(this.name);if(b.Lt&&.5===this.Vb.qx){var c=b.points.copy(),d=this.Vb.fb(Kb);c.xd(this.Vb.pe+1,d);b.hc&&c.xd(this.Vb.pe+1,d);b.points=c;b.Zd();this.Vb=this.findToolHandleAt(a.uc.ea,this.name)}this.xC=b.l(this.Vb.pe);this.Ty=b.points.copy();this.qa=!0}}};
ih.prototype.doDeactivate=function(){this.dk();this.Px=this.Vb=null;var a=this.g;null!==a&&(a.Le=!1);this.qa=!1};ih.prototype.doCancel=function(){var a=this.Js;null!==a&&(a.points=this.Ty);this.stopTool()};ih.prototype.doMouseMove=function(){var a=this.g;this.qa&&null!==a&&(a=this.computeReshape(a.O.ea),this.reshape(a))};
ih.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){var b=this.computeReshape(a.O.ea);this.reshape(b);b=this.Js;if(null!==b&&b.Lt){var c=this.handle.pe,d=b.l(c-1),e=b.l(c),f=b.l(c+1);if(b.hc){if(c>b.at+1&&c<b.Vw-1){var h=b.l(c-2);if(Math.abs(d.x-e.x)<this.kh&&Math.abs(d.y-e.y)<this.kh&&(oh(this,h,d,e,f,!0)||oh(this,h,d,e,f,!1))){var k=b.points.copy();oh(this,h,d,e,f,!0)?(k.zg(c-2,new w(h.x,(f.y+h.y)/2)),k.zg(c+1,new w(f.x,(f.y+h.y)/2))):(k.zg(c-2,new w((f.x+h.x)/2,h.y)),k.zg(c+1,
new w((f.x+h.x)/2,f.y)));k.Rc(c);k.Rc(c-1);b.points=k;b.Zd()}else h=b.l(c+2),Math.abs(e.x-f.x)<this.kh&&Math.abs(e.y-f.y)<this.kh&&(oh(this,d,e,f,h,!0)||oh(this,d,e,f,h,!1))&&(k=b.points.copy(),oh(this,d,e,f,h,!0)?(k.zg(c-1,new w(d.x,(d.y+h.y)/2)),k.zg(c+2,new w(h.x,(d.y+h.y)/2))):(k.zg(c-1,new w((d.x+h.x)/2,d.y)),k.zg(c+2,new w((d.x+h.x)/2,h.y))),k.Rc(c+1),k.Rc(c),b.points=k,b.Zd())}}else h=v.M(),K.Ym(d.x,d.y,f.x,f.y,e.x,e.y,h)&&h.Tj(e)<this.kh*this.kh&&(k=b.points.copy(),k.Rc(c),b.points=k,b.Zd()),
v.v(h)}a.oc();this.wf=this.name;a.ya("LinkReshaped",this.Js)}this.stopTool()};function oh(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.kh&&Math.abs(c.y-d.y)<a.kh&&Math.abs(d.y-e.y)<a.kh:Math.abs(b.x-c.x)<a.kh&&Math.abs(c.x-d.x)<a.kh&&Math.abs(d.x-e.x)<a.kh}v.defineProperty(ih,{kh:"resegmentingDistance"},function(){return this.FC},function(a){v.j(a,"number",ih,"resegmentingDistance");this.FC=a});
ih.prototype.reshape=function(a){var b=this.Js;b.Bl();var c=this.handle.pe,d=this.gE(this.handle);if(b.hc)if(c===b.at+1)c=b.at+1,d===lh?(b.Y(c,b.l(c-1).x,a.y),b.Y(c+1,b.l(c+2).x,a.y)):d===kh&&(b.Y(c,a.x,b.l(c-1).y),b.Y(c+1,a.x,b.l(c+2).y));else if(c===b.Vw-1)c=b.Vw-1,d===lh?(b.Y(c-1,b.l(c-2).x,a.y),b.Y(c,b.l(c+1).x,a.y)):d===kh&&(b.Y(c-1,a.x,b.l(c-2).y),b.Y(c,a.x,b.l(c+1).y));else{var d=c,e=b.l(d),f=b.l(d-1),h=b.l(d+1);K.D(f.x,e.x)&&K.D(e.y,h.y)?(K.D(f.x,b.l(d-2).x)&&!K.D(f.y,b.l(d-2).y)?(b.w(d,a.x,
f.y),c++,d++):b.Y(d-1,a.x,f.y),K.D(h.y,b.l(d+2).y)&&!K.D(h.x,b.l(d+2).x)?b.w(d+1,h.x,a.y):b.Y(d+1,h.x,a.y)):K.D(f.y,e.y)&&K.D(e.x,h.x)?(K.D(f.y,b.l(d-2).y)&&!K.D(f.x,b.l(d-2).x)?(b.w(d,f.x,a.y),c++,d++):b.Y(d-1,f.x,a.y),K.D(h.x,b.l(d+2).x)&&!K.D(h.y,b.l(d+2).y)?b.w(d+1,a.x,h.y):b.Y(d+1,a.x,h.y)):K.D(f.x,e.x)&&K.D(e.x,h.x)?(K.D(f.x,b.l(d-2).x)&&!K.D(f.y,b.l(d-2).y)?(b.w(d,a.x,f.y),c++,d++):b.Y(d-1,a.x,f.y),K.D(h.x,b.l(d+2).x)&&!K.D(h.y,b.l(d+2).y)?b.w(d+1,a.x,h.y):b.Y(d+1,a.x,h.y)):K.D(f.y,e.y)&&K.D(e.y,
h.y)&&(K.D(f.y,b.l(d-2).y)&&!K.D(f.x,b.l(d-2).x)?(b.w(d,f.x,a.y),c++,d++):b.Y(d-1,f.x,a.y),K.D(h.y,b.l(d+2).y)&&!K.D(h.x,b.l(d+2).x)?b.w(d+1,h.x,a.y):b.Y(d+1,h.x,a.y));b.Y(c,a.x,a.y)}else b.Y(c,a.x,a.y),1===c&&b.computeSpot(!0).me()&&(e=b.U,f=b.$c,null===e||e.isVisible()||(e=e.findVisibleNode(),e!==b.U&&(f=e.hl(""))),d=f.fb(Kb,v.M()),e=b.getLinkPointFromPoint(e,f,d,a,!0,v.M()),b.Y(0,e.x,e.y),v.v(d),v.v(e)),c===b.ma-2&&b.computeSpot(!1).me()&&(c=b.ba,e=b.Bd,null===c||c.isVisible()||(c=c.findVisibleNode(),
c!==b.ba&&(e=c.hl(""))),d=e.fb(Kb,v.M()),e=b.getLinkPointFromPoint(c,e,d,a,!1,v.M()),b.Y(b.ma-1,e.x,e.y),v.v(d),v.v(e));b.Oi()};ih.prototype.computeReshape=function(a){var b=this.Js,c=this.handle.pe;switch(this.gE(this.handle)){case mh:return a;case lh:return b=b.l(c),new w(b.x,a.y);case kh:return b=b.l(c),new w(a.x,b.y);default:case jh:return b.l(c)}};v.u(ih,{VK:"originalPoint"},function(){return this.xC});v.u(ih,{WK:"originalPoints"},function(){return this.Ty});
function ph(){0<arguments.length&&v.dd(ph);Le.call(this);this.name="Resizing";this.yj=(new ia(1,1)).freeze();this.wj=(new ia(9999,9999)).freeze();this.cj=(new ia(NaN,NaN)).freeze();this.Mq=!1;this.Eb=null;var a=new X;a.Pj=Kb;a.Cb="Rectangle";a.xa=K.Lp;a.fill="lightblue";a.stroke="dodgerblue";a.nb=1;a.cursor="pointer";this.zk=a;this.Vb=null;this.wv=new ia;this.Sy=new w;this.ty=new ia(0,0);this.sy=new ia(Infinity,Infinity);this.qy=new ia(1,1);this.qC=!0}v.Ga(ph,Le);v.ga("ResizingTool",ph);
ph.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.hb&&!this.g.gb){var b=a.ZE;if(null!==b&&a.canResize()&&a.Z.H()&&a.isVisible()&&b.Z.H()&&b.ul()){var c=a.Qo(this.name);if(null===c||c.ec!==b)c=this.makeAdornment(b);if(null!==c){var d=b.jl();c.angle=d;var e=b.fb(c.Ze,v.M()),f=b.Si();c.location=e;v.v(e);e=c.placeholder;if(null!==e){var b=b.Fa,h=v.El();h.m(b.width*f,b.height*f);e.xa=h;v.Wj(h)}qh(this,c,d);a.Uk(this.name,c);return}}}a.yl(this.name)}};
ph.prototype.makeAdornment=function(a){var b=null,b=a.V.YE;if(null===b){b=new mf;b.type=rh;b.Ze=Kb;var c=new sh;c.Lf=!0;b.add(c);b.add(this.makeHandle(a,zb));b.add(this.makeHandle(a,Gb));b.add(this.makeHandle(a,Vb));b.add(this.makeHandle(a,Rb));b.add(this.makeHandle(a,zc));b.add(this.makeHandle(a,Bc));b.add(this.makeHandle(a,Cc));b.add(this.makeHandle(a,Ac))}else if(of(b),b=b.copy(),null===b)return null;b.Mc=this.name;b.ec=a;return b};
ph.prototype.makeHandle=function(a,b){var c=this.gt;if(null===c)return null;c=c.copy();c.alignment=b;return c};
function qh(a,b,c){if(null!==b)if(!b.alignment.Oc()&&""!==b.cursor)a:{a=b.alignment;a.me()&&(a=Kb);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof C)for(b=b.elements;b.next();)qh(a,
b.value,c)}v.defineProperty(ph,{gt:"handleArchetype"},function(){return this.zk},function(a){null!==a&&v.C(a,R,ph,"handleArchetype");this.zk=a});v.u(ph,{handle:"handle"},function(){return this.Vb});v.defineProperty(ph,{ec:"adornedObject"},function(){return this.Eb},function(a){null!==a&&v.C(a,R,ph,"adornedObject");this.Eb=a});ph.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.gb&&a.Ls&&a.O.left?null!==this.findToolHandleAt(a.uc.ea,this.name)?!0:!1:!1};
ph.prototype.doActivate=function(){var a=this.g;null!==a&&(this.Vb=this.findToolHandleAt(a.uc.ea,this.name),null!==this.Vb&&(this.Eb=this.Vb.V.ec,this.Sy.set(this.Eb.V.location),this.wv.set(this.Eb.xa),this.qy=this.computeCellSize(),this.ty=this.computeMinSize(),this.sy=this.computeMaxSize(),a.Le=!0,this.qC=a.Oa.isEnabled,a.Oa.isEnabled=!1,this.Qb(this.name),this.qa=!0))};ph.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.dk(),this.Eb=this.Vb=null,this.qa=a.Le=!1,a.Oa.isEnabled=this.qC)};
ph.prototype.doCancel=function(){this.Eb.xa=this.wv;this.Eb.V.location=this.Sy;this.stopTool()};ph.prototype.doMouseMove=function(){var a=this.g;if(this.qa&&null!==a){var b=this.ty,c=this.sy,d=this.qy,e=this.Eb.fE(a.O.ea,v.M()),f=th;this.Eb instanceof X&&(f=uh(this.Eb));b=this.computeResize(e,this.Vb.alignment,b,c,d,!(f===vh||f===wh||a.O.shift));this.resize(b);a.Nf();v.v(e)}};
ph.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){var b=this.ty,c=this.sy,d=this.qy,e=this.Eb.fE(a.O.ea,v.M()),f=th;this.Eb instanceof X&&(f=uh(this.Eb));b=this.computeResize(e,this.Vb.alignment,b,c,d,!(f===vh||f===wh||a.O.shift));this.resize(b);v.v(e);a.oc();this.wf=this.name;a.ya("PartResized",this.Eb,this.wv)}this.stopTool()};
ph.prototype.resize=function(a){if(null!==this.g){var b=this.ec,c=b.V,d=b.jl(),e=b.Si(),f=Math.PI*d/180,h=Math.cos(f),f=Math.sin(f),k=0<d&&180>d?1:0,l=90<d&&270>d?1:0,d=180<d&&360>d?1:0,m=b.Fa.width,n=b.Fa.height;b.xa=a.size;var p=c.position.copy();c.mf();m=b.Fa.width-m;n=b.Fa.height-n;if(0!==m||0!==n)0!==m&&(p.x+=e*((a.x+m*l)*h-(a.y+n*k)*f)),0!==n&&(p.y+=e*((a.x+m*d)*f+(a.y+n*l)*h)),c.move(p),c instanceof S&&c.invalidateConnectedLinks()}};
ph.prototype.computeResize=function(a,b,c,d,e,f){b.me()&&(b=Kb);var h=this.ec.Fa,k=h.x,l=h.y,m=h.x+h.width,n=h.y+h.height,p=1;if(!f){var p=h.width,q=h.height;0>=p&&(p=1);0>=q&&(q=1);p=q/p}q=v.M();K.Xs(a.x,a.y,k,l,e.width,e.height,q);a=h.copy();0>=b.x?0>=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=Math.max(n-a.y,c.height),f||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):
(a.width=a.height/p,a.x=m-a.width))):1<=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(b=a.height/a.width,p<b?a.height=p*a.width:(a.width=a.height/p,a.x=m-a.width))):(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=m-a.x,f||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-
c.height),a.height=Math.max(n-a.y,c.height),f||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):a.width=a.height/p)):1<=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(b=a.height/a.width,p<b?a.height=p*a.width:a.width=a.height/p)):(a.width=Math.max(Math.min(q.x-k,d.width),c.width),f||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):0>=b.y?(a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=n-a.y,f||(a.width=a.height/
p,a.x=k+.5*(m-k-a.width))):1<=b.y&&(a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(a.width=a.height/p,a.x=k+.5*(m-k-a.width)));v.v(q);return a};ph.prototype.computeMinSize=function(){var a=this.ec.ug.copy(),b=this.ug;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
ph.prototype.computeMaxSize=function(){var a=this.ec.af.copy(),b=this.af;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
ph.prototype.computeCellSize=function(){var a=new ia(NaN,NaN),b=this.ec.V;if(null!==b){var c=b.HI;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Ho;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.g;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.wb.Xd,null!==c&&c.Qw&&(c=c.iE,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.ft,null!==b&&b.visible&&this.Qw&&(c=b.Jw,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
v.defineProperty(ph,{ug:"minSize"},function(){return this.yj},function(a){v.C(a,ia,ph,"minSize");if(!this.yj.L(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.yj.m(b,a)}});v.defineProperty(ph,{af:"maxSize"},function(){return this.wj},function(a){v.C(a,ia,ph,"maxSize");if(!this.wj.L(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.wj.m(b,a)}});
v.defineProperty(ph,{Ho:"cellSize"},function(){return this.cj},function(a){v.C(a,ia,ph,"cellSize");this.cj.L(a)||this.cj.assign(a)});v.defineProperty(ph,{Qw:"isGridSnapEnabled"},function(){return this.Mq},function(a){v.j(a,"boolean",ph,"isGridSnapEnabled");this.Mq=a});v.u(ph,{TK:"originalDesiredSize"},function(){return this.wv});v.u(ph,{UK:"originalLocation"},function(){return this.Sy});
function xh(){0<arguments.length&&v.dd(xh);Le.call(this);this.name="Rotating";this.NC=45;this.MC=2;this.Eb=null;var a=new X;a.Cb="Ellipse";a.xa=K.Fx;a.fill="lightblue";a.stroke="dodgerblue";a.nb=1;a.cursor="pointer";this.zk=a;this.Vb=null;this.vv=0;this.HC=new w}v.Ga(xh,Le);v.ga("RotatingTool",xh);
xh.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.hb&&!this.g.gb){var b=a.bF;if(null!==b&&a.canRotate()&&a.Z.H()&&a.isVisible()&&b.Z.H()&&b.ul()){var c=a.Qo(this.name);if(null===c||c.ec!==b)c=this.makeAdornment(b);if(null!==c){c.angle=b.jl();var d=null,e=null;b===a||b===a.ac?(d=a.ac,e=a.Ze):(d=b,e=Kb);for(var f=d.Fa,e=v.Rb(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.xb(e),d=d.T;var d=e.y,f=Math.max(e.x-b.Fa.width,0),h=v.M();c.location=b.fb(new L(1,
0,50+f,d),h);v.v(h);v.v(e);a.Uk(this.name,c);return}}}a.yl(this.name)}};xh.prototype.makeAdornment=function(a){var b=null,b=a.V.KI;if(null===b){b=new mf;b.type=yh;b.Ze=Kb;var c=this.gt;null!==c&&b.add(c.copy())}else if(of(b),b=b.copy(),null===b)return null;b.Mc=this.name;b.ec=a;return b};v.defineProperty(xh,{gt:"handleArchetype"},function(){return this.zk},function(a){null!==a&&v.C(a,R,xh,"handleArchetype");this.zk=a});v.u(xh,{handle:"handle"},function(){return this.Vb});
v.defineProperty(xh,{ec:"adornedObject"},function(){return this.Eb},function(a){null!==a&&v.C(a,R,xh,"adornedObject");this.Eb=a});xh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.gb&&a.mw&&a.O.left?null!==this.findToolHandleAt(a.uc.ea,this.name)?!0:!1:!1};
xh.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Vb=this.findToolHandleAt(a.uc.ea,this.name),null!==this.Vb)){this.Eb=this.Vb.V.ec;var b=this.Eb.V,c=b.ac;this.HC=this.Eb===b||this.Eb===c?c.fb(b.Ze):this.Eb.fb(Kb);this.vv=this.Eb.angle;a.Le=!0;a.Cz=!0;this.Qb(this.name);this.qa=!0}};xh.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.dk(),this.Eb=this.Vb=null,this.qa=a.Le=!1)};xh.prototype.doCancel=function(){var a=this.g;null!==a&&(a.Cz=!1);this.rotate(this.vv);this.stopTool()};
xh.prototype.doMouseMove=function(){var a=this.g;this.qa&&null!==a&&(a=this.computeRotate(a.O.ea),this.rotate(a))};xh.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){a.Cz=!1;var b=this.computeRotate(a.O.ea);this.rotate(b);a.oc();this.wf=this.name;a.ya("PartRotated",this.Eb,this.vv)}this.stopTool()};xh.prototype.rotate=function(a){null!==this.Eb&&(this.Eb.angle=a)};
xh.prototype.computeRotate=function(a){a=this.HC.Wg(a);var b=this.Eb.T;null!==b&&(a-=b.jl(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.ZI),180),c=Math.min(Math.abs(this.YI),b/2);!this.g.O.shift&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};v.defineProperty(xh,{ZI:"snapAngleMultiple"},function(){return this.NC},function(a){v.j(a,"number",xh,"snapAngleMultiple");this.NC=a});
v.defineProperty(xh,{YI:"snapAngleEpsilon"},function(){return this.MC},function(a){v.j(a,"number",xh,"snapAngleEpsilon");this.MC=a});v.u(xh,{SK:"originalAngle"},function(){return this.vv});function zh(){0<arguments.length&&v.dd(zh);Le.call(this);this.name="ClickSelecting"}v.Ga(zh,Le);v.ga("ClickSelectingTool",zh);zh.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0};
zh.prototype.doMouseUp=function(){this.qa&&(this.standardMouseSelect(),this.standardMouseClick(),this.g.O.Zj&&this.g.wb.doToolTip());this.stopTool()};function Ah(){0<arguments.length&&v.dd(Ah);Le.call(this);this.name="Action";this.kn=null}v.Ga(Ah,Le);v.ga("ActionTool",Ah);
Ah.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a)return!1;var b=a.O,c=a.le(b.ea,function(a){for(;null!==a.T&&!a.Nw;)a=a.T;return a});if(null!==c){if(!c.Nw)return!1;this.kn=c;a.wn=a.le(b.ea,null,null);return!0}return!1};Ah.prototype.doMouseDown=function(){if(this.qa){var a=this.g.O,b=this.kn;null!==b&&(a.qe=b,null!==b.nD&&b.nD(a,b))}else this.canStart()&&this.doActivate()};
Ah.prototype.doMouseMove=function(){if(this.qa){var a=this.g.O,b=this.kn;null!==b&&(a.qe=b,null!==b.oD&&b.oD(a,b))}};Ah.prototype.doMouseUp=function(){if(this.qa){var a=this.g,b=a.O,c=this.kn;if(null===c)return;b.qe=c;null!==c.pD&&c.pD(b,c);this.isBeyondDragSize()||Cf(c,b,a)}this.stopTool()};Ah.prototype.doCancel=function(){var a=this.g;if(null!==a){var a=a.O,b=this.kn;if(null===b)return;a.qe=b;null!==b.mD&&b.mD(a,b)}this.stopTool()};Ah.prototype.doStop=function(){this.kn=null};
function va(){0<arguments.length&&v.dd(va);Le.call(this);this.name="ClickCreating";this.sk=null;this.XB=!0;this.LB=new w(0,0)}v.Ga(va,Le);v.ga("ClickCreatingTool",va);
va.prototype.canStart=function(){if(!this.isEnabled||null===this.mz)return!1;var a=this.g;if(null===a||a.gb||a.rf||!a.Co||!a.O.left||this.isBeyondDragSize())return!1;if(this.MH){if(1===a.O.Ue&&(this.LB=a.O.ef.copy()),2!==a.O.Ue||this.isBeyondDragSize(this.LB))return!1}else if(1!==a.O.Ue)return!1;return a.$a!==this&&null!==a.Zs(a.O.ea,!0)?!1:!0};va.prototype.doMouseUp=function(){var a=this.g;this.qa&&null!==a&&this.insertPart(a.O.ea);this.stopTool()};
va.prototype.insertPart=function(a){var b=this.g;if(null===b)return null;var c=this.mz;if(null===c)return null;this.Qb(this.name);var d=null;c instanceof J?c.Ld()&&(of(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.da.copyNodeData(c),v.Wa(c)&&(b.da.Vk(c),d=b.Wh(c)));null!==d&&(d.location=a,b.lf&&b.select(d));b.oc();this.wf=this.name;b.ya("PartCreated",d);this.dk();return d};
v.defineProperty(va,{mz:"archetypeNodeData"},function(){return this.sk},function(a){null!==a&&v.C(a,Object,va,"archetypeNodeData");this.sk=a});v.defineProperty(va,{MH:"isDoubleClick"},function(){return this.XB},function(a){v.j(a,"boolean",va,"isDoubleClick");this.XB=a});function Bh(a,b,c){this.text=a;this.FD=b;this.visible=c}function Ch(){0<arguments.length&&v.dd(Ch);Le.call(this);this.name="ContextMenu";this.xn=this.qB=null;this.nC=new w;this.gy=this.Fn=null;Dh(this)}v.Ga(Ch,Le);
v.ga("ContextMenuTool",Ch);v.OD=!1;v.Ps=null;v.Qs=null;
function Dh(a){a.Fn=new mf;a.cD=function(){a.stopTool()};if(!1===v.OD){var b=v.createElement("div"),c=v.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=
v.createElement("style");window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},
!1);b.addEventListener("selectstart",function(a){a.preventDefault();return!1},!1);c.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));v.Qs=b;v.Ps=c;v.OD=!0}}Ch.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||this.isBeyondDragSize()||!a.O.right?!1:null!==this.Fn&&a.O.Zj||null!==this.findObjectWithContextMenu()?!0:!1};
Ch.prototype.doStart=function(){var a=this.g;null!==a&&this.nC.set(a.uc.ea)};Ch.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.xn=null};
Ch.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return null;var c=b.O,d=null;a instanceof E||(d=a instanceof R?a:b.le(c.ea,null,function(a){return!a.layer.Bc}));if(null!==d){for(a=d;null!==a;){c=a.contextMenu;if(null!==c)return a;a=a.T}if(null!==this.Fn&&b.O.Zj)return d.V}else if(c=b.contextMenu,null!==c)return b;return null};Ch.prototype.doActivate=function(){};
Ch.prototype.doMouseUp=function(){var a=this.g;null!==a&&(this.qa?null!==this.Hf&&(a=a.le(a.O.ea,null,null),null!==a&&a.rl(this.Hf)&&this.standardMouseClick(null,null),this.stopTool()):this.canStart()&&zf(this,!0))};
function zf(a,b,c){void 0===c&&(c=null);a.qa=!0;b&&a.standardMouseSelect();a.standardMouseClick();a.xn=null;null===c&&(c=a.findObjectWithContextMenu());null!==c?(b=c.contextMenu,null!==b?(a.xn=c instanceof R?c:null,a.showContextMenu(b,a.xn)):a.showDefaultContextMenu()):a.showDefaultContextMenu()}Ch.prototype.doMouseMove=function(){this.qa&&this.standardMouseOver()};
Ch.prototype.showContextMenu=function(a,b){v.C(a,mf,Ch,"showContextMenu:contextmenu");null!==b&&v.C(b,R,Ch,"showContextMenu:obj");var c=this.g;if(null!==c){a!==this.Hf&&this.hideContextMenu();a.tf="Tool";a.zl=!1;a.scale=1/c.scale;a.Mc=this.name;c.add(a);if(null!==b){var c=null,d=b.So();null!==d&&(c=d.data);a.ec=b;a.data=c}else a.data=c.da;a.mf();this.positionContextMenu(a,b);this.Hf=a}};
Ch.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.O.ea.copy(),d=a.Ba,e=b.tb;b.O.Zj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};Ch.prototype.hideContextMenu=function(){var a=this.g;null!==a&&null!==this.Hf&&(this.Hf.data=null,this.Hf.ec=null,a.remove(this.Hf),this.Hf=null,this.standardMouseOver())};
function Eh(a){if(null===a.g)return null;a=new G(Bh);a.add(new Bh("Copy",function(a){a.rb.copySelection()},function(a){return a.rb.canCopySelection()}));a.add(new Bh("Cut",function(a){a.rb.cutSelection()},function(a){return a.rb.canCutSelection()}));a.add(new Bh("Delete",function(a){a.rb.deleteSelection()},function(a){return a.rb.canDeleteSelection()}));a.add(new Bh("Paste",function(a){a.rb.pasteSelection(a.O.ea)},function(a){return a.rb.canPasteSelection()}));a.add(new Bh("Select All",function(a){a.rb.selectAll()},
function(a){return a.rb.canSelectAll()}));a.add(new Bh("Undo",function(a){a.rb.undo()},function(a){return a.rb.canUndo()}));a.add(new Bh("Redo",function(a){a.rb.redo()},function(a){return a.rb.canRedo()}));a.add(new Bh("Scroll To Part",function(a){a.rb.scrollToPart()},function(a){return a.rb.canScrollToPart()}));a.add(new Bh("Zoom To Fit",function(a){a.rb.zoomToFit()},function(a){return a.rb.canZoomToFit()}));a.add(new Bh("Reset Zoom",function(a){a.rb.resetZoom()},function(a){return a.rb.canResetZoom()}));
a.add(new Bh("Group Selection",function(a){a.rb.groupSelection()},function(a){return a.rb.canGroupSelection()}));a.add(new Bh("Ungroup Selection",function(a){a.rb.ungroupSelection()},function(a){return a.rb.canUngroupSelection()}));a.add(new Bh("Edit Text",function(a){a.rb.editTextBlock()},function(a){return a.rb.canEditTextBlock()}));return a}
Ch.prototype.showDefaultContextMenu=function(){var a=this.g;if(null!==a){null===this.gy&&(this.gy=Eh(this));this.Fn!==this.Hf&&this.hideContextMenu();v.Qs.innerHTML="";v.Ps.addEventListener("click",this.cD,!1);var b=this,c=v.createElement("ul");c.className="defaultCXul";v.Qs.appendChild(c);c.innerHTML="";for(var d=this.gy.i;d.next();){var e=d.value,f=e.text,h=e.visible;if("function"===typeof e.FD&&("function"!==typeof h||h(a))){h=v.createElement("li");h.className="defaultCXli";var k=v.createElement("a");
k.className="defaultCXa";k.href="#";k.UF=e.FD;k.addEventListener("click",function(c){this.UF(a);b.stopTool();c.preventDefault();return!1},!1);k.textContent=f;h.appendChild(k);c.appendChild(h)}}v.Qs.style.display="block";v.Ps.style.display="block";this.Hf=this.Fn}};Ch.prototype.hideDefaultContextMenu=function(){null!==this.Hf&&this.Hf===this.Fn&&(v.Qs.style.display="none",v.Ps.style.display="none",v.Ps.removeEventListener("click",this.cD,!1),this.Hf=null)};
v.defineProperty(Ch,{Hf:"currentContextMenu"},function(){return this.qB},function(a){null!==a&&v.C(a,mf,Ch,"currentContextMenu");this.qB=a});v.defineProperty(Ch,{VJ:"currentObject"},function(){return this.xn},function(a){null!==a&&v.C(a,R,Ch,"currentObject");this.xn=a});v.u(Ch,{NK:"mouseDownPoint"},function(){return this.nC});
function Fh(){0<arguments.length&&v.dd(Fh);Le.call(this);this.name="DragSelecting";this.Gn=175;this.bC=!1;var a=new J;a.tf="Tool";a.zl=!1;var b=new X;b.name="SHAPE";b.Cb="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.Ll=a}v.Ga(Fh,Le);v.ga("DragSelectingTool",Fh);
Fh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.lf)return!1;var b=a.O;return!b.left||a.$a!==this&&(!this.isBeyondDragSize()||b.timestamp-a.uc.timestamp<this.PD||null!==a.Zs(b.ea,!0))?!1:!0};Fh.prototype.doActivate=function(){var a=this.g;null!==a&&(this.qa=!0,a.Le=!0,a.lb=!0,a.add(this.Tg),this.doMouseMove())};Fh.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.remove(this.Tg),a.lb=!1,this.qa=a.Le=!1)};
Fh.prototype.doMouseMove=function(){if(null!==this.g&&this.qa&&null!==this.Tg){var a=this.computeBoxBounds(),b=this.Tg.Yd("SHAPE");null===b&&(b=this.Tg.If());b.xa=a.size;this.Tg.position=a.position}};Fh.prototype.doMouseUp=function(){if(this.qa){var a=this.g;a.remove(this.Tg);try{a.Yb="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Yb=""}}this.stopTool()};Fh.prototype.computeBoxBounds=function(){var a=this.g;return null===a?new z(0,0,0,0):new z(a.uc.ea,a.O.ea)};
Fh.prototype.selectInRect=function(a){var b=this.g;if(null!==b){var c=b.O;b.ya("ChangingSelection");a=b.Vj(a,null,function(a){return a instanceof J?a.canSelect():!1},this.TH);if(v.Vm?c.xt:c.control)if(c.shift)for(a=a.i;a.next();)c=a.value,c.hb&&(c.hb=!1);else for(a=a.i;a.next();)c=a.value,c.hb=!c.hb;else{if(!c.shift){for(var c=new G(J),d=b.selection.i;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.i;c.next();)c.value.hb=!1}for(a=a.i;a.next();)c=a.value,c.hb||(c.hb=!0)}b.ya("ChangedSelection")}};
v.defineProperty(Fh,{PD:"delay"},function(){return this.Gn},function(a){v.j(a,"number",Fh,"delay");this.Gn=a});v.defineProperty(Fh,{TH:"isPartialInclusion"},function(){return this.bC},function(a){v.j(a,"boolean",Fh,"isPartialInclusion");this.bC=a});v.defineProperty(Fh,{Tg:"box"},function(){return this.Ll},function(a){null!==a&&v.C(a,J,Fh,"box");this.Ll=a});
function Gh(){0<arguments.length&&v.dd(Gh);Le.call(this);this.name="Panning";this.Uy=new w;this.bj=!1;var a=this;this.RC=function(){window.document.removeEventListener("scroll",a.RC,!1);a.stopTool()}}v.Ga(Gh,Le);v.ga("PanningTool",Gh);Gh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||!a.Be&&!a.Ce||!a.O.left||a.$a!==this&&!this.isBeyondDragSize()?!1:!0};
Gh.prototype.doActivate=function(){var a=this.g;null!==a&&(this.bj?(a.O.bubbles=!0,window.document.addEventListener("scroll",this.RC,!1)):(a.Yb="move",a.Le=!0,this.Uy=a.position.copy()),this.qa=!0)};Gh.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.Yb="",this.qa=a.Le=!1)};Gh.prototype.doCancel=function(){var a=this.g;null!==a&&(a.position=this.Uy,a.Le=!1);this.stopTool()};Gh.prototype.doMouseMove=function(){this.move()};Gh.prototype.doMouseUp=function(){this.move();this.stopTool()};
Gh.prototype.move=function(){var a=this.g;if(this.qa&&a)if(this.bj)a.O.bubbles=!0;else{var b=a.position,c=a.uc.ea,d=a.O.ea,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.Be||(e=b.x);a.Ce||(c=b.y);a.position=new w(e,c)}};v.defineProperty(Gh,{bubbles:"bubbles"},function(){return this.bj},function(a){v.j(a,"boolean",Gh,"bubbles");this.bj=a});v.u(Gh,{XK:"originalPosition"},function(){return this.Uy});
function Hh(){0<arguments.length&&v.dd(Hh);Le.call(this);this.name="TextEditing";this.uB=this.$v=this.VC=null;this.uo=Ph;this.Rk=null;this.cb=Qh;this.Ok=null;this.kC=1;this.KC=!0;var a=v.createElement("textarea");a.bB=!0;this.AB=a;a.addEventListener("input",function(){var a=this.textEditingTool,c=a.VC;c.text=this.value;var d=this.eJ;Rh(c,a.Cg.gv,Infinity);this.style.width=20+c.Ba.width*d+"px";this.style.height=10+c.Ba.height*d+"px";this.rows=c.$H},!1);a.addEventListener("keydown",function(a){var c=
a.which,d=this.textEditingTool;if(null!==d)if(13===c)!1===d.$v.Sw&&a.preventDefault(),d.acceptText(Sh);else{if(9===c)return d.acceptText(Th),a.preventDefault(),!1;27===c&&(d.doCancel(),null!==d.g&&d.g.focus())}},!1);a.addEventListener("focus",function(){var a=this.textEditingTool;a.cb===Uh?a.cb=Vh:a.cb===Wh?a.cb=Xh:a.cb===Xh&&(a.cb=Vh);"function"===typeof this.select&&a.zA&&(this.select(),this.setSelectionRange(0,9999))},!1);a.addEventListener("blur",function(){"function"===typeof this.focus&&this.focus();
var a=this.textEditingTool;"function"===typeof this.select&&a.zA&&(this.select(),this.setSelectionRange(0,9999))},!1)}v.ga("TextEditingTool",Hh);v.Ga(Hh,Le);var Yh;Hh.LostFocus=Yh=v.p(Hh,"LostFocus",0);var Zh;Hh.MouseDown=Zh=v.p(Hh,"MouseDown",1);var Th;Hh.Tab=Th=v.p(Hh,"Tab",2);var Sh;Hh.Enter=Sh=v.p(Hh,"Enter",3);Hh.SingleClick=v.p(Hh,"SingleClick",0);var Ph;Hh.SingleClickSelected=Ph=v.p(Hh,"SingleClickSelected",1);
var Qh=v.p(Hh,"StateNone",0),Uh=v.p(Hh,"StateActive",1),Vh=v.p(Hh,"StateEditing",2),Xh=v.p(Hh,"StateEditing2",3),$h=v.p(Hh,"StateValidating",4),Wh=v.p(Hh,"StateValidated",5);v.defineProperty(Hh,{Cg:"textBlock"},function(){return this.$v},function(a){null!==a&&v.C(a,ra,Hh,"textBlock");this.$v=a});v.defineProperty(Hh,{ng:"currentTextEditor"},function(){return this.uB},function(a){this.uB=a});
v.defineProperty(Hh,{XG:"defaultTextEditor"},function(){return this.AB},function(a){v.C(a,Element,Hh,"defaultTextEditor");this.AB=a});v.defineProperty(Hh,{GA:"starting"},function(){return this.uo},function(a){v.qb(a,Hh,Hh,"starting");this.uo=a});
Hh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.gb||!a.O.left||this.isBeyondDragSize())return!1;a=a.le(a.O.ea,null,function(a){return a instanceof ra});if(null===a||!a.Dz||!a.V.canEdit())return!1;a=a.V;return null===a||this.GA===Ph&&!a.hb?!1:!0};Hh.prototype.doStart=function(){this.qa||null===this.Cg||this.doActivate()};
Hh.prototype.doActivate=function(){if(!this.qa){var a=this.g;if(null!==a){var b=this.Cg;null===b&&(b=a.le(a.O.ea,function(a){return a instanceof ra?a:null}));if(null!==b){this.Cg=b;var c=b.V;if(null!==c){this.qa=!0;this.cb=Uh;var d=this.XG,e=!1;null!==b.tF&&(d=b.tF);null===d||d.bB||(e=!0);this.VC=this.Cg.copy();a.eF(c.Z);if(d.bB){var f=b.fb(Kb),h=a.position,k=a.scale,l=b.Si()*k;l<this.IE&&(l=this.IE);var c=b.Fa.width*l,m=b.Fa.height*l,n=(f.x-h.x)*k,f=(f.y-h.y)*k;d.value=b.text;a.fl.style.font=b.font;
d.style.font="inherit";d.style.fontSize=100*l+"%";d.style.lineHeight="normal";d.style.width=c+6+"px";d.style.height=m+2+"px";d.style.left=(n-c/2|0)-1+"px";d.style.top=(f-m/2|0)-1+"px";d.style.textAlign=b.textAlign;d.style.margin="0";d.style.padding="1px";d.style.border="0";d.style.outline="none";d.style["white-space"]="pre-wrap";d.style.overflow="hidden"}a.fl.appendChild(d);d.style.position="absolute";d.style.zIndex=100;d.className="start";d.textEditingTool=this;d.eJ=l;if(e&&"function"===typeof d.onActivate)d.onActivate();
this.ng=d;"function"===typeof d.focus&&d.focus();"function"===typeof d.select&&this.zA&&(d.select(),d.setSelectionRange(0,9999))}}}}};Hh.prototype.doCancel=function(){null!==this.Ok&&(this.ng.style.border=this.Ok,this.Ok=null);this.stopTool()};Hh.prototype.doMouseUp=function(){!this.qa&&this.canStart()&&this.doActivate()};Hh.prototype.doMouseDown=function(){this.qa&&this.acceptText(Zh)};
Hh.prototype.acceptText=function(a){switch(a){case Zh:if(this.cb===Wh||this.cb===Xh)"function"===typeof this.ng.focus&&this.ng.focus();else if(this.cb===Uh||this.cb===Vh)this.cb=$h,ai(this);break;case Yh:case Sh:case Th:if(Sh===a&&!0===this.$v.Sw)break;if(this.cb===Uh||this.cb===Vh)this.cb=$h,ai(this)}};
function ai(a){if(null!==a.Cg&&null!==a.ng){var b=a.Cg,c=a.Cg.text,d=a.ng.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.Cg,c,e)){a.cb=Vh;null!==b.Ez&&b.Ez(a,c,e);null===a.Ok&&(a.Ok=a.ng.style.border,a.ng.style.border="3px solid red");"function"===typeof a.ng.focus&&a.ng.focus();return}a.Qb(a.name);a.cb=Wh;c!==e&&(a.Cg.text=e);a.wf=a.name;b=a.g;null!==b&&b.ya("TextEdited",a.Cg,c);a.dk();a.stopTool();null!==b&&b.focus()}null!==a.Ok&&(a.ng.style.border=a.Ok,a.Ok=null)}
Hh.prototype.doDeactivate=function(){var a=this.g;if(null!==a){this.cb=Qh;this.Cg=null;if(null!==this.ng){var b=this.ng;if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.fl.removeChild(b)}this.qa=!1}};Hh.prototype.isValidText=function(a,b,c){v.C(a,ra,Hh,"isValidText:textblock");var d=this.JA;if(null!==d&&!d(a,b,c))return!1;d=a.JA;return null===d||d(a,b,c)?!0:!1};
v.defineProperty(Hh,{JA:"textValidation"},function(){return this.Rk},function(a){null!==a&&v.j(a,"function",Hh,"textValidation");this.Rk=a});v.defineProperty(Hh,{IE:"minimumEditorScale"},function(){return this.kC},function(a){null!==a&&v.j(a,"number",Hh,"minimumEditorScale");this.kC=a});v.defineProperty(Hh,{zA:"selectsTextOnActivate"},function(){return this.KC},function(a){null!==a&&v.j(a,"boolean",Hh,"selectsTextOnActivate");this.KC=a});
function kf(){Le.call(this);this.name="ToolManager";this.ZF=new G(Le);this.$F=new G(Le);this.aG=new G(Le);this.PB=this.QB=1E3;this.EB=(new ia(2,2)).Ma();this.dD=5E3;this.oC=Ef;this.NB=bi;this.Gu=this.ey=null;this.xm=-1}v.Ga(kf,Le);v.ga("ToolManager",kf);var Ef;kf.WheelScroll=Ef=v.p(kf,"WheelScroll",0);var Df;kf.WheelZoom=Df=v.p(kf,"WheelZoom",1);kf.WheelNone=v.p(kf,"WheelNone",2);var bi;kf.GestureZoom=bi=v.p(kf,"GestureZoom",3);var ci;kf.GestureCancel=ci=v.p(kf,"GestureCancel",4);var di;
kf.GestureNone=di=v.p(kf,"GestureNone",5);v.defineProperty(kf,{Bt:"mouseWheelBehavior"},function(){return this.oC},function(a){v.qb(a,kf,kf,"mouseWheelBehavior");this.oC=a});v.defineProperty(kf,{Vo:"gestureBehavior"},function(){return this.NB},function(a){v.qb(a,kf,kf,"gestureBehavior");this.NB=a});
kf.prototype.initializeStandardTools=function(){this.oG=new Ah;this.QE=new Jf;this.cI=new ih;this.aF=new ph;this.MI=new xh;this.CE=new ua;this.Xd=new wf;this.dH=new Fh;this.vI=new Gh;this.uz=new Ch;this.IA=new Hh;this.EG=new va;this.FG=new zh};
kf.prototype.doMouseDown=function(){var a=this.g;if(null!==a){var b=a.O;b.Zj&&this.Vo===ci&&(b.bubbles=!1);if(b.ot){if(this.Vo===di){b.bubbles=!0;return}if(this.Vo===ci)return;if(a.$a.canStartMultiTouch()){a.$a.standardPinchZoomStart();return}}b=a.ja;b.pz&&0!==b.ph&&v.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.df.length,c=0;c<b;c++){var d=this.df.ha(c);null===d.g&&d.Fc(this.g);if(d.canStart()){a.$a=d;a.$a===d&&(d.qa||d.doActivate(),d.doMouseDown());
return}}1===a.O.button&&(this.Bt===Ef?this.Bt=Df:this.Bt===Df&&(this.Bt=Ef));this.doActivate();this.standardWaitAfter(this.kE)}};
kf.prototype.doMouseMove=function(){var a=this.g;if(null!==a){var b=a.O;if(b.ot){if(this.Vo===di){b.bubbles=!0;return}if(this.Vo===ci)return;if(a.$a.canStartMultiTouch()){a.$a.standardPinchZoomMove();return}}if(this.qa)for(var b=this.Of.length,c=0;c<b;c++){var d=this.Of.ha(c);null===d.g&&d.Fc(this.g);if(d.canStart()){a.$a=d;a.$a===d&&(d.qa||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.qa?this.kE:this.DH)}};
kf.prototype.doCurrentObjectChanged=function(a,b){var c=this.bl;null===c||null!==b&&(b===c||b.rl(c))||this.hideToolTip()};kf.prototype.doWaitAfter=function(){var a=this.g;null!==a&&a.ub&&(this.doMouseHover(),this.qa||this.doToolTip())};kf.prototype.doMouseHover=function(){var a=this.g;if(null!==a){var b=a.O;null===b.qe&&(b.qe=a.le(b.ea,null,null));var c=b.qe;if(null!==c)for(b.Nc=!1;null!==c;){a=this.qa?c.bA:c.cA;if(null!==a&&(a(b,c),b.Nc))break;c=c.T}else a=this.qa?a.bA:a.cA,null!==a&&a(b)}};
kf.prototype.doToolTip=function(){var a=this.g;if(null!==a){var b=a.O;null===b.qe&&(b.qe=a.le(b.ea,null,null));b=b.qe;if(null!==b){if(b!==this.bl&&!b.rl(this.bl)){for(;null!==b;){a=b.LA;if(null!==a){this.showToolTip(a,b);return}b=b.T}this.hideToolTip()}}else a=a.LA,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
kf.prototype.showToolTip=function(a,b){v.C(a,mf,kf,"showToolTip:tooltip");null!==b&&v.C(b,R,kf,"showToolTip:obj");var c=this.g;if(null!==c){a!==this.bl&&this.hideToolTip();a.tf="Tool";a.zl=!1;a.scale=1/c.scale;c.add(a);if(null!==b&&b!==this.Gu){var c=null,d=b.So();null!==d&&(c=d.data);a.ec=b;a.data=c}else null===b&&(a.data=c.da);if(null===b||b!==this.Gu)a.mf(),this.positionToolTip(a,b);this.ey=a;this.Gu=b;-1!==this.xm&&(v.clearTimeout(this.xm),this.xm=-1);c=this.jJ;if(0<c&&Infinity!==c){var e=this;
this.xm=v.setTimeout(function(){e.hideToolTip()},c)}}};kf.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.O.ea.copy(),d=a.Ba,e=b.tb;b.O.Zj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};
kf.prototype.hideToolTip=function(){-1!==this.xm&&(v.clearTimeout(this.xm),this.xm=-1);if(null!==this.bl){var a=this.g;null!==a&&(this.bl.data=null,this.bl.ec=null,a.remove(this.bl),this.Gu=this.ey=null)}};v.u(kf,{bl:"currentToolTip"},function(){return this.ey});
kf.prototype.doMouseUp=function(){this.cancelWaitAfter();if(this.qa){var a=this.g;if(null===a)return;for(var b=this.Pf.length,c=0;c<b;c++){var d=this.Pf.ha(c);null===d.g&&d.Fc(this.g);if(d.canStart()){a.$a=d;a.$a===d&&(d.qa||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};kf.prototype.doMouseWheel=function(){this.standardMouseWheel()};kf.prototype.doKeyDown=function(){var a=this.g;null!==a&&a.rb.doKeyDown()};kf.prototype.doKeyUp=function(){var a=this.g;null!==a&&a.rb.doKeyUp()};
kf.prototype.doCancel=function(){null!==Hf&&Hf.doCancel();Le.prototype.doCancel.call(this)};kf.prototype.findTool=function(a){v.j(a,"string",kf,"findTool:name");for(var b=this.df.length,c=0;c<b;c++){var d=this.df.ha(c);if(d.name===a)return d}b=this.Of.length;for(c=0;c<b;c++)if(d=this.Of.ha(c),d.name===a)return d;b=this.Pf.length;for(c=0;c<b;c++)if(d=this.Pf.ha(c),d.name===a)return d;return null};
kf.prototype.replaceTool=function(a,b){v.j(a,"string",kf,"replaceTool:name");null!==b&&(v.C(b,Le,kf,"replaceTool:newtool"),b.g&&b.g!==this.g&&v.k("Cannot share tools between Diagrams: "+b.toString()),b.Fc(this.g));for(var c=this.df.length,d=0;d<c;d++){var e=this.df.ha(d);if(e.name===a)return null!==b?this.df.zg(d,b):this.df.Rc(d),e}c=this.Of.length;for(d=0;d<c;d++)if(e=this.Of.ha(d),e.name===a)return null!==b?this.Of.zg(d,b):this.Of.Rc(d),e;c=this.Pf.length;for(d=0;d<c;d++)if(e=this.Pf.ha(d),e.name===
a)return null!==b?this.Pf.zg(d,b):this.Pf.Rc(d),e;return null};function ei(a,b,c,d){v.j(b,"string",kf,"replaceStandardTool:name");v.C(d,G,kf,"replaceStandardTool:list");null!==c&&(v.C(c,Le,kf,"replaceStandardTool:newtool"),c.g&&c.g!==a.g&&v.k("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.Fc(a.g));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}v.u(kf,{df:"mouseDownTools"},function(){return this.ZF});v.u(kf,{Of:"mouseMoveTools"},function(){return this.$F});
v.u(kf,{Pf:"mouseUpTools"},function(){return this.aG});v.defineProperty(kf,{DH:"hoverDelay"},function(){return this.QB},function(a){v.j(a,"number",kf,"hoverDelay");this.QB=a});v.defineProperty(kf,{kE:"holdDelay"},function(){return this.PB},function(a){v.j(a,"number",kf,"holdDelay");this.PB=a});v.defineProperty(kf,{eH:"dragSize"},function(){return this.EB},function(a){v.C(a,ia,kf,"dragSize");this.EB=a.aa()});
v.defineProperty(kf,{jJ:"toolTipDuration"},function(){return this.dD},function(a){v.j(a,"number",kf,"toolTipDuration");this.dD=a});v.defineProperty(kf,{oG:"actionTool"},function(){return this.findTool("Action")},function(a){ei(this,"Action",a,this.df)});v.defineProperty(kf,{QE:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){ei(this,"Relinking",a,this.df)});
v.defineProperty(kf,{cI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){ei(this,"LinkReshaping",a,this.df)});v.defineProperty(kf,{aF:"resizingTool"},function(){return this.findTool("Resizing")},function(a){ei(this,"Resizing",a,this.df)});v.defineProperty(kf,{MI:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){ei(this,"Rotating",a,this.df)});
v.defineProperty(kf,{CE:"linkingTool"},function(){return this.findTool("Linking")},function(a){ei(this,"Linking",a,this.Of)});v.defineProperty(kf,{Xd:"draggingTool"},function(){return this.findTool("Dragging")},function(a){ei(this,"Dragging",a,this.Of)});v.defineProperty(kf,{dH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){ei(this,"DragSelecting",a,this.Of)});
v.defineProperty(kf,{vI:"panningTool"},function(){return this.findTool("Panning")},function(a){ei(this,"Panning",a,this.Of)});v.defineProperty(kf,{uz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){ei(this,"ContextMenu",a,this.Pf)});v.defineProperty(kf,{IA:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){ei(this,"TextEditing",a,this.Pf)});
v.defineProperty(kf,{EG:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){ei(this,"ClickCreating",a,this.Pf)});v.defineProperty(kf,{FG:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){ei(this,"ClickSelecting",a,this.Pf)});
function $e(){this.vB=fi;this.sq=this.tq=this.W=null;this.Hn=this.In=0;this.tu=this.sc=this.Xn=this.oj=!1;this.pj=this.Pe=!0;this.Fu=this.Eu=this.sB=null;this.rB=0;this.uo=null;this.ru=new H("string");this.ny=600;this.dG=new w(0,0);this.gB=this.fB=this.hD=!1;this.jo=new ma(R,gi)}v.ga("AnimationManager",$e);$e.prototype.Fc=function(a){this.W=a};function fi(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function hi(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b}
function ii(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b}v.defineProperty($e,{GA:"starting"},function(){return this.uo},function(a){this.uo!==a&&(null!==a&&v.j(a,"function",$e,"starting"),this.uo=a)});v.u($e,{NJ:"animationReasons"},function(){return this.ru});$e.prototype.prepareAutomaticAnimation=$e.prototype.an=function(a){if(this.Pe&&(this.pj||this.W.ve)){this.ru.add(a);var b=this.GA;if(null===b||b(this,a))this.oj&&this.Xi(),this.sc=!0,this.tu=!1}};
function ji(a){a.Pe&&(a.ru.clear(),a.sc&&requestAnimationFrame(function(){!1===a.sc||a.oj||(a.W.Ij=1,ki(a.W),a.sc=!1,a.W.ya("AnimationStarting"),li(a))}))}
function mi(a,b,c,d,e,f){if(a.sc&&(!(b instanceof J)||b.oE)){void 0===f&&(f=!1);var h=a.jo;if(h.contains(b)){a=h.la(b);var k=a.start,l=a.end;void 0===k[c]&&(k[c]=ni(d));a.zz&&void 0!==l[c]?a.hH[c]=ni(e):l[c]=ni(e)}else k=new pa,l=new pa,k[c]=ni(d),l[c]=ni(e),c=l,d=k.position,d instanceof w&&!d.H()&&a.ru.contains("Expand SubGraph")&&d.assign(c.position),h.add(b,new gi(k,l,f))}}function ni(a){return a instanceof w?a.copy():a instanceof ia?a.copy():a}
function li(a){var b;void 0===b&&(b=new pa);var c=a.W;if(null!==c){a.oj=!0;var d=b.jK||a.vB,e=b.QK||null,f=b.RK||null,h=b.duration||a.ny;b=a.dG;for(var k=a.jo.i;k.next();){var l=k.value.start.position;l instanceof w&&(l.H()||l.assign(b))}a.sB=d;a.Eu=e;a.Fu=f;a.rB=h;var m=a.ay=a.jo;oi(a);pi(a,c,m,d,0,h);Cg(a.W);qi(a);requestAnimationFrame(function(b){var e=b||+new Date,f=e+h;(function s(b){if(!1!==a.oj){b=b||+new Date;var k=b>f?h:b-e;oi(a);pi(a,c,m,d,k,h);a.Eu&&a.Eu();Cg(c);qi(a);b>f?ri(a):requestAnimationFrame(s)}})(e)})}}
var si={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.DA(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new w(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},"position:node":function(a,b,c,d,e,f){var h=a.Z,k=c.Z;c=k.x+k.width/2-h.width/2;h=k.y+k.height/2-h.height/2;e!==f?a.DA(d(e,b.x,c-b.x,f),d(e,b.y,h-b.y,f)):a.position=new w(d(e,b.x,c-b.x,f),d(e,b.y,h-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==
f?b:c}};function oi(a){if(!a.Xn){var b=a.W;a.hD=b.lb;a.fB=b.yx;a.gB=b.Wt;b.lb=!0;b.yx=!0;b.Wt=!0;a.Xn=!0}}function qi(a){var b=a.W;b.lb=a.hD;b.yx=a.fB;b.Wt=a.gB;a.Xn=!1}
function pi(a,b,c,d,e,f){for(c=c.i;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(void 0!==si[m])si[m](h,l[m],k[m],d,e,f)}d=b.Qz;b.Qz=!0;0!==a.In&&0!==a.Hn&&(m=a.In,c=a.Hn,h=hi,m>c&&(h=ii),b.Tb=h(e,m,c-m,f));null!==a.tq&&null!==a.sq&&(m=a.tq,c=a.sq,h=a.vB,a.In>a.Hn&&(h=hi),b.Xa=new w(h(e,m.x,c.x-m.x,f),h(e,m.y,c.y-m.y,f)));b.Qz=d}$e.prototype.stopAnimation=$e.prototype.Xi=function(){!0===this.sc&&(this.sc=!1,this.tu&&this.W.de());this.oj&&this.Pe&&ri(this)};
function ri(a){a.oj=!1;a.tq=null;a.sq=null;a.In=0;a.Hn=0;oi(a);for(var b=a.W,c=a.sB,d=a.rB,e=a.ay.i;e.next();){var f=e.key,h=e.value,k=h.start,l=h.end,m;for(m in l)if(void 0!==si[m]){var n=m;h.zz&&"position:node"===n&&(n="position");si[n](f,k[m],h.zz?k[m]:l[m],c,d,d)}h.kx&&f.oe(!1)}for(c=a.W.links;c.next();)d=c.value,null!==d.oo&&(d.points=d.oo,d.oo=null);b.Zw.clear();b.Ij=null;b.oc();b.Nf();ti(b);qi(a);a.jo=new ma(R,gi);a.Fu&&a.Fu();a.Fu=null;a.Eu=null;b.ya("AnimationFinished");b.de()}
function ui(a,b,c){var d=b.Z,e=c.Z,f=null;c instanceof T&&(f=c.placeholder);null!==f?(c=f.fb(zb),c.x+=f.padding.left,c.y+=f.padding.top,mi(a,b,"position",c,b.position,!1)):mi(a,b,"position",new w(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position,!1);mi(a,b,"scale",.01,b.scale,!1)}
function vi(a,b,c){var d=null;c instanceof T&&(d=c.placeholder);null!==d?(c=d.fb(zb),c.x+=d.padding.left,c.y+=d.padding.top,mi(a,b,"position",b.position,c,!0)):mi(a,b,"position:node",b.position,c,!0);mi(a,b,"scale",b.scale,.01,!0);a.sc&&(a=a.jo,a.contains(b)&&(a.la(b).kx=!0))}function wi(a,b,c){a.sc&&(null===a.tq&&b.H()&&null===a.sq&&(a.tq=b.copy()),a.sq=c.copy(),a.tu=!0)}function xi(a,b,c){a.sc&&a.W.ve&&(0===a.In&&0===a.Hn&&(a.In=b),a.Hn=c,a.tu=!0)}
v.defineProperty($e,{isEnabled:"isEnabled"},function(){return this.Pe},function(a){v.j(a,"boolean",$e,"isEnabled");this.Pe=a});v.defineProperty($e,{duration:"duration"},function(){return this.ny},function(a){v.j(a,"number",$e,"duration");1>a&&v.ua(a,">= 1",$e,"duration");this.ny=a});v.u($e,{pf:"isAnimating"},function(){return this.oj});v.u($e,{uK:"isTicking"},function(){return this.Xn});
v.defineProperty($e,{vE:"isInitial"},function(){return this.pj},function(a){v.j(a,"boolean",$e,"isInitial");this.pj=a;a||(this.Wl=!0)});function gi(a,b,c){this.start=a;this.end=b;this.hH=new pa;this.zz=c;this.kx=!1}function ze(){0<arguments.length&&v.dd(ze);v.cc(this);this.W=null;this.zb=new G(J);this.Ob="";this.Kc=1;this.Fy=!1;this.Qk=this.hz=this.pk=this.ok=this.nk=this.mk=this.kk=this.lk=this.jk=this.rk=this.ik=this.qk=this.hk=this.gk=!0;this.Ay=!1;this.xv=[]}v.ga("Layer",ze);
ze.prototype.Fc=function(a){this.W=a};
ze.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,f=0,h=0,k=this.zb.i;k.next();){var l=k.value;l instanceof T?e++:l instanceof S?d++:l instanceof W?f++:l instanceof mf?h++:c++}k="";0<c&&(k+=c+" Parts ");0<d&&(k+=d+" Nodes ");0<e&&(k+=e+" Groups ");0<f&&(k+=f+" Links ");0<h&&(k+=h+" Adornments ");if(1<a)for(a=this.zb.i;a.next();)c=a.value,k+="\n    "+c.toString(),d=c.data,null!==d&&v.cd(d)&&(k+=" #"+v.cd(d)),c instanceof S?k+=" "+
ce(d):c instanceof W&&(k+=" "+ce(c.U)+" "+ce(c.ba));return b+" "+this.zb.count+": "+k};ze.prototype.findObjectAt=ze.prototype.le=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.Qk)return null;var d=!1;this.g.tb.Ca(a)&&(d=!0);for(var e=v.M(),f=this.zb.n,h=f.length;h--;){var k=f[h];if((!0!==d||!1!==yi(k))&&k.isVisible()&&(e.assign(a),Xa(e,k.Ef),k=k.le(e,b,c),null!==k&&(null!==b&&(k=b(k)),null!==k&&(null===c||c(k)))))return v.v(e),k}v.v(e);return null};
ze.prototype.findObjectsAt=ze.prototype.Ys=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof G||d instanceof H||(d=new H(R));if(!1===this.Qk)return d;var e=!1;this.g.tb.Ca(a)&&(e=!0);for(var f=v.M(),h=this.zb.n,k=h.length;k--;){var l=h[k];!0===e&&!1===yi(l)||!l.isVisible()||(f.assign(a),Xa(f,l.Ef),l.Ys(f,b,c,d)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||d.add(l)))}v.v(f);return d};
ze.prototype.findObjectsIn=ze.prototype.Vj=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof G||e instanceof H||(e=new H(R));if(!1===this.Qk)return e;var f=!1;this.g.tb.Sj(a)&&(f=!0);for(var h=this.zb.n,k=h.length;k--;){var l=h[k];(!0!==f||!1!==yi(l))&&l.isVisible()&&l.Vj(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
ze.prototype.Fz=function(a,b,c,d,e,f,h){if(!1===this.Qk)return e;for(var k=this.zb.n,l=k.length;l--;){var m=k[l];(!0!==h||!1!==yi(m))&&f(m)&&m.isVisible()&&m.Vj(a,b,c,d,e)&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||e.add(m))}return e};
ze.prototype.findObjectsNear=ze.prototype.Om=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof G||e instanceof H)f=e;e=!0}f instanceof G||f instanceof H||(f=new H(R));if(!1===this.Qk)return f;var h=!1;this.g.tb.Ca(a)&&(h=!0);for(var k=v.M(),l=v.M(),m=this.zb.n,n=m.length;n--;){var p=m[n];!0===h&&!1===yi(p)||!p.isVisible()||(k.assign(a),Xa(k,p.Ef),l.m(a.x+b,a.y),Xa(l,p.Ef),p.Om(k,l,c,d,e,f)&&(null!==c&&(p=c(p)),null===p||null!==d&&
!d(p)||f.add(p)))}v.v(k);v.v(l);return f};g=ze.prototype;g.uf=function(a,b){if(this.visible){var c;c=void 0===b?a.tb:b;for(var d=this.zb.n,e=d.length,f=0;f<e;f++){var h=d[f];h.hC=f;if(!(h instanceof W&&!1===h.Df)){if(h instanceof mf){var k=h;if(null!==k.Sh)continue}if(qb(h.Z,c))for(h.uf(!0),zi(h),h=h.iw;h.next();)k=h.value,Rh(k,Infinity,Infinity),k.zc(),k.uf(!0);else h.uf(!1),null!==h.iw&&0<h.iw.count&&zi(h)}}}};
g.Ve=function(a,b,c,d){if(this.visible&&0!==this.Kc&&(void 0===d&&(d=!0),d||!this.Bc)){1!==this.Kc&&(a.globalAlpha=this.Kc);c=this.xv;c.length=0;d=b.scale;for(var e=this.zb.n,f=e.length,h=0;h<f;h++){var k=e[h];if(yi(k)||Ai(k)){if(k instanceof W){var l=k;l.hc&&c.push(l);if(!1===l.Df)continue}l=k.Z;1<l.width*d||1<l.height*d?k.Ve(a,b):Bi(k,a)}}a.globalAlpha=1}};
function Ci(a,b,c,d){if(a.visible&&0!==a.Kc){1!==a.Kc&&(b.globalAlpha=a.Kc);var e=a.xv;e.length=0;var f=c.scale;a=a.zb.n;for(var h=a.length,k=d.length,l=0;l<h;l++){var m=a[l];if(yi(m)||Ai(m)){if(m instanceof W){var n=m;n.hc&&e.push(n);if(!1===n.Df)continue}var n=Pi(m,m.Z),p;a:{p=n;for(var q=d,r=k,s=2/f,t=4/f,u=0;u<r;u++){var x=q[u];if(0!==x.width&&0!==x.height&&p.mE(x.x-s,x.y-s,x.width+t,x.height+t)){p=!0;break a}}p=!1}p&&(1<n.width*f||1<n.height*f?m.Ve(b,c):Bi(m,b))}}b.globalAlpha=1}}
g.h=function(a,b,c,d,e){var f=this.g;null!==f&&f.Ec(Od,a,this,b,c,d,e)};g.Zo=function(a,b,c){var d=this.zb;b.hv=this;if(a>=d.count)a=d.count;else if(d.ha(a)===b)return-1;d.xd(a,b);b.it(c);d=this.g;null!==d&&(c?d.pa():d.Zo(b));Qi(this,a,b);return a};
g.Ke=function(a,b,c){if(!c&&b.layer!==this&&null!==b.layer)return b.layer.Ke(a,b,c);var d=this.zb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.ha(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.jt(c);d.Rc(a);d=this.g;null!==d&&(c?d.pa():d.Ke(b));b.hv=null;return a};
function Qi(a,b,c){b=Ri(a,b,c);if(c instanceof T&&null!==c&&isNaN(c.Kp)){if(0!==c.Pc.count){for(var d=-1,e=a.zb.n,f=e.length,h=0;h<f;h++){var k=e[h];if(k===c&&(b=h,0<=d))break;if(0>d&&k.Sa===c&&(d=h,0<=b))break}!(0>d)&&d<b&&(e=a.zb,e.Rc(b),e.xd(d,c))}c=c.Sa;null!==c&&Qi(a,-1,c)}}
function Ri(a,b,c){var d=c.Kp;if(isNaN(d))return b;a=a.zb;var e=a.count;if(1>=e)return b;0>b&&(b=a.indexOf(c));if(0>b)return-1;for(var f=b-1,h=NaN;0<=f;){h=a.ha(f).Kp;if(!isNaN(h))break;f--}for(var k=b+1,l=NaN;k<e;){l=a.ha(k).Kp;if(!isNaN(l))break;k++}if(!isNaN(h)&&h>d)for(;;){if(-1===f||h<=d){f++;if(f===b)break;a.Rc(b);a.xd(f,c);return f}for(h=NaN;0<=--f&&(h=a.ha(f).Kp,isNaN(h)););}else if(!isNaN(l)&&l<d)for(;;){if(k===e||l>=d){k--;if(k===b)break;a.Rc(b);a.xd(k,c);return k}for(l=NaN;++k<e&&(l=a.ha(k).Kp,
isNaN(l)););}return b}g.clear=function(){for(var a=this.zb.ed(),b=a.length,c=0;c<b;c++)a[c].uf(!1),this.Ke(-1,a[c],!1)};v.u(ze,{bk:"parts"},function(){return this.zb.i});v.u(ze,{$K:"partsBackwards"},function(){return this.zb.Wm});v.u(ze,{g:"diagram"},function(){return this.W});
v.defineProperty(ze,{name:"name"},function(){return this.Ob},function(a){v.j(a,"string",ze,"name");var b=this.Ob;if(b!==a){var c=this.g;if(null!==c)for(""===b&&v.k("Cannot rename default Layer to: "+a),c=c.Ww;c.next();)c.value.name===a&&v.k("Layer.name is already present in this diagram: "+a);this.Ob=a;this.h("name",b,a);for(a=this.zb.i;a.next();)a.value.tf=this.Ob}});
v.defineProperty(ze,{opacity:"opacity"},function(){return this.Kc},function(a){var b=this.Kc;b!==a&&(v.j(a,"number",ze,"opacity"),(0>a||1<a)&&v.ua(a,"0 <= value <= 1",ze,"opacity"),this.Kc=a,this.h("opacity",b,a),a=this.g,null!==a&&a.pa())});v.defineProperty(ze,{Bc:"isTemporary"},function(){return this.Fy},function(a){var b=this.Fy;b!==a&&(v.j(a,"boolean",ze,"isTemporary"),this.Fy=a,this.h("isTemporary",b,a))});
v.defineProperty(ze,{visible:"visible"},function(){return this.hz},function(a){var b=this.hz;if(b!==a){v.j(a,"boolean",ze,"visible");this.hz=a;this.h("visible",b,a);for(b=this.zb.i;b.next();)b.value.oe(a);a=this.g;null!==a&&a.pa()}});v.defineProperty(ze,{yg:"pickable"},function(){return this.Qk},function(a){var b=this.Qk;b!==a&&(v.j(a,"boolean",ze,"pickable"),this.Qk=a,this.h("pickable",b,a))});
v.defineProperty(ze,{pE:"isBoundsIncluded"},function(){return this.Ay},function(a){this.Ay!==a&&(this.Ay=a,null!==this.g&&this.g.oc())});v.defineProperty(ze,{Qj:"allowCopy"},function(){return this.gk},function(a){var b=this.gk;b!==a&&(v.j(a,"boolean",ze,"allowCopy"),this.gk=a,this.h("allowCopy",b,a))});v.defineProperty(ze,{Am:"allowDelete"},function(){return this.hk},function(a){var b=this.hk;b!==a&&(v.j(a,"boolean",ze,"allowDelete"),this.hk=a,this.h("allowDelete",b,a))});
v.defineProperty(ze,{nw:"allowTextEdit"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(v.j(a,"boolean",ze,"allowTextEdit"),this.qk=a,this.h("allowTextEdit",b,a))});v.defineProperty(ze,{kw:"allowGroup"},function(){return this.ik},function(a){var b=this.ik;b!==a&&(v.j(a,"boolean",ze,"allowGroup"),this.ik=a,this.h("allowGroup",b,a))});
v.defineProperty(ze,{ow:"allowUngroup"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(v.j(a,"boolean",ze,"allowUngroup"),this.rk=a,this.h("allowUngroup",b,a))});v.defineProperty(ze,{Ks:"allowLink"},function(){return this.jk},function(a){var b=this.jk;b!==a&&(v.j(a,"boolean",ze,"allowLink"),this.jk=a,this.h("allowLink",b,a))});
v.defineProperty(ze,{Bm:"allowRelink"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(v.j(a,"boolean",ze,"allowRelink"),this.lk=a,this.h("allowRelink",b,a))});v.defineProperty(ze,{Yk:"allowMove"},function(){return this.kk},function(a){var b=this.kk;b!==a&&(v.j(a,"boolean",ze,"allowMove"),this.kk=a,this.h("allowMove",b,a))});
v.defineProperty(ze,{lw:"allowReshape"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(v.j(a,"boolean",ze,"allowReshape"),this.mk=a,this.h("allowReshape",b,a))});v.defineProperty(ze,{Ls:"allowResize"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(v.j(a,"boolean",ze,"allowResize"),this.nk=a,this.h("allowResize",b,a))});
v.defineProperty(ze,{mw:"allowRotate"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(v.j(a,"boolean",ze,"allowRotate"),this.ok=a,this.h("allowRotate",b,a))});v.defineProperty(ze,{lf:"allowSelect"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(v.j(a,"boolean",ze,"allowSelect"),this.pk=a,this.h("allowSelect",b,a))});
function E(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);Si(c)}1<arguments.length&&v.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");v.cc(this);Ti=[];this.Uc=!0;this.dB=new $e;this.dB.Fc(this);this.ud=17;var c=this;null!==window.document.body?Si(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.cC=!1;this.Xb=new G(ze);this.Kb=this.Fb=0;this.Cj=this.Mb=this.Fg=this.ub=null;this.XE();this.Un=null;this.WE();
this.Xa=(new w(NaN,NaN)).freeze();this.Tb=1;this.Zu=(new w(NaN,NaN)).freeze();this.$u=NaN;this.pv=1E-4;this.mv=100;this.Td=new ja;this.gw=(new w(NaN,NaN)).freeze();this.Qu=(new z(NaN,NaN,NaN,NaN)).freeze();this.Iv=(new tb(0,0,0,0)).freeze();this.Jv=Ui;this.Fv=this.Bv=null;this.Jl=xf;this.tn=yc;this.Ck=xf;this.Rn=yc;this.av=this.Yu=zb;this.he=!0;this.Jq=!1;this.Zf=new H(R);this.Ql=new ma(W,z);this.Jn=!0;this.eB=250;this.pn=-1;this.vu=(new tb(16,16,16,16)).freeze();this.Ju=this.Cf=!1;this.Nn=!0;this.xk=
new Ld;this.Lc=new Ld;this.Nb=new Ld;this.Hh=this.dj=null;this.Wv=-1;this.Vv=!1;this.jy=this.ky=null;Vi(this);this.io=new H(S);this.Sk=new H(T);this.bo=new H(W);this.zb=new H(J);this.ev=!0;this.bw=Wi;this.TB=!1;this.dw=Gg;this.by=this.hy=this.ez=null;this.$x="";this.rq="auto";this.ji=this.Hi=this.wi=this.sv=this.xi=this.yi=this.zi=this.ii=this.ni=this.fi=null;this.Py=!1;this.CC={};this.Gr=0;this.Bf=[null,null];this.Vx=null;this.ln=this.iy=this.Yy=this.LC=this.Ei=!1;this.eC=!0;this.Cy=this.Fd=!1;this.Xy=
this.Wy=0;this.Rg="gray";this.Mh=0;this.Rd=null;var d=this;this.lC=function(a){if(a.da===d.da&&d.Qa){d.Qa=!1;try{var b=a.Ac;""===a.cf&&b===Od&&Xi(d,a.object,a.propertyName)}finally{d.Qa=!0}}};this.mC=function(a){Yi(d,a)};this.jD=!0;this.Hg=-2;this.ki=new ma(Object,J);this.vk=new ma(Object,W);this.Xl=new ma(Object,Array);this.ko=new ma("string",Array);this.BC=new G(Zi);this.qi=!1;this.hk=this.gk=this.ju=this.Pe=!0;this.lu=this.ku=!1;this.qu=this.ou=this.pk=this.ok=this.nk=this.mk=this.kk=this.lk=this.jk=
this.nu=this.rk=this.ik=this.qk=!0;this.Tl=this.aC=!1;this.pu=this.mu=this.Wu=this.Vu=!0;this.Lv=this.Hv=16;this.Vy=this.Gv=!1;this.Yr=this.Kv=null;this.IC=this.JC=0;this.Re=(new tb(5)).freeze();this.Ov=(new H(J)).freeze();this.nv=999999999;this.Xu=(new H(J)).freeze();this.Dk=this.Rl=this.nj=!0;this.Ak=this.mj=!1;this.Qd=null;this.su=!0;this.ve=!1;this.YF=new H(W);this.RB=new H($i);this.sd=null;this.sC=1;this.vy=!1;this.PC=0;this.iD=(new z(NaN,NaN,NaN,NaN)).freeze();this.Ku=(new z(NaN,NaN,NaN,NaN)).freeze();
this.yv=new H(aj);bj(this);this.jv=this.Su=this.tv=this.xB=this.wB=this.yB=this.tj=this.yk=this.Ai=null;cj(this);this.kd=null;this.Ru=!1;this.wn=null;this.wb=new kf;this.wb.initializeStandardTools();this.$a=this.Bz=this.wb;this.rb=new sa;this.da=new Q;this.Ei=!0;this.Pb=new Me;this.Ei=!1;this.JB=this.my=null;this.ze=1;this.Ij=null;this.Bk=new dj;void 0!==a&&ej(this,a);this.Zl=1;this.$l=0;this.gC=new w;this.fD=500;this.uu=new w;this.js=null;this.Uc=this.Gy=!1}v.ga("Diagram",E);
function cj(a){a.Ai=new ma("string",J);var b=new S,c=new ra;c.bind(new cf("text","",ce));b.add(c);a.yB=b;a.Ai.add("",b);b=new S;c=new ra;c.stroke="brown";c.bind(new cf("text","",ce));b.add(c);a.Ai.add("Comment",b);b=new S;b.zl=!1;b.zD=!1;c=new X;c.Cb="Ellipse";c.fill="black";c.stroke=null;c.xa=(new ia(3,3)).Ma();b.add(c);a.Ai.add("LinkLabel",b);a.yk=new ma("string",T);b=new T;b.yA="GROUPPANEL";b.type=fj;c=new ra;c.font="bold 12pt sans-serif";c.bind(new cf("text","",ce));b.add(c);c=new C(gj);c.name=
"GROUPPANEL";var d=new X;d.Cb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new sh;d.padding=(new tb(5,5,5,5)).Ma();c.add(d);b.add(c);a.wB=b;a.yk.add("",b);a.tj=new ma("string",W);b=new W;c=new X;c.Lf=!0;b.add(c);c=new X;c.Hp="Standard";c.fill="black";c.stroke=null;c.nb=0;b.add(c);a.xB=b;a.tj.add("",b);b=new W;c=new X;c.Lf=!0;c.stroke="brown";b.add(c);a.tj.add("Comment",b);b=new mf;b.type=gj;c=new X;c.fill=null;c.stroke="dodgerblue";c.nb=3;b.add(c);c=new sh;c.margin=(new tb(1.5,
1.5,1.5,1.5)).Ma();b.add(c);a.tv=b;a.Su=b;b=new mf;b.type=dh;c=new X;c.Lf=!0;c.fill=null;c.stroke="dodgerblue";c.nb=3;b.add(c);a.jv=b}
function Si(a){var b=v.createElement("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=v.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);c=d-b;0!==c||v.tE||
(c=11);a.ud=c}E.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.fl&&this.fl.id&&(b=this.fl.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Xb.i;c.next();)b+="\n  "+c.value.toString(a-1);return b};E.prototype.checkProperties=function(){return v.check(this)};E.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.W instanceof E?b.W:null};
v.defineProperty(E,{fl:"div"},function(){return this.Mb},function(a){null!==a&&v.C(a,HTMLDivElement,E,"div");if(this.Mb!==a){Ti=[];var b=this.Mb;null!==b?(b.W=void 0,b.innerHTML="",null!==this.ub&&(this.ub.removeEventListener("touchstart",this.zF,!1),this.ub.removeEventListener("touchmove",this.yF,!1),this.ub.removeEventListener("touchend",this.xF,!1),this.ub.Kd.W=null),b=this.wb,null!==b&&(b.df.each(function(a){a.cancelWaitAfter()}),b.Of.each(function(a){a.cancelWaitAfter()}),b.Pf.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.$a.doCancel(),this.Fg=this.ub=null,window.removeEventListener("resize",this.IF,!1),window.removeEventListener("mousemove",this.kp,!0),window.removeEventListener("mousedown",this.jp,!0),window.removeEventListener("mouseup",this.mp,!0),window.removeEventListener("mousewheel",this.ah,!0),window.removeEventListener("DOMMouseScroll",this.ah,!0),window.removeEventListener("mouseout",this.lp,!0)):this.ve=!1;this.Mb=null;if(null!==a){if(b=a.W)b.fl=null;ej(this,a);this.rA()}}});
function hj(a){var b=a.ub;b.addEventListener("touchstart",a.zF,!1);b.addEventListener("touchmove",a.yF,!1);b.addEventListener("touchend",a.xF,!1);b.addEventListener("mousemove",a.kp,!1);b.addEventListener("mousedown",a.jp,!1);b.addEventListener("mouseup",a.mp,!1);b.addEventListener("mousewheel",a.ah,!1);b.addEventListener("DOMMouseScroll",a.ah,!1);b.addEventListener("mouseout",a.lp,!1);b.addEventListener("keydown",a.WH,!1);b.addEventListener("keyup",a.XH,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.wb.Vo===ci&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.wI,!1);b.addEventListener("pointermove",a.yI,!1);b.addEventListener("pointerleave",a.xI,!1);window.addEventListener("resize",a.IF,!1)}
E.prototype.computePixelRatio=function(){if(null!==this.Ij)return this.Ij;var a=this.Fg;return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};E.prototype.doMouseMove=function(){this.$a.doMouseMove()};E.prototype.doMouseDown=function(){this.$a.doMouseDown()};E.prototype.doMouseUp=function(){this.$a.doMouseUp()};E.prototype.doMouseWheel=function(){this.$a.doMouseWheel()};
E.prototype.doKeyDown=function(){this.$a.doKeyDown()};E.prototype.doKeyUp=function(){this.$a.doKeyUp()};function ki(a){if(null!==a.ub){var b=a.Mb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Ak?a.ud:0,d=a.mj?a.ud:0,e=a.ze;a.ze=a.computePixelRatio();a.ze!==e&&(a.Jq=!0,a.de());if(b.clientWidth!==a.Fb+c||b.clientHeight!==a.Kb+d)a.Rl=!0,a.he=!0,b=a.Pb,null!==b&&b.Tw&&b.G(),a.Fd||a.de()}}}E.prototype.focus=E.prototype.focus=function(){this.ub&&this.ub.focus()};
function ij(a,b,c){void 0===b&&(b=a.Fg);void 0===c&&(c=!0);c&&(b.gu="");b.jn="";b.hn=""}function bj(a){var b=new ze;b.name="Background";a.Fs(b);b=new ze;b.name="";a.Fs(b);b=new ze;b.name="Foreground";a.Fs(b);b=new ze;b.name="Adornment";b.Bc=!0;a.Fs(b);b=new ze;b.name="Tool";b.Bc=!0;b.pE=!0;a.Fs(b);b=new ze;b.name="Grid";b.lf=!1;b.yg=!1;b.Bc=!0;a.sG(b,a.Ws("Background"))}
function jj(a){a.kd=new C(kj);a.kd.name="GRID";var b=new X;b.Cb="LineH";b.stroke="lightgray";b.nb=.5;b.interval=1;a.kd.add(b);b=new X;b.Cb="LineH";b.stroke="gray";b.nb=.5;b.interval=5;a.kd.add(b);b=new X;b.Cb="LineH";b.stroke="gray";b.nb=1;b.interval=10;a.kd.add(b);b=new X;b.Cb="LineV";b.stroke="lightgray";b.nb=.5;b.interval=1;a.kd.add(b);b=new X;b.Cb="LineV";b.stroke="gray";b.nb=.5;b.interval=5;a.kd.add(b);b=new X;b.Cb="LineV";b.stroke="gray";b.nb=1;b.interval=10;a.kd.add(b);b=new J;b.add(a.kd);
b.tf="Grid";b.Sz=!1;b.oE=!1;b.yg=!1;b.Yz="GRID";a.add(b);a.zb.remove(b);a.kd.visible=!1}
E.prototype.cG=function(){if(this.W.isEnabled){var a=this.W;if(a.Vy&&null!==a.ub){a.Gv=!0;var b=a.Wd,c=a.tb,d=b.width,e=c.width,f=b.height,h=c.height,k=b.right,l=c.right,m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,r=a.scale,s;e<d||h<f?(s=v.Rb(a.position.x,a.position.y),a.Be&&a.IC!==this.scrollLeft&&(s.x=this.scrollLeft/r+p),a.Ce&&a.JC!==this.scrollTop&&(s.y=this.scrollTop/r+b),a.position=s,v.v(s),a.Gv=!1,a.Rl=!1):(s=v.M(),this.fG&&a.Be&&(p<q&&(a.position=s.m(this.scrollLeft+p,a.position.y)),k>l&&
(a.position=s.m(-(a.Kv.scrollWidth-a.Fb)+this.scrollLeft-a.Fb/r+a.Wd.right,a.position.y))),this.gG&&a.Ce&&(b<c&&(a.position=s.m(a.position.x,this.scrollTop+b)),m>n&&(a.position=s.m(a.position.x,-(a.Kv.scrollHeight-a.Kb)+this.scrollTop-a.Kb/r+a.Wd.bottom))),v.v(s),lj(a),a.Gv=!1,a.Rl=!1,b=a.Wd,c=a.tb,k=b.right,l=c.right,m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,e>=d&&p>=q&&k<=l&&(a.Yr.style.width="1px"),h>=f&&b>=c&&m<=n&&(a.Yr.style.height="1px"))}}else mj(this.W)};
E.prototype.rC=function(a){this.W.isEnabled?(this.W.Vy=!0,this.W.JC=a.target.scrollTop,this.W.IC=a.target.scrollLeft):mj(this.W)};E.prototype.computeBounds=E.prototype.Ug=function(){0<this.Zf.count&&nj(this);return oj(this)};
function oj(a){if(a.bE.H()){var b=a.bE.copy();b.hw(a.padding);return b}for(var c=!0,d=a.Xb.n,e=d.length,f=0;f<e;f++){var h=d[f];if(h.visible&&(!h.Bc||h.pE))for(var h=h.zb.n,k=h.length,l=0;l<k;l++){var m=h[l];m.Sz&&m.isVisible()&&(m=m.Z,m.H()&&(c?(c=!1,b=m.copy()):b.bi(m)))}}c&&(b=new z(0,0,0,0));b.hw(a.padding);return b}
E.prototype.computePartsBounds=function(a){var b=null;for(a=a.i;a.next();){var c=a.value;c instanceof W||(c.mf(),null===b?b=c.Z.copy():b.bi(c.Z))}return null===b?new z(NaN,NaN,0,0):b};
function pj(a,b){if((b||a.ve)&&!a.Uc&&null!==a.ub&&!a.Oa.pf&&a.Wd.H()){a.Uc=!0;var c=a.Jl;b&&a.Ck!==xf&&(c=a.Ck);var d=c!==xf?qj(a,c):a.scale,c=a.tb.copy(),e=a.Fb/d,f=a.Kb/d,h=null,k=a.Oa;k.sc&&(h=a.Xa.copy());a.position.Na();var l=a.tn;b&&!l.yd()&&a.Rn.yd()&&(l=a.Rn);rj(a,a.Xa,a.Wd,e,f,l,b);a.position.freeze();null!==h&&wi(k,h,a.Xa);a.scale=d;a.Uc=!1;d=a.tb;d.Ie(c)||a.Ft(c,d)}}
function qj(a,b){var c=a.rb.xw;if(null===a.ub)return c;a.nj&&sj(a,a.Ug());var d=a.Wd;if(!d.H())return c;var e=d.width,d=d.height,f=a.Fb,h=a.Kb,k=f/e,l=h/d;return b===tj?(e=Math.min(l,k),e>c&&(e=c),e<a.$g&&(e=a.$g),e>a.Zg&&(e=a.Zg),e):b===uj?(e=l>k?(h-a.ud)/d:(f-a.ud)/e,e>c&&(e=c),e<a.$g&&(e=a.$g),e>a.Zg&&(e=a.Zg),e):a.scale}E.prototype.zoomToFit=E.prototype.zoomToFit=function(){this.scale=qj(this,tj)};
E.prototype.zoomToRect=function(a,b){void 0===b&&(b=tj);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===tj||b===uj)if(isNaN(c))e=this.tb.height*this.scale/d;else if(isNaN(d))e=this.tb.width*this.scale/c;else var e=this.Fb,f=this.Kb,e=b===uj?f/d>e/c?(f-(this.mj?this.ud:0))/d:(e-(this.Ak?this.ud:0))/c:Math.min(f/d,e/c);this.scale=e;this.position=new w(a.x,a.y)}};v.defineProperty(E,{Qz:null},function(){return this.Uc},function(a){this.Uc=a});
E.prototype.alignDocument=function(a,b){this.nj&&sj(this,this.Ug());var c=this.Wd,d=this.tb;this.position=new w(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY))};
function rj(a,b,c,d,e,f,h){var k=b.x,l=b.y;if(h||a.xA===Ui)f.yd()&&(d>c.width&&(k=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(l=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),f=a.dF,h=d-c.width,d<c.width+f.left+f.right?(k=Math.min(k+d/2,c.right+Math.max(h,f.right)-d/2),k=Math.max(k,c.left-Math.max(h,f.left)+d/2),k-=d/2):k>c.left?k=c.left:k<c.right-d&&(k=c.right-d),d=e-c.height,e<c.height+f.top+f.bottom?(l=Math.min(l+e/2,c.bottom+Math.max(d,f.bottom)-e/2),l=Math.max(l,c.top-Math.max(d,
f.top)+e/2),l-=e/2):l>c.top?l=c.top:l<c.bottom-e&&(l=c.bottom-e);b.x=isFinite(k)?k:-a.padding.left;b.y=isFinite(l)?l:-a.padding.top;null!==a.PE&&(a=a.PE(a,b),b.x=a.x,b.y=a.y)}E.prototype.findPartAt=E.prototype.Zs=function(a,b){var c=b?og(this,a,function(a){return a.V},function(a){return a.canSelect()}):og(this,a,function(a){return a.V});return c instanceof J?c:null};
E.prototype.findObjectAt=E.prototype.le=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);nj(this);for(var d=this.Xb.Wm;d.next();){var e=d.value;if(e.visible&&(e=e.le(a,b,c),null!==e))return e}return null};function og(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);nj(a);for(a=a.Xb.Wm;a.next();){var e=a.value;if(e.visible&&!e.Bc&&(e=e.le(b,c,d),null!==e))return e}return null}
E.prototype.findObjectsAt=E.prototype.Ys=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof G||d instanceof H||(d=new H(R));nj(this);for(var e=this.Xb.Wm;e.next();){var f=e.value;f.visible&&f.Ys(a,b,c,d)}return d};E.prototype.findObjectsIn=E.prototype.Vj=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof G||e instanceof H||(e=new H(R));nj(this);for(var f=this.Xb.Wm;f.next();){var h=f.value;h.visible&&h.Vj(a,b,c,d,e)}return e};
E.prototype.Fz=function(a,b,c,d,e,f){var h=new H(R);nj(this);for(var k=this.Xb.Wm;k.next();){var l=k.value;l.visible&&l.Fz(a,b,c,d,h,e,f)}return h};E.prototype.findObjectsNear=E.prototype.Om=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof G||e instanceof H)f=e;e=!0}f instanceof G||f instanceof H||(f=new H(R));nj(this);for(var h=this.Xb.Wm;h.next();){var k=h.value;k.visible&&k.Om(a,b,c,d,e,f)}return f};
function Bf(a){-1!==a.Wv&&(v.clearTimeout(a.Wv),a.Wv=-1)}function vj(a,b){var c=b.copy();a.Wv=v.setTimeout(function(){c.button=2;c.buttons=2;a.O=c;a.Vv=!0;a.doMouseUp()},850)}E.prototype.acceptEvent=function(a){var b=this.Lc;this.Lc=this.Nb;this.Nb=b;wj(this,this,a,b,a instanceof MouseEvent);return b};
function wj(a,b,c,d,e){d.g=b;d.event=c;e?xj(a,c,d):(d.ef=b.Nb.ef,d.ea=b.Nb.ea);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.pd=a;d.button=c.button;void 0!==c.buttons&&(d.buttons=c.buttons);v.Vm&&0===c.button&&c.ctrlKey&&(d.button=2);d.gl=!1;d.up=!1;d.Ue=1;d.el=0;d.Nc=!1;d.bubbles=!1;d.timestamp=Date.now();d.ot=!1;d.Ag=c.target.W?c.target.W:null;d.qe=null}
function yj(a,b,c,d,e){d.g=a;xj(a,c,d);d.pd=0;d.button=0;d.buttons=1;d.gl=!0;d.up=!1;d.Ue=1;d.el=0;d.Nc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.ot=e;d.Ag=b.target.W?b.target.W:null;d.qe=null;a.xk=d.copy();Hf=null}
function zj(a,b,c,d,e){var f=null;d.g=a;null!==c?((f=window.document.elementFromPoint(c.clientX,c.clientY))&&f.W?f=f.W:(c=b.changedTouches[0],f=a),d.Ag=f,xj(a,c,d)):null!==a.Lc?(d.ea=a.Lc.ea,d.ef=a.Lc.ef,d.Ag=a.Lc.Ag):null!==a.xk&&(d.ea=a.xk.ea,d.ef=a.xk.ef,d.Ag=a.xk.Ag);d.pd=0;d.button=0;d.buttons=1;d.gl=!1;d.up=!1;d.Ue=1;d.el=0;d.Nc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.ot=e;d.qe=null}
function Aj(a,b){if(a.bubbles)return!0;void 0!==b.stopPropagation&&b.stopPropagation();(void 0===b.touches||2>b.touches.length)&&b.preventDefault();b.cancelBubble=!0;return!1}
E.prototype.WH=function(a){if(!this.W.isEnabled)return!1;var b=this.W.Nb;wj(this.W,this.W,a,b,!1);b.key=String.fromCharCode(a.which);b.gl=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.W.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?Aj(b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
E.prototype.XH=function(a){if(!this.W.isEnabled)return!1;var b=this.W.Nb;wj(this.W,this.W,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.W.doKeyUp();
return Aj(b,a)};E.prototype.Eq=function(a){var b=this.ub;if(null===b)return new w(0,0);var c=this.Fb,d=this.Kb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.Td?(a=new w(c,a),Xa(a,this.Td),a):new w(c,a)};function xj(a,b,c){var d=a.ub,e=a.Fb,f=a.Kb,h=0,k=0;null!==d&&(d=d.getBoundingClientRect(),h=b.clientX-e/d.width*d.left,k=b.clientY-f/d.height*d.top);c.ef.m(h,k);null!==a.Td?(b=v.Rb(h,k),a.Td.Xh(b),c.ea.assign(b),v.v(b)):c.ea.m(h,k)}
E.prototype.invalidateDocumentBounds=E.prototype.oc=function(){this.nj||(this.nj=!0,this.de(!0))};function ti(a){a.Fd||nj(a);a.nj&&sj(a,a.Ug())}E.prototype.redraw=E.prototype.rA=function(){this.Uc||this.Fd||(this.pa(),Bj(this),lj(this),this.oc(),this.Nf())};E.prototype.isUpdateRequested=function(){return this.Cf};
E.prototype.delayInitialization=E.prototype.YG=function(a){void 0===a&&(a=null);var b=this.Oa,c=b.isEnabled;b.Xi();b.isEnabled=!1;Cg(this);this.ve=!1;b.isEnabled=c;null!==a&&v.setTimeout(a,1)};E.prototype.requestUpdate=E.prototype.de=function(a){void 0===a&&(a=!1);if(!0!==this.Cf&&!(this.Uc||!1===a&&this.Fd)){this.Cf=!0;var b=this;requestAnimationFrame(function(){b.Cf&&b.Nf()})}};E.prototype.maybeUpdate=E.prototype.Nf=function(){if(!this.Nn||this.Cf)this.Nn&&(this.Nn=!1),Cg(this)};
function Cj(a,b){a.Uc||!a.Rl||mj(a)||(b&&nj(a),pj(a,!1))}
function Cg(a){if(!a.Fd&&(a.Cf=!1,null!==a.Mb)){a.Fd=!0;var b=a.Oa,c=a.BC;if(!b.Xn&&0!==c.length){for(var d=c.n,e=d.length,f=0;f<e;f++){var h=d[f];Dj(h,!1);h.P()}c.clear()}c=a.RB;0<c.count&&(c.each(function(a){a.OA()}),c.clear());d=c=!1;b.pf&&(d=!0,c=a.lb,a.lb=!0);b.sc||ki(a);Cj(a,!1);null!==a.kd&&(a.kd.visible&&!a.Ru&&(Ej(a),a.Ru=!0),!a.kd.visible&&a.Ru&&(a.Ru=!1));nj(a);e=!1;if(!a.ve||a.su)a.ve?Fj(a,!a.Ju):(a.Qb("Initial Layout"),!1===b.isEnabled&&b.Xi(),Fj(a,!1)),e=!0;a.Ju=!1;nj(a);a.Yy||b.pf||
ti(a);Cj(a,!0);e&&(a.ve||(Gj(a),a.de(!0)),a.ya("LayoutCompleted"));nj(a);e&&!a.ve&&(a.ve=!0,a.wd("Initial Layout"),a.lb||a.ja.clear(),v.setTimeout(function(){a.Zh=!1},1));Hj(a);ji(b);a.Ve();d&&(a.lb=c);a.Fd=!1}}
function Gj(a){var b=a.Xb.n;a.uf(b,b.length,a);a.Ck!==xf?a.scale=qj(a,a.Ck):a.Jl!==xf?a.scale=qj(a,a.Jl):(b=a.HH,isFinite(b)&&0<b&&(a.scale=b));b=a.GH;if(b.H())a.position=b;else{b=v.M();b.St(a.Wd,a.FH);var c=a.tb,c=v.ek(0,0,c.width,c.height),d=v.M();d.St(c,a.IH);d.m(b.x-d.x,b.y-d.y);a.position=d;v.fc(c);v.v(d);v.v(b);Cj(a,!0);pj(a,!0)}a.ya("InitialLayoutCompleted");Ej(a)}
function nj(a){if((a.Fd||!a.Oa.pf)&&0!==a.Zf.count)for(var b=0;23>b;b++){var c=a.Zf.i;if(null===c||0===a.Zf.count)break;a.Zf=new H(R);a.OA(c,a.Zf)}}
E.prototype.OA=function(a,b){for(a.reset();a.next();){var c=a.value;!c.Ld()||c instanceof T||!c.isVisible()||(c.sl()?(Rh(c,Infinity,Infinity),c.zc()):b.add(c))}for(a.reset();a.next();)c=a.value,c instanceof T&&c.isVisible()&&Ij(this,c);for(a.reset();a.next();)c=a.value,c instanceof W&&c.isVisible()&&(c.sl()?(Rh(c,Infinity,Infinity),c.zc()):b.add(c));for(a.reset();a.next();)c=a.value,c instanceof mf&&c.isVisible()&&(c.sl()?(Rh(c,Infinity,Infinity),c.zc()):b.add(c))};
function Ij(a,b){for(var c=v.jb(),d=v.jb(),e=b.Pc;e.next();){var f=e.value;f.isVisible()&&(f instanceof T?(Jj(f)||Kj(f)||Lj(f))&&Ij(a,f):f instanceof W?f.U===b||f.ba===b?d.push(f):c.push(f):(Rh(f,Infinity,Infinity),f.zc()))}for(var e=c.length,h=0;h<e;h++)f=c[h],Rh(f,Infinity,Infinity),f.zc();v.ra(c);Rh(b,Infinity,Infinity);b.zc();e=d.length;for(h=0;h<e;h++)f=d[h],Rh(f,Infinity,Infinity),f.zc();v.ra(d)}E.prototype.uf=function(a,b,c,d){var e=this.Oa;if(this.Dk||e.pf)for(e=0;e<b;e++)a[e].uf(c,d)};
E.prototype.Ve=function(a,b){void 0===a&&(a=this.Fg);void 0===b&&(b=null);null===this.Mb&&v.k("No div specified");var c=this.ub;null===c&&v.k("No canvas specified");var d=this.Oa;if(!d.sc){Mj(this);var e=a!==this.Fg,f=this.Xb.n,h=f.length,k=this;this.uf(f,h,k);if(e)ij(this,a),lj(this);else if(!this.he&&null===b&&!d.oj)return;var d=this.Xa,l=this.Tb,m=Math.round(d.x*l)/l,n=Math.round(d.y*l)/l,h=this.Td;h.reset();1!==l&&h.scale(l);0===d.x&&0===d.y||h.translate(-m,-n);d=this.ze;v.Um?(c.width=c.width,
ij(this,a),a.scale(d,d)):(a.setTransform(1,0,0,1,0,0),a.scale(d,d),a.clearRect(0,0,this.Fb,this.Kb));a.miterLimit=9;a.setTransform(1,0,0,1,0,0);a.scale(d,d);a.transform(h.m11,h.m12,h.m21,h.m22,h.dx,h.dy);c=null!==b?function(c){var d=a,e=b;if(c.visible&&0!==c.Kc){1!==c.Kc&&(d.globalAlpha=c.Kc);var f=c.xv;f.length=0;var h=k.scale;c=c.zb.n;for(var l=c.length,m=0;m<l;m++){var n=c[m];if((yi(n)||Ai(n))&&!e.contains(n)){if(n instanceof W){var A=n;A.hc&&f.push(A);if(!1===A.Df)continue}A=n.Z;1<A.width*h||
1<A.height*h?n.Ve(d,k):Bi(n,d)}}d.globalAlpha=1}}:function(b){b.Ve(a,k)};Nj(this,a);h=f.length;for(d=0;d<h;d++)c(f[d]);this.Bk?this.Bk.Gl(this)&&this.Ox():this.Eq=function(){return new w(0,0)};e?(ij(this),lj(this)):this.he=this.Dk=!1}};
function Oj(a,b,c,d,e){null===a.Mb&&v.k("No div specified");var f=a.ub;null===f&&v.k("No canvas specified");if(!a.Oa.sc){var h=a.Fg;if(a.he){Mj(a);var k=a.ze;v.Um?(f.width=f.width,ij(a,h)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Fb*k,a.Kb*k));h.lE=!1;h.drawImage(a.my.Kd,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.Xa;var f=a.Tb,l=Math.round(e.x*f)/f,m=Math.round(e.y*f)/f;d=a.Td;d.reset();1!==f&&d.scale(f);0===e.x&&0===e.y||d.translate(-l,-m);h.save();h.beginPath();e=c.length;for(f=0;f<e;f++)l=
c[f],0!==l.width&&0!==l.height&&h.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));h.clip();h.setTransform(1,0,0,1,0,0);h.scale(k,k);h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=a.Xb.n;e=c.length;a.uf(c,e,a);Nj(a,h);for(f=0;f<e;f++)Ci(c[f],h,a,b);h.restore();ij(a);a.Bk?a.Bk.Gl(a)&&a.Ox():a.Eq=function(){return new w(0,0)};a.Dk=!1;a.he=!1;a.sA()}}}
function Pj(a,b,c,d,e,f,h,k,l,m){null===a.Mb&&v.k("No div specified");null===a.ub&&v.k("No canvas specified");void 0===h&&(h=null);void 0===k&&(k=null);void 0===l&&(l=!1);void 0===m&&(m=!1);Mj(a);ij(a);lj(a);a.Cy=!0;var n=new z(f.x,f.y,d.width/e,d.height/e),p=n.copy();p.hw(c);Ej(a,p);nj(a);var p=a.Xb.n,q=p.length;a.uf(p,q,a,n);var r=a.ze;b.setTransform(1,0,0,1,0,0);b.scale(r,r);b.clearRect(0,0,d.width,d.height);null!==k&&""!==k&&(b.fillStyle=k,b.fillRect(0,0,d.width,d.height));d=v.nh();d.reset();
d.translate(c.left,c.top);d.scale(e);0===f.x&&0===f.y||d.translate(-f.x,-f.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);v.Xe(d);Nj(a,b);if(null!==h){var s=new H(R);c=h.i;for(c.reset();c.next();)e=c.value,!1===m&&"Grid"===e.layer.name||null===e||s.add(e);c=function(c){var d=l;if(c.visible&&0!==c.Kc&&(void 0===d&&(d=!0),d||!c.Bc)){1!==c.Kc&&(b.globalAlpha=c.Kc);d=c.xv;d.length=0;var e=a.scale;c=c.zb.n;for(var f=c.length,h=0;h<f;h++){var k=c[h];if((yi(k)||Ai(k))&&s.contains(k)){if(k instanceof
W){var m=k;m.hc&&d.push(m);if(!1===m.Df)continue}m=k.Z;1<m.width*e||1<m.height*e?k.Ve(b,a):Bi(k,b)}}b.globalAlpha=1}}}else if(!l&&m){var t=a.ft.V,u=t.layer;c=function(c){c===u?t.Ve(b,a):c.Ve(b,a,n,l,m)}}else c=function(c){c.Ve(b,a,n,l,m)};for(e=0;e<q;e++)c(p[e]);a.Cy=!1;a.Bk?a.Bk.Gl(a)&&a.Ox():a.Eq=function(){return new w(0,0)};ij(a);lj(a);a.uf(p,q,a);Ej(a)}E.prototype.getRenderingHint=E.prototype.Yj=function(a){return this.Cj[a]};
E.prototype.setRenderingHint=E.prototype.VI=function(a,b){this.Cj[a]=b;this.rA()};E.prototype.resetRenderingHints=E.prototype.XE=function(){this.Cj=new pa;this.Cj.drawShadows=!0;this.Cj.textGreeking=!0;this.Cj.viewportOptimizations=v.tE?!1:!0;this.Cj.temporaryPixelRatio=!0;this.Cj.pictureRatioOptimization=!0};function Nj(a,b){var c=a.Cj;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.lE=d;b.OK=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c,b.gu=c)}}
E.prototype.getInputOption=E.prototype.Wo=function(a){return this.Un[a]};E.prototype.setInputOption=function(a,b){this.Un[a]=b};E.prototype.resetInputOptions=E.prototype.WE=function(){this.Un=new pa;this.Un.extraTouchArea=10;this.Un.extraTouchThreshold=10;this.Un.hasGestureZoom=!0};E.prototype.setProperties=function(a){v.Rt(this,a)};function Hj(a){if(0===a.ja.ph&&0!==a.Ql.count){for(var b=a.Ql.i;b.next();){var c=b.key;hh(c,b.value);c.Ye()}a.Ql.clear();a.pa()}}
E.prototype.pa=function(a){void 0===a&&(a=null);if(null===a)this.he=!0,this.de();else{var b=this.tb;null!==a&&a.H()&&b.tg(a)&&(this.he=!0,this.de())}for(b=this.yv.i;b.next();)b.value.pa(a)};
E.prototype.nE=function(a,b){if(!0!==this.he){this.he=!0;var c=!0===this.Yj("temporaryPixelRatio");if(!0===this.Yj("viewportOptimizations")&&this.xA!==Qj&&this.dF.Bw(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=v.Uf(),f=Math.max(a.x,b.x),h=Math.max(a.y,b.y),k=Math.min(a.x+a.width,b.x+b.width),l=Math.min(a.y+a.height,b.y+b.height);e.x=f;e.y=h;e.width=Math.max(0,k-f)*d;e.height=Math.max(0,l-h)*d;if(0<e.width&&0<e.height){if(!this.Fd&&(this.Cf=!1,null!==this.Mb)){this.Fd=!0;Hj(this);
this.Wd.H()||sj(this,this.Ug());var m=this.ub;if(null!==m){var n=this.ze,h=this.Fb*n,k=this.Kb*n,f=this.scale*n,d=Math.round(Math.round(b.x*f)-Math.round(a.x*f)),f=Math.round(Math.round(b.y*f)-Math.round(a.y*f)),l=this.my,p=this.JB;l.width!==h&&(l.width=h);l.height!==k&&(l.height=k);p.clearRect(0,0,h,k);var l=190*this.ze,q=70*this.ze,r=Math.max(d,0),s=Math.max(f,0),t=Math.floor(h-r),u=Math.floor(k-s);p.lE=!1;p.drawImage(m.Kd,r,s,t,u,0,0,t,u);this.Bk.Gl(this)&&p.clearRect(0,0,l,q);var m=v.jb(),p=v.jb(),
u=Math.abs(d),t=Math.abs(f),x=0===r?0:h-u,r=v.Rb(x,0),u=v.Rb(u+x,k);p.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));var y=this.Td;y.reset();y.scale(n,n);1!==this.Tb&&y.scale(this.Tb);n=this.Xa;(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&y.translate(-n.x,-n.y);Xa(r,y);Xa(u,y);m.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));x=0===s?0:k-t;r.m(0,x);u.m(h,t+x);p.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-
u.x),Math.abs(r.y-u.y)));Xa(r,y);Xa(u,y);m.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));this.Bk.Gl(this)&&(h=0<d?0:-d,k=0<f?0:-f,r.m(h,k),u.m(l+h,q+k),p.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y))),Xa(r,y),Xa(u,y),m.push(new z(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y))));v.v(r);v.v(u);Cj(this,!1);Oj(this,m,p,d,f);v.ra(m);v.ra(p);this.Fd=!1}}}else this.Nf();v.fc(e);c&&(this.Ij=1,this.Nf(),
this.Ij=null,this.sA())}else c?(this.Ij=1,this.Nf(),this.Ij=null,this.sA()):this.Nf()}};function Bj(a){!1===a.Rl&&(a.Rl=!0)}function lj(a){!1===a.Dk&&(a.Dk=!0)}function Mj(a){!1!==a.Jq&&(a.Jq=!1,Rj(a,a.Fb,a.Kb))}function Rj(a,b,c){var d=a.ub,e=a.ze,f=b*e,e=c*e;if(d.width!==f||d.height!==e)d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.he=!0,ij(a)}function Af(a){var b=a.Fb,c=a.Kb;a=a.ub.getBoundingClientRect();return v.Rb(b/a.width*a.left,c/a.height*a.top)}
function mj(a){var b=a.ub;if(null===b)return!0;var c=a.Mb,d=a.Fb,e=a.Kb,f=a.iD.copy();if(!f.H())return!0;var h=!1,k=a.Ak?a.ud:0,l=a.mj?a.ud:0,m=c.clientWidth||d+k,c=c.clientHeight||e+l;if(m!==d+k||c!==e+l)a.Ak=!1,a.mj=!1,l=k=0,a.Fb=m,a.Kb=c,h=a.Jq=!0;a.Rl=!1;if(a.Oa.pf)return h?(a.Oa.Xi(),a.YG(),!1):!0;var n=a.tb,p=a.Wd,m=p.width,c=p.height,q=n.width,r=n.height,s=p.x,t=n.x,u=p.right,x=n.right+k,y=p.y,A=n.y,p=p.bottom,n=n.bottom+l,B="1px",I="1px",D=a.scale;a.xA===Ui&&m<q+k&&c<r+l||(a.Mz&&a.Be&&(B=
1,s+1<t&&(B=Math.max((t-s)*D+a.Fb,B)),u>x+1&&(B=Math.max((u-x)*D+a.Fb,B)),q+k+1<m&&(B=Math.max((m-q+k)*D+a.Fb,B)),B+="px"),a.Nz&&a.Ce&&(I=1,y+1<A&&(I=Math.max((A-y)*D+a.Kb,I)),p>n+1&&(I=Math.max((p-n)*D+a.Kb,I)),r+l+1<c&&(I=Math.max((c-r+l)*D+a.Kb,I)),I+="px"));k="1px"!==B;l="1px"!==I;if((!k||!l)&&k||l)l&&(x-=a.ud),k&&(n-=a.ud),a.Mz&&a.Be&&(B=1,s+1<t&&(B=Math.max((t-s)*D+a.Fb,B)),u>x+1&&(B=Math.max((u-x)*D+a.Fb,B)),q+1<m&&(B=Math.max((m-q)*D+a.Fb,B)),B+="px"),k="1px"!==B,l=k!==a.mj?a.Kb-a.ud:a.Kb,
a.Nz&&a.Ce&&(I=1,y+1<A&&(I=Math.max((A-y)*D+l,I)),p>n+1&&(I=Math.max((p-n)*D+l,I)),r+1<c&&(I=Math.max((c-r)*D+l,I)),I+="px"),l="1px"!==I;if(a.Gv&&k===a.mj&&l===a.Ak)return d===a.Fb&&e===a.Kb||a.Nf(),!1;k!==a.mj&&(a.Kb="1px"===B?a.Kb+a.ud:Math.max(a.Kb-a.ud,1),h=!0);a.mj=k;a.Yr.style.width=B;l!==a.Ak&&(a.Fb="1px"===I?a.Fb+a.ud:Math.max(a.Fb-a.ud,1),h=!0,a.cC&&(k=v.M(),l?(b.style.left=a.ud+"px",a.position=k.m(a.Xa.x+a.ud/a.scale,a.Xa.y)):(b.style.left="0px",a.position=k.m(a.Xa.x-a.ud/a.scale,a.Xa.y)),
v.v(k)));a.Ak=l;a.Yr.style.height=I;b=a.Kv;a.Mz&&a.Be&&(q+1<m?b.scrollLeft=(a.position.x-s)*D:s+1<t?b.scrollLeft=b.scrollWidth-b.clientWidth:u>x+1&&(b.scrollLeft=a.position.x*D));a.Nz&&a.Ce&&(r+1<c?b.scrollTop=(a.position.y-y)*D:y+1<A?b.scrollTop=b.scrollHeight-b.clientHeight:p>n+1&&(b.scrollTop=a.position.y*D));h&&(a.Jq=!0);m=a.Fb;c=a.Kb;b.style.width=m+(a.Ak?a.ud:0)+"px";b.style.height=c+(a.mj?a.ud:0)+"px";a.Vy=!1;return d!==m||e!==c||a.Oa.sc?(n=a.tb,a.Ft(f,n,h),!1):!0}
E.prototype.add=E.prototype.add=function(a){v.C(a,J,E,"add:part");var b=a.g;if(b!==this){null!==b&&v.k("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.ln&&(a.Gk="Tool");var c=a.tf,b=this.Ws(c);null===b&&(b=this.Ws(""));null===b&&v.k('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.Zo(99999999,a,a.g===this),0<=c&&this.Ec(Qd,"parts",b,null,a,null,c),b.Bc||this.oc(),a.G(Sj),c=a.qt,null!==
c&&c(a,null,b))}};
E.prototype.Zo=function(a){if(a instanceof S){if(this.io.add(a),a instanceof T){var b=a.Sa;null===b?this.Sk.add(a):b.eo.add(a);b=a.Pb;null!==b&&(b.g=this)}}else a instanceof W?this.bo.add(a):a instanceof mf||this.zb.add(a);var c=this;Tj(a,function(a){Uj(c,a)});a.Hb&&a.P();b=a.data;null!==b&&(a instanceof mf||(a instanceof W?this.vk.add(b,a):this.ki.add(b,a)),Tj(a,function(a){Vj(c,a)}));!0!==Kj(a)&&!0!==Lj(a)||this.Zf.add(a);Wj(a,!0,this);Xj(a)?(a.Z.H()&&this.pa(Pi(a,a.Z)),this.oc()):a.isVisible()&&
a.Z.H()&&this.pa(Pi(a,a.Z));this.de()};
E.prototype.Ke=function(a){a.Os();if(a instanceof S){if(this.io.remove(a),a instanceof T){var b=a.Sa;null===b?this.Sk.remove(a):b.eo.remove(a);b=a.Pb;null!==b&&(b.g=null)}}else a instanceof W?this.bo.remove(a):a instanceof mf||this.zb.remove(a);var c=this;Tj(a,function(a){Yj(c,a)});b=a.data;null!==b&&(a instanceof mf||(a instanceof W?this.vk.remove(b):this.ki.remove(b)),Tj(a,function(a){Zj(c,a)}));this.Zf.remove(a);Xj(a)?(a.Z.H()&&this.pa(Pi(a,a.Z)),this.oc()):a.isVisible()&&a.Z.H()&&this.pa(Pi(a,
a.Z));this.de()};E.prototype.remove=E.prototype.remove=function(a){v.C(a,J,E,"remove:part");a.hb=!1;a.Yg=!1;var b=a.layer;if(null!==b&&b.g===this){a.G(ak);a.Nm();var c=b.Ke(-1,a,!1);0<=c&&this.Ec(be,"parts",b,a,null,c,null);c=a.qt;null!==c&&c(a,b,null)}};E.prototype.removeParts=E.prototype.uA=function(a,b){if(v.isArray(a))for(var c=v.Va(a),d=0;d<c;d++){var e=v.Pa(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new H(J),e.Yc(a),c=e.i;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};
E.prototype.copyParts=E.prototype.Lo=function(a,b,c){return this.rb.Lo(a,b,c)};E.prototype.moveParts=E.prototype.moveParts=function(a,b,c){v.C(b,w,E,"moveParts:offset");var d=this.wb;if(null!==d){d=d.Xd;null===d&&(d=new wf,d.Fc(this));var e=new ma(J,Object);if(null!==a)a=a.i;else{for(a=this.bk;a.next();)Kf(d,e,a.value,c);for(a=this.wg;a.next();)Kf(d,e,a.value,c);a=this.links}for(;a.next();)Kf(d,e,a.value,c);d.moveParts(e,b,c)}};
function bk(a,b,c){v.C(b,ze,E,"addLayer:layer");null!==b.g&&b.g!==a&&v.k("Cannot share a Layer with another Diagram: "+b+" of "+b.g);null===c?null!==b.g&&v.k("Cannot add an existing Layer to this Diagram again: "+b):(v.C(c,ze,E,"addLayer:existingLayer"),c.g!==a&&v.k("Existing Layer must be in this Diagram: "+c+" not in "+c.g),b===c&&v.k("Cannot move a Layer before or after itself: "+b));if(b.g!==a){b=b.name;a=a.Xb;c=a.count;for(var d=0;d<c;d++)a.ha(d).name===b&&v.k("Cannot add Layer with the name '"+
b+"'; a Layer with the same name is already present in this Diagram.")}}E.prototype.addLayer=E.prototype.Fs=function(a){bk(this,a,null);a.Fc(this);var b=this.Xb,c=b.count-1;if(!a.Bc)for(;0<=c&&b.ha(c).Bc;)c--;b.xd(c+1,a);null!==this.Rd&&this.Ec(Qd,"layers",this,null,a,null,c+1);this.pa();this.oc()};
E.prototype.addLayerBefore=E.prototype.sG=function(a,b){bk(this,a,b);a.Fc(this);var c=this.Xb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.Rd&&this.Ec(be,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.ha(f)===b){c.xd(f,a);break}null!==this.Rd&&this.Ec(Qd,"layers",this,null,a,null,f);this.pa();0>d&&this.oc()};
E.prototype.addLayerAfter=function(a,b){bk(this,a,b);a.Fc(this);var c=this.Xb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.Rd&&this.Ec(be,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.ha(f)===b){c.xd(f+1,a);break}null!==this.Rd&&this.Ec(Qd,"layers",this,null,a,null,f+1);this.pa();0>d&&this.oc()};
E.prototype.removeLayer=function(a){v.C(a,ze,E,"removeLayer:layer");a.g!==this&&v.k("Cannot remove a Layer from another Diagram: "+a+" of "+a.g);if(""!==a.name){var b=this.Xb,c=b.indexOf(a);if(b.remove(a)){for(b=a.zb.copy().i;b.next();){var d=b.value,e=d.tf;d.tf=e!==a.name?e:""}null!==this.Rd&&this.Ec(be,"layers",this,a,null,c,null);this.pa();this.oc()}}};E.prototype.findLayer=E.prototype.Ws=function(a){for(var b=this.Ww;b.next();){var c=b.value;if(c.name===a)return c}return null};
E.prototype.addModelChangedListener=E.prototype.uG=function(a){v.j(a,"function",E,"addModelChangedListener:listener");null===this.Hh&&(this.Hh=new G("function"));this.Hh.add(a);this.da.zm(a)};E.prototype.removeModelChangedListener=function(a){v.j(a,"function",E,"removeModelChangedListener:listener");null!==this.Hh&&(this.Hh.remove(a),0===this.Hh.count&&(this.Hh=null));this.da.It(a)};
E.prototype.addChangedListener=E.prototype.zm=function(a){v.j(a,"function",E,"addChangedListener:listener");null===this.dj&&(this.dj=new G("function"));this.dj.add(a)};E.prototype.removeChangedListener=E.prototype.It=function(a){v.j(a,"function",E,"removeChangedListener:listener");null!==this.dj&&(this.dj.remove(a),0===this.dj.count&&(this.dj=null))};
E.prototype.sw=function(a){this.lb||this.ja.jE(a);a.Ac!==Pd&&(this.Zh=!0);if(null!==this.dj){var b=this.dj,c=b.length;if(1===c)b=b.ha(0),b(a);else if(0!==c)for(var d=b.ed(),e=0;e<c;e++)b=d[e],b(a)}};E.prototype.raiseChangedEvent=E.prototype.Ec=function(a,b,c,d,e,f,h){void 0===f&&(f=null);void 0===h&&(h=null);var k=new Nd;k.g=this;k.Ac=a;k.propertyName=b;k.object=c;k.oldValue=d;k.xg=f;k.newValue=e;k.vg=h;this.sw(k)};
E.prototype.raiseChanged=E.prototype.h=function(a,b,c,d,e){this.Ec(Od,a,this,b,c,d,e)};v.u(E,{Oa:"animationManager"},function(){return this.dB});v.u(E,{ja:"undoManager"},function(){return this.Rd.ja});v.defineProperty(E,{lb:"skipsUndoManager"},function(){return this.Ei},function(a){v.j(a,"boolean",E,"skipsUndoManager");this.Ei=a;this.Rd.Ei=a});v.defineProperty(E,{Cz:"delaysLayout"},function(){return this.iy},function(a){this.iy=a});
E.prototype.Em=function(a,b){if(null!==a&&a.g===this){var c=a.Ac;if(c===Od){var d=a.object,c=a.propertyName,e=a.la(b);v.Ha(d,c,e);d instanceof R&&(d=d.V,null!==d&&d.Zd());this.Zh=!0}else if(c===Qd){e=a.object;c=a.vg;d=a.newValue;if(e instanceof C)if("number"===typeof c&&d instanceof R){var f=e;b?f.Ke(c):f.xd(c,d);d=e.V;null!==d&&d.Zd()}else"number"===typeof c&&d instanceof Ue&&(f=e,b?d.ae?f.VE(c):f.RE(c):(c=d.ae?f.bd(d.index):f.ad(d.index),c.Ss(d)));else e instanceof ze?(f=!0===a.xg,"number"===typeof c&&
d instanceof J&&(b?(d.Zd(),e.Ke(f?c:-1,d,f)):e.Zo(c,d,f))):e instanceof E?"number"===typeof c&&d instanceof ze&&(e=d,b?this.Xb.Rc(c):(e.Fc(this),this.Xb.xd(c,e))):v.k("unknown ChangedEvent.Insert object: "+a.toString());this.Zh=!0}else c===be?(e=a.object,c=a.xg,d=a.oldValue,e instanceof C?"number"===typeof c&&d instanceof R?(f=e,b?f.xd(c,d):f.Ke(c)):"number"===typeof c&&d instanceof Ue&&(f=e,b?(c=d.ae?f.bd(d.index):f.ad(d.index),c.Ss(d)):d.ae?f.VE(c):f.RE(c)):e instanceof ze?(f=!0===a.vg,"number"===
typeof c&&d instanceof J&&(b?e.Zo(c,d,f):(d.Zd(),e.Ke(f?c:-1,d,f)))):e instanceof E?"number"===typeof c&&d instanceof ze&&(e=d,b?(e.Fc(this),this.Xb.xd(c,e)):this.Xb.Rc(c)):v.k("unknown ChangedEvent.Remove object: "+a.toString()),this.Zh=!0):c!==Pd&&v.k("unknown ChangedEvent: "+a.toString())}};E.prototype.startTransaction=E.prototype.Qb=function(a){return this.ja.Qb(a)};E.prototype.commitTransaction=E.prototype.wd=function(a){return this.ja.wd(a)};E.prototype.rollbackTransaction=E.prototype.wp=function(){return this.ja.wp()};
E.prototype.updateAllTargetBindings=E.prototype.nJ=function(a){void 0===a&&(a="");for(var b=this.bk;b.next();)b.value.Ib(a);for(b=this.wg;b.next();)b.value.Ib(a);for(b=this.links;b.next();)b.value.Ib(a)};E.prototype.updateAllRelationshipsFromData=function(){for(var a=this.bk;a.next();)a.value.updateRelationshipsFromData();for(a=this.wg;a.next();)a.value.updateRelationshipsFromData();for(a=this.links;a.next();)a.value.updateRelationshipsFromData()};
function ck(a,b,c){if(a.Uc||a.Fd)a.Tb=c,c=a.Oa,c.sc&&xi(c,b,a.Tb);else if(a.Uc=!0,null===a.ub)a.Tb=c;else{var d=a.tb.copy(),e=a.Fb,f=a.Kb;d.width=a.Fb/b;d.height=a.Kb/b;var h=a.Hl.x,k=a.Hl.y;if(isNaN(h))switch(a.rz){case Xb:h=0;break;case Yb:h=e-1;break;case Kb:h=e/2;break;case yc:case xc:h=e/2}if(isNaN(k))switch(a.rz){case Wb:k=0;break;case Zb:k=f-1;break;case Kb:k=f/2;break;case yc:case xc:k=f/2}null!==a.cF&&(c=a.cF(a,c));c<a.$g&&(c=a.$g);c>a.Zg&&(c=a.Zg);e=v.Rb(a.Xa.x+h/b-h/c,a.Xa.y+k/b-k/c);a.position=
e;v.v(e);a.Tb=c;a.Ft(d,a.tb);a.Uc=!1;pj(a,!1);c=a.Oa;c.sc&&xi(c,b,a.Tb);a.pa();Bj(a)}}E.prototype.Ft=function(a,b,c){void 0===c&&(c=!1);c||Bj(this);lj(this);var d=this.Pb;null===d||!d.Tw||c||a.width===b.width&&a.height===b.height||d.G();d=this.$a;!0===this.Tl&&d instanceof kf&&(this.O.ea=this.EF(this.O.ef),d.doMouseMove());this.nE(a,b);Ej(this);this.ya("ViewportBoundsChanged",c?v.qh:null,a)};
function Ej(a,b){void 0===b&&(b=null);var c=a.kd;if(null!==c&&c.visible){for(var d=v.El(),e=1,f=1,h=c.wa.n,k=h.length,l=0;l<k;l++){var m=h[l],n=m.interval;2>n||(ik(m.Cb)?f=f*n/K.eE(f,n):e=e*n/K.eE(e,n))}h=c.Jw;d.m(f*h.width,e*h.height);h=f=l=k=0;if(null!==b)k=b.width,l=b.height,f=b.x,h=b.y;else{e=v.Uf();f=a.tb;e.m(f.x,f.y,f.width,f.height);for(h=a.yv.i;h.next();)f=h.value.tb,f.H()&&rb(e,f.x,f.y,f.width,f.height);k=e.width;l=e.height;f=e.x;h=e.y;if(!e.H())return}c.width=k+2*d.width;c.height=l+2*d.height;
e=v.M();K.Xs(f,h,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);v.Wj(d);c.V.location=e;v.v(e)}}E.prototype.clearSelection=E.prototype.uw=function(){var a=0<this.selection.count;a&&this.ya("ChangingSelection");pf(this);a&&this.ya("ChangedSelection")};function pf(a){a=a.selection;if(0<a.count){for(var b=a.ed(),c=b.length,d=0;d<c;d++)b[d].hb=!1;a.Na();a.clear();a.freeze()}}
E.prototype.select=E.prototype.select=function(a){null!==a&&(v.C(a,J,E,"select:part"),a.layer.g===this&&(!a.hb||1<this.selection.count)&&(this.ya("ChangingSelection"),pf(this),a.hb=!0,this.ya("ChangedSelection")))};
E.prototype.selectCollection=E.prototype.iF=function(a){this.ya("ChangingSelection");pf(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Pa(a,c);d instanceof J||v.k("Diagram.selectCollection given something that is not a Part: "+d);d.hb=!0}else for(a=a.i;a.next();)d=a.value,d instanceof J||v.k("Diagram.selectCollection given something that is not a Part: "+d),d.hb=!0;this.ya("ChangedSelection")};
E.prototype.clearHighlighteds=E.prototype.CD=function(){var a=this.Kw;if(0<a.count){for(var b=a.ed(),c=b.length,d=0;d<c;d++)b[d].Yg=!1;a.Na();a.clear();a.freeze()}};E.prototype.highlight=function(a){null!==a&&a.layer.g===this&&(v.C(a,J,E,"highlight:part"),!a.Yg||1<this.Kw.count)&&(this.CD(),a.Yg=!0)};
E.prototype.highlightCollection=function(a){this.CD();if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Pa(a,c);d instanceof J||v.k("Diagram.highlightCollection given something that is not a Part: "+d);d.Yg=!0}else for(a=a.i;a.next();)d=a.value,d instanceof J||v.k("Diagram.highlightCollection given something that is not a Part: "+d),d.Yg=!0};
E.prototype.scroll=E.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;if("pixel"===a)e=c;else if("line"===a)e=c*(d?this.Ot:this.Nt);else if("page"===a)a=d?this.tb.height:this.tb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.Ot:this.Nt),0),e*=c);else{if("document"===a){e=this.Wd;d=this.tb;c=v.M();"up"===b?this.position=c.m(d.x,e.y):"left"===b?this.position=c.m(e.x,d.y):"down"===b?this.position=c.m(d.x,e.bottom-d.height):"right"===b&&(this.position=c.m(e.right-d.width,
d.y));v.v(c);return}v.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+a)}e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:v.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b);this.position=c};E.prototype.scrollToRect=E.prototype.eF=function(a){var b=this.tb;b.Sj(a)||(a=a.Zk,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};
E.prototype.centerRect=function(a){var b=this.tb;a=a.Zk;a.x-=b.width/2;a.y-=b.height/2;this.position=a};E.prototype.transformDocToView=E.prototype.CF=function(a){var b=this.Td;b.reset();1!==this.Tb&&b.scale(this.Tb);var c=this.Xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.Td)};
E.prototype.transformViewToDoc=E.prototype.EF=function(a){var b=this.Td;b.reset();1!==this.Tb&&b.scale(this.Tb);var c=this.Xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return Xa(a.copy(),this.Td)};var xf;E.None=xf=v.p(E,"None",0);var tj;E.Uniform=tj=v.p(E,"Uniform",1);var uj;E.UniformToFill=uj=v.p(E,"UniformToFill",2);var Gg;E.CycleAll=Gg=v.p(E,"CycleAll",10);var Kg;E.CycleNotDirected=Kg=v.p(E,"CycleNotDirected",11);var Mg;
E.CycleNotDirectedFast=Mg=v.p(E,"CycleNotDirectedFast",12);var Ng;E.CycleNotUndirected=Ng=v.p(E,"CycleNotUndirected",13);var Hg;E.CycleDestinationTree=Hg=v.p(E,"CycleDestinationTree",14);var Jg;E.CycleSourceTree=Jg=v.p(E,"CycleSourceTree",15);var Ui;E.DocumentScroll=Ui=v.p(E,"DocumentScroll",1);var Qj;E.InfiniteScroll=Qj=v.p(E,"InfiniteScroll",2);var Wi;E.TreeParentCollapsed=Wi=v.p(E,"TreeParentCollapsed",1);E.AllParentsCollapsed=v.p(E,"AllParentsCollapsed",2);
v.defineProperty(E,{oJ:"validCycle"},function(){return this.dw},function(a){var b=this.dw;b!==a&&(v.qb(a,E,E,"validCycle"),this.dw=a,this.h("validCycle",b,a))});v.u(E,{Ww:"layers"},function(){return this.Xb.i});v.defineProperty(E,{rf:"isModelReadOnly"},function(){var a=this.Rd;return null===a?!1:a.gb},function(a){var b=this.Rd;null!==b&&(b.gb=a)});
v.defineProperty(E,{gb:"isReadOnly"},function(){return this.qi},function(a){var b=this.qi;b!==a&&(v.j(a,"boolean",E,"isReadOnly"),this.qi=a,this.h("isReadOnly",b,a))});v.defineProperty(E,{isEnabled:"isEnabled"},function(){return this.Pe},function(a){var b=this.Pe;b!==a&&(v.j(a,"boolean",E,"isEnabled"),this.Pe=a,this.h("isEnabled",b,a))});
v.defineProperty(E,{kz:"allowClipboard"},function(){return this.ju},function(a){var b=this.ju;b!==a&&(v.j(a,"boolean",E,"allowClipboard"),this.ju=a,this.h("allowClipboard",b,a))});v.defineProperty(E,{Qj:"allowCopy"},function(){return this.gk},function(a){var b=this.gk;b!==a&&(v.j(a,"boolean",E,"allowCopy"),this.gk=a,this.h("allowCopy",b,a))});
v.defineProperty(E,{Am:"allowDelete"},function(){return this.hk},function(a){var b=this.hk;b!==a&&(v.j(a,"boolean",E,"allowDelete"),this.hk=a,this.h("allowDelete",b,a))});v.defineProperty(E,{jw:"allowDragOut"},function(){return this.ku},function(a){var b=this.ku;b!==a&&(v.j(a,"boolean",E,"allowDragOut"),this.ku=a,this.h("allowDragOut",b,a))});
v.defineProperty(E,{sD:"allowDrop"},function(){return this.lu},function(a){var b=this.lu;b!==a&&(v.j(a,"boolean",E,"allowDrop"),this.lu=a,this.h("allowDrop",b,a))});v.defineProperty(E,{nw:"allowTextEdit"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(v.j(a,"boolean",E,"allowTextEdit"),this.qk=a,this.h("allowTextEdit",b,a))});
v.defineProperty(E,{kw:"allowGroup"},function(){return this.ik},function(a){var b=this.ik;b!==a&&(v.j(a,"boolean",E,"allowGroup"),this.ik=a,this.h("allowGroup",b,a))});v.defineProperty(E,{ow:"allowUngroup"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(v.j(a,"boolean",E,"allowUngroup"),this.rk=a,this.h("allowUngroup",b,a))});
v.defineProperty(E,{Co:"allowInsert"},function(){return this.nu},function(a){var b=this.nu;b!==a&&(v.j(a,"boolean",E,"allowInsert"),this.nu=a,this.h("allowInsert",b,a))});v.defineProperty(E,{Ks:"allowLink"},function(){return this.jk},function(a){var b=this.jk;b!==a&&(v.j(a,"boolean",E,"allowLink"),this.jk=a,this.h("allowLink",b,a))});
v.defineProperty(E,{Bm:"allowRelink"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(v.j(a,"boolean",E,"allowRelink"),this.lk=a,this.h("allowRelink",b,a))});v.defineProperty(E,{Yk:"allowMove"},function(){return this.kk},function(a){var b=this.kk;b!==a&&(v.j(a,"boolean",E,"allowMove"),this.kk=a,this.h("allowMove",b,a))});
v.defineProperty(E,{lw:"allowReshape"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(v.j(a,"boolean",E,"allowReshape"),this.mk=a,this.h("allowReshape",b,a))});v.defineProperty(E,{Ls:"allowResize"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(v.j(a,"boolean",E,"allowResize"),this.nk=a,this.h("allowResize",b,a))});
v.defineProperty(E,{mw:"allowRotate"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(v.j(a,"boolean",E,"allowRotate"),this.ok=a,this.h("allowRotate",b,a))});v.defineProperty(E,{lf:"allowSelect"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(v.j(a,"boolean",E,"allowSelect"),this.pk=a,this.h("allowSelect",b,a))});
v.defineProperty(E,{tD:"allowUndo"},function(){return this.ou},function(a){var b=this.ou;b!==a&&(v.j(a,"boolean",E,"allowUndo"),this.ou=a,this.h("allowUndo",b,a))});v.defineProperty(E,{pw:"allowZoom"},function(){return this.qu},function(a){var b=this.qu;b!==a&&(v.j(a,"boolean",E,"allowZoom"),this.qu=a,this.h("allowZoom",b,a))});
v.defineProperty(E,{Nz:"hasVerticalScrollbar"},function(){return this.Wu},function(a){var b=this.Wu;b!==a&&(v.j(a,"boolean",E,"hasVerticalScrollbar"),this.Wu=a,Bj(this),this.pa(),this.h("hasVerticalScrollbar",b,a),pj(this,!1))});v.defineProperty(E,{Mz:"hasHorizontalScrollbar"},function(){return this.Vu},function(a){var b=this.Vu;b!==a&&(v.j(a,"boolean",E,"hasHorizontalScrollbar"),this.Vu=a,Bj(this),this.pa(),this.h("hasHorizontalScrollbar",b,a),pj(this,!1))});
v.defineProperty(E,{Be:"allowHorizontalScroll"},function(){return this.mu},function(a){var b=this.mu;b!==a&&(v.j(a,"boolean",E,"allowHorizontalScroll"),this.mu=a,this.h("allowHorizontalScroll",b,a),pj(this,!1))});v.defineProperty(E,{Ce:"allowVerticalScroll"},function(){return this.pu},function(a){var b=this.pu;b!==a&&(v.j(a,"boolean",E,"allowVerticalScroll"),this.pu=a,this.h("allowVerticalScroll",b,a),pj(this,!1))});
v.defineProperty(E,{Nt:"scrollHorizontalLineChange"},function(){return this.Hv},function(a){var b=this.Hv;b!==a&&(v.j(a,"number",E,"scrollHorizontalLineChange"),0>a&&v.ua(a,">= 0",E,"scrollHorizontalLineChange"),this.Hv=a,this.h("scrollHorizontalLineChange",b,a))});
v.defineProperty(E,{Ot:"scrollVerticalLineChange"},function(){return this.Lv},function(a){var b=this.Lv;b!==a&&(v.j(a,"number",E,"scrollVerticalLineChange"),0>a&&v.ua(a,">= 0",E,"scrollVerticalLineChange"),this.Lv=a,this.h("scrollVerticalLineChange",b,a))});v.defineProperty(E,{O:"lastInput"},function(){return this.Nb},function(a){this.Nb=a});v.defineProperty(E,{uc:"firstInput"},function(){return this.xk},function(a){this.xk=a});
v.defineProperty(E,{Yb:"currentCursor"},function(){return this.$x},function(a){""===a&&(a=this.rq);this.$x!==a&&(v.j(a,"string",E,"currentCursor"),null!==this.ub&&(this.$x=a,this.ub.style.cursor=a,this.Mb.style.cursor=a))});v.defineProperty(E,{ZJ:"defaultCursor"},function(){return this.rq},function(a){""===a&&(a="auto");var b=this.rq;b!==a&&(v.j(a,"string",E,"defaultCursor"),this.rq=a,this.h("defaultCursor",b,a))});
v.defineProperty(E,{click:"click"},function(){return this.fi},function(a){var b=this.fi;b!==a&&(null!==a&&v.j(a,"function",E,"click"),this.fi=a,this.h("click",b,a))});v.defineProperty(E,{Ts:"doubleClick"},function(){return this.ni},function(a){var b=this.ni;b!==a&&(null!==a&&v.j(a,"function",E,"doubleClick"),this.ni=a,this.h("doubleClick",b,a))});
v.defineProperty(E,{sz:"contextClick"},function(){return this.ii},function(a){var b=this.ii;b!==a&&(null!==a&&v.j(a,"function",E,"contextClick"),this.ii=a,this.h("contextClick",b,a))});v.defineProperty(E,{dA:"mouseOver"},function(){return this.zi},function(a){var b=this.zi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseOver"),this.zi=a,this.h("mouseOver",b,a))});
v.defineProperty(E,{cA:"mouseHover"},function(){return this.yi},function(a){var b=this.yi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseHover"),this.yi=a,this.h("mouseHover",b,a))});v.defineProperty(E,{bA:"mouseHold"},function(){return this.xi},function(a){var b=this.xi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseHold"),this.xi=a,this.h("mouseHold",b,a))});
v.defineProperty(E,{qI:"mouseDragOver"},function(){return this.sv},function(a){var b=this.sv;b!==a&&(null!==a&&v.j(a,"function",E,"mouseDragOver"),this.sv=a,this.h("mouseDragOver",b,a))});v.defineProperty(E,{aA:"mouseDrop"},function(){return this.wi},function(a){var b=this.wi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseDrop"),this.wi=a,this.h("mouseDrop",b,a))});
v.defineProperty(E,{LA:"toolTip"},function(){return this.Hi},function(a){var b=this.Hi;b!==a&&(null!==a&&v.C(a,mf,E,"toolTip"),this.Hi=a,this.h("toolTip",b,a))});v.defineProperty(E,{contextMenu:"contextMenu"},function(){return this.ji},function(a){var b=this.ji;b!==a&&(null!==a&&v.C(a,mf,E,"contextMenu"),this.ji=a,this.h("contextMenu",b,a))});
v.defineProperty(E,{rb:"commandHandler"},function(){return this.Vx},function(a){var b=this.Vx;b!==a&&(v.C(a,sa,E,"commandHandler"),null!==a.g&&v.k("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.Fc(null),this.Vx=a,a.Fc(this))});v.defineProperty(E,{wb:"toolManager"},function(){return this.ez},function(a){var b=this.ez;b!==a&&(v.C(a,kf,E,"toolManager"),null!==a.g&&v.k("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.Fc(null),this.ez=a,a.Fc(this))});
v.defineProperty(E,{Bz:"defaultTool"},function(){return this.hy},function(a){var b=this.hy;b!==a&&(v.C(a,Le,E,"defaultTool"),this.hy=a,this.$a===b&&(this.$a=a))});v.defineProperty(E,{$a:"currentTool"},function(){return this.by},function(a){var b=this.by;null!==b&&(b.qa&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());null===a&&(a=this.Bz);null!==a&&(v.C(a,Le,E,"currentTool"),this.by=a,a.Fc(this),a.doStart())});v.u(E,{selection:"selection"},function(){return this.Ov});
v.defineProperty(E,{iI:"maxSelectionCount"},function(){return this.nv},function(a){var b=this.nv;if(b!==a)if(v.j(a,"number",E,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.nv=a,this.h("maxSelectionCount",b,a),!this.ja.ib&&(a=this.selection.count-a,0<a)){this.ya("ChangingSelection");for(var b=this.selection.ed(),c=0;c<a;c++)b[c].hb=!1;this.ya("ChangedSelection")}}else v.ua(a,">= 0",E,"maxSelectionCount")});
v.defineProperty(E,{tI:"nodeSelectionAdornmentTemplate"},function(){return this.tv},function(a){var b=this.tv;b!==a&&(v.C(a,mf,E,"nodeSelectionAdornmentTemplate"),this.tv=a,this.h("nodeSelectionAdornmentTemplate",b,a))});v.defineProperty(E,{zH:"groupSelectionAdornmentTemplate"},function(){return this.Su},function(a){var b=this.Su;b!==a&&(v.C(a,mf,E,"groupSelectionAdornmentTemplate"),this.Su=a,this.h("groupSelectionAdornmentTemplate",b,a))});
v.defineProperty(E,{dI:"linkSelectionAdornmentTemplate"},function(){return this.jv},function(a){var b=this.jv;b!==a&&(v.C(a,mf,E,"linkSelectionAdornmentTemplate"),this.jv=a,this.h("linkSelectionAdornmentTemplate",b,a))});v.u(E,{Kw:"highlighteds"},function(){return this.Xu});
v.defineProperty(E,{Zh:"isModified"},function(){var a=this.ja;return a.isEnabled?null!==a.Pi?!0:this.Ey&&this.Hg!==a.Ti:this.Ey},function(a){if(this.Ey!==a){v.j(a,"boolean",E,"isModified");this.Ey=a;var b=this.ja;!a&&b.isEnabled&&(this.Hg=b.Ti);a||sk(this)}});function sk(a){var b=a.Zh;a.jD!==b&&(a.jD=b,a.ya("Modified"))}
v.defineProperty(E,{da:"model"},function(){return this.Rd},function(a){var b=this.Rd;if(b!==a){v.C(a,F,E,"model");this.$a.doCancel();null!==b&&b.ja!==a.ja&&b.ja.uE&&v.k("Do not replace a Diagram.model while a transaction is in progress.");this.Oa.Xi();this.uw();this.ve=!1;this.Nn=!0;this.Hg=-2;this.Cf=!1;var c=this.Fd;this.Fd=!0;this.Oa.an("Model");null!==b&&(null!==this.Hh&&this.Hh.each(function(a){b.It(a)}),b.It(this.mC),b instanceof Q&&tk(this,b.$h),tk(this,b.dh));this.Rd=a;a.zm(this.lC);uk(this,
a.dh);a instanceof Q&&vk(this,a.$h);a.It(this.lC);a.zm(this.mC);null!==this.Hh&&this.Hh.each(function(b){a.zm(b)});this.Fd=c;this.Uc||this.pa();null!==b&&(a.ja.isEnabled=b.ja.isEnabled)}});v.defineProperty(E,{Qa:null},function(){return this.eC},function(a){this.eC=a});v.u(E,{Zw:null},function(){return this.YF});
function Yi(a,b){if(b.da===a.da){var c=b.Ac,d=b.propertyName;if(c===Pd&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.wb,c.df.each(function(b){b.Fc(a)}),c.Of.each(function(b){b.Fc(a)}),c.Pf.each(function(b){b.Fc(a)}),a.Fd||a.ve||(a.Ju=!0,a.Nn&&(a.Cf=!0));else if("StartingUndo"===d||"StartingRedo"===d){var e=a.Oa;e.pf&&!a.lb&&e.Xi();a.ya("ChangingSelection")}else"StartedTransaction"===d&&(e=a.Oa,e.pf&&!a.lb&&e.Xi());else if(a.Qa){a.Qa=!1;try{var f=b.cf;if(""!==f)if(c===Od){if("linkFromKey"===f){var h=
b.object,k=a.pg(h);if(null!==k){var l=b.newValue,m=a.We(l);k.U=m}}else if("linkToKey"===f)h=b.object,k=a.pg(h),null!==k&&(l=b.newValue,m=a.We(l),k.ba=m);else if("linkFromPortId"===f){if(h=b.object,k=a.pg(h),null!==k){var n=b.newValue;"string"===typeof n&&(k.rg=n)}}else if("linkToPortId"===f)h=b.object,k=a.pg(h),null!==k&&(n=b.newValue,"string"===typeof n&&(k.oh=n));else if("nodeGroupKey"===f){var h=b.object,p=a.Wh(h);if(null!==p){var q=b.newValue;if(void 0!==q){var r=a.We(q);p.Sa=r instanceof T?r:
null}else p.Sa=null}}else if("linkLabelKeys"===f){if(h=b.object,k=a.pg(h),null!==k){var s=b.oldValue,t=b.newValue;if(v.isArray(s))for(var u=v.Va(s),x=0;x<u;x++){var y=v.Pa(s,x),m=a.We(y);null!==m&&(m.ce=null)}if(v.isArray(t))for(u=v.Va(t),x=0;x<u;x++)y=v.Pa(t,x),m=a.We(y),null!==m&&(m.ce=k)}}else if("nodeParentKey"===f){var A=b.object,B=a.We(b.newValue),I=a.Gw(A);if(null!==I){var D=I.$s();null!==D?null===B?a.remove(D):a.Md?D.U=B:D.ba=B:wk(a,B,I)}}else if("parentLinkCategory"===f){var A=b.object,I=
a.Gw(A),V=b.newValue;null!==I&&"string"===typeof V&&(D=I.$s(),null!==D&&(D.Mc=V))}else if("nodeCategory"===f){var h=b.object,ba=a.Wh(h),V=b.newValue;null!==ba&&"string"===typeof V&&(ba.Mc=V)}else if("linkCategory"===f){var h=b.object,U=a.pg(h),V=b.newValue;null!==U&&"string"===typeof V&&(U.Mc=V)}else if("nodeDataArray"===f){var N=b.oldValue;tk(a,N);var Z=b.newValue;uk(a,Z)}else"linkDataArray"===f&&(N=b.oldValue,tk(a,N),Z=b.newValue,vk(a,Z));a.Zh=!0}else c===Qd?(Z=b.newValue,"nodeDataArray"===f&&v.Wa(Z)?
xk(a,Z):"linkDataArray"===f&&v.Wa(Z)?yk(a,Z):"linkLabelKeys"===f&&Pe(Z)&&(k=a.pg(b.object),m=a.We(Z),null!==k&&null!==m&&(m.ce=k)),a.Zh=!0):c===be?(N=b.oldValue,"nodeDataArray"===f&&v.Wa(N)?zk(a,N):"linkDataArray"===f&&v.Wa(N)?zk(a,N):"linkLabelKeys"===f&&Pe(N)&&(m=a.We(N),null!==m&&(m.ce=null)),a.Zh=!0):c===Pd&&("SourceChanged"===f?Xi(a,b.object,b.propertyName):"ModelDisplaced"===f&&a.xl());else if(c===Od){var Ga=b.propertyName,h=b.object;if(h===a.da){if("nodeKeyProperty"===Ga||"nodeCategoryProperty"===
Ga||"linkFromKeyProperty"===Ga||"linkToKeyProperty"===Ga||"linkFromPortIdProperty"===Ga||"linkToPortIdProperty"===Ga||"linkLabelKeysProperty"===Ga||"nodeIsGroupProperty"===Ga||"nodeGroupKeyProperty"===Ga||"nodeParentKeyProperty"===Ga||"linkCategoryProperty"===Ga)a.ja.ib||a.xl()}else Xi(a,h,Ga);a.Zh=!0}else if(c===Qd||c===be)Ak(a,b),a.Zh=!0;else if(c===Pd){if("FinishedUndo"===d||"FinishedRedo"===d)a.ja.ri=!0,a.ya("ChangedSelection"),nj(a),a.ja.ri=!1;a.Ju=!0;a.Nf();e=a.Oa;0===a.ja.ph&&ji(e);"CommittedTransaction"===
d&&a.ja.Hy&&(a.Hg=Math.min(a.Hg,a.ja.Ti-1));sk(a);var ta=b.xE;ta&&a.Zw.clear();!a.Py&&ta&&(a.Py=!0,v.setTimeout(function(){a.$a.standardMouseOver();a.Py=!1},10))}}finally{a.Qa=!0}}}}
function Xi(a,b,c){if("string"===typeof c){var d=a.Wh(b);if(null!==d)d.Ib(c),a.da instanceof te&&(d=a.pg(b),null!==d&&d.Ib(c));else{for(var d=null,e=a.Xl.i;e.next();){for(var f=e.value,h=0;h<f.length;h++){var k=f[h].jH(b);null!==k&&(null===d&&(d=v.jb()),d.push(k))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].Ib(c);v.ra(d)}}b===a.da.yt&&a.nJ(c)}}v.defineProperty(E,{yx:"skipsModelSourceBindings"},function(){return this.LC},function(a){this.LC=a});
v.defineProperty(E,{Wt:null},function(){return this.Yy},function(a){this.Yy=a});function Ak(a,b){var c=b.Ac===Qd,d=c?b.vg:b.xg,e=c?b.newValue:b.oldValue,f=a.Xl.la(b.object);if(Array.isArray(f))for(var h=0;h<f.length;h++){var k=f[h];if(c)Bk(k,e,d);else{var l=d;if(!(0>l)){var m=l;Ck(k)&&m++;k.Ke(m);Dk(k,m,l)}}}}function Vj(a,b){var c=b.si;if(v.isArray(c)){var d=a.Xl.la(c);if(null===d)d=[],d.push(b),a.Xl.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Zj(a,b){var c=b.si;if(v.isArray(c)){var d=a.Xl.la(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Xl.remove(c);break}}}function Uj(a,b){for(var c=b.wa.n,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof Zi&&Ek(a,f)}}function Ek(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.ko.la(c);if(null===d)d=[],d.push(b),a.ko.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Yj(a,b){for(var c=b.wa.n,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof Zi&&Fk(a,f)}}function Fk(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.ko.la(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.ko.remove(c);break}}}
E.prototype.clear=E.prototype.clear=function(){var a=null;null!==this.kd&&(a=this.kd.V);this.da.clear();for(var b=this.Xb.length,c=0;c<b;c++)this.Xb.n[c].clear();this.Zf.clear();this.Ql.clear();this.io.clear();this.Sk.clear();this.bo.clear();this.zb.clear();this.ki.clear();this.vk.clear();this.Xl.clear();this.Ov.Na();this.Ov.clear();this.Ov.freeze();this.Xu.Na();this.Xu.clear();this.Xu.freeze();hf=this.wn=null;jf="";this.Ku=(new z(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.zb.remove(a));
this.pa()};
E.prototype.reset=E.prototype.reset=function(){this.Uc=!0;this.clear();this.Xb=new G(ze);this.XE();this.WE();this.Xa=(new w(NaN,NaN)).freeze();this.Tb=1;this.Zu=(new w(NaN,NaN)).freeze();this.$u=NaN;this.pv=1E-4;this.mv=100;this.gw=(new w(NaN,NaN)).freeze();this.Qu=(new z(NaN,NaN,NaN,NaN)).freeze();this.Iv=(new tb(0,0,0,0)).freeze();this.Jv=Ui;this.Fv=this.Bv=null;this.Jl=xf;this.tn=yc;this.Ck=xf;this.Rn=yc;this.av=this.Yu=zb;this.eB=250;this.vu=(new tb(16,16,16,16)).freeze();this.ev=!0;this.bw=Wi;
this.dw=Gg;this.rq="auto";this.ji=this.Hi=this.wi=this.sv=this.xi=this.yi=this.zi=this.ii=this.ni=this.fi=null;this.qi=!1;this.hk=this.gk=this.ju=this.Pe=!0;this.lu=this.ku=!1;this.pu=this.mu=this.Wu=this.Vu=this.qu=this.ou=this.pk=this.ok=this.nk=this.mk=this.kk=this.lk=this.jk=this.nu=this.rk=this.ik=this.qk=!0;this.Lv=this.Hv=16;this.Re=(new tb(5)).freeze();this.nv=999999999;this.Qd=null;cj(this);this.kd=null;this.Ei=!0;bj(this);this.Pb=new Me;this.Ei=!1;this.da=new Q;this.ve=!1;this.Nn=!0;this.Uc=
this.Cf=!1;this.pa()};
E.prototype.rebuildParts=E.prototype.xl=function(){for(var a=this.hA.i;a.next();){var b=a.value,c=a.key;(!b.Ld()||b instanceof T)&&v.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.Kz.i;a.next();)b=a.value,c=a.key,b instanceof T||v.k('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.Wz.i;a.next();)b=a.value,c=a.key,b instanceof
W||v.k('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=v.jb();for(b=this.selection.i;b.next();)(c=b.value.data)&&a.push(c);for(var b=v.jb(),d=this.Kw.i;d.next();)(c=d.value.data)&&b.push(c);c=v.jb();for(d=this.wg.i;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.i;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.bk.i;d.next();)e=d.value,null!==
e.data&&(c.push(e.data),c.push(e.location));d=this.da;d instanceof Q&&tk(this,d.$h);tk(this,d.dh);uk(this,d.dh);d instanceof Q&&vk(this,d.$h);for(d=0;d<a.length;d++)e=this.Wh(a[d]),null!==e&&(e.hb=!0);for(d=0;d<b.length;d++)e=this.Wh(b[d]),null!==e&&(e.Yg=!0);for(d=0;d<c.length;d+=2)e=this.Wh(c[d]),null!==e&&(e.location=c[d+1]);v.ra(a);v.ra(b);v.ra(c)};
function uk(a,b){if(null!==b){for(var c=a.da,d=v.Va(b),e=0;e<d;e++){var f=v.Pa(b,e);c.Fe(f)?xk(a,f,!1):c instanceof Q&&yk(a,f)}if(c instanceof Q||c instanceof te){for(e=0;e<d;e++)f=v.Pa(b,e),c.Fe(f)&&Gk(a,f);if(c instanceof Q)for(c=a.links;c.next();)Hk(c.value)}Ik(a,!1)}}function xk(a,b,c){if(void 0!==b&&null!==b&&!a.ja.ib&&!a.ki.contains(b)){void 0===c&&(c=!0);var d=a.Iz(b),e=Jk(a,b,d);null!==e&&(of(e),e=e.copy(),null!==e&&(e.ei=d,a.ln&&(e.Gk="Tool"),a.add(e),e.data=b,c&&Gk(a,b)))}}
E.prototype.Iz=function(a){return this.da.Iz(a)};var Kk=!1,Lk=!1;function Jk(a,b,c){var d=!1,e=a.da;e instanceof Q&&(d=e.Rz(b));d?(b=a.Kz.la(c),null===b&&(b=a.Kz.la(""),null===b&&(Lk||(Lk=!0,v.trace('No Group template found for category "'+c+'"'),v.trace("  Using default group template")),b=a.wB))):(b=a.hA.la(c),null===b&&(b=a.hA.la(""),null===b&&(Kk||(Kk=!0,v.trace('No Node template found for category "'+c+'"'),v.trace("  Using default node template")),b=a.yB)));return b}
function Gk(a,b){var c=a.da;if(c instanceof Q||c instanceof te){var d=c.mb(b);if(void 0!==d){var e=Qe(c,d),f=a.Wh(b);if(null!==e&&null!==f){for(e=e.i;e.next();){var h=e.value;if(c instanceof Q){var k=c;if(k.Fe(h)){if(f instanceof T&&k.Rm(h)===d){var l=f,h=a.Wh(h);null!==h&&(h.Sa=l)}}else{var m=a.pg(h);if(null!==m&&f instanceof S&&(l=f,k.kl(h)===d&&(m.U=l),k.nl(h)===d&&(m.ba=l),h=k.Xj(h),v.isArray(h)))for(k=0;k<v.Va(h);k++)if(v.Pa(h,k)===d){l.ce=m;break}}}else c instanceof te&&(m=c,m.Fe(h)&&f instanceof
S&&(l=f,m.Sm(h)===d&&(h=a.Gw(h),wk(a,l,h))))}Se(c,d)}c instanceof Q?(c=c.Rm(b),void 0!==c&&(c=a.We(c),c instanceof T&&(f.Sa=c))):c instanceof te&&(c=c.Sm(b),void 0!==c&&f instanceof S&&(l=f,f=a.We(c),wk(a,f,l)))}}}
function wk(a,b,c){if(null!==b&&null!==c){var d=a.wb.CE,e=b,f=c;if(a.Md)for(b=f.ne;b.next();){if(b.value.ba===f)return}else for(e=c,f=b,b=e.ne;b.next();)if(b.value.U===e)return;null!==d&&Ig(d,e,f,null,!0)||(d=a.Iw(c.data),b=Mk(a,d),null!==b&&(of(b),b=b.copy(),null!==b&&(b.ei=d,b.U=e,b.ba=f,a.add(b),b.data=c.data)))}}function vk(a,b){if(null!==b){for(var c=v.Va(b),d=0;d<c;d++){var e=v.Pa(b,d);yk(a,e)}Ik(a,!1)}}
function yk(a,b){if(void 0!==b&&null!==b&&!a.ja.ib&&!a.vk.contains(b)){var c=a.Iw(b),d=Mk(a,c);if(null!==d&&(of(d),d=d.copy(),null!==d)){d.ei=c;var c=a.da,e=c.sH(b);""!==e&&(d.rg=e);e=c.kl(b);void 0!==e&&(e=a.We(e),e instanceof S&&(d.U=e));e=c.vH(b);""!==e&&(d.oh=e);e=c.nl(b);void 0!==e&&(e=a.We(e),e instanceof S&&(d.ba=e));c=c.Xj(b);if(v.isArray(c))for(var e=v.Va(c),f=0;f<e;f++){var h=v.Pa(c,f),h=a.We(h);null!==h&&(h.ce=d)}a.add(d);d.data=b}}}
E.prototype.Iw=function(a){var b=this.da,c="";b instanceof Q?c=b.Iw(a):b instanceof te&&(c=b.uH(a));return c};var Nk=!1;function Mk(a,b){var c=a.Wz.la(b);null===c&&(c=a.Wz.la(""),null===c&&(Nk||(Nk=!0,v.trace('No Link template found for category "'+b+'"'),v.trace("  Using default link template")),c=a.xB));return c}function tk(a,b){for(var c=v.Va(b),d=0;d<c;d++){var e=v.Pa(b,d);zk(a,e)}}
function zk(a,b){if(void 0!==b&&null!==b){var c=a.Wh(b);if(null!==c){c.hb=!1;c.Yg=!1;var d=c.layer;if(null!==d&&d.g===a){var e=a.da;if(e instanceof Q&&c instanceof S){var f=c,h=e.mb(f.data);if(void 0!==h){for(var k=f.ne;k.next();)Re(e,h,k.value.data);f.qf&&(k=f.ce,null!==k&&Re(e,h,k.data));if(f instanceof T)for(f=f.Pc;f.next();)k=f.value.data,e.Fe(k)&&Re(e,h,k)}}else if(e instanceof te&&c instanceof S){f=c;k=a.pg(f.data);if(null!==k){k.hb=!1;k.Yg=!1;var l=k.layer;if(null!==l){var m=l.Ke(-1,k,!1);
0<=m&&a.Ec(be,"parts",l,k,null,m,null);m=k.qt;null!==m&&m(k,l,null)}}k=a.Md;for(f=f.ne;f.next();)l=f.value,l=(k?l.ba:l.U).data,e.Fe(l)&&Re(e,h,l)}e=d.Ke(-1,c,!1);0<=e&&a.Ec(be,"parts",d,c,null,e,null);e=c.qt;null!==e&&e(c,d,null)}}}}E.prototype.findPartForKey=E.prototype.mH=function(a){if(null===a||void 0===a)return null;a=this.da.ke(a);return null===a?null:this.ki.la(a)};
E.prototype.findNodeForKey=E.prototype.We=function(a){if(null===a||void 0===a)return null;a=this.da.ke(a);if(null===a)return null;a=this.ki.la(a);return a instanceof S?a:null};E.prototype.findPartForData=E.prototype.Wh=function(a){if(null===a)return null;var b=this.ki.la(a);return null!==b?b:b=this.vk.la(a)};E.prototype.findNodeForData=E.prototype.Gw=function(a){if(null===a)return null;a=this.ki.la(a);return a instanceof S?a:null};
E.prototype.findLinkForData=E.prototype.pg=function(a){return null===a?null:this.vk.la(a)};E.prototype.findNodesByExample=function(a){for(var b=new H,c=this.io.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var h=arguments[f];if(v.Wa(h)&&Ok(this,e,h)){b.add(d);break}}}return b.i};
E.prototype.findLinksByExample=function(a){for(var b=new H,c=this.bo.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var h=arguments[f];if(v.Wa(h)&&Ok(this,e,h)){b.add(d);break}}}return b.i};function Ok(a,b,c){for(var d in c){var e=b[d],f=c[d];if(v.isArray(f)){if(!v.isArray(e)||e.length>=f.length)return!1;for(var h=0;h<e.length;h++){var k=e[h],l=f[h];if(void 0!==l&&!Pk(a,k,l))return!1}}else if(!Pk(a,e,f))return!1}return!0}
function Pk(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(v.Wa(b)&&v.Wa(c)){if(!Ok(a,b,c))return!1}else if(b!==c)return!1;return!0}v.defineProperty(E,{PK:"nodeTemplate"},function(){return this.Ai.la("")},function(a){var b=this.Ai.la("");b!==a&&(v.C(a,J,E,"nodeTemplate"),this.Ai.add("",a),this.h("nodeTemplate",b,a),this.ja.ib||this.xl())});
v.defineProperty(E,{hA:"nodeTemplateMap"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(v.C(a,ma,E,"nodeTemplateMap"),this.Ai=a,this.h("nodeTemplateMap",b,a),this.ja.ib||this.xl())});v.defineProperty(E,{lK:"groupTemplate"},function(){return this.yk.la("")},function(a){var b=this.yk.la("");b!==a&&(v.C(a,T,E,"groupTemplate"),this.yk.add("",a),this.h("groupTemplate",b,a),this.ja.ib||this.xl())});
v.defineProperty(E,{Kz:"groupTemplateMap"},function(){return this.yk},function(a){var b=this.yk;b!==a&&(v.C(a,ma,E,"groupTemplateMap"),this.yk=a,this.h("groupTemplateMap",b,a),this.ja.ib||this.xl())});v.defineProperty(E,{CK:"linkTemplate"},function(){return this.tj.la("")},function(a){var b=this.tj.la("");b!==a&&(v.C(a,W,E,"linkTemplate"),this.tj.add("",a),this.h("linkTemplate",b,a),this.ja.ib||this.xl())});
v.defineProperty(E,{Wz:"linkTemplateMap"},function(){return this.tj},function(a){var b=this.tj;b!==a&&(v.C(a,ma,E,"linkTemplateMap"),this.tj=a,this.h("linkTemplateMap",b,a),this.ja.ib||this.xl())});v.defineProperty(E,{RH:null},function(){return this.Tl},function(a){this.Tl=a});
v.defineProperty(E,{Le:"isMouseCaptured"},function(){return this.aC},function(a){var b=this.ub;null!==b&&(a?(this.O.bubbles=!1,b.removeEventListener("mousemove",this.kp,!1),b.removeEventListener("mousedown",this.jp,!1),b.removeEventListener("mouseup",this.mp,!1),b.removeEventListener("mousewheel",this.ah,!1),b.removeEventListener("DOMMouseScroll",this.ah,!1),b.removeEventListener("mouseout",this.lp,!1),window.addEventListener("mousemove",this.kp,!0),window.addEventListener("mousedown",this.jp,!0),
window.addEventListener("mouseup",this.mp,!0),window.addEventListener("mousewheel",this.ah,!0),window.addEventListener("DOMMouseScroll",this.ah,!0),window.addEventListener("mouseout",this.lp,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.kp,!0),window.removeEventListener("mousedown",this.jp,!0),window.removeEventListener("mouseup",this.mp,!0),window.removeEventListener("mousewheel",this.ah,!0),window.removeEventListener("DOMMouseScroll",
this.ah,!0),window.removeEventListener("mouseout",this.lp,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.kp,!1),b.addEventListener("mousedown",this.jp,!1),b.addEventListener("mouseup",this.mp,!1),b.addEventListener("mousewheel",this.ah,!1),b.addEventListener("DOMMouseScroll",this.ah,!1),b.addEventListener("mouseout",this.lp,!1)),this.aC=a)});
v.defineProperty(E,{position:"position"},function(){return this.Xa},function(a){var b=this.Xa;if(!b.L(a)){v.C(a,w,E,"position");var c=this.tb.copy();a=a.copy();if(!this.Uc&&null!==this.ub){this.Uc=!0;var d=this.scale;rj(this,a,this.Wd,this.Fb/d,this.Kb/d,this.tn,!1);this.Uc=!1}this.Xa=a.aa();a=this.Oa;a.sc&&wi(a,b,this.Xa);this.Uc||this.Ft(c,this.tb)}});v.defineProperty(E,{GH:"initialPosition"},function(){return this.Zu},function(a){this.Zu.L(a)||(v.C(a,w,E,"initialPosition"),this.Zu=a.aa())});
v.defineProperty(E,{HH:"initialScale"},function(){return this.$u},function(a){this.$u!==a&&(v.j(a,"number",E,"initialScale"),this.$u=a)});v.defineProperty(E,{ft:"grid"},function(){null===this.kd&&jj(this);return this.kd},function(a){var b=this.kd;if(b!==a){null===b&&(jj(this),b=this.kd);v.C(a,C,E,"grid");a.type!==kj&&v.k("Diagram.grid must be a Panel of type Panel.Grid");var c=b.T;null!==c&&c.remove(b);this.kd=a;a.name="GRID";null!==c&&c.add(a);Ej(this);this.pa();this.h("grid",b,a)}});
v.u(E,{tb:"viewportBounds"},function(){var a=this.iD;if(null===this.ub)return a;var b=this.Xa,c=this.Tb;a.m(b.x,b.y,Math.max(this.Fb,0)/c,Math.max(this.Kb,0)/c);return a});v.defineProperty(E,{bE:"fixedBounds"},function(){return this.Qu},function(a){var b=this.Qu;b.L(a)||(v.C(a,z,E,"fixedBounds"),-Infinity!==a.width&&Infinity!==a.height&&-Infinity!==a.height||v.k("fixedBounds width/height must not be Infinity"),this.Qu=a=a.aa(),this.oc(),this.h("fixedBounds",b,a))});
v.defineProperty(E,{dF:"scrollMargin"},function(){return this.Iv},function(a){"number"===typeof a?a=new tb(a):v.C(a,tb,E,"scrollMargin");var b=this.Iv;b.L(a)||(this.Iv=a=a.aa(),this.oc(),this.h("scrollMargin",b,a))});v.defineProperty(E,{xA:"scrollMode"},function(){return this.Jv},function(a){var b=this.Jv;b!==a&&(v.qb(a,E,E,"scrollMode"),this.Jv=a,a===Ui&&pj(this,!1),this.h("scrollMode",b,a))});
v.defineProperty(E,{PE:"positionComputation"},function(){return this.Bv},function(a){var b=this.Bv;b!==a&&(null!==a&&v.j(a,"function",E,"positionComputation"),this.Bv=a,pj(this,!1),this.h("positionComputation",b,a))});v.defineProperty(E,{cF:"scaleComputation"},function(){return this.Fv},function(a){var b=this.Fv;b!==a&&(null!==a&&v.j(a,"function",E,"scaleComputation"),this.Fv=a,ck(this,this.scale,this.scale),this.h("scaleComputation",b,a))});v.u(E,{Wd:"documentBounds"},function(){return this.Ku});
function sj(a,b){a.nj=!1;var c=a.Ku;c.L(b)||(b=b.aa(),a.Ku=b,pj(a,!1),a.ya("DocumentBoundsChanged",null,c.copy()),Bj(a))}v.defineProperty(E,{scale:"scale"},function(){return this.Tb},function(a){var b=this.Tb;v.Te(a,E,"scale");b!==a&&ck(this,b,a)});v.defineProperty(E,{Eo:"autoScale"},function(){return this.Jl},function(a){var b=this.Jl;b!==a&&(v.qb(a,E,E,"autoScale"),this.Jl=a,this.h("autoScale",b,a),a!==xf&&pj(this,!1))});
v.defineProperty(E,{nK:"initialAutoScale"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(v.qb(a,E,E,"initialAutoScale"),this.Ck=a,this.h("initialAutoScale",b,a))});v.defineProperty(E,{IH:"initialViewportSpot"},function(){return this.av},function(a){var b=this.av;b!==a&&(v.C(a,L,E,"initialViewportSpot"),a.yd()||v.k("initialViewportSpot must be a specific Spot: "+a),this.av=a,this.h("initialViewportSpot",b,a))});
v.defineProperty(E,{FH:"initialDocumentSpot"},function(){return this.Yu},function(a){var b=this.Yu;b!==a&&(v.C(a,L,E,"initialDocumentSpot"),a.yd()||v.k("initialViewportSpot must be a specific Spot: "+a),this.Yu=a,this.h("initialDocumentSpot",b,a))});v.defineProperty(E,{$g:"minScale"},function(){return this.pv},function(a){v.Te(a,E,"minScale");var b=this.pv;b!==a&&(0<a?(this.pv=a,this.h("minScale",b,a),a>this.scale&&(this.scale=a)):v.ua(a,"> 0",E,"minScale"))});
v.defineProperty(E,{Zg:"maxScale"},function(){return this.mv},function(a){v.Te(a,E,"maxScale");var b=this.mv;b!==a&&(0<a?(this.mv=a,this.h("maxScale",b,a),a<this.scale&&(this.scale=a)):v.ua(a,"> 0",E,"maxScale"))});v.defineProperty(E,{Hl:"zoomPoint"},function(){return this.gw},function(a){this.gw.L(a)||(v.C(a,w,E,"zoomPoint"),this.gw=a=a.aa())});
v.defineProperty(E,{rz:"contentAlignment"},function(){return this.tn},function(a){var b=this.tn;b.L(a)||(v.C(a,L,E,"contentAlignment"),this.tn=a=a.aa(),this.h("contentAlignment",b,a),pj(this,!1))});v.defineProperty(E,{oK:"initialContentAlignment"},function(){return this.Rn},function(a){var b=this.Rn;b.L(a)||(v.C(a,L,E,"initialContentAlignment"),this.Rn=a=a.aa(),this.h("initialContentAlignment",b,a))});
v.defineProperty(E,{padding:"padding"},function(){return this.Re},function(a){"number"===typeof a?a=new tb(a):v.C(a,tb,E,"padding");var b=this.Re;b.L(a)||(this.Re=a=a.aa(),this.oc(),this.h("padding",b,a))});v.u(E,{wg:"nodes"},function(){return this.io.i});v.u(E,{links:"links"},function(){return this.bo.i});v.u(E,{bk:"parts"},function(){return this.zb.i});
E.prototype.findTopLevelNodesAndLinks=function(){for(var a=new H(J),b=this.io.i;b.next();){var c=b.value;c.bp&&a.add(c)}for(b=this.bo.i;b.next();)c=b.value,c.bp&&a.add(c);return a.i};E.prototype.findTopLevelGroups=function(){return this.Sk.i};v.defineProperty(E,{Pb:"layout"},function(){return this.Qd},function(a){var b=this.Qd;b!==a&&(v.C(a,Me,E,"layout"),null!==b&&(b.g=null,b.group=null),this.Qd=a,a.g=this,a.group=null,this.su=!0,this.h("layout",b,a),this.de())});
E.prototype.layoutDiagram=function(a){nj(this);a&&Ik(this,!0);Fj(this,!1)};function Ik(a,b){for(var c=a.Sk.i;c.next();)Qk(a,c.value,b);null!==a.Pb&&(b?a.Pb.sf=!1:a.Pb.G())}function Qk(a,b,c){if(null!==b){for(var d=b.eo.i;d.next();)Qk(a,d.value,c);null!==b.Pb&&(c?b.Pb.sf=!1:b.Pb.G())}}
function Fj(a,b){if(!a.iy){var c=a.Pb,d=a.Qa;a.Qa=!0;try{a.Qb("Layout");var e=a.Oa;b&&!c.Uz&&1!==a.ja.ph||e.pf||e.sc||e.an("Layout");for(var f=a.Sk.i;f.next();)Rk(a,f.value,b);c.sf||b&&!c.Uz&&1!==a.ja.ph||(c.doLayout(a),nj(a),c.sf=!0)}finally{a.wd("Layout"),a.su=!c.sf,a.Qa=d}}}function Rk(a,b,c){if(null!==b){for(var d=b.eo.i;d.next();)Rk(a,d.value,c);d=b.Pb;null===d||d.sf||c&&!d.Uz||(b.Qy=!b.location.H(),d.doLayout(b),b.G(Sk),d.sf=!0,Ij(a,b))}}
v.defineProperty(E,{Md:"isTreePathToChildren"},function(){return this.ev},function(a){var b=this.ev;if(b!==a&&(v.j(a,"boolean",E,"isTreePathToChildren"),this.ev=a,this.h("isTreePathToChildren",b,a),!this.ja.ib))for(a=this.wg;a.next();)Tk(a.value)});E.prototype.findTreeRoots=function(){for(var a=new G(S),b=this.wg;b.next();){var c=b.value;c.bp&&null===c.$s()&&a.add(c)}return a.i};
v.defineProperty(E,{MA:"treeCollapsePolicy"},function(){return this.bw},function(a){var b=this.bw;b!==a&&(v.qb(a,E,E,"treeCollapsePolicy"),this.bw=a,this.h("treeCollapsePolicy",b,a))});v.defineProperty(E,{Xg:null},function(){return this.TB},function(a){this.TB=a});
function Vi(a){function b(a){var b=a.toLowerCase(),h=new G("function");c.add(a,h);c.add(b,h);d.add(a,a);d.add(b,a)}var c=new ma("string",G),d=new ma("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.ky=c;a.jy=d}
function na(a,b){var c=a.jy.la(b);return null!==c?c:a.jy.la(b.toLowerCase())}function Uk(a,b){var c=a.ky.la(b);if(null!==c)return c;c=a.ky.la(b.toLowerCase());if(null!==c)return c;v.k("Unknown DiagramEvent name: "+b);return null}E.prototype.addDiagramListener=E.prototype.iz=function(a,b){v.j(a,"string",E,"addDiagramListener:name");v.j(b,"function",E,"addDiagramListener:listener");var c=Uk(this,a);null!==c&&c.add(b)};
E.prototype.removeDiagramListener=E.prototype.SE=function(a,b){v.j(a,"string",E,"removeDiagramListener:name");v.j(b,"function",E,"addDiagramListener:listener");var c=Uk(this,a);null!==c&&c.remove(b)};E.prototype.raiseDiagramEvent=E.prototype.ya=function(a,b,c){var d=Uk(this,a),e=new Md;e.g=this;e.name=na(this,a);void 0!==b&&(e.HA=b);void 0!==c&&(e.kA=c);a=d.length;if(1===a)d=d.ha(0),d(e);else if(0!==a)for(b=d.ed(),c=0;c<a;c++)d=b[c],d(e);return e.cancel};
function Bg(a,b){var c=!1;a.tb.Sj(b)&&(c=!0);c=a.Fz(b,function(a){return a.V},function(a){return a instanceof W},!0,function(a){return a instanceof W},c);if(0!==c.count)for(c=c.i;c.next();){var d=c.value;d.pl&&d.gc()}}E.prototype.isUnoccupied=E.prototype.dp=function(a,b){void 0===b&&(b=null);return Vk(this,!1,null,b).dp(a.x,a.y,a.width,a.height)};
function Vk(a,b,c,d){null===a.sd&&(a.sd=new Wk);if(a.sd.kt||a.sd.group!==c||a.sd.FA!==d){if(null===c){b=a.nj?oj(a):a.Wd.copy();b.Kf(100,100);a.sd.initialize(b);b=v.Uf();for(var e=a.wg;e.next();){var f=e.value,h=f.layer;null!==h&&h.visible&&!h.Bc&&Xk(a,f,d,b)}}else for(c.Z.H()||c.mf(),b=c.Z.copy(),b.Kf(20,20),a.sd.initialize(b),b=v.Uf(),e=c.Pc;e.next();)f=e.value,f instanceof S&&Xk(a,f,d,b);v.fc(b);a.sd.group=c;a.sd.FA=d;a.sd.kt=!1}else b&&Yk(a.sd);return a.sd}
function Xk(a,b,c,d){if(b!==c)if(b.isVisible()&&b.canAvoid()){c=b.getAvoidableRect(d);d=a.sd.Io;b=a.sd.Go;for(var e=c.x+c.width,f=c.y+c.height,h=c.x;h<e;h+=d){for(var k=c.y;k<f;k+=b)Zk(a.sd,h,k);Zk(a.sd,h,f)}for(k=c.y;k<f;k+=b)Zk(a.sd,e,k);Zk(a.sd,e,f)}else if(b instanceof T)for(b=b.Pc;b.next();)e=b.value,e instanceof S&&Xk(a,e,c,d)}function $k(a,b){null===a.sd||a.sd.kt||null!==b&&!b.canAvoid()||(a.sd.kt=!0)}
E.prototype.simulatedMouseMove=E.prototype.xx=function(a,b,c){if(null!==Hf){var d=Hf.g;c instanceof E||(c=null);var e=If;c!==e&&(null!==e&&e!==d&&null!==e.wb.Xd&&(Nf(e),Hf.Pw=!1,e.wb.Xd.doSimulatedDragLeave()),If=c,null!==c&&c!==d&&null!==c.wb.Xd&&(dg(),e=c.wb.Xd,$f.contains(e)||$f.add(e),c.wb.Xd.doSimulatedDragEnter()));if(null===c||c===d||!c.sD||c.gb||!c.Co)return!1;d=c.wb.Xd;null!==d&&(null!==a?b=c.Eq(a):null===b&&(b=new w),c.Nb.ea=b,c.Nb.gl=!1,c.Nb.up=!1,d.doSimulatedDragOver());return!0}return!1};
E.prototype.simulatedMouseUp=E.prototype.oF=function(a,b,c,d){if(null!==Hf){null===d&&(d=b);b=If;var e=Hf.g;if(d!==b){if(null!==b&&b!==e&&null!==b.wb.Xd)return Nf(b),Hf.Pw=!1,b.wb.Xd.doSimulatedDragLeave(),!1;If=d;null!==d&&null!==d.wb.Xd&&(dg(),b=d.wb.Xd,$f.contains(b)||$f.add(b),d.wb.Xd.doSimulatedDragEnter())}if(null===d)return Hf.doCancel(),!0;if(d!==this)return null!==a&&(c=d.Eq(a)),d.Nb.ea=c,d.Nb.gl=!1,d.Nb.up=!0,a=d.wb.Xd,null!==a&&a.doSimulatedDrop(),a=Hf,null!==a&&(d=a.mayCopy(),a.wf=d?"Copy":
"Move",a.stopTool()),!0}return!1};v.defineProperty(E,{yD:"autoScrollRegion"},function(){return this.vu},function(a){"number"===typeof a?a=new tb(a):v.C(a,tb,E,"autoScrollRegion");var b=this.vu;b.L(a)||(this.vu=a=a.aa(),this.oc(),this.h("autoScrollRegion",b,a))});function pg(a,b){a.uu.assign(b);al(a,a.uu).Ie(a.position)?Nf(a):bl(a)}
function bl(a){-1===a.pn&&(a.pn=v.setTimeout(function(){if(-1!==a.pn){Nf(a);var b=a.O.event;if(null!==b){var c=al(a,a.uu);c.Ie(a.position)||(a.position=c,a.O.ea=a.EF(a.uu),a.xx(b,null,b.target.W)||a.doMouseMove(),a.nj=!0,sj(a,a.Ug()),a.he=!0,a.Nf(),bl(a))}}},a.eB))}function Nf(a){-1!==a.pn&&(v.clearTimeout(a.pn),a.pn=-1)}
function al(a,b){var c=a.position,d=a.yD;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.tb,f=a.scale,e=v.ek(0,0,e.width*f,e.height*f),h=v.Rb(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var k=Math.max(a.Nt,1),k=k|0;h.x-=k;b.x<e.x+d.left/2&&(h.x-=k);b.x<e.x+d.left/4&&(h.x-=4*k)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(k=Math.max(a.Nt,1),k|=0,h.x+=k,b.x>e.x+e.width-d.right/2&&(h.x+=k),b.x>e.x+e.width-d.right/4&&(h.x+=4*k));b.y>=e.y&&b.y<e.y+d.top?(k=Math.max(a.Ot,1),k|=0,h.y-=k,b.y<e.y+
d.top/2&&(h.y-=k),b.y<e.y+d.top/4&&(h.y-=4*k)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(k=Math.max(a.Ot,1),k|=0,h.y+=k,b.y>e.y+e.height-d.bottom/2&&(h.y+=k),b.y>e.y+e.height-d.bottom/4&&(h.y+=4*k));h.Ie(K.fk)||(c=new w(c.x+h.x/f,c.y+h.y/f));v.fc(e);v.v(h);return c}E.prototype.makeSVG=E.prototype.makeSvg=function(a){void 0===a&&(a=new pa);a.context="svg";a=cl(this,a);return null!==a?a.Cl:null};
E.prototype.makeImage=function(a){void 0===a&&(a=new pa);var b=(a.document||document).createElement("img");b.src=this.eI(a);return b};E.prototype.makeImageData=E.prototype.eI=function(a){void 0===a&&(a=new pa);var b=cl(this,a);return null!==b?b.toDataURL(a.type,a.details):""};var dl=!1;
function cl(a,b){a.Oa.Xi();a.Nf();if(null===a.ub)return null;"object"!==typeof b&&v.k("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var f=b.maxSize;void 0===b.maxSize&&(c=!0,f="svg"===b.context?new ia(Infinity,Infinity):new ia(2E3,2E3));var h=b.position||null,k=b.parts||null,l=void 0===b.padding?1:b.padding,m=b.background||null,n=b.omitTemporary;void 0===n&&(n=!0);var p=b.document||document,q=b.elementFinished||null,r=
b.showTemporary;void 0===r&&(r=!n);n=b.showGrid;void 0===n&&(n=r);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof l?l=new tb(l):l instanceof tb||(l=new tb(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);a.Jn=!1;ij(a);var s=new oa(null,p),t=s.getContext("2d"),u=s;if(!(d||e||k||h))return s.width=a.Fb+Math.ceil(l.left+l.right),s.height=a.Kb+Math.ceil(l.top+l.bottom),"svg"===b.context&&(t=u=new Ic(s.Kd,p,q),t instanceof
Ic&&(a.Jn=!0)),Pj(a,t,l,new ia(s.width,s.height),a.Tb,a.Xa,k,m,r,n),a.Jn=!0,u;var x=a.rb.xw,y=new w(0,0),A=a.Wd.copy();A.cJ(a.padding);if(r)for(var B=!0,B=a.Xb.n,I=B.length,D=0;D<I;D++){var V=B[D];if(V.visible&&V.Bc)for(var ba=V.zb.n,V=ba.length,U=0;U<V;U++){var N=ba[U];N.Sz&&N.isVisible()&&(N=N.Z,N.H()&&A.bi(N))}}y.x=A.x;y.y=A.y;if(null!==k){var Z,B=!0,ba=k.i;for(ba.reset();ba.next();)I=ba.value,I instanceof J&&(N=I,V=N.layer,null!==V&&!V.visible||null!==V&&!r&&V.Bc||!N.isVisible()||(N=N.Z,N.H()&&
(B?(B=!1,Z=N.copy()):Z.bi(N))));B&&(Z=new z(0,0,0,0));A.width=Z.width;A.height=Z.height;y.x=Z.x;y.y=Z.y}null!==h&&h.H()&&(y=h,e||(e=x));B=ba=0;null!==l&&(ba=l.left+l.right,B=l.top+l.bottom);D=I=0;null!==d&&(I=d.width,D=d.height,isFinite(I)&&(I=Math.max(0,I-ba)),isFinite(D)&&(D=Math.max(0,D-B)));Z=h=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.H()?(h=I,Z=D):isNaN(D)?(h=I,Z=A.height*e):(h=A.width*e,Z=D)):null!==d?d.H()?(e=Math.min(I/A.width,D/A.height),h=I,Z=D):isNaN(D)?(e=I/A.width,h=I,Z=A.height*e):(e=
D/A.height,h=A.width*e,Z=D):null!==e?"NaN"===e&&f.H()?(e=Math.min((f.width-ba)/A.width,(f.height-B)/A.height),e>x?(e=x,h=A.width,Z=A.height):(h=f.width,Z=f.height)):(h=A.width*e,Z=A.height*e):(e=x,h=A.width,Z=A.height);null!==l?(h+=ba,Z+=B):l=new tb(0);null!==f&&(d=f.width,f=f.height,"svg"!==b.context&&c&&!dl&&(h>d||Z>f)&&(v.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(Z)+" vs 2000x2000) Consider increasing the max size."),
dl=!0),isNaN(d)&&(d=2E3),isNaN(f)&&(f=2E3),isFinite(d)&&(h=Math.min(h,d)),isFinite(f)&&(Z=Math.min(Z,f)));s.width=Math.ceil(h);s.height=Math.ceil(Z);"svg"===b.context&&(t=u=new Ic(s.Kd,p,q),t instanceof Ic&&(a.Jn=!0));Pj(a,t,l,new ia(Math.ceil(h),Math.ceil(Z)),e,y,k,m,r,n);a.Jn=!0;return u}E.inherit=function(a,b){v.j(a,"function",E,"inherit");v.j(b,"function",E,"inherit");b.hG&&v.k("Cannot inherit from "+v.nf(b));v.Ga(a,b)};
function dj(){this.kG="63ad05bbe23a1786468a4c741b6d2";this.zh=this.kG===this._tk?!0:null}
dj.prototype.Gl=function(a){a.Fg.setTransform(a.ze,0,0,a.ze,0,0);if(null===this.zh)a:{var b="f",c=window[v.og("76a715b2f73f148a")][v.og("72ba13b5")];a=v.og;if(a("77bb5bb2f32603de")===window[a("76a715b2f73f148a")][a("6aba19a7ec351488")])try{this.zh=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b")])([a("7bb8069ae7")]===a(v.adym));if(!1===this.zh)break a;this.zh=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([a("7bb8069ae7")]===
a(v.adym));if(!1===this.zh)break a}catch(d){}for(var e=c[a("76ad18b4f73e")],f=c[a("73a612b6fb191d")](a("35e7"))+2;f<e;f++)b+=c[f];c=b[a("73a612b6fb191d")](a(v.adym));0>c&&a(v.adym)!==a("7da71ca0ad381e90")&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));if(this.zh=!(0<=c&&c<b[a("73a612b6fb191d")](a("35"))))b=window.document[a("79ba13b2f7333e8846865a7d00")]("div"),c=a("02cncncn"),"."===c[0]&&(c=c[a("69bd14a0f724128a44")](1)),b[a("79a417a0f0181a8946")]=c,window.document[a("78a712aa")]?(window.document[a("78a712aa")][a("7bb806b6ed32388c4a875b")](b),
c=window[a("7dad0290ec3b0b91578e5b40007031bf")](b)[a("7dad0283f1390b81519f4645156528bf")](a("78a704b7e62456904c9b12701b6532a8")),window.document[a("78a712aa")][a("68ad1bbcf533388c4a875b")](b),c&&-1!==c.indexOf(a(v.GG))&&-1!==c.indexOf(a(v.HG))&&(this.zh=!1)):(this.zh=null,this.zh=!1)}return 0<this.zh&&this!==this.iG?!0:!1};dj.prototype.t=function(){this.iG=null};
function ej(a,b){void 0!==b&&null!==b||v.k("Diagram setup requires an argument DIV.");null!==a.Mb&&v.k("Diagram has already completed setup.");"string"===typeof b?a.Mb=window.document.getElementById(b):b instanceof HTMLDivElement?a.Mb=b:v.k("No DIV or DIV id supplied: "+b);null===a.Mb&&v.k("Invalid DIV id; could not get element with id: "+b);void 0!==a.Mb.W&&v.k("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Mb,null).position&&(a.Mb.style.position=
"relative");a.Mb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.Mb.style["-ms-touch-action"]="none";a.Mb.innerHTML="";a.Mb.W=a;var c=new oa(a);c.Kd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.Mb,null).getPropertyValue("direction")&&(a.cC=!0),c.style.zIndex="2",c.style.rL="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.Fb=a.Mb.clientWidth||1;a.Kb=a.Mb.clientHeight||1;a.ub=c;a.Fg=c.getContext("2d");var d=a.Fg;a.ze=a.computePixelRatio();Rj(a,a.Fb,a.Kb);a.Ox=d[v.og("7eba17a4ca3b1a8346")][v.og("78a118b7")](d,v.Gl,4,4);a.Mb.insertBefore(c.Kd,a.Mb.firstChild);c=new oa(null);c.width=1;c.height=1;a.my=c;a.JB=c.getContext("2d");c=v.createElement("div");d=v.createElement("div");c.style.position="absolute";c.style.overflow="auto";c.style.width=a.Fb+"px";c.style.height=a.Kb+"px";c.style.zIndex="1";d.style.position=
"absolute";d.style.width="1px";d.style.height="1px";a.Mb.appendChild(c);c.appendChild(d);c.onscroll=a.cG;c.onmousedown=a.rC;c.ontouchstart=a.rC;c.W=a;c.fG=!0;c.gG=!0;a.Kv=c;a.Yr=d;a.sA=v.ND(function(){a.Ij=null;a.pa()},300,!1);a.IF=v.ND(function(){ki(a)},250,!1);a.preventDefault=function(a){a.preventDefault();return!1};a.kp=function(b){if(a.isEnabled){a.Tl=!0;var c=a.Lc;v.Um&&c.Zj?(b.preventDefault(),b.simulated=!0,a.js=b):(a.Lc=a.Nb,a.Nb=c,wj(a,a,b,c,!0),a.xx(b,null,b.target.W)||(a.doMouseMove(),
a.$a.isBeyondDragSize()&&(Bf(a),a.Zl=0)))}};a.jp=function(b){if(a.isEnabled){a.Tl=!0;var c=a.Lc;if(v.Um&&null!==a.js)a.js=b,b.preventDefault();else if(v.Um&&400>b.timeStamp-a.$l)b.preventDefault();else if(a.Lc=a.Nb,a.Nb=c,wj(a,a,b,c,!0),c.gl=!0,c.Ue=b.detail,a.xk=c.copy(),!0===c.zq.simulated)b.preventDefault(),b.simulated=!0;else if(Hf=null,a.doMouseDown(),1===b.button)return b.preventDefault(),!1}};a.mp=function(b){if(a.isEnabled){a.Tl=!0;var c=a.Lc;if(v.Um){if(400>b.timeStamp-a.$l){b.preventDefault();
return}a.$l=b.timeStamp}if(v.Um&&null!==a.js)a.js=null,b.preventDefault();else{a.Lc=a.Nb;a.Nb=c;wj(a,a,b,c,!0);c.up=!0;c.Ue=b.detail;if(v.OH||v.PH)b.timeStamp-a.$l<a.fD&&!a.$a.isBeyondDragSize()?a.Zl++:a.Zl=1,a.$l=b.timeStamp,c.Ue=a.Zl;c.bubbles=b.bubbles;b.target.W&&(c.Ag=b.target.W);a.oF(b,null,new w,c.Ag)||(a.doMouseUp(),Nf(a),Aj(c,b))}}};a.ah=function(b){if(a.isEnabled){var c=a.Lc;a.Lc=a.Nb;a.Nb=c;wj(a,a,b,c,!0);c.bubbles=!0;c.el=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();
Aj(c,b)}};a.lp=function(){if(a.isEnabled){a.Tl=!1;var b=a.$a;b.cancelWaitAfter();b instanceof kf&&b.hideToolTip()}};a.zF=function(b){if(a.isEnabled){a.Vv=!1;a.Gy=!0;var c=a.Lc;a.Lc=a.Nb;a.Nb=c;yj(a,b,b.targetTouches[0],c,1<b.touches.length);a.doMouseDown();2>b.touches.length&&vj(a,c);Aj(c,b)}};a.yF=function(b){if(a.isEnabled){var c=a.Lc;a.Lc=a.Nb;a.Nb=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);zj(a,b,d,c,1<b.touches.length);(a.$a.isBeyondDragSize()||
1<b.touches.length)&&Bf(a);a.xx(d?d:b,null,c.Ag)||(a.doMouseMove(),Aj(c,b))}};a.xF=function(b){if(a.isEnabled){Bf(a);if(a.Vv)return b.preventDefault(),!1;var c=a.Lc;a.Lc=a.Nb;a.Nb=c;if(1<b.touches.length)a.Wo("hasGestureZoom")&&(a.vy=!1);else{var d=null,k=null;0<b.changedTouches.length?k=b.changedTouches[0]:0<b.targetTouches.length&&(k=b.targetTouches[0]);c.g=a;c.Ue=1;if(null!==k){var d=window.document.elementFromPoint(k.clientX,k.clientY),l,m;d&&d.W?(m=k,l=d.W):(m=b.changedTouches[0],l=a);xj(l,m,
c);l=k.screenX;m=k.screenY;var n=a.gC;b.timeStamp-a.$l<a.fD&&!(25<Math.abs(n.x-l)||25<Math.abs(n.y-m))?a.Zl++:a.Zl=1;c.Ue=a.Zl;a.$l=b.timeStamp;a.gC.m(l,m)}c.pd=0;c.button=0;c.buttons=1;c.gl=!1;c.up=!0;c.el=0;c.Nc=!1;c.bubbles=!1;c.event=b;c.timestamp=Date.now();c.Ag=null===d?b.target.W:d.W?d.W:null;c.qe=null;a.oF(k?k:b,null,new w,c.Ag)||(a.doMouseUp(),Aj(c,b),a.Gy=!1)}}};a.wI=function(b){if("touch"===b.pointerType){var c=a.CC;void 0===c[b.pointerId]&&(a.Gr++,c[b.pointerId]=b);a.Bf[0]=null;a.Bf[1]=
null;for(var d in c)if(null===a.Bf[0])a.Bf[0]=c[d];else if(null===a.Bf[1]){a.Bf[1]=c[d];break}a.isEnabled&&(a.Vv=!1,c=a.Lc,a.Lc=a.Nb,a.Nb=c,yj(a,b,b,c,1<a.Gr),a.doMouseDown(),2>a.Gr&&vj(a,c),Aj(c,b))}};a.yI=function(b){if("touch"===b.pointerType&&!(2>a.Gr)){var c=a.Bf;c[0].pointerId===b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.Lc,a.Lc=a.Nb,a.Nb=c,zj(a,b,b,c,!0),Bf(a),a.xx(b,null,c.Ag)||(a.doMouseMove(),Aj(c,b)))}};a.xI=function(b){if("touch"===b.pointerType){var c=
a.CC;void 0!==c[b.pointerId]&&(a.Gr--,delete c[b.pointerId],c=a.Bf,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};ij(a);hj(a)}function el(a){1<arguments.length&&v.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.jw=!0;this.Yk=!1;this.gb=!0;this.rz=Ab;this.Pb=new fl}v.Ga(el,E);v.ga("Palette",el);
function aj(a){1<arguments.length&&v.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.Oa.isEnabled=!1;this.Uc=!0;this.Bj=null;this.Nu=!0;this.VI("drawShadows",!1);var b=new J,c=new X;c.stroke="magenta";c.nb=2;c.fill="transparent";c.name="BOXSHAPE";b.zl=!0;b.yA="BOXSHAPE";b.Yz="BOXSHAPE";b.$E="BOXSHAPE";b.cursor="move";b.add(c);this.Ll=b;c=new mf;c.type=rh;c.Ze=Kb;var d=new sh;d.Lf=!0;c.add(d);d=new X;d.Pj=Kb;d.Cb="Rectangle";d.xa=new ia(64,
64);d.cursor="se-resize";d.alignment=Vb;c.add(d);b.YE=c;this.Am=this.Qj=!1;this.lf=this.Ls=!0;this.yD=0;this.bz=v.createElement("canvas");this.jG=this.bz.getContext("2d");this.wb.Xd=new gl;this.wb.aF=new hl;var e=this;this.click=function(){var a=e.Bj;if(null!==a){var b=a.tb,c=e.O.ea;a.position=new w(c.x-b.width/2,c.y-b.height/2)}};this.ME=function(){il(e)};this.LE=function(){null!==e.Bj&&(e.oc(),e.pa())};this.Eo=tj;this.Uc=!1}v.Ga(aj,E);v.ga("Overview",aj);
function jl(a){a.Uc||a.Fd||!1!==a.Cf||(a.Cf=!0,requestAnimationFrame(function(){if(a.Cf&&!a.Fd&&(a.Cf=!1,null!==a.Mb)){a.Fd=!0;nj(a);a.Wd.H()||sj(a,a.Ug());null===a.Mb&&v.k("No div specified");null===a.ub&&v.k("No canvas specified");if(a.he){var b=a.Bj;if(null!==b&&!b.Oa.pf&&!b.Oa.sc){var b=a.Fg,c=a.bz;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.ub.width,a.ub.height);b.drawImage(c,0,0);c=a.Td;c.reset();1!==a.scale&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.position.x,-a.position.y);
b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Xb.n,d=c.length,e=0;e<d;e++)c[e].Ve(b,a);a.Dk=!1;a.he=!1}}a.Fd=!1}}))}aj.prototype.computePixelRatio=function(){return 1};
aj.prototype.Ve=function(){null===this.Mb&&v.k("No div specified");null===this.ub&&v.k("No canvas specified");if(this.he){var a=this.Bj;if(null!==a&&!a.Oa.pf){Mj(this);var b=a.ft;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Ej(a);var c=this.ub,b=this.Fg,d=this.bz,e=this.jG;d.width=c.width;d.height=c.height;b.gu="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.ub.width,this.ub.height);d=this.Td;d.reset();1!==this.scale&&d.scale(this.scale);0===this.position.x&&0===this.position.y||d.translate(-this.position.x,
-this.position.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);for(var d=this.Nu,f=this.tb,h=a.Xb.n,k=h.length,a=0;a<k;a++){var l=h[a],m=b,n=f,p=d;if(l.visible&&0!==l.Kc&&(void 0===p&&(p=!0),p||!l.Bc)){1!==l.Kc&&(m.globalAlpha=l.Kc);for(var p=this.scale,l=l.zb.n,q=l.length,r=0;r<q;r++){var s=l[r],t=s.Z;t.tg(n)&&(1<t.width*p||1<t.height*p?s.Ve(m,this):Bi(s,m))}m.globalAlpha=1}}e.drawImage(c.Kd,0,0);c=this.Xb.n;e=c.length;for(a=0;a<e;a++)c[a].Ve(b,this);this.he=this.Dk=!1}}};
v.defineProperty(aj,{jA:"observed"},function(){return this.Bj},function(a){var b=this.Bj;null!==a&&v.C(a,E,aj,"observed");a instanceof aj&&v.k("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.Tg),b.SE("ViewportBoundsChanged",this.ME),b.SE("DocumentBoundsChanged",this.LE),b.yv.remove(this)),this.Bj=a,null!==a&&(a.iz("ViewportBoundsChanged",this.ME),a.iz("DocumentBoundsChanged",this.LE),a.yv.add(this),this.add(this.Tg),il(this)),this.oc(),this.h("observed",
b,a))});v.defineProperty(aj,{Tg:"box"},function(){return this.Ll},function(a){var b=this.Ll;b!==a&&(this.Ll=a,this.remove(b),this.add(this.Ll),il(this),this.h("box",b,a))});v.defineProperty(aj,{iK:"drawsTemporaryLayers"},function(){return this.Nu},function(a){this.Nu!==a&&(this.Nu=a,this.rA())});
function il(a){var b=a.Tg;if(null!==b){var c=a.Bj;if(null!==c){a.he=!0;var c=c.tb,d=b.Qt,e=v.El();e.m(c.width,c.height);d.xa=e;v.Wj(e);a=2/a.scale;d instanceof X&&(d.nb=a);b.location=new w(c.x-a/2,c.y-a/2)}}}aj.prototype.Ug=function(){var a=this.Bj;return null===a?K.SF:a.Wd};aj.prototype.nE=function(){!0!==this.he&&(this.he=!0,jl(this))};aj.prototype.Ft=function(a){this.Uc||(lj(this),this.pa(),Bj(this),this.oc(),il(this),this.ya("ViewportBoundsChanged",null,a))};
function gl(){wf.call(this);this.Nk=null}v.Ga(gl,wf);gl.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Yk||!a.lf)return!1;var b=a.jA;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.tb;this.Nk=new w(c.width/2,c.height/2);a=a.uc.ea;b.position=new w(a.x-this.Nk.x,a.y-this.Nk.y)}return!0};gl.prototype.doActivate=function(){this.Nk=null;wf.prototype.doActivate.call(this)};
gl.prototype.moveParts=function(){var a=this.g,b=a.jA;if(null!==b){var c=a.Tg;if(null!==c){if(null===this.Nk){var d=a.uc.ea,c=c.location;this.Nk=new w(d.x-c.x,d.y-c.y)}a=a.O.ea;b.position=new w(a.x-this.Nk.x,a.y-this.Nk.y)}}};function hl(){ph.call(this)}v.Ga(hl,ph);hl.prototype.resize=function(a){var b=this.g.jA;if(null!==b){var c=b.tb.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function ha(a){1<arguments.length&&v.k("Brush constructor can take at most one optional argument, the Brush type.");v.cc(this);this.Ea=!1;void 0===a?(this.ia=we,this.sn="black"):"string"===typeof a?(this.ia=we,this.sn=a):(this.ia=a,this.sn="black");var b=this.ia;b===xe?(this.so=Ab,this.Ln=Ub):this.Ln=b===ye?this.so=Kb:this.so=xb;this.Sv=0;this.Ou=NaN;this.Eg=this.Av=this.Dg=null;this.Xx=this.Yx=0}v.ga("Brush",ha);var we;ha.Solid=we=v.p(ha,"Solid",0);var xe;ha.Linear=xe=v.p(ha,"Linear",1);var ye;
ha.Radial=ye=v.p(ha,"Radial",2);var kl;ha.Pattern=kl=v.p(ha,"Pattern",4);ha.prototype.copy=function(){var a=new ha;a.ia=this.ia;a.sn=this.sn;a.so=this.so.aa();a.Ln=this.Ln.aa();a.Sv=this.Sv;a.Ou=this.Ou;null!==this.Dg&&(a.Dg=this.Dg.copy());a.Av=this.Av;return a};ha.prototype.Ma=function(){this.freeze();Object.freeze(this);return this};ha.prototype.freeze=function(){this.Ea=!0;null!==this.Dg&&this.Dg.freeze();return this};
ha.prototype.Na=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.Ea=!1;null!==this.Dg&&this.Dg.Na();return this};ha.prototype.toString=function(){var a="Brush(";if(this.type===we)a+=this.color;else if(a=this.type===xe?a+"Linear ":this.type===ye?a+"Radial ":this.type===kl?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.Rs)for(var b=this.Rs.i;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
ha.prototype.addColorStop=ha.prototype.addColorStop=function(a,b){v.I(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&v.ua(a,"0 <= loc <= 1",ha,"addColorStop:loc");v.j(b,"string",ha,"addColorStop:color");null===this.Dg&&(this.Dg=new ma("number","string"));this.Dg.add(a,b);this.ia===we&&(this.type=xe);this.Eg=null};
v.defineProperty(ha,{type:"type"},function(){return this.ia},function(a){v.I(this,a);v.qb(a,ha,ha,"type");this.ia=a;this.start.me()&&(a===xe?this.start=Ab:a===ye&&(this.start=Kb));this.end.me()&&(a===xe?this.end=Ub:a===ye&&(this.end=Kb));this.Eg=null});v.defineProperty(ha,{color:"color"},function(){return this.sn},function(a){v.I(this,a);this.sn=a;this.Eg=null});v.defineProperty(ha,{start:"start"},function(){return this.so},function(a){v.I(this,a);v.C(a,L,ha,"start");this.so=a.aa();this.Eg=null});
v.defineProperty(ha,{end:"end"},function(){return this.Ln},function(a){v.I(this,a);v.C(a,L,ha,"end");this.Ln=a.aa();this.Eg=null});v.defineProperty(ha,{Xt:"startRadius"},function(){return this.Sv},function(a){v.I(this,a);v.Te(a,ha,"startRadius");0>a&&v.ua(a,">= zero",ha,"startRadius");this.Sv=a;this.Eg=null});v.defineProperty(ha,{Us:"endRadius"},function(){return this.Ou},function(a){v.I(this,a);v.Te(a,ha,"endRadius");0>a&&v.ua(a,">= zero",ha,"endRadius");this.Ou=a;this.Eg=null});
v.defineProperty(ha,{Rs:"colorStops"},function(){return this.Dg},function(a){v.I(this,a);this.Dg=a;this.Eg=null});v.defineProperty(ha,{pattern:"pattern"},function(){return this.Av},function(a){v.I(this,a);this.Av=a;this.Eg=null});
ha.randomColor=function(a,b){void 0===a&&(a=128);void 0===b&&(b=Math.max(a,255));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};var ll=v.createElement("canvas").getContext("2d"),ga;
ha.isValidColor=ga=function(a){if("black"===a)return!0;if(""===a)return!1;ll.fillStyle="#000000";var b=ll.fillStyle;ll.fillStyle=a;if(ll.fillStyle!==b)return!0;ll.fillStyle="#FFFFFF";b=ll.fillStyle;ll.fillStyle=a;return ll.fillStyle!==b};
function R(){v.cc(this);this.fa=30723;this.Kc=1;this.Pg=null;this.Ob="";this.lc=this.Jb=null;this.Xa=(new w(NaN,NaN)).freeze();this.gf=(new ia(NaN,NaN)).freeze();this.yj=K.Np;this.wj=K.RF;this.Td=new ja;this.nn=new ja;this.Jk=new ja;this.Tb=this.Lu=1;this.on=0;this.Ph=ml;this.gr=K.Mp;this.Vc=(new z(NaN,NaN,NaN,NaN)).freeze();this.kc=(new z(NaN,NaN,NaN,NaN)).freeze();this.Jc=(new z(0,0,NaN,NaN)).freeze();this.ts=this.Aq=this.S=this.Hr=this.lm=null;this.us=this.Bq=Infinity;this.Up=this.te=yc;this.Vr=
0;this.Di=1;this.aq=0;this.hi=1;this.ns=null;this.$r=-Infinity;this.Zr=0;this.as=K.fk;this.bs=gh;this.kq="";this.Hc=this.R=null;this.qn=-1;this.km=this.hs=this.gi=this.Nl=this.ro=null}v.Uh(R);v.ga("GraphObject",R);
R.prototype.cloneProtected=function(a){a.fa=this.fa|6144;a.Kc=this.Kc;a.Ob=this.Ob;a.Jb=this.Jb;a.lc=this.lc;a.Xa.assign(this.Xa);a.gf.assign(this.gf);a.yj=this.yj.aa();a.wj=this.wj.aa();a.Jk=this.Jk.copy();a.Tb=this.Tb;a.on=this.on;a.Ph=this.Ph;a.gr=this.gr.aa();a.Vc.assign(this.Vc);a.kc.assign(this.kc);a.Jc.assign(this.Jc);a.Hr=this.Hr;a.S=null!==this.S?this.S.copy():null;a.Aq=this.Aq;a.Bq=this.Bq;a.ts=this.ts;a.us=this.us;a.te=this.te.aa();a.Up=this.Up.aa();a.Vr=this.Vr;a.Di=this.Di;a.aq=this.aq;
a.hi=this.hi;a.ns=this.ns;a.$r=this.$r;a.Zr=this.Zr;a.as=this.as.aa();a.bs=this.bs;a.kq=this.kq;a.R=null!==this.R?this.R.copy():null;a.Hc=this.Hc;a.qn=this.qn;if(null!==this.Nl){a.Nl=v.$k(this.Nl);for(var b=0;b<this.Nl.length;b++){var c=this.Nl[b];a[c]=this[c]}}null!==this.gi&&(a.gi=this.gi.copy());a.hs=this.hs};R.prototype.Vh=function(a){a.lm=null;a.km=null;a.P()};R.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);return a};R.prototype.copy=function(){return this.clone()};
R.prototype.toString=function(){return v.nf(Object.getPrototypeOf(this))+"#"+v.cd(this)};var th;R.None=th=v.p(R,"None",0);var ml;R.Default=ml=v.p(R,"Default",0);var nl;R.Vertical=nl=v.p(R,"Vertical",4);var ol;R.Horizontal=ol=v.p(R,"Horizontal",5);var ed;R.Fill=ed=v.p(R,"Fill",3);var vh;R.Uniform=vh=v.p(R,"Uniform",1);var wh;R.UniformToFill=wh=v.p(R,"UniformToFill",2);function pl(a){a.R=new ql}
R.prototype.Je=function(){var a=new rl;a.lj=xb;a.Mj=xb;a.jj=10;a.Kj=10;a.ij=sl;a.Jj=sl;a.kj=0;a.Lj=0;this.S=a};function tl(a,b,c,d,e,f,h){var k=.001,l=f.length;a.moveTo(b,c);d-=b;k=e-c;0===d&&(d=.001);e=k/d;for(var m=Math.sqrt(d*d+k*k),n=0,p=!0,q=0===h?!1:!0;.1<=m;){if(q){k=f[n++%l];for(k-=h;0>k;)k+=f[n++%l],p=!p;q=!1}else k=f[n++%l];k>m&&(k=m);var r=Math.sqrt(k*k/(1+e*e));0>d&&(r=-r);b+=r;c+=e*r;p?a.lineTo(b,c):a.moveTo(b,c);m-=k;p=!p}}
R.prototype.raiseChangedEvent=R.prototype.Ec=function(a,b,c,d,e,f,h){var k=this.V;null!==k&&(k.bn(a,b,c,d,e,f,h),0!==(this.fa&1024)&&c===this&&a===Od&&ul(this,k,b))};
function ul(a,b,c){var d=a.So();if(null!==d)for(var e=a.Hc.i;e.next();){var f=e.value,h=null;if(null!==f.dn){h=ff(f,d,a);if(null===h)continue;f.Bx(a,h,c,null)}else if(f.$t){var k=b.g;null!==k&&f.Bx(a,k.da.yt,c,k)}else{var l=d.data;if(null===l)continue;k=b.g;null!==k&&k.yx||f.Bx(a,l,c,k)}null!==h&&(k=d.Dw(f.Dl),null!==k&&f.GF(k,h,c))}}R.prototype.Dw=function(a){return this.qn===a?this:null};R.prototype.raiseChanged=R.prototype.h=function(a,b,c){this.Ec(Od,a,this,b,c)};
function vl(a,b,c,d,e){var f=a.Vc,h=a.Jk;h.reset();wl(a,h,b,c,d,e);a.Jk=h;f.x=b;f.y=c;f.width=d;f.height=e;h.nt()||h.DF(f)}function xl(a,b,c,d){if(!1===a.yg)return!1;d.multiply(a.transform);return c?a.tg(b,d):a.Hm(b,d)}
R.prototype.$D=function(a,b,c){if(!1===this.yg)return!1;var d=this.Fa;b=a.Tj(b);var e=!1;c&&(e=Ya(a.x,a.y,0,0,0,d.height)<b||Ya(a.x,a.y,0,d.height,d.width,d.height)<b||Ya(a.x,a.y,d.width,d.height,d.width,0)<b||Ya(a.x,a.y,d.width,0,0,0)<b);c||(e=Ya(a.x,a.y,0,0,0,d.height)<b&&Ya(a.x,a.y,0,d.height,d.width,d.height)<b&&Ya(a.x,a.y,d.width,d.height,d.width,0)<b&&Ya(a.x,a.y,d.width,0,0,0)<b);return e};R.prototype.Vf=function(){return!0};
R.prototype.containsPoint=R.prototype.Ca=function(a){var b=v.M();b.assign(a);this.transform.xb(b);var c=this.Z;if(!c.H())return!1;var d=this.g;if(null!==d&&d.Gy){var e=d.Wo("extraTouchThreshold"),f=d.Wo("extraTouchArea"),h=f/2,k=this.Fa,d=this.Si()*d.scale,l=1/d;if(k.width*d<e&&k.height*d<e)return a=sb(c.x-h*l,c.y-h*l,c.width+f*l,c.height+f*l,b.x,b.y),v.v(b),a}if(this instanceof mf||this instanceof X?sb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Ca(b)){if(this.gi&&!this.gi.Ca(b))return!1;if(null!==
this.lc&&c.Ca(b)||null!==this.Jb&&this.Jc.Ca(a))return!0;v.v(b);return this.Rj(a)}v.v(b);return!1};R.prototype.Rj=function(a){var b=this.Fa;return sb(0,0,b.width,b.height,a.x,a.y)};R.prototype.containsRect=R.prototype.Sj=function(a){if(0===this.angle)return this.Z.Sj(a);var b=this.Fa,b=v.ek(0,0,b.width,b.height),c=this.transform,d=!1,e=v.Rb(a.x,a.y);b.Ca(c.Xh(e))&&(e.m(a.x,a.bottom),b.Ca(c.Xh(e))&&(e.m(a.right,a.bottom),b.Ca(c.Xh(e))&&(e.m(a.right,a.y),b.Ca(c.Xh(e))&&(d=!0))));v.v(e);v.fc(b);return d};
R.prototype.containedInRect=R.prototype.Hm=function(a,b){if(void 0===b)return a.Sj(this.Z);var c=this.Fa,d=!1,e=v.Rb(0,0);a.Ca(b.xb(e))&&(e.m(0,c.height),a.Ca(b.xb(e))&&(e.m(c.width,c.height),a.Ca(b.xb(e))&&(e.m(c.width,0),a.Ca(b.xb(e))&&(d=!0))));return d};
R.prototype.intersectsRect=R.prototype.tg=function(a,b){if(void 0===b&&(b=this.transform,0===this.angle))return a.tg(this.Z);var c=this.Fa,d=b,e=v.Rb(0,0),f=v.Rb(0,c.height),h=v.Rb(c.width,c.height),k=v.Rb(c.width,0),l=!1;if(a.Ca(d.xb(e))||a.Ca(d.xb(f))||a.Ca(d.xb(h))||a.Ca(d.xb(k)))l=!0;else{var c=v.ek(0,0,c.width,c.height),m=v.Rb(a.x,a.y);c.Ca(d.Xh(m))?l=!0:(m.m(a.x,a.bottom),c.Ca(d.Xh(m))?l=!0:(m.m(a.right,a.bottom),c.Ca(d.Xh(m))?l=!0:(m.m(a.right,a.y),c.Ca(d.Xh(m))&&(l=!0))));v.v(m);v.fc(c);!l&&
(K.Mw(a,e,f)||K.Mw(a,f,h)||K.Mw(a,h,k)||K.Mw(a,k,e))&&(l=!0)}v.v(e);v.v(f);v.v(h);v.v(k);return l};R.prototype.getDocumentPoint=R.prototype.fb=function(a,b){void 0===b&&(b=new w);a.me()&&v.k("getDocumentPoint:s Spot must be specific: "+a.toString());var c=this.Fa;b.m(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.Ef.xb(b);return b};R.prototype.getDocumentAngle=R.prototype.jl=function(){var a;a=this.Ef;1===a.m11&&0===a.m12?a=0:(a=180*Math.atan2(a.m12,a.m11)/Math.PI,0>a&&(a+=360));return a};
R.prototype.getDocumentScale=R.prototype.Si=function(){if(0!==(this.fa&4096)===!1)return this.Lu;var a=this.Tb;return null!==this.T?a*this.T.Si():a};R.prototype.getLocalPoint=R.prototype.fE=function(a,b){void 0===b&&(b=new w);b.assign(a);this.Ef.Xh(b);return b};R.prototype.getNearestIntersectionPoint=R.prototype.ml=function(a,b,c){return this.Xo(a.x,a.y,b.x,b.y,c)};g=R.prototype;
g.Xo=function(a,b,c,d,e){var f=this.transform,h=1/(f.m11*f.m22-f.m12*f.m21),k=f.m22*h,l=-f.m12*h,m=-f.m21*h,n=f.m11*h,p=h*(f.m21*f.dy-f.m22*f.dx),q=h*(f.m12*f.dx-f.m11*f.dy);if(null!==this.Cm)return f=this.Z,K.ml(f.left,f.top,f.right,f.bottom,a,b,c,d,e);h=a*k+b*m+p;a=a*l+b*n+q;b=c*k+d*m+p;c=c*l+d*n+q;e.m(0,0);d=this.Fa;c=K.ml(0,0,d.width,d.height,h,a,b,c,e);e.transform(f);return c};
function Rh(a,b,c,d,e){if(!1!==Jj(a)){var f=a.margin,h=f.right+f.left,f=f.top+f.bottom;b=Math.max(b-h,0);c=Math.max(c-f,0);e=e||0;d=Math.max((d||0)-h,0);e=Math.max(e-f,0);var h=a.angle,f=0,f=a.xa,k=0;a.nb&&(k=a.nb);90===h||270===h?(b=isFinite(f.height)?f.height+k:b,c=isFinite(f.width)?f.width+k:c):(b=isFinite(f.width)?f.width+k:b,c=isFinite(f.height)?f.height+k:c);var f=d||0,k=e||0,l=a instanceof C;switch(yl(a,!0)){case th:k=f=0;l&&(c=b=Infinity);break;case ed:isFinite(b)&&b>d&&(f=b);isFinite(c)&&
c>e&&(k=c);break;case ol:isFinite(b)&&b>d&&(f=b);k=0;l&&(c=Infinity);break;case nl:isFinite(c)&&c>e&&(k=c),f=0,l&&(b=Infinity)}var l=a.af,m=a.ug;f>l.width&&m.width<l.width&&(f=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(f/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===h||270===h)f=b,b=c,c=f,f=d,d=e,e=f;a.Vc.Na();a.ip(b,c,
d,e);a.Vc.freeze();a.Vc.H()||v.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Vc.toString());Dj(a,!1)}}
g.zc=function(a,b,c,d,e){this.pi();var f=v.Uf();f.assign(this.kc);this.kc.Na();if(!1===Kj(this)){var h=this.kc;h.x=a;h.y=b;h.width=c;h.height=d}else this.Li(a,b,c,d);this.kc.freeze();this.gi=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.T&&(e=this.T.Jc,d=this.Ba,null!==this.Cm&&(d=this.kc),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof ra&&(a=this.Jc,this.lv>a.height||this.sj.Qe>a.width))&&(c=!0);this.fa=c?this.fa|256:this.fa&-257;this.kc.H()||
v.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.kc.toString());this.bx(f,this.kc);v.fc(f)};g.Li=function(){};
function zl(a,b,c,d,e){var f=a.Z;f.x=b;f.y=c;f.width=d;f.height=e;if(!a.xa.H()){f=a.Vc;c=a.margin;b=c.right+c.left;var h=c.top+c.bottom;c=f.width+b;f=f.height+h;d+=b;e+=h;b=yl(a,!0);c===d&&f===e&&(b=th);switch(b){case th:if(c>d||f>e)Dj(a,!0),Rh(a,c>d?d:c,f>e?e:f);break;case ed:Dj(a,!0);Rh(a,d,e,0,0);break;case ol:Dj(a,!0);Rh(a,d,f,0,0);break;case nl:Dj(a,!0),Rh(a,c,e,0,0)}}}
g.bx=function(a,b){Al(this,!1);var c=this.V;if(null!==c&&null!==c.g){var d=this.V;null!==d&&(d.Qt!==this&&d.ZE!==this&&d.bF!==this||Bl(d,!0));this.pa();a.L(b)||(c.ol(),this.uv(c))}};g.uv=function(a){null!==this.Od&&Bl(a,!0)};v.defineProperty(R,{Dp:"shadowVisible"},function(){return this.hs},function(a){var b=this.hs;b!==a&&(this.hs=a,this.h("shadowVisible",b,a))});
R.prototype.Ve=function(a,b){if(this.visible){var c=this.opacity,d=1;if(1!==c){if(0===c)return;d=a.globalAlpha;a.globalAlpha=d*c}if(a instanceof Ic)a:{if(this.visible){var e=null,f=a.Uw;if(this instanceof C&&(this.type===Cl||this.type===Dl))El(this,a,b);else{var h=this.kc;if(0!==h.width&&0!==h.height&&!isNaN(h.x)&&!isNaN(h.y)){var k=this.transform,l=this.T;0!==(this.fa&4096)===!0&&Fl(this);var m=0!==(this.fa&256),n=!1;this instanceof ra&&Gl(this,a);if(m){n=l.Vf()?l.Fa:l.Z;if(this.gi)var p=this.gi,
q=p.x,r=p.y,s=p.width,p=p.height;else q=Math.max(h.x,n.x),r=Math.max(h.y,n.y),s=Math.min(h.right,n.right)-q,p=Math.min(h.bottom,n.bottom)-r;if(q>h.width+h.x||h.x>n.width+n.x||r>h.height+h.y||h.y>n.height+n.y)break a;n=!0;Kc(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(q,r,s,p);a.clip()}q=!1;if(this instanceof J){var t=this,q=!0;if(!t.isVisible())break a}a.Qi.$e=[1,0,0,1,0,0];r=!1;q&&this.tl&&b.Yj("drawShadows")&&(s=this.tm,b.Wy=s.x*b.scale*b.ze,b.Xy=s.y*b.scale*b.ze,b.Mh=t.Mh,b.Rg=t.Rg,Hl(b,a),a.shadowColor=
b.Rg);t=!1;this.V&&b.Yj("drawShadows")&&(t=this.V.tl);!0===this.Dp?(Hl(b,a),!1===r&&t&&(Kc(a,1,0,0,1,0,0),a.Ya(),r=!0)):!1===this.Dp&&Il(a);null!==this.lc&&(Jl(this,a,this.lc,!0,!0),!1===r&&t&&(Kc(a,1,0,0,1,0,0),a.Ya(),r=!0),this.lc instanceof ha&&this.lc.type===ye?(a.beginPath(),a.rect(h.x,h.y,h.width,h.height),Kl(a,this.lc)):a.fillRect(h.x,h.y,h.width,h.height));this instanceof C?Kc(a,k.m11,k.m12,k.m21,k.m22,k.dx,k.dy):a.Qi.$e=[k.m11,k.m12,k.m21,k.m22,k.dx,k.dy];if(null!==this.Jb){!1===r&&t&&(Kc(a,
1,0,0,1,0,0),a.Ya(),r=!0);var p=this.Fa,k=h=0,s=p.width,p=p.height,u=0;this instanceof X&&(p=this.Ta.pb,h=p.x,k=p.y,s=p.width,p=p.height,u=this.Sg);Jl(this,a,this.Jb,!0,!1);this.Jb instanceof ha&&this.Jb.type===ye?(a.beginPath(),a.rect(h-u/2,k-u/2,s+u,p+u),Kl(a,this.Jb)):a.fillRect(h-u/2,k-u/2,s+u,p+u)}t&&(null!==this.Jb||null!==this.lc||null!==l&&0!==(l.fa&512)||null!==l&&(l.type===gj||l.type===rh)&&l.If()!==this)?(Ll(this,!0),null===this.Dp&&Il(a)):Ll(this,!1);this.Uj(a,b);t&&0!==(this.fa&512)===
!0&&Hl(b,a);q&&t&&Il(a);m&&(a.restore(),n&&a.of.pop(),ij(b,a));this instanceof C&&(e=a.of.pop());!0===r&&a.of.pop();null!==a.VD&&(null===e&&(f===a.Uw?(Kc(a,1,0,0,1,0,0),e=a.of.pop()):e=a.Uw),a.VD(this,e))}}}}else{if(this instanceof C&&(this.type===Cl||this.type===Dl)){El(this,a,b);1!==c&&(a.globalAlpha=d);return}m=this.kc;if(0!==m.width&&0!==m.height&&!isNaN(m.x)&&!isNaN(m.y)){this instanceof W&&this.wt(!1);e=this.transform;f=this.T;0!==(this.fa&4096)===!0&&Fl(this);l=0!==(this.fa&256);this instanceof
ra&&Gl(this,a);if(l){n=f.Vf()?f.Fa:f.Z;this.gi?(r=this.gi,h=r.x,k=r.y,q=r.width,r=r.height):(h=Math.max(m.x,n.x),k=Math.max(m.y,n.y),q=Math.min(m.right,n.right)-h,r=Math.min(m.bottom,n.bottom)-k);if(h>m.width+m.x||m.x>n.width+n.x||k>m.height+m.y||m.y>n.height+n.y){1!==c&&(a.globalAlpha=d);return}a.save();a.beginPath();a.rect(h,k,q,r);a.clip()}n=!1;if(this instanceof J){n=!0;if(!this.isVisible()){1!==c&&(a.globalAlpha=d);return}this.tl&&b.Yj("drawShadows")&&(h=this.tm,b.Wy=h.x*b.scale*b.ze,b.Xy=h.y*
b.scale*b.ze,b.Mh=this.Mh,b.Rg=this.Rg,Hl(b,a),a.shadowColor=b.Rg)}h=!1;this.V&&b.Yj("drawShadows")&&(h=this.V.tl);!0===this.Dp?Hl(b,a):!1===this.Dp&&Il(a);null!==this.lc&&(Jl(this,a,this.lc,!0,!0),this.lc instanceof ha&&this.lc.type===ye?(a.beginPath(),a.rect(m.x,m.y,m.width,m.height),Kl(a,this.lc)):a.fillRect(m.x,m.y,m.width,m.height));e.nt()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);null!==this.Jb&&(r=this.Fa,k=m=0,q=r.width,r=r.height,t=0,this instanceof X&&(r=this.Ta.pb,m=r.x,k=r.y,q=r.width,
r=r.height,t=this.Sg),Jl(this,a,this.Jb,!0,!1),this.Jb instanceof ha&&this.Jb.type===ye?(a.beginPath(),a.rect(m-t/2,k-t/2,q+t,r+t),Kl(a,this.Jb)):a.fillRect(m-t/2,k-t/2,q+t,r+t));h&&(null!==this.Jb||null!==this.lc||null!==f&&0!==(f.fa&512)||null!==f&&(f.type===gj||f.type===rh)&&f.If()!==this)?(Ll(this,!0),null===this.Dp&&Il(a)):Ll(this,!1);this.Uj(a,b);h&&0!==(this.fa&512)===!0&&Hl(b,a);n&&h&&Il(a);l?(a.restore(),this instanceof C?ij(b,a,!0):ij(b,a,!1)):e.nt()||(f=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*
f,-e.m12*f,-e.m21*f,e.m11*f,f*(e.m21*e.dy-e.m22*e.dx),f*(e.m12*e.dx-e.m11*e.dy)))}}1!==c&&(a.globalAlpha=d)}};function Il(a){a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}function Hl(a,b){b.shadowOffsetX=a.Wy;b.shadowOffsetY=a.Xy;b.shadowBlur=a.Mh}
function El(a,b,c){var d=a.kc;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.lc&&(Jl(a,b,a.lc,!0,!0),a.lc instanceof ha&&a.lc.type===ye?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Kl(b,a.lc)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Jb&&(Jl(a,b,a.Jb,!0,!1),a.Jb instanceof ha&&a.Jb.type===ye?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Kl(b,a.Jb)):b.fillRect(d.x,d.y,d.width,d.height)),a.Uj(b,c))}R.prototype.Uj=function(){};
function Kl(a,b){if(b instanceof ha&&b.type===ye&&!(a instanceof Ic)){var c=b.Yx,d=b.Xx;d>c?(a.scale(c/d,1),a.translate((d-c)/2,0)):c>d&&(a.scale(1,d/c),a.translate(0,(c-d)/2));a.hu?a.clip():a.fill();d>c?(a.translate(-(d-c)/2,0),a.scale(1/(c/d),1)):c>d&&(a.translate(0,-(c-d)/2),a.scale(1,1/(d/c)))}else a.hu?a.clip():a.fill()}function Ml(a){a.hu||a.stroke()}
function Jl(a,b,c,d,e){if(null!==c){var f=1,h=1;if("string"===typeof c)d?b.hn!==c&&(b.fillStyle=c,b.hn=c):b.jn!==c&&(b.strokeStyle=c,b.jn=c);else if(c.type===we)c=c.color,d?b.hn!==c&&(b.fillStyle=c,b.hn=c):b.jn!==c&&(b.strokeStyle=c,b.jn=c);else{var k,h=a.Fa,f=h.width,h=h.height;if(e)var l=a.Z,f=l.width,h=l.height;var m=b instanceof CanvasRenderingContext2D;if(m&&(c.Eg&&c.type===kl||c.Yx===f&&c.Xx===h))k=c.Eg;else{var n=l=0,p=0,q=0,r=0,s=0,s=r=0;e&&(l=a.Z,f=l.width,h=l.height,r=l.x,s=l.y);l=c.start.x*
f+c.start.offsetX;n=c.start.y*h+c.start.offsetY;p=c.end.x*f+c.end.offsetX;q=c.end.y*h+c.end.offsetY;l+=r;p+=r;n+=s;q+=s;c.type===xe?k=b.createLinearGradient(l,n,p,q):c.type===ye?(s=isNaN(c.Us)?Math.max(f,h)/2:c.Us,isNaN(c.Xt)?(r=0,s=Math.max(f,h)/2):r=c.Xt,k=b.createRadialGradient(l,n,r,p,q,s)):c.type===kl?k=b.createPattern(c.pattern,"repeat"):v.Ad(c.type,"Brush type");if(c.type!==kl&&(a=c.Rs,null!==a))for(a=a.i;a.next();)k.addColorStop(a.key,a.value);m&&(c.Eg=k,c.Yx=f,c.Xx=h)}d?b.hn!==k&&(b.fillStyle=
k,b.hn=k):b.jn!==k&&(b.strokeStyle=k,b.jn=k)}}}R.prototype.isContainedBy=R.prototype.rl=function(a){if(a instanceof C)a:{if(this!==a&&null!==a)for(var b=this.T;null!==b;){if(b===a){a=!0;break a}b=b.T}a=!1}else a=!1;return a};R.prototype.isVisibleObject=R.prototype.ul=function(){if(!this.visible)return!1;var a=this.T;return null!==a?a.ul():!0};
function Fl(a){if(0!==(a.fa&2048)===!0){var b=a.Td;b.reset();if(!a.kc.H()||!a.Vc.H()){Nl(a,!1);return}b.translate(a.kc.x,a.kc.y);b.translate(-a.Ba.x,-a.Ba.y);var c=a.Fa;wl(a,b,c.x,c.y,c.width,c.height);Nl(a,!1);Ol(a,!0)}0!==(a.fa&4096)===!0&&(b=a.T,null===b?(a.nn.set(a.Td),a.Lu=a.scale,Ol(a,!1)):null!==b.Ef&&(c=a.nn,c.reset(),b.Vf()?c.multiply(b.nn):null!==b.T&&c.multiply(b.T.nn),c.multiply(a.Td),a.Lu=a.scale*b.Lu,Ol(a,!1)))}
function wl(a,b,c,d,e,f){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var h=Kb;a.Ze&&a.Ze.yd()&&(h=a.Ze);var k=v.M();if(a instanceof J&&a.ac!==a)for(c=a.ac,d=c.Fa,k.Ut(d.x,d.y,d.width,d.height,h),c.Jk.xb(k),k.offset(-c.Ba.x,-c.Ba.y),h=c.T;null!==h&&h!==a;)h.Jk.xb(k),k.offset(-h.Ba.x,-h.Ba.y),h=h.T;else k.Ut(c,d,e,f,h);b.rotate(a.angle,k.x,k.y);v.v(k)}}g=R.prototype;
g.P=function(a){void 0===a&&(a=!1);if(!0!==Jj(this)){Dj(this,!0);Al(this,!0);var b=this.T;null!==b?a||b.P():(a=this.g,null!==a&&(a.Zf.add(this),this instanceof S&&(a.ja.ib||this.invalidateConnectedLinks(),null!==this.ce&&Pl(this.ce)),a.de(!0)));if(this instanceof C){if(this.ia===gj||this.ia===dh)a=this.If(),null!==a&&a.P(!0);a=this.wa.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Jj(d)&&(d.xa.H()||(d instanceof sh||d instanceof C||d instanceof ra||yl(d,!1)!==th)&&d.P(!0))}}}};
g.$o=function(){!1===Jj(this)&&(Dj(this,!0),Al(this,!0))};function Pl(a){if(!1===Kj(a)){if(null!==a.T)a.T.P();else{var b=a.g;null!==b&&(b.Zf.add(a),a instanceof S&&a.invalidateConnectedLinks(),b.de())}Al(a,!0)}}g.pi=function(){0!==(this.fa&2048)===!1&&(Nl(this,!0),Ol(this,!0))};g.Oz=function(){Ol(this,!0)};g.pa=function(){var a=this.V;null!==a&&a.pa()};
function yl(a,b){var c=a.stretch,d=a.T;if(null!==d&&d.ia===Ql)return Rl(a,d.bd(a.bc),d.ad(a.column),b);if(null!==d&&d.ia===gj&&d.If()===a)return Sl(a,ed,b);if(c===ml){if(null!==d){if(d.ia===rh&&d.If()===a)return Sl(a,ed,b);c=d.Hd;return c===ml?Sl(a,th,b):Sl(a,c,b)}return Sl(a,th,b)}return Sl(a,c,b)}
function Rl(a,b,c,d){var e=a.stretch;if(e!==ml)return Sl(a,e,d);var f=e=null;switch(b.stretch){case nl:f=!0;break;case ed:f=!0}switch(c.stretch){case ol:e=!0;break;case ed:e=!0}b=a.T.Hd;null===e&&(e=b===ol||b===ed);null===f&&(f=b===nl||b===ed);return!0===e&&!0===f?Sl(a,ed,d):!0===e?Sl(a,ol,d):!0===f?Sl(a,nl,d):Sl(a,th,d)}
function Sl(a,b,c){if(c)return b;if(b===th)return th;c=a.xa;if(c.H())return th;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===ol)return th;if(b===ed)return nl}else{if(b===nl)return th;if(b===ed)return ol}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===nl)return th;if(b===ed)return ol}else{if(b===ol)return th;if(b===ed)return nl}return b}
v.defineProperty(R,{Pt:"segmentOrientation"},function(){return this.bs},function(a){var b=this.bs;b!==a&&(this.bs=a,this.P(),this.h("segmentOrientation",b,a))});v.defineProperty(R,{pe:"segmentIndex"},function(){return this.$r},function(a){a=Math.round(a);var b=this.$r;b!==a&&(this.$r=a,this.P(),this.h("segmentIndex",b,a))});
v.defineProperty(R,{qx:"segmentFraction"},function(){return this.Zr},function(a){isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Zr;b!==a&&(this.Zr=a,this.P(),this.h("segmentFraction",b,a))});v.defineProperty(R,{hF:"segmentOffset"},function(){return this.as},function(a){var b=this.as;b.L(a)||(this.as=a=a.aa(),this.P(),this.h("segmentOffset",b,a))});v.defineProperty(R,{stretch:"stretch"},function(){return this.Ph},function(a){var b=this.Ph;b!==a&&(this.Ph=a,this.P(),this.h("stretch",b,a))});
v.defineProperty(R,{name:"name"},function(){return this.Ob},function(a){var b=this.Ob;b!==a&&(this.Ob=a,null!==this.V&&(this.V.Mk=null),this.h("name",b,a))});v.defineProperty(R,{opacity:"opacity"},function(){return this.Kc},function(a){var b=this.Kc;b!==a&&(v.j(a,"number",R,"opacity"),(0>a||1<a)&&v.ua(a,"0 <= value <= 1",R,"opacity"),this.Kc=a,this.h("opacity",b,a),a=this.g,b=this.V,null!==a&&null!==b&&a.pa(Pi(b,b.Z)))});
v.defineProperty(R,{visible:"visible"},function(){return 0!==(this.fa&1)},function(a){var b=0!==(this.fa&1);b!==a&&(this.fa^=1,this.h("visible",b,a),b=this.T,null!==b?b.P():this instanceof J&&this.oe(a),this.pa(),Tl(this))});v.defineProperty(R,{yg:"pickable"},function(){return 0!==(this.fa&2)},function(a){var b=0!==(this.fa&2);b!==a&&(this.fa^=2,this.h("pickable",b,a))});
v.defineProperty(R,{oH:"fromLinkableDuplicates"},function(){return 0!==(this.fa&4)},function(a){var b=0!==(this.fa&4);b!==a&&(this.fa^=4,this.h("fromLinkableDuplicates",b,a))});v.defineProperty(R,{pH:"fromLinkableSelfNode"},function(){return 0!==(this.fa&8)},function(a){var b=0!==(this.fa&8);b!==a&&(this.fa^=8,this.h("fromLinkableSelfNode",b,a))});
v.defineProperty(R,{gJ:"toLinkableDuplicates"},function(){return 0!==(this.fa&16)},function(a){var b=0!==(this.fa&16);b!==a&&(this.fa^=16,this.h("toLinkableDuplicates",b,a))});v.defineProperty(R,{hJ:"toLinkableSelfNode"},function(){return 0!==(this.fa&32)},function(a){var b=0!==(this.fa&32);b!==a&&(this.fa^=32,this.h("toLinkableSelfNode",b,a))});
v.defineProperty(R,{Lf:"isPanelMain"},function(){return 0!==(this.fa&64)},function(a){var b=0!==(this.fa&64);b!==a&&(this.fa^=64,this.P(),this.h("isPanelMain",b,a))});v.defineProperty(R,{Nw:"isActionable"},function(){return 0!==(this.fa&128)},function(a){var b=0!==(this.fa&128);b!==a&&(this.fa^=128,this.h("isActionable",b,a))});
v.defineProperty(R,{Cm:"areaBackground"},function(){return this.lc},function(a){var b=this.lc;b!==a&&(a instanceof ha&&a.freeze(),this.lc=a,this.pa(),this.h("areaBackground",b,a))});v.defineProperty(R,{background:"background"},function(){return this.Jb},function(a){var b=this.Jb;b!==a&&(a instanceof ha&&a.freeze(),this.Jb=a,this.pa(),this.h("background",b,a))});function Ll(a,b){a.fa=b?a.fa|512:a.fa&-513}function Ul(a,b){a.fa=b?a.fa|1024:a.fa&-1025}function Nl(a,b){a.fa=b?a.fa|2048:a.fa&-2049}
function Ol(a,b){a.fa=b?a.fa|4096:a.fa&-4097}function Jj(a){return 0!==(a.fa&8192)}function Dj(a,b){a.fa=b?a.fa|8192:a.fa&-8193}function Kj(a){return 0!==(a.fa&16384)}function Al(a,b){a.fa=b?a.fa|16384:a.fa&-16385}v.u(R,{V:"part"},function(){if(this instanceof J)return this;if(this.km)return this.km;var a;for(a=this.T;a;){if(a instanceof J)return this.km=a;a=a.T}return null});v.u(R,{T:"panel"},function(){return this.Pg});R.prototype.Al=function(a){this.Pg=a};
v.u(R,{layer:"layer"},function(){var a=this.V;return null!==a?a.layer:null});v.u(R,{g:"diagram"},function(){var a=this.V;return null!==a?a.g:null},{configurable:!0});v.defineProperty(R,{position:"position"},function(){return this.Xa},function(a){var b=this.Xa;b.L(a)||(a=a.aa(),this.CA(a,b)&&this.h("position",b,a))});R.prototype.CA=function(a){this.Xa=a;Pl(this);this.pi();return!0};R.prototype.DA=function(a,b){this.Xa.m(a,b);Vl(this,!0);this.pi()};v.u(R,{Z:"actualBounds"},function(){return this.kc});
v.defineProperty(R,{scale:"scale"},function(){return this.Tb},function(a){var b=this.Tb;b!==a&&(0>=a&&v.k("GraphObject.scale for "+this+" must be greater than zero, not: "+a),this.Tb=a,this.pi(),this.P(),this.h("scale",b,a))});v.defineProperty(R,{angle:"angle"},function(){return this.on},function(a){var b=this.on;b!==a&&(a%=360,0>a&&(a+=360),b!==a&&(this.on=a,this.P(),this.pi(),this.h("angle",b,a)))});
v.defineProperty(R,{xa:"desiredSize"},function(){return this.gf},function(a){var b=this.gf;b.L(a)||(this.gf=a=a.aa(),this.P(),this instanceof X&&this.Ye(),this.h("desiredSize",b,a),a=this.V,null!==a&&0!==(this.fa&1024)&&(ul(this,a,"width"),ul(this,a,"height")))});
v.defineProperty(R,{width:"width"},function(){return this.gf.width},function(a){if(this.gf.width!==a){var b=this.gf;this.gf=a=(new ia(a,this.gf.height)).freeze();this.P();this instanceof X&&this.Ye();this.h("desiredSize",b,a);b=this.V;null!==b&&0!==(this.fa&1024)&&ul(this,b,"width")}});
v.defineProperty(R,{height:"height"},function(){return this.gf.height},function(a){if(this.gf.height!==a){var b=this.gf;this.gf=a=(new ia(this.gf.width,a)).freeze();this.P();this instanceof X&&this.Ye();this.h("desiredSize",b,a);b=this.V;null!==b&&0!==(this.fa&1024)&&ul(this,b,"height")}});
v.defineProperty(R,{ug:"minSize"},function(){return this.yj},function(a){var b=this.yj;b.L(a)||(a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.yj=a,this.P(),this.h("minSize",b,a))});v.defineProperty(R,{af:"maxSize"},function(){return this.wj},function(a){var b=this.wj;b.L(a)||(a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.wj=a,this.P(),this.h("maxSize",b,a))});v.u(R,{Ba:"measuredBounds"},function(){return this.Vc});
v.u(R,{Fa:"naturalBounds"},function(){return this.Jc},{configurable:!0});v.defineProperty(R,{margin:"margin"},function(){return this.gr},function(a){"number"===typeof a&&(a=new tb(a));var b=this.gr;b.L(a)||(this.gr=a=a.aa(),this.P(),this.h("margin",b,a))});v.u(R,{transform:null},function(){0!==(this.fa&2048)===!0&&Fl(this);return this.Td});v.u(R,{Ef:null},function(){0!==(this.fa&4096)===!0&&Fl(this);return this.nn});
v.defineProperty(R,{alignment:"alignment"},function(){return this.te},function(a){var b=this.te;b.L(a)||(a.me()&&!a.Oc()&&v.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+a),this.te=a=a.aa(),Pl(this),this.h("alignment",b,a))});v.defineProperty(R,{column:"column"},function(){return this.aq},function(a){a=Math.round(a);var b=this.aq;b!==a&&(0>a&&v.ua(a,">= 0",R,"column"),this.aq=a,this.P(),this.h("column",b,a))});
v.defineProperty(R,{JG:"columnSpan"},function(){return this.hi},function(a){a=Math.round(a);var b=this.hi;b!==a&&(1>a&&v.ua(a,">= 1",R,"columnSpan"),this.hi=a,this.P(),this.h("columnSpan",b,a))});v.defineProperty(R,{bc:"row"},function(){return this.Vr},function(a){a=Math.round(a);var b=this.Vr;b!==a&&(0>a&&v.ua(a,">= 0",R,"row"),this.Vr=a,this.P(),this.h("row",b,a))});
v.defineProperty(R,{rowSpan:"rowSpan"},function(){return this.Di},function(a){a=Math.round(a);var b=this.Di;b!==a&&(1>a&&v.ua(a,">= 1",R,"rowSpan"),this.Di=a,this.P(),this.h("rowSpan",b,a))});v.defineProperty(R,{zx:"spanAllocation"},function(){return this.ns},function(a){var b=this.ns;b!==a&&(null!==a&&v.j(a,"function",R,"spanAllocation"),this.ns=a,this.h("spanAllocation",b,a))});
v.defineProperty(R,{Pj:"alignmentFocus"},function(){return this.Up},function(a){var b=this.Up;b.L(a)||(!a.me()||a.Oc()||a.L(xb)&&this instanceof S||v.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+a),this.Up=a=a.aa(),this.P(),this.h("alignmentFocus",b,a))});
v.defineProperty(R,{Od:"portId"},function(){return this.Hr},function(a){var b=this.Hr;if(b!==a){var c=this.V;null===c||c instanceof S||(v.k("Cannot set portID on a Link: "+a),c=null);null!==b&&null!==c&&Wl(c,this);this.Hr=a;if(null!==a&&c){c.Bh=!0;null===c.Sd&&Xl(c);var d=this.Od;null!==d&&c.Sd.add(d,this)}this.h("portId",b,a)}});function Yl(a){var b={value:null};Zl(a,b);return b.value}function Zl(a,b){var c=a.T;return null===c||!Zl(c,b)&&a.visible?(b.value=a,!1):!0}
function Tl(a){var b=a.V;b instanceof S&&(a=a.g,null===a||a.ja.ib||b.invalidateConnectedLinks())}v.defineProperty(R,{Bb:"toSpot"},function(){return null!==this.S?this.S.Mj:xb},function(a){null===this.S&&this.Je();var b=this.S.Mj;b.L(a)||(a=a.aa(),this.S.Mj=a,this.h("toSpot",b,a),Tl(this))});
v.defineProperty(R,{Fl:"toEndSegmentLength"},function(){return null!==this.S?this.S.Kj:10},function(a){null===this.S&&this.Je();var b=this.S.Kj;b!==a&&(0>a&&v.ua(a,">= 0",R,"toEndSegmentLength"),this.S.Kj=a,this.h("toEndSegmentLength",b,a),Tl(this))});v.defineProperty(R,{Zt:"toEndSegmentDirection"},function(){return null!==this.S?this.S.Jj:sl},function(a){null===this.S&&this.Je();var b=this.S.Jj;b!==a&&(this.S.Jj=a,this.h("toEndSegmentDirection",b,a),Tl(this))});
v.defineProperty(R,{au:"toShortLength"},function(){return null!==this.S?this.S.Lj:0},function(a){null===this.S&&this.Je();var b=this.S.Lj;b!==a&&(this.S.Lj=a,this.h("toShortLength",b,a),Tl(this))});v.defineProperty(R,{uF:"toLinkable"},function(){return this.ts},function(a){var b=this.ts;b!==a&&(this.ts=a,this.h("toLinkable",b,a))});v.defineProperty(R,{iJ:"toMaxLinks"},function(){return this.us},function(a){var b=this.us;b!==a&&(0>a&&v.ua(a,">= 0",R,"toMaxLinks"),this.us=a,this.h("toMaxLinks",b,a))});
v.defineProperty(R,{Ab:"fromSpot"},function(){return null!==this.S?this.S.lj:xb},function(a){null===this.S&&this.Je();var b=this.S.lj;b.L(a)||(a=a.aa(),this.S.lj=a,this.h("fromSpot",b,a),Tl(this))});v.defineProperty(R,{il:"fromEndSegmentLength"},function(){return null!==this.S?this.S.jj:10},function(a){null===this.S&&this.Je();var b=this.S.jj;b!==a&&(0>a&&v.ua(a,">= 0",R,"fromEndSegmentLength"),this.S.jj=a,this.h("fromEndSegmentLength",b,a),Tl(this))});
v.defineProperty(R,{dt:"fromEndSegmentDirection"},function(){return null!==this.S?this.S.ij:sl},function(a){null===this.S&&this.Je();var b=this.S.ij;b!==a&&(this.S.ij=a,this.h("fromEndSegmentDirection",b,a),Tl(this))});v.defineProperty(R,{et:"fromShortLength"},function(){return null!==this.S?this.S.kj:0},function(a){null===this.S&&this.Je();var b=this.S.kj;b!==a&&(this.S.kj=a,this.h("fromShortLength",b,a),Tl(this))});
v.defineProperty(R,{cE:"fromLinkable"},function(){return this.Aq},function(a){var b=this.Aq;b!==a&&(this.Aq=a,this.h("fromLinkable",b,a))});v.defineProperty(R,{qH:"fromMaxLinks"},function(){return this.Bq},function(a){var b=this.Bq;b!==a&&(0>a&&v.ua(a,">= 0",R,"fromMaxLinks"),this.Bq=a,this.h("fromMaxLinks",b,a))});v.defineProperty(R,{cursor:"cursor"},function(){return this.kq},function(a){var b=this.kq;b!==a&&(v.j(a,"string",R,"cursor"),this.kq=a,this.h("cursor",b,a))});
v.defineProperty(R,{click:"click"},function(){return null!==this.R?this.R.fi:null},function(a){null===this.R&&pl(this);var b=this.R.fi;b!==a&&(null!==a&&v.j(a,"function",R,"click"),this.R.fi=a,this.h("click",b,a))});v.defineProperty(R,{Ts:"doubleClick"},function(){return null!==this.R?this.R.ni:null},function(a){null===this.R&&pl(this);var b=this.R.ni;b!==a&&(null!==a&&v.j(a,"function",R,"doubleClick"),this.R.ni=a,this.h("doubleClick",b,a))});
v.defineProperty(R,{sz:"contextClick"},function(){return null!==this.R?this.R.ii:null},function(a){null===this.R&&pl(this);var b=this.R.ii;b!==a&&(null!==a&&v.j(a,"function",R,"contextClick"),this.R.ii=a,this.h("contextClick",b,a))});v.defineProperty(R,{zt:"mouseEnter"},function(){return null!==this.R?this.R.rr:null},function(a){null===this.R&&pl(this);var b=this.R.rr;b!==a&&(null!==a&&v.j(a,"function",R,"mouseEnter"),this.R.rr=a,this.h("mouseEnter",b,a))});
v.defineProperty(R,{At:"mouseLeave"},function(){return null!==this.R?this.R.sr:null},function(a){null===this.R&&pl(this);var b=this.R.sr;b!==a&&(null!==a&&v.j(a,"function",R,"mouseLeave"),this.R.sr=a,this.h("mouseLeave",b,a))});v.defineProperty(R,{dA:"mouseOver"},function(){return null!==this.R?this.R.zi:null},function(a){null===this.R&&pl(this);var b=this.R.zi;b!==a&&(null!==a&&v.j(a,"function",R,"mouseOver"),this.R.zi=a,this.h("mouseOver",b,a))});
v.defineProperty(R,{cA:"mouseHover"},function(){return null!==this.R?this.R.yi:null},function(a){null===this.R&&pl(this);var b=this.R.yi;b!==a&&(null!==a&&v.j(a,"function",R,"mouseHover"),this.R.yi=a,this.h("mouseHover",b,a))});v.defineProperty(R,{bA:"mouseHold"},function(){return null!==this.R?this.R.xi:null},function(a){null===this.R&&pl(this);var b=this.R.xi;b!==a&&(null!==a&&v.j(a,"function",R,"mouseHold"),this.R.xi=a,this.h("mouseHold",b,a))});
v.defineProperty(R,{oI:"mouseDragEnter"},function(){return null!==this.R?this.R.pr:null},function(a){null===this.R&&pl(this);var b=this.R.pr;b!==a&&(null!==a&&v.j(a,"function",R,"mouseDragEnter"),this.R.pr=a,this.h("mouseDragEnter",b,a))});v.defineProperty(R,{pI:"mouseDragLeave"},function(){return null!==this.R?this.R.qr:null},function(a){null===this.R&&pl(this);var b=this.R.qr;b!==a&&(null!==a&&v.j(a,"function",R,"mouseDragLeave"),this.R.qr=a,this.h("mouseDragLeave",b,a))});
v.defineProperty(R,{aA:"mouseDrop"},function(){return null!==this.R?this.R.wi:null},function(a){null===this.R&&pl(this);var b=this.R.wi;b!==a&&(null!==a&&v.j(a,"function",R,"mouseDrop"),this.R.wi=a,this.h("mouseDrop",b,a))});v.defineProperty(R,{nD:"actionDown"},function(){return null!==this.R?this.R.Pp:null},function(a){null===this.R&&pl(this);var b=this.R.Pp;b!==a&&(null!==a&&v.j(a,"function",R,"actionDown"),this.R.Pp=a,this.h("actionDown",b,a))});
v.defineProperty(R,{oD:"actionMove"},function(){return null!==this.R?this.R.Qp:null},function(a){null===this.R&&pl(this);var b=this.R.Qp;b!==a&&(null!==a&&v.j(a,"function",R,"actionMove"),this.R.Qp=a,this.h("actionMove",b,a))});v.defineProperty(R,{pD:"actionUp"},function(){return null!==this.R?this.R.Rp:null},function(a){null===this.R&&pl(this);var b=this.R.Rp;b!==a&&(null!==a&&v.j(a,"function",R,"actionUp"),this.R.Rp=a,this.h("actionUp",b,a))});
v.defineProperty(R,{mD:"actionCancel"},function(){return null!==this.R?this.R.Op:null},function(a){null===this.R&&pl(this);var b=this.R.Op;b!==a&&(null!==a&&v.j(a,"function",R,"actionCancel"),this.R.Op=a,this.h("actionCancel",b,a))});v.defineProperty(R,{LA:"toolTip"},function(){return null!==this.R?this.R.Hi:null},function(a){null===this.R&&pl(this);var b=this.R.Hi;b!==a&&(null!==a&&v.C(a,mf,R,"toolTip"),this.R.Hi=a,this.h("toolTip",b,a))});
v.defineProperty(R,{contextMenu:"contextMenu"},function(){return null!==this.R?this.R.ji:null},function(a){null===this.R&&pl(this);var b=this.R.ji;b!==a&&(null!==a&&v.C(a,mf,R,"contextMenu"),this.R.ji=a,this.h("contextMenu",b,a))});R.prototype.bind=R.prototype.bind=function(a){a.ig=this;var b=this.So();null!==b&&$l(b)&&v.k("Cannot add a Binding to a template that has already been copied: "+a);null===this.Hc&&(this.Hc=new G(cf));this.Hc.add(a)};
R.prototype.findTemplateBinder=R.prototype.So=function(){for(var a=this instanceof C?this:this.T;null!==a;){if(null!==a.Kl)return a;a=a.T}return null};R.prototype.setProperties=function(a){v.Rt(this,a)};var am;
R.make=am=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var f=bm.la(a);"function"===typeof f?(c=v.$k(arguments),d=f(c)):e=ea[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&v.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),v.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||v.k("GraphObject.make requires a class function or class name, not: "+
a),d=new e);f=1;if(d instanceof E&&1<c.length){var h=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)ej(h,e),f++}for(;f<c.length;f++)e=c[f],void 0===e?v.k("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):cm(d,e);return d};
function cm(a,b){if("string"===typeof b)if(a instanceof ra)a.text=b;else if(a instanceof X)a.Cb=b;else if(a instanceof Zi)a.source=b;else if(a instanceof C){var c=Da(C,b);null!==c?a.type=c:v.k("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof ha?(c=Da(ha,b),null!==c?a.type=c:v.k("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof Xc?(c=Da(Xc,b),null!==c?a.type=c:v.k("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof Kd?
(c=Da(Kd,b),null!==c?a.type=c:v.k("Unknown PathSegment type as an argument to GraphObject.make: "+b)):v.k("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof R)c=b,a instanceof C||v.k("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof Ue){var d=b,c=a,e;d.ae&&c.bd?e=c.bd(d.index):!d.ae&&c.ad?e=c.ad(d.index):v.k("A RowColumnDefinition can only be added to a Panel, not to: "+a);e.Ss(d)}else if(b instanceof fa)a instanceof W&&b.je===
W?2===(b.value&2)?a.ox=b:b===nh||b===fh||b===eh?a.Ge=b:b===dm||b===em||b===fm?a.Is=b:b!==gm&&b!==gh&&v.k("Unknown Link enum value for a Link property: "+b):a instanceof C&&b.je===C?a.type=b:a instanceof ra&&b.je===ra?a.JF=b:a instanceof X&&(b===th||b===vh||b===wh||b===ml)?a.Hz=b:a instanceof Zi&&(b===th||b===vh||b===wh)?a.EH=b:a instanceof R&&b.je===W?(c=a,0===b.name.indexOf("Orient")?c.Pt=b:v.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+b)):a instanceof R&&b.je===R?a.stretch=
b:a instanceof Ue&&b.je===Ue?a.Vt=b:a instanceof E&&b.je===E?a.Eo=b:a instanceof ha&&b.je===ha?a.type=b:a instanceof Xc&&b.je===Xc?a.type=b:a instanceof Kd&&b.je===Kd?a.type=b:a instanceof cf&&b.je===cf?a.mode=b:a instanceof Nd&&b.je===Nd?a.Ac=b:a instanceof Y&&b.je===Y?0===b.name.indexOf("Alignment")?a.alignment=b:0===b.name.indexOf("Arrangement")?a.Ff=b:0===b.name.indexOf("Compaction")?a.compaction=b:0===b.name.indexOf("Path")?a.path=b:0===b.name.indexOf("Sorting")?a.sorting=b:0===b.name.indexOf("Style")?
a.lJ=b:v.k("Unknown enum value: "+b):a instanceof hm&&b.je===hm?0===b.name.indexOf("Aggressive")?a.wG=b:0===b.name.indexOf("Cycle")?a.UG=b:0===b.name.indexOf("Init")?a.JH=b:0===b.name.indexOf("Layer")?a.YH=b:v.k("Unknown enum value: "+b):a instanceof fl&&b.je===fl?b===im||b===jm||b===km||b===lm?a.sorting=b:b===mm||b===nm?a.Ff=b:b===om||b===pm?a.alignment=b:v.k("Unknown enum value: "+b):a instanceof qm&&b.je===qm?b===rm||b===sm||b===tm||b===Bm||b===Cm?a.sorting=b:b===Dm||b===Em||b===Fm||b===Gm?a.direction=
b:b===Hm||b===Im||b===Jm||b===Km?a.Ff=b:b===Lm||b===Mm?a.$w=b:v.k("Unknown enum value: "+b):v.k("No property to set for this enum value: "+b);else if(b instanceof cf)a instanceof R?a.bind(b):a instanceof Ue?a.bind(b):v.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof dd)a instanceof Xc?a.Ub.add(b):v.k("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof Kd)a instanceof dd?a.vb.add(b):v.k("A PathSegment can only be added to a PathFigure, not to: "+
a);else if(b instanceof Me)a instanceof E?a.Pb=b:a instanceof T?a.Pb=b:v.k("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)cm(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof ha){e=new pa;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);v.Rt(a,e)}else if(a instanceof Ue){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&v.k("Must specify non-negative integer row for RowColumnDefinition "+
b+", not: "+e),a.ae=!0,a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&v.k("Must specify non-negative integer column for RowColumnDefinition "+b+", not: "+e),a.ae=!1,a.index=e);e=new pa;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);v.Rt(a,e)}else v.Rt(a,b);else v.k('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}var bm=new ma("string","function");
R.getBuilders=function(){var a=new ma("string","function"),b;for(b in bm)if(b!==b.toLowerCase()){var c=bm[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var Nm;R.defineBuilder=Nm=function(a,b){v.j(a,"string",R,"defineBuilder:name");v.j(b,"function",R,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);bm.add(a,b)};var Om;
R.takeBuilderArgument=Om=function(a,b,c){void 0===c&&(c=null);var d=a[1];if("function"===typeof c?c(d):"string"===typeof d)return a.splice(1,1),d;if(void 0===b)throw Error("no "+("function"===typeof c?"satisfactory":"string")+" argument for GraphObject builder "+a[0]);return b};
Nm("Button",function(){var a=new ha(xe);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new ha(xe);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=am(C,gj,{Nw:!0},{_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue"},am(X,{name:"ButtonBorder",Cb:"Rectangle",A:new L(0,0,2.761423749153968,2.761423749153968),B:new L(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.zt=function(a,b){var e=b.Yd("ButtonBorder");if(e instanceof
X){var f=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=f;f=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=f}};a.At=function(a,b){var e=b.Yd("ButtonBorder");e instanceof X&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)};return a});
Nm("TreeExpanderButton",function(){var a=am("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},am(X,{name:"ButtonIcon",Cb:"MinusLine",xa:K.Lp},(new cf("figure","isTreeExpanded",function(a,c){var d=c.T;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).ax()),{visible:!1},(new cf("visible","isTreeLeaf",function(a){return!a})).ax());a.click=function(a,c){var d=c.V;d instanceof mf&&(d=d.Sh);if(d instanceof S){var e=d.g;if(null!==e){e=e.rb;if(d.od){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.Nc=!0;d.od?e.collapseTree(d):e.expandTree(d)}}};return a});
Nm("SubGraphExpanderButton",function(){var a=am("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},am(X,{name:"ButtonIcon",Cb:"MinusLine",xa:K.Lp},(new cf("figure","isSubGraphExpanded",function(a,c){var d=c.T;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).ax()));a.click=function(a,c){var d=c.V;d instanceof mf&&(d=d.Sh);if(d instanceof T){var e=d.g;if(null!==e){e=e.rb;if(d.be){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.Nc=
!0;d.be?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});Nm("ContextMenuButton",function(){var a=am("Button");a.stretch=ol;var b=a.Yd("ButtonBorder");b instanceof X&&(b.Cb="Rectangle",b.A=new L(0,0,2,3),b.B=new L(1,1,-2,-2));return a});
Nm("PanelExpanderButton",function(a){var b=Om(a,"COLLAPSIBLE");a=am("Button",am(X,"TriangleUp",{xa:new ia(6,4)},(new cf("figure","visible",function(a){return a?"TriangleUp":"TriangleDown"})).ax(b)));var c=a.Yd("ButtonBorder");c instanceof X&&(c.stroke=null,c.fill="transparent");a.click=function(a,c){var f=c.g;if(null!==f&&!f.gb){var h=c.V.Yd(b);null!==h&&(f.Qb("Collapse/Expand Panel"),h.visible=!h.visible,f.wd("Collapse/Expand Panel"))}};return a});
Nm("CheckBoxButton",function(a){var b=Om(a);a=am("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},am(X,{name:"ButtonIcon",rH:"M0 4 L3 9 9 0",nb:2,stretch:ed,Hz:vh,visible:!1},""!==b?(new cf("visible",b)).fI():[]));a.click=function(a,d){if(!(a.g.gb||""!==b&&a.g.da.gb)){a.Nc=!0;var e=d.Yd("ButtonIcon");e.g.Qb("checkbox");e.visible=!e.visible;"function"===typeof d._doClick&&d._doClick(a,d);e.g.wd("checkbox")}};return a});
Nm("CheckBox",function(a){a=Om(a);a=am("CheckBoxButton",a,{name:"Button",margin:new tb(0,1,0,0)});var b=am(C,"Horizontal",a,{Nw:!0,margin:1,_buttonFillNormal:a._buttonFillNormal,_buttonStrokeNormal:a._buttonStrokeNormal,_buttonFillOver:a._buttonFillOver,_buttonStrokeOver:a._buttonStrokeOver,zt:a.zt,At:a.At,click:a.click,_buttonClick:a.click});a.zt=null;a.At=null;a.click=null;return b});
function ql(){this.ji=this.Hi=this.Op=this.Rp=this.Qp=this.Pp=this.wi=this.qr=this.pr=this.xi=this.yi=this.zi=this.sr=this.rr=this.ii=this.ni=this.fi=null}ql.prototype.copy=function(){var a=new ql;a.fi=this.fi;a.ni=this.ni;a.ii=this.ii;a.rr=this.rr;a.sr=this.sr;a.zi=this.zi;a.yi=this.yi;a.xi=this.xi;a.pr=this.pr;a.qr=this.qr;a.wi=this.wi;a.Pp=this.Pp;a.Qp=this.Qp;a.Rp=this.Rp;a.Op=this.Op;a.Hi=this.Hi;a.ji=this.ji;return a};
function C(a){R.call(this);void 0===a?0===arguments.length?this.ia=yh:v.k("invalid argument to Panel constructor: undefined"):(v.qb(a,C,C,"type"),this.ia=a);this.wa=new G(R);this.Re=K.Mp;this.Ig=!1;this.ia===kj&&(this.Ig=!0);this.Kq=!1;this.oq=yc;this.mi=ml;this.ia===Ql&&Pm(this);this.Ao=vh;this.Fq=(new ia(10,10)).freeze();this.Gq=K.fk;this.Kl=this.uh=null;this.Xq=NaN;this.ag=this.si=null;this.Yn="category";this.$f=null;this.Ji=new z(NaN,NaN,NaN,NaN);this.wm=null;this.Bh=!1;this.Wr=null}v.Ga(C,R);
v.Uh(C);v.ga("Panel",C);function Pm(a){a.fj=K.Mp;a.xh=1;a.li=null;a.Pl=null;a.wh=1;a.vh=null;a.Ol=null;a.Gd=[];a.Cd=[];a.qm=Qm;a.Ml=Qm;a.Ii=0;a.ui=0}
C.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.ia=this.ia;a.Re=this.Re.aa();a.Ig=this.Ig;a.Kq=this.Kq;a.oq=this.oq.aa();a.mi=this.mi;if(a.ia===Ql){a.fj=this.fj.aa();a.xh=this.xh;a.li=this.li;a.Pl=this.Pl;a.wh=this.wh;a.vh=this.vh;a.Ol=this.Ol;var b=[];if(0<this.Gd.length)for(var c=this.Gd,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var f=c[e].copy();f.Al(a);b[e]=f}a.Gd=b;b=[];if(0<this.Cd.length)for(c=this.Cd,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(f=c[e].copy(),f.Al(a),
b[e]=f);a.Cd=b;a.qm=this.qm;a.Ml=this.Ml;a.Ii=this.Ii;a.ui=this.ui}a.Ao=this.Ao;a.Fq.assign(this.Fq);a.Gq=this.Gq.aa();a.uh=this.uh;a.Kl=this.Kl;a.Xq=this.Xq;a.si=this.si;a.ag=this.ag;a.Yn=this.Yn;a.Ji.assign(this.Ji);a.Bh=this.Bh;null!==this.Wr&&(a.Wr=this.Wr)};C.prototype.Vh=function(a){R.prototype.Vh.call(this,a);a.wa=this.wa;for(var b=a.wa.n,c=b.length,d=0;d<c;d++)b[d].Pg=a;a.wm=null};
C.prototype.copy=function(){var a=R.prototype.copy.call(this);if(null!==a){for(var b=this.wa.n,c=b.length,d=0;d<c;d++){var e=b[d].copy(),f=a;e.Al(f);e.km=null;var h=f.wa,k=h.count;h.xd(k,e);h=f.V;if(null!==h){h.Mk=null;null!==e.Od&&h instanceof S&&(h.Bh=!0);var l=f.g;null!==l&&l.ja.ib||h.Ec(Qd,"elements",f,null,e,null,k)}}return a}return null};C.prototype.toString=function(){return"Panel("+this.type+")#"+v.cd(this)};var yh;C.Position=yh=v.p(C,"Position",0);C.Horizontal=v.p(C,"Horizontal",1);var fj;
C.Vertical=fj=v.p(C,"Vertical",2);var rh;C.Spot=rh=v.p(C,"Spot",3);var gj;C.Auto=gj=v.p(C,"Auto",4);var Ql;C.Table=Ql=v.p(C,"Table",5);C.Viewbox=v.p(C,"Viewbox",6);var Cl;C.TableRow=Cl=v.p(C,"TableRow",7);var Dl;C.TableColumn=Dl=v.p(C,"TableColumn",8);var dh;C.Link=dh=v.p(C,"Link",9);var kj;C.Grid=kj=v.p(C,"Grid",10);
v.defineProperty(C,{type:"type"},function(){return this.ia},function(a){var b=this.ia;b!==a&&(b!==Cl&&b!==Dl||v.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.ia=a,this.ia===kj?this.Ig=!0:this.ia===Ql&&Pm(this),this.P(),this.h("type",b,a))});v.u(C,{elements:"elements"},function(){return this.wa.i});v.u(C,{Fa:"naturalBounds"},function(){return this.Jc});
v.defineProperty(C,{padding:"padding"},function(){return this.Re},function(a){"number"===typeof a?(0>a&&v.ua(a,">= 0",C,"padding"),a=new tb(a)):(v.C(a,tb,C,"padding"),0>a.left&&v.ua(a.left,">= 0",C,"padding:value.left"),0>a.right&&v.ua(a.right,">= 0",C,"padding:value.right"),0>a.top&&v.ua(a.top,">= 0",C,"padding:value.top"),0>a.bottom&&v.ua(a.bottom,">= 0",C,"padding:value.bottom"));var b=this.Re;b.L(a)||(this.Re=a=a.aa(),this.P(),this.h("padding",b,a))});
v.defineProperty(C,{dl:"defaultAlignment"},function(){return this.oq},function(a){var b=this.oq;b.L(a)||(this.oq=a=a.aa(),this.P(),this.h("defaultAlignment",b,a))});v.defineProperty(C,{Hd:"defaultStretch"},function(){return this.mi},function(a){var b=this.mi;b!==a&&(v.qb(a,R,C,"defaultStretch"),this.mi=a,this.P(),this.h("defaultStretch",b,a))});
v.defineProperty(C,{eK:"defaultSeparatorPadding"},function(){return void 0===this.fj?K.Mp:this.fj},function(a){if(void 0!==this.fj){"number"===typeof a&&(a=new tb(a));var b=this.fj;b.L(a)||(this.fj=a=a.aa(),this.h("defaultSeparatorPadding",b,a))}});
v.defineProperty(C,{cK:"defaultRowSeparatorStroke"},function(){return void 0===this.li?null:this.li},function(a){var b=this.li;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.li=a,this.h("defaultRowSeparatorStroke",b,a))});v.defineProperty(C,{dK:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.xh?1:this.xh},function(a){if(void 0!==this.xh){var b=this.xh;b!==a&&isFinite(a)&&0<=a&&(this.xh=a,this.h("defaultRowSeparatorStrokeWidth",b,a))}});
v.defineProperty(C,{bK:"defaultRowSeparatorDashArray"},function(){return void 0===this.Pl?null:this.Pl},function(a){if(void 0!==this.Pl){var b=this.Pl;if(b!==a){null===a||Array.isArray(a)||v.Ad(a,"Array",C,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("defaultRowSeparatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Pl=a;this.pa();
this.h("defaultRowSeparatorDashArray",b,a)}}});v.defineProperty(C,{XJ:"defaultColumnSeparatorStroke"},function(){return void 0===this.vh?null:this.vh},function(a){if(void 0!==this.vh){var b=this.vh;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.vh=a,this.h("defaultColumnSeparatorStroke",b,a))}});
v.defineProperty(C,{YJ:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.wh?1:this.wh},function(a){if(void 0!==this.wh){var b=this.wh;b!==a&&isFinite(a)&&0<=a&&(this.wh=a,this.h("defaultColumnSeparatorStrokeWidth",b,a))}});
v.defineProperty(C,{WJ:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Ol?null:this.Ol},function(a){if(void 0!==this.Ol){var b=this.Ol;if(b!==a){null===a||Array.isArray(a)||v.Ad(a,"Array",C,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("defaultColumnSeparatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Ol=
a;this.pa();this.h("defaultColumnSeparatorDashArray",b,a)}}});v.defineProperty(C,{tL:"viewboxStretch"},function(){return this.Ao},function(a){var b=this.Ao;b!==a&&(v.qb(a,R,C,"viewboxStretch"),this.Ao=a,this.h("viewboxStretch",b,a))});
v.defineProperty(C,{Jw:"gridCellSize"},function(){return this.Fq},function(a){var b=this.Fq;b.L(a)||(v.C(a,ia,C,"gridCellSize"),a.H()&&0!==a.width&&0!==a.height||v.k("Invalid Panel.gridCellSize: "+a),this.Fq=a.aa(),null!==this.g&&this===this.g.ft&&Ej(this.g),this.pa(),this.h("gridCellSize",b,a))});
v.defineProperty(C,{hE:"gridOrigin"},function(){return this.Gq},function(a){var b=this.Gq;b.L(a)||(v.C(a,w,C,"gridOrigin"),a.H()||v.k("Invalid Panel.gridOrigin: "+a),this.Gq=a.aa(),null!==this.g&&Ej(this.g),this.pa(),this.h("gridOrigin",b,a))});g=C.prototype;g.uv=function(a){R.prototype.uv.call(this,a);for(var b=this.wa.n,c=b.length,d=0;d<c;d++)b[d].uv(a)};
g.Uj=function(a,b){if(this.ia===kj){var c=this.Si()*b.scale;0>=c&&(c=1);var d=this.Jw,e=d.width,d=d.height,f=this.Fa,h=f.width,f=f.height,k=Math.ceil(h/e),l=Math.ceil(f/d),m=this.hE;a.save();a.beginPath();a.rect(0,0,h,f);a.clip();for(var n=[],p=this.wa.n,q=p.length,r=0;r<q;r++){var s=p[r],t=[];n.push(t);if(s.visible)for(var s=ik(s.Cb),u=r+1;u<q;u++){var x=p[u];x.visible&&ik(x.Cb)===s&&(x=x.interval,2<=x&&t.push(x))}}p=this.wa.n;q=p.length;for(r=0;r<q;r++){var y=p[r];if(y.visible){var t=n[r],s=y.interval,
u=!1,A=!0,B=y.sF;null!==B&&(u=!0,void 0!==a.setLineDash?(a.setLineDash(B),a.lineDashOffset=y.nd):void 0!==a.webkitLineDash?(a.webkitLineDash=B,a.webkitLineDashOffset=y.nd):void 0!==a.mozDash?(a.mozDash=B,a.mozDashOffset=y.nd):A=!1);if("LineV"===y.Cb){a.lineWidth=y.nb;Jl(this,a,y.stroke,!1,!1);a.beginPath();for(var I=x=Math.floor(-m.x/e);I<=x+k;I++){var D=I*e+m.x;if(0<=D&&D<h&&Rm(I,s,t)&&(u&&!A?tl(a,D,0,D,f,B,y.nd):(a.moveTo(D,0),a.lineTo(D,f)),2>e*s*c))break}a.stroke()}else if("LineH"===y.Cb){a.lineWidth=
y.nb;Jl(this,a,y.stroke,!1,!1);a.beginPath();for(I=x=Math.floor(-m.y/d);I<=x+l&&!(D=I*d+m.y,0<=D&&D<=f&&Rm(I,s,t)&&(u&&!A?tl(a,0,D,h,D,B,y.nd):(a.moveTo(0,D),a.lineTo(h,D)),2>d*s*c));I++);a.stroke()}else if("BarV"===y.Cb)for(Jl(this,a,y.fill,!0,!1),y=y.width,isNaN(y)&&(y=e),I=x=Math.floor(-m.x/e);I<=x+k&&!(D=I*e+m.x,0<=D&&D<h&&Rm(I,s,t)&&(a.fillRect(D,0,y,f),2>e*s*c));I++);else if("BarH"===y.Cb)for(Jl(this,a,y.fill,!0,!1),y=y.height,isNaN(y)&&(y=d),I=x=Math.floor(-m.y/d);I<=x+l&&!(D=I*d+m.y,0<=D&&
D<=f&&Rm(I,s,t)&&(a.fillRect(0,D,h,y),2>d*s*c));I++);u&&(void 0!==a.setLineDash?(a.setLineDash(v.qh),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=v.qh,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0))}}a.restore();ij(b,a,!1)}else{this.ia===Ql&&(a.lineCap="butt",Sm(this,a,!0,this.Gd,!0),Sm(this,a,!1,this.Cd,!0),Tm(this,a,!0,this.Gd),Tm(this,a,!1,this.Cd),Sm(this,a,!0,this.Gd,!1),Sm(this,a,!1,this.Cd,!1));(c=this.qE)&&a.save();e=this.If();d=this.wa.n;
h=d.length;for(f=0;f<h;f++)k=d[f],c&&k===e&&(a.hu=!0),k.Ve(a,b),c&&k===e&&(a.hu=!1);c&&(a.restore(),ij(b,a,!1))}};
function Tm(a,b,c,d){for(var e=d.length,f=a.Z,h=c?a.bd(0):a.ad(0),k=0;k<e;k++){var l=d[k];if(void 0!==l&&l!==h&&0!==l.Ra){var m=l.Bp;isNaN(m)&&(m=c?a.xh:a.wh);var n=l.Ap;null===n&&(n=c?a.li:a.vh);if(0!==m&&null!==n){Jl(a,b,n,!1,!1);var n=!1,p=!0,q=l.TI;null!==q&&(n=!0,void 0!==b.setLineDash?(b.setLineDash(q),b.lineDashOffset=a.nd):void 0!==b.webkitLineDash?(b.webkitLineDash=q,b.webkitLineDashOffset=a.nd):void 0!==b.mozDash?(b.mozDash=q,b.mozDashOffset=a.nd):p=!1);b.beginPath();var r=l.position+m;
c?r>f.height&&(m-=r-f.height):r>f.width&&(m-=r-f.width);l=l.position+m/2;b.lineWidth=m;r=a.padding;c?(l+=r.top,m=r.left,r=f.width-r.right,n&&!p?tl(b,m,l,r,l,q,0):(b.moveTo(m,l),b.lineTo(r,l))):(l+=r.left,m=r.top,r=f.height-r.bottom,n&&!p?tl(b,l,m,l,r,q,0):(b.moveTo(l,m),b.lineTo(l,r)));b.stroke();n&&(void 0!==b.setLineDash?(b.setLineDash(v.qh),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=v.qh,b.webkitLineDashOffset=0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function Sm(a,b,c,d,e){for(var f=d.length,h=a.Z,k=0;k<f;k++){var l=d[k];if(void 0!==l&&null!==l.background&&l.Az!==e&&0!==l.Ra){var m=c?h.height:h.width;if(!(l.position>m)){var n=l.mg(),p=l.Bp;isNaN(p)&&(p=c?a.xh:a.wh);var q=l.Ap;null===q&&(q=c?a.li:a.vh);null===q&&(p=0);n-=p;p=l.position+p;n+=l.Ra;p+n>m&&(n=m-p);0>=n||(m=a.padding,Jl(a,b,l.background,!0,!1),c?b.fillRect(m.left,p+m.top,h.width-(m.left+m.right),n):b.fillRect(p+m.left,m.top,n,h.height-(m.top+m.bottom)))}}}}
function Rm(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function ik(a){return"LineV"===a||"BarV"===a}
g.Xo=function(a,b,c,d,e){var f=this.Vf(),h=this.transform,k=1/(h.m11*h.m22-h.m12*h.m21),l=h.m22*k,m=-h.m12*k,n=-h.m21*k,p=h.m11*k,q=k*(h.m21*h.dy-h.m22*h.dx),r=k*(h.m12*h.dx-h.m11*h.dy);if(null!==this.Cm)return h=this.Z,K.ml(h.left,h.top,h.right,h.bottom,a,b,c,d,e);if(null!==this.background)f=a*l+b*n+q,k=a*m+b*p+r,a=c*l+d*n+q,c=c*m+d*p+r,e.m(0,0),d=this.Fa,c=K.ml(0,0,d.width,d.height,f,k,a,c,e),e.transform(h);else{f||(l=1,n=m=0,p=1,r=q=0);k=a*l+b*n+q;a=a*m+b*p+r;l=c*l+d*n+q;d=c*m+d*p+r;e.m(l,d);m=
(l-k)*(l-k)+(d-a)*(d-a);c=!1;p=this.wa.n;r=p.length;n=v.M();for(q=0;q<r;q++)b=p[q],b.visible&&b.Xo(k,a,l,d,n)&&(c=!0,b=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),b<m&&(m=b,e.set(n)));v.v(n);f&&e.transform(h)}return c};g.P=function(a){R.prototype.P.call(this,a);this.ia===gj&&(a=this.If(),null!==a&&a.P(!0));a=this.wa.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Jj(d)&&(d.xa.H()||(d instanceof sh||d instanceof C||d instanceof ra||yl(d,!1)!==th)&&d.P(!0))}};
g.$o=function(){if(!1===Jj(this)){Dj(this,!0);Al(this,!0);for(var a=this.wa.n,b=a.length,c=0;c<b;c++)a[c].$o()}};g.pi=function(){if(0!==(this.fa&2048)===!1){Nl(this,!0);Ol(this,!0);for(var a=this.wa.n,b=a.length,c=0;c<b;c++)a[c].Oz()}};g.Oz=function(){Ol(this,!0);for(var a=this.wa.n,b=a.length,c=0;c<b;c++)a[c].Oz()};
g.ip=function(a,b,c,d){var e=this.Ji;e.width=0;e.height=0;var f=this.xa,h=this.ug;void 0===c&&(c=h.width,d=h.height);c=Math.max(c,h.width);d=Math.max(d,h.height);var k=this.af;isNaN(f.width)||(a=Math.min(f.width,k.width));isNaN(f.height)||(b=Math.min(f.height,k.height));a=Math.max(c,a);b=Math.max(d,b);var l=this.padding;a=Math.max(a-l.left-l.right,0);b=Math.max(b-l.top-l.bottom,0);var m=this.wa.n;if(0!==m.length){var n=this.ia.Ob;switch(n){case "Position":var p=a,q=b,r=c,s=d,t=m.length;e.x=0;e.y=
0;e.width=0;for(var u=e.height=0;u<t;u++){var x=m[u];if(x.visible||x===this.ac){var y=x.margin,A=y.right+y.left,B=y.top+y.bottom;Rh(x,p,q,r,s);var I=x.Ba,D=Math.max(I.width+A,0),V=Math.max(I.height+B,0),ba=x.position.x,U=x.position.y;isFinite(ba)||(ba=0);isFinite(U)||(U=0);if(x instanceof X){var N=x;if(N.sE)var Z=N.nb/2,ba=ba-Z,U=U-Z}rb(e,ba,U,D,V)}}break;case "Vertical":for(var Ga=a,ta=c,Pa=m.length,la=v.jb(),Ca=0;Ca<Pa;Ca++){var qa=m[Ca];if(qa.visible||qa===this.ac){var cc=yl(qa,!1);if(cc!==th&&
cc!==nl)la.push(qa);else{var id=qa.margin,Pf=id.right+id.left,dc=id.top+id.bottom;Rh(qa,Ga,Infinity,ta,0);var Ve=qa.Ba,Qf=Math.max(Ve.width+Pf,0),Ta=Math.max(Ve.height+dc,0);e.width=Math.max(e.width,Qf);e.height+=Ta}}}var fb=la.length;if(0!==fb){this.xa.width?Ga=Math.min(this.xa.width,this.af.width):0!==e.width&&(Ga=Math.min(e.width,this.af.width));for(Ca=0;Ca<fb;Ca++)if(qa=la[Ca],qa.visible||qa===this.ac)id=qa.margin,Pf=id.right+id.left,dc=id.top+id.bottom,Rh(qa,Ga,Infinity,ta,0),Ve=qa.Ba,Qf=Math.max(Ve.width+
Pf,0),Ta=Math.max(Ve.height+dc,0),e.width=Math.max(e.width,Qf),e.height+=Ta;v.ra(la)}break;case "Horizontal":for(var xa=b,za=d,kb=m.length,Hb=v.jb(),ab=0;ab<kb;ab++){var jc=m[ab];if(jc.visible||jc===this.ac){var ie=yl(jc,!1);if(ie!==th&&ie!==ol)Hb.push(jc);else{var qc=jc.margin,Rd=qc.right+qc.left,je=qc.top+qc.bottom;Rh(jc,Infinity,xa,0,za);var We=jc.Ba,qf=Math.max(We.width+Rd,0),Sd=Math.max(We.height+je,0);e.width+=qf;e.height=Math.max(e.height,Sd)}}}var Ib=Hb.length;if(0!==Ib){this.xa.height?xa=
Math.min(this.xa.height,this.af.height):0!==e.height&&(xa=Math.min(e.height,this.af.height));for(ab=0;ab<Ib;ab++)if(jc=Hb[ab],jc.visible||jc===this.ac)qc=jc.margin,Rd=qc.right+qc.left,je=qc.top+qc.bottom,Rh(jc,Infinity,xa,0,za),We=jc.Ba,qf=Math.max(We.width+Rd,0),Sd=Math.max(We.height+je,0),e.width+=qf,e.height=Math.max(e.height,Sd);v.ra(Hb)}break;case "Spot":a:{var Mb=a,Lc=b,Og=c,Nb=d,Bb=m.length,ec=this.If(),lb=ec.margin,Ae=0,Td=0,qg=lb.right+lb.left,Rf=lb.top+lb.bottom;Rh(ec,Mb,Lc,Og,Nb);var Cb=
ec.Ba,jd=Cb.width,rc=Cb.height,yb=Math.max(jd+qg,0),Mc=Math.max(rc+Rf,0);e.x=-lb.left;e.y=-lb.top;e.width=yb;e.height=Mc;for(var Ob=0;Ob<Bb;Ob++){var Na=m[Ob];if(Na!==ec&&(Na.visible||Na===this.ac)){lb=Na.margin;Ae=lb.right+lb.left;Td=lb.top+lb.bottom;Rh(Na,Mb,Lc,0,0);var Cb=Na.Ba,yb=Math.max(Cb.width+Ae,0),Mc=Math.max(Cb.height+Td,0),gb=Na.alignment;gb.Oc()&&(gb=this.dl);gb.yd()||(gb=Kb);var Db=Na.Pj;Db.Oc()&&(Db=Kb);rb(e,gb.x*jd+gb.offsetX-(Db.x*Cb.width-Db.offsetX)-lb.left,gb.y*rc+gb.offsetY-(Db.y*
Cb.height-Db.offsetY)-lb.top,yb,Mc)}}var fc=ec.stretch;fc===ml&&(fc=yl(ec,!1));switch(fc){case th:break a;case ed:if(!isFinite(Mb)&&!isFinite(Lc))break a;break;case ol:if(!isFinite(Mb))break a;break;case nl:if(!isFinite(Lc))break a}Cb=ec.Ba;jd=Cb.width;rc=Cb.height;yb=Math.max(jd+qg,0);Mc=Math.max(rc+Rf,0);lb=ec.margin;e.x=-lb.left;e.y=-lb.top;e.width=yb;e.height=Mc;for(Ob=0;Ob<Bb;Ob++)Na=m[Ob],Na===ec||!Na.visible&&Na!==this.ac||(lb=Na.margin,Ae=lb.right+lb.left,Td=lb.top+lb.bottom,Cb=Na.Ba,yb=Math.max(Cb.width+
Ae,0),Mc=Math.max(Cb.height+Td,0),gb=Na.alignment,gb.Oc()&&(gb=this.dl),gb.yd()||(gb=Kb),Db=Na.Pj,Db.Oc()&&(Db=Kb),rb(e,gb.x*jd+gb.offsetX-(Db.x*Cb.width-Db.offsetX)-lb.left,gb.y*rc+gb.offsetY-(Db.y*Cb.height-Db.offsetY)-lb.top,yb,Mc))}break;case "Auto":var Ud=a,Vd=b,rf=c,Be=d,sf=m.length,Sb=this.If(),db=Sb.margin,sc=db.right+db.left,Yc=db.top+db.bottom;Rh(Sb,Ud,Vd,rf,Be);var kd=Sb.Ba,bb=Math.max(kd.width+sc,0),vb=Math.max(kd.height+Yc,0),kc=Um(Sb),ld=kc.x*bb+kc.offsetX,Pg=kc.y*vb+kc.offsetY,kc=Vm(Sb),
Qg=kc.x*bb+kc.offsetX,Rg=kc.y*vb+kc.offsetY,Sf=Ud,Nc=Vd;isFinite(Ud)&&(Sf=Math.abs(ld-Qg));isFinite(Vd)&&(Nc=Math.abs(Pg-Rg));var Zc=v.El();Zc.m(0,0);for(var Oc=0;Oc<sf;Oc++){var mb=m[Oc];if(mb!==Sb&&(mb.visible||mb===this.ac)){var db=mb.margin,ke=db.right+db.left,nb=db.top+db.bottom;Rh(mb,Sf,Nc,0,0);kd=mb.Ba;bb=Math.max(kd.width+ke,0);vb=Math.max(kd.height+nb,0);Zc.m(Math.max(bb,Zc.width),Math.max(vb,Zc.height))}}if(1===sf)e.width=bb,e.height=vb,v.Wj(Zc);else{var Ec=Um(Sb),Ce=Vm(Sb),Eb=0,Fb=0;Ce.x!==
Ec.x&&Ce.y!==Ec.y&&(Eb=Zc.width/Math.abs(Ce.x-Ec.x),Fb=Zc.height/Math.abs(Ce.y-Ec.y));v.Wj(Zc);var md=0;if(Sb instanceof X){var $c=Sb,md=$c.nb*$c.scale;uh($c)===vh&&(Eb=Fb=Math.max(Eb,Fb))}var Eb=Eb+(Math.abs(Ec.offsetX)+Math.abs(Ce.offsetX)+md),Fb=Fb+(Math.abs(Ec.offsetY)+Math.abs(Ce.offsetY)+md),Wd=Sb.stretch;Wd===ml&&(Wd=yl(Sb,!1));switch(Wd){case th:Be=rf=0;break;case ed:isFinite(Ud)&&(Eb=Ud);isFinite(Vd)&&(Fb=Vd);break;case ol:isFinite(Ud)&&(Eb=Ud);Be=0;break;case nl:rf=0,isFinite(Vd)&&(Fb=Vd)}Sb instanceof
X&&!Sb.xa.H()&&($c=Sb,$c.Qg?$c.tk=null:$c.Ta=null);Sb.$o();Rh(Sb,Eb,Fb,rf,Be);e.width=Sb.Ba.width+sc;e.height=Sb.Ba.height+Yc}break;case "Table":for(var Xd=a,Xe=b,um=c,Di=d,Ea=m.length,De=v.jb(),Yd=v.jb(),da=0;da<Ea;da++){var ca=m[da],rg=ca instanceof C?ca:null;if(null===rg||rg.type!==Cl&&rg.type!==Dl||!ca.visible)De.push(ca);else{Yd.push(ca);for(var Sg=rg.wa.n,Ih=Sg.length,ad=0;ad<Ih;ad++){var Jh=Sg[ad];rg.type===Cl?Jh.bc=ca.bc:rg.type===Dl&&(Jh.column=ca.column);De.push(Jh)}}}Ea=De.length;0===Ea&&
(this.bd(0),this.ad(0));for(var Tb=[],da=0;da<Ea;da++)ca=De[da],Dj(ca,!0),Al(ca,!0),Tb[ca.bc]||(Tb[ca.bc]=[]),Tb[ca.bc][ca.column]||(Tb[ca.bc][ca.column]=[]),Tb[ca.bc][ca.column].push(ca);v.ra(De);for(var Tg=v.jb(),bd=v.jb(),le=v.jb(),Pc={count:0},nd={count:0},Fc=Xd,od=Xe,Tf=this.Gd,Ea=Tf.length,da=0;da<Ea;da++){var aa=Tf[da];void 0!==aa&&(aa.Ra=0)}Tf=this.Cd;Ea=Tf.length;for(da=0;da<Ea;da++)aa=Tf[da],void 0!==aa&&(aa.Ra=0);for(var me=Tb.length,Ee=0,da=0;da<me;da++)Tb[da]&&(Ee=Math.max(Ee,Tb[da].length));
for(var dk=Math.min(this.Ii,me-1),ek=Math.min(this.ui,Ee-1),Gc=0,me=Tb.length,da=dk;da<me;da++)if(Tb[da]){var Ee=Tb[da].length,hb=this.bd(da);hb.Ra=0;for(ad=ek;ad<Ee;ad++)if(Tb[da][ad]){var ib=this.ad(ad);void 0===Tg[ad]&&(ib.Ra=0,Tg[ad]=!0);for(var fk=Tb[da][ad],Uf=fk.length,sg=0;sg<Uf;sg++)if(ca=fk[sg],ca.visible||ca===this.ac){var tg=1<ca.Di||1<ca.hi;tg&&bd.push(ca);var Pb=ca.margin,Vf=Pb.right+Pb.left,Wf=Pb.top+Pb.bottom,Zd=Rl(ca,hb,ib,!1),ne=ca.xa,vm=!isNaN(ne.height),Kh=!isNaN(ne.width)&&vm;
tg||Zd===th||Kh||(void 0===Pc[ad]&&(Pc[ad]=-1,Pc.count++),void 0===nd[da]&&(nd[da]=-1,nd.count++),le.push(ca));Rh(ca,Infinity,Infinity,0,0);var Fe=ca.Ba,Ge=Math.max(Fe.width+Vf,0),pd=Math.max(Fe.height+Wf,0);1!==ca.Di||Zd!==th&&Zd!==ol||(aa=this.bd(da),Gc=Math.max(pd-aa.Ra,0),Gc>od&&(Gc=od),aa.Ra+=Gc,od=Math.max(od-Gc,0));1!==ca.hi||Zd!==th&&Zd!==nl||(aa=this.ad(ad),Gc=Math.max(Ge-aa.Ra,0),Gc>Fc&&(Gc=Fc),aa.Ra+=Gc,Fc=Math.max(Fc-Gc,0));tg&&ca.$o()}}}v.ra(Tg);for(var tc=0,$d=0,Ea=this.Ko,da=0;da<Ea;da++)void 0!==
this.Cd[da]&&(tc+=this.ad(da).ab);Ea=this.zp;for(da=0;da<Ea;da++)void 0!==this.Gd[da]&&($d+=this.bd(da).ab);for(var Fc=Math.max(Xd-tc,0),gk=od=Math.max(Xe-$d,0),hk=Fc,Ea=le.length,da=0;da<Ea;da++){var ca=le[da],hb=this.bd(ca.bc),ib=this.ad(ca.column),Ei=ca.Ba,Pb=ca.margin,Vf=Pb.right+Pb.left,Wf=Pb.top+Pb.bottom;Pc[ca.column]=0===ib.Ra?Math.max(Ei.width+Vf,Pc[ca.column]):null;nd[ca.bc]=0===hb.Ra?Math.max(Ei.height+Wf,nd[ca.bc]):null}var Ug=0,uc=0;for(da in nd)"count"!==da&&(Ug+=nd[da]);for(da in Pc)"count"!==
da&&(uc+=Pc[da]);for(var ob=v.El(),da=0;da<Ea;da++)if(ca=le[da],ca.visible||ca===this.ac){var hb=this.bd(ca.bc),ib=this.ad(ca.column),oe=0;isFinite(ib.width)?oe=ib.width:(oe=isFinite(Fc)&&null!==Pc[ca.column]?0===uc?ib.Ra+Fc:Pc[ca.column]/uc*hk:null!==Pc[ca.column]?Fc:ib.Ra||Fc,oe=Math.max(0,oe-ib.mg()));var Qc=0;isFinite(hb.height)?Qc=hb.height:(Qc=isFinite(od)&&null!==nd[ca.bc]?0===Ug?hb.Ra+od:nd[ca.bc]/Ug*gk:null!==nd[ca.bc]?od:hb.Ra||od,Qc=Math.max(0,Qc-hb.mg()));ob.m(Math.max(ib.Vi,Math.min(oe,
ib.bf)),Math.max(hb.Vi,Math.min(Qc,hb.bf)));Zd=Rl(ca,hb,ib,!1);switch(Zd){case ol:ob.height=Infinity;break;case nl:ob.width=Infinity}Pb=ca.margin;Vf=Pb.right+Pb.left;Wf=Pb.top+Pb.bottom;ca.$o();Rh(ca,ob.width,ob.height,ib.Vi,hb.Vi);Fe=ca.Ba;Ge=Math.max(Fe.width+Vf,0);pd=Math.max(Fe.height+Wf,0);isFinite(Fc)&&(Ge=Math.min(Ge,ob.width));isFinite(od)&&(pd=Math.min(pd,ob.height));var Vg=0,Vg=hb.Ra;hb.Ra=Math.max(hb.Ra,pd);Gc=hb.Ra-Vg;od=Math.max(od-Gc,0);Vg=ib.Ra;ib.Ra=Math.max(ib.Ra,Ge);Gc=ib.Ra-Vg;
Fc=Math.max(Fc-Gc,0)}v.ra(le);for(var pe=v.El(),Ea=bd.length,da=0;da<Ea;da++)if(ca=bd[da],ca.visible||ca===this.ac){hb=this.bd(ca.bc);ib=this.ad(ca.column);ob.m(Math.max(ib.Vi,Math.min(Xd,ib.bf)),Math.max(hb.Vi,Math.min(Xe,hb.bf)));Zd=Rl(ca,hb,ib,!1);switch(Zd){case ed:0!==ib.Ra&&(ob.width=Math.min(ob.width,ib.Ra));0!==hb.Ra&&(ob.height=Math.min(ob.height,hb.Ra));break;case ol:0!==ib.Ra&&(ob.width=Math.min(ob.width,ib.Ra));break;case nl:0!==hb.Ra&&(ob.height=Math.min(ob.height,hb.Ra))}isFinite(ib.width)&&
(ob.width=ib.width);isFinite(hb.height)&&(ob.height=hb.height);pe.m(0,0);for(var cb=1;cb<ca.Di&&!(ca.bc+cb>=this.zp);cb++)aa=this.bd(ca.bc+cb),pe.height+=Math.max(aa.Vi,isNaN(aa.Se)?aa.bf:Math.min(aa.Se,aa.bf));for(cb=1;cb<ca.hi&&!(ca.column+cb>=this.Ko);cb++)aa=this.ad(ca.column+cb),pe.width+=Math.max(aa.Vi,isNaN(aa.Se)?aa.bf:Math.min(aa.Se,aa.bf));ob.width+=pe.width;ob.height+=pe.height;Pb=ca.margin;Vf=Pb.right+Pb.left;Wf=Pb.top+Pb.bottom;Rh(ca,ob.width,ob.height,um,Di);for(var Fe=ca.Ba,Ge=Math.max(Fe.width+
Vf,0),pd=Math.max(Fe.height+Wf,0),Wg=0,cb=0;cb<ca.Di&&!(ca.bc+cb>=this.zp);cb++)aa=this.bd(ca.bc+cb),Wg+=aa.total||0;if(Wg<pd){var gc=pd-Wg,tf=pd-Wg;if(null!==ca.zx)for(var ug=ca.zx,cb=0;cb<ca.Di&&!(0>=gc)&&!(ca.bc+cb>=this.zp);cb++){var aa=this.bd(ca.bc+cb),vc=aa.ab||0,vg=ug(ca,aa,tf);aa.Ra=Math.min(aa.bf,vc+vg);aa.ab!==vc&&(gc-=aa.ab-vc)}for(;0<gc;){vc=aa.ab||0;isNaN(aa.height)&&aa.bf>vc&&(aa.Ra=Math.min(aa.bf,vc+gc),aa.ab!==vc&&(gc-=aa.ab-vc));if(0===aa.index)break;aa=this.bd(aa.index-1)}}for(var qd=
0,cb=0;cb<ca.hi&&!(ca.column+cb>=this.Ko);cb++)aa=this.ad(ca.column+cb),qd+=aa.total||0;if(qd<Ge){gc=Ge-qd;tf=Ge-qd;if(null!==ca.zx)for(ug=ca.zx,cb=0;cb<ca.hi&&!(0>=gc)&&!(ca.column+cb>=this.Ko);cb++)aa=this.ad(ca.column+cb),vc=aa.ab||0,vg=ug(ca,aa,tf),aa.Ra=Math.min(aa.bf,vc+vg),aa.ab!==vc&&(gc-=aa.ab-vc);for(;0<gc;){vc=aa.ab||0;isNaN(aa.width)&&aa.bf>vc&&(aa.Ra=Math.min(aa.bf,vc+gc),aa.ab!==vc&&(gc-=aa.ab-vc));if(0===aa.index)break;aa=this.ad(aa.index-1)}}}v.ra(bd);v.Wj(pe);v.Wj(ob);for(var qe=
0,uf=0,Zd=yl(this,!0),Ye=this.xa,Fi=this.af,Ed=$d=tc=0,Rc=0,Ea=this.Ko,da=0;da<Ea;da++)void 0!==this.Cd[da]&&(aa=this.ad(da),isFinite(aa.width)?(Ed+=aa.width,Ed+=aa.mg()):Wm(aa)===Xm?(Ed+=aa.ab,Ed+=aa.mg()):0!==aa.ab&&(tc+=aa.ab,tc+=aa.mg()));var qe=isFinite(Ye.width)?Math.min(Ye.width,Fi.width):Zd!==th&&isFinite(Xd)?Xd:tc,qe=Math.max(qe,this.ug.width),qe=Math.max(qe-Ed,0),Yg=Math.max(qe/tc,1);isFinite(Yg)||(Yg=1);for(da=0;da<Ea;da++)void 0!==this.Cd[da]&&(aa=this.ad(da),isFinite(aa.width)||Wm(aa)===
Xm||(aa.Ra=aa.ab*Yg),aa.position=e.width,0!==aa.ab&&(e.width+=aa.ab,e.width+=aa.mg()));Ea=this.zp;for(da=0;da<Ea;da++)void 0!==this.Gd[da]&&(aa=this.bd(da),isFinite(aa.height)?(Rc+=aa.height,Rc+=aa.mg()):Wm(aa)===Xm?(Rc+=aa.ab,Rc+=aa.mg()):0!==aa.ab&&($d+=aa.ab,$d+=aa.mg()));var uf=isFinite(Ye.height)?Math.min(Ye.height,Fi.height):Zd!==th&&isFinite(Xe)?Xe:$d,uf=Math.max(uf,this.ug.height),uf=Math.max(uf-Rc,0),Zg=Math.max(uf/$d,1);isFinite(Zg)||(Zg=1);for(da=0;da<Ea;da++)void 0!==this.Gd[da]&&(aa=
this.bd(da),isFinite(aa.height)||Wm(aa)===Xm||(aa.Ra=aa.ab*Zg),aa.position=e.height,0!==aa.ab&&(e.height+=aa.ab,e.height+=aa.mg()));Ea=Yd.length;for(da=0;da<Ea;da++){var hc=Yd[da];hc.type===Cl?(oe=e.width,aa=this.bd(hc.bc),Qc=aa.Ra):(aa=this.ad(hc.column),oe=aa.Ra,Qc=e.height);hc.Vc.m(0,0,oe,Qc);Dj(hc,!1);Tb[hc.bc]||(Tb[hc.bc]=[]);Tb[hc.bc][hc.column]||(Tb[hc.bc][hc.column]=[]);Tb[hc.bc][hc.column].push(hc)}v.ra(Yd);this.Wr=Tb;break;case "Viewbox":var $g=a,jk=b,Sp=c,Tp=d;1<m.length&&v.k("Viewbox Panel cannot contain more than one GraphObject.");
var He=m[0];He.Tb=1;He.$o();Rh(He,Infinity,Infinity,Sp,Tp);var Gi=He.Ba,kk=He.margin,Up=kk.right+kk.left,Vp=kk.top+kk.bottom;if(isFinite($g)||isFinite(jk)){var Tr=He.scale,lk=Gi.width,mk=Gi.height,Wp=Math.max($g-Up,0),Xp=Math.max(jk-Vp,0),Hi=1;this.Ao===vh?0!==lk&&0!==mk&&(Hi=Math.min(Wp/lk,Xp/mk)):0!==lk&&0!==mk&&(Hi=Math.max(Wp/lk,Xp/mk));0===Hi&&(Hi=1E-4);He.Tb*=Hi;Tr!==He.scale&&(Dj(He,!0),Rh(He,Infinity,Infinity,Sp,Tp))}Gi=He.Ba;e.width=isFinite($g)?$g:Math.max(Gi.width+Up,0);e.height=isFinite(jk)?
jk:Math.max(Gi.height+Vp,0);break;case "Link":var Yp=m.length,wg=this instanceof mf?this.Sh:this;if(wg instanceof W)if(0===Yp){var nk=this.Jc;eb(nk,0,0);var ae=this.Ba;ae.m(0,0,0,0)}else{var ok=this instanceof mf?null:wg.path,Ze=wg.cn,Ie=this.Ji;Ie.assign(Ze);Ie.x=0;var Lh=Ie.y=0,Ii=wg.points,Lh=void 0!==this.ma?this.ma:Ii.count;this.Kg.m(Ze.x,Ze.y);this.ej.clear();null!==ok&&(Ym(ok,Ze.width,Ze.height),ae=ok.Ba,Ie.bi(ae),this.ej.add(ae));for(var Mh=v.nh(),Ji=v.M(),Xf=v.M(),wm=0;wm<Yp;wm++){var Qb=
m[wm];if(Qb!==ok)if(Qb.Lf&&Qb instanceof X)Ym(Qb,Ze.width,Ze.height),ae=Qb.Ba,Ie.bi(ae),this.ej.add(ae);else if(2>Lh)Rh(Qb,Infinity,Infinity),ae=Qb.Ba,Ie.bi(ae),this.ej.add(ae);else{var Yf=Qb.pe,$p=Qb.qx,xm=Qb.Pj;xm.me()&&(xm=Kb);var Ki=Qb.Pt,Ur=Qb.hF,Li=0,Mi=0,pk=0;if(Yf<-Lh||Yf>=Lh){var aq=wg.HE,Ni=wg.GE;Ki!==gh&&(pk=wg.computeAngle(Qb,Ki,Ni),Qb.angle=pk);Li=aq.x-Ze.x;Mi=aq.y-Ze.y}else{var vf,Nh;if(0<=Yf)vf=Ii.ha(Yf),Nh=Yf<Lh-1?Ii.ha(Yf+1):vf;else{var ym=Lh+Yf;vf=Ii.ha(ym);Nh=0<ym?Ii.ha(ym-1):vf}Ni=
0<=Yf?vf.Wg(Nh):Nh.Wg(vf);Ki!==gh&&(pk=wg.computeAngle(Qb,Ki,Ni),Qb.on=pk);Li=vf.x+(Nh.x-vf.x)*$p-Ze.x;Mi=vf.y+(Nh.y-vf.y)*$p-Ze.y}Rh(Qb,Infinity,Infinity);var ae=Qb.Ba,nk=Qb.Fa,Oi=0;Qb instanceof X&&(Oi=Qb.nb);var qk=nk.width+Oi,zm=nk.height+Oi;Mh.reset();Mh.translate(-ae.x,-ae.y);Mh.scale(Qb.scale,Qb.scale);Mh.rotate(Ki===gh?Qb.angle:Ni,qk/2,zm/2);var Oh=new z(0,0,qk,zm);Ji.St(Oh,xm);Mh.xb(Ji);var Vr=-Ji.x+Oi/2,Wr=-Ji.y+Oi/2;Xf.assign(Ur);isNaN(Xf.x)&&(Xf.x=0<=Yf?qk/2+3:-(qk/2+3));isNaN(Xf.y)&&
(Xf.y=-(zm/2+3));Xf.rotate(Ni);Li+=Xf.x;Mi+=Xf.y;Oh.set(ae);Oh.x=Li+Vr;Oh.y=Mi+Wr;this.ej.add(Oh);Ie.bi(Oh)}}if(this.we)for(var bq=this.Mf;bq.next();)Rh(bq.value,Infinity,Infinity);this.Ji=Ie;var Am=this.Kg;Am.m(Am.x+Ie.x,Am.y+Ie.y);eb(e,Ie.width||0,Ie.height||0);v.Xe(Mh);v.v(Ji);v.v(Xf)}break;case "Grid":break;case "TableRow":case "TableColumn":v.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:v.k("Unknown panel type: "+
n)}}var Je=e.width,Ke=e.height,rk=this.padding,Xr=rk.top+rk.bottom,Je=Je+(rk.left+rk.right),Ke=Ke+Xr;isFinite(f.width)&&(Je=f.width);isFinite(f.height)&&(Ke=f.height);Je=Math.min(k.width,Je);Ke=Math.min(k.height,Ke);Je=Math.max(h.width,Je);Ke=Math.max(h.height,Ke);Je=Math.max(c,Je);Ke=Math.max(d,Ke);e.width=Je;e.height=Ke;eb(this.Jc,Je,Ke);vl(this,0,0,Je,Ke)};
C.prototype.findMainElement=C.prototype.If=function(){if(null===this.wm){var a=this.wa.n,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.Lf)return this.wm=d}this.wm=a[0]}return this.wm};
C.prototype.Li=function(a,b,c,d){var e=this.Ji,f=this.wa.n,h=v.ek(0,0,0,0);if(0===f.length){var k=this.Z;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.xa.H()){var l=yl(this,!0),m=this.Vc,n=m.width,p=m.height,q=this.margin,r=q.left+q.right,s=q.top+q.bottom;n===c&&p===d&&(l=th);switch(l){case th:if(n>c||p>d)this.P(),Rh(this,n>c?c:n,p>d?d:p);break;case ed:this.P(!0);Rh(this,c+r,d+s,0,0);break;case ol:this.P(!0);Rh(this,c+r,p+s,0,0);break;case nl:this.P(!0),Rh(this,n+r,d+s,0,0)}}k=this.Z;k.x=a;k.y=b;
k.width=c;k.height=d;var t=this.ia.Ob;switch(t){case "Position":for(var u=f.length,x=e.x-this.padding.left,y=e.y-this.padding.top,A=0;A<u;A++){var B=f[A],I=B.Ba,D=B.margin,V=B.position.x,ba=B.position.y;h.x=isNaN(V)?-x:V-x;h.y=isNaN(ba)?-y:ba-y;if(B instanceof X){var U=B;if(U.sE){var N=U.nb/2;h.x-=N;h.y-=N}}h.x+=D.left;h.y+=D.top;h.width=I.width;h.height=I.height;B.visible&&B.zc(h.x,h.y,h.width,h.height)}break;case "Vertical":for(var Z=f.length,Ga=this.padding.left,ta=this.padding.top,Pa=0;Pa<Z;Pa++){var la=
Ga,Ca=f[Pa];if(Ca.visible){var qa=Ca.Ba,cc=Ca.margin,id=cc.left+cc.right,Pf=Ga+this.padding.right,dc=qa.width,Ve=yl(Ca,!1);if(isNaN(Ca.xa.width)&&Ve===ed||Ve===ol)dc=Math.max(e.width-id-Pf,0);var Qf=dc+id+Pf,Ta=Ca.alignment;Ta.Oc()&&(Ta=this.dl);Ta.yd()||(Ta=Kb);Ca.zc(la+Ta.offsetX+cc.left+(e.width*Ta.x-Qf*Ta.x),ta+Ta.offsetY+cc.top,dc,qa.height);ta+=qa.height+cc.bottom+cc.top}}break;case "Horizontal":for(var fb=f.length,xa=this.padding.top,za=this.padding.left,kb=0;kb<fb;kb++){var Hb=xa,ab=f[kb];
if(ab.visible){var jc=ab.Ba,ie=ab.margin,qc=ie.top+ie.bottom,Rd=xa+this.padding.bottom,je=jc.height,We=yl(ab,!1);if(isNaN(ab.xa.height)&&We===ed||We===nl)je=Math.max(e.height-qc-Rd,0);var qf=je+qc+Rd,Sd=ab.alignment;Sd.Oc()&&(Sd=this.dl);Sd.yd()||(Sd=Kb);ab.zc(za+Sd.offsetX+ie.left,Hb+Sd.offsetY+ie.top+(e.height*Sd.y-qf*Sd.y),jc.width,je);za+=jc.width+ie.left+ie.right}}break;case "Spot":var Ib=f.length,Mb=this.If(),Lc=Mb.Ba,Og=Lc.width,Nb=Lc.height,Bb=this.padding,ec=Bb.left,lb=Bb.top;h.x=ec-e.x;
h.y=lb-e.y;Mb.zc(h.x,h.y,Og,Nb);for(var Ae=0;Ae<Ib;Ae++){var Td=f[Ae];if(Td!==Mb){var qg=Td.Ba,Rf=qg.width,Cb=qg.height,jd=Td.alignment;jd.Oc()&&(jd=this.dl);jd.yd()||(jd=Kb);var rc=Td.Pj;rc.Oc()&&(rc=Kb);h.x=jd.x*Og+jd.offsetX-(rc.x*Rf-rc.offsetX);h.y=jd.y*Nb+jd.offsetY-(rc.y*Cb-rc.offsetY);h.x-=e.x;h.y-=e.y;Td.visible&&Td.zc(ec+h.x,lb+h.y,Rf,Cb)}}break;case "Auto":var yb=f.length,Mc=this.If(),Ob=Mc.Ba,Na=v.Uf();Na.m(0,0,1,1);var gb=Mc.margin,Db=gb.left,fc=gb.top,Ud=this.padding,Vd=Ud.left,rf=Ud.top;
h.x=Db;h.y=fc;h.width=Ob.width;h.height=Ob.height;Mc.zc(Vd+h.x,rf+h.y,h.width,h.height);var Be=Um(Mc),sf=Vm(Mc),Sb=0+Be.y*Ob.height+Be.offsetY,db=0+sf.x*Ob.width+sf.offsetX,sc=0+sf.y*Ob.height+sf.offsetY;Na.x=0+Be.x*Ob.width+Be.offsetX;Na.y=Sb;rb(Na,db,sc,0,0);Na.x+=Db+Vd;Na.y+=fc+rf;for(var Yc=0;Yc<yb;Yc++){var kd=f[Yc];if(kd!==Mc){var bb=kd.Ba,gb=kd.margin,vb=Math.max(bb.width+gb.right+gb.left,0),kc=Math.max(bb.height+gb.top+gb.bottom,0),ld=kd.alignment;ld.Oc()&&(ld=this.dl);ld.yd()||(ld=Kb);h.x=
Na.width*ld.x+ld.offsetX-vb*ld.x+gb.left+Na.x;h.y=Na.height*ld.y+ld.offsetY-kc*ld.y+gb.top+Na.y;h.width=Na.width;h.height=Na.height;kd.visible&&(sb(Na.x,Na.y,Na.width,Na.height,h.x,h.y,bb.width,bb.height)?kd.zc(h.x,h.y,bb.width,bb.height):kd.zc(h.x,h.y,bb.width,bb.height,new z(Na.x,Na.y,Na.width,Na.height)))}}v.fc(Na);break;case "Table":for(var Pg=f.length,Qg=this.padding,Rg=Qg.left,Sf=Qg.top,Nc=this.Wr,Zc=0,Oc=0,mb=Nc.length,ke=0,nb=0;nb<mb;nb++)Nc[nb]&&(ke=Math.max(ke,Nc[nb].length));for(var Ec=
Math.min(this.Ii,mb-1);Ec!==mb&&(void 0===this.Gd[Ec]||0===this.Gd[Ec].ab);)Ec++;for(var Ec=Math.min(Ec,mb-1),Ce=-this.Gd[Ec].Xa,Eb=Math.min(this.ui,ke-1);Eb!==ke&&(void 0===this.Cd[Eb]||0===this.Cd[Eb].ab);)Eb++;for(var Eb=Math.min(Eb,ke-1),Fb=-this.Cd[Eb].Xa,md=v.El(),nb=0;nb<mb;nb++)if(Nc[nb])for(var ke=Nc[nb].length,$c=this.bd(nb),Oc=$c.Xa+Ce+Sf+$c.GD(),Wd=0;Wd<ke;Wd++)if(Nc[nb][Wd])for(var Xd=this.ad(Wd),Zc=Xd.Xa+Fb+Rg+Xd.GD(),Xe=Nc[nb][Wd],um=Xe.length,Di=0;Di<um;Di++){var Ea=Xe[Di],De=Ea.Ba,
Yd=Ea instanceof C?Ea:null;if(null===Yd||Yd.type!==Cl&&Yd.type!==Dl){md.m(0,0);for(var da=1;da<Ea.rowSpan&&!(nb+da>=this.zp);da++){var ca=this.bd(nb+da);md.height+=ca.total}for(da=1;da<Ea.JG&&!(Wd+da>=this.Ko);da++){var rg=this.ad(Wd+da);md.width+=rg.total}var Sg=Xd.ab+md.width,Ih=$c.ab+md.height;h.x=Zc;h.y=Oc;h.width=Sg;h.height=Ih;var ad=Zc,Jh=Oc,Tb=Sg,Tg=Ih;Zc+Sg>e.width&&(Tb=Math.max(e.width-Zc,0));Oc+Ih>e.height&&(Tg=Math.max(e.height-Oc,0));var bd=Ea.alignment,le=0,Pc=0,nd=0,Fc=0;if(bd.Oc()){bd=
this.dl;bd.yd()||(bd=Kb);var le=bd.x,Pc=bd.y,nd=bd.offsetX,Fc=bd.offsetY,od=Xd.alignment,Tf=$c.alignment;od.yd()&&(le=od.x,nd=od.offsetX);Tf.yd()&&(Pc=Tf.y,Fc=Tf.offsetY)}else le=bd.x,Pc=bd.y,nd=bd.offsetX,Fc=bd.offsetY;if(isNaN(le)||isNaN(Pc))Pc=le=.5,Fc=nd=0;var aa=De.width,me=De.height,Ee=Ea.margin,dk=Ee.left+Ee.right,ek=Ee.top+Ee.bottom,Gc=Rl(Ea,$c,Xd,!1);!isNaN(Ea.xa.width)||Gc!==ed&&Gc!==ol||(aa=Math.max(Sg-dk,0));!isNaN(Ea.xa.height)||Gc!==ed&&Gc!==nl||(me=Math.max(Ih-ek,0));var hb=Ea.af,ib=
Ea.ug,aa=Math.min(hb.width,aa),me=Math.min(hb.height,me),aa=Math.max(ib.width,aa),me=Math.max(ib.height,me),fk=me+ek;h.x+=h.width*le-(aa+dk)*le+nd+Ee.left;h.y+=h.height*Pc-fk*Pc+Fc+Ee.top;Ea.visible&&(sb(ad,Jh,Tb,Tg,h.x,h.y,De.width,De.height)?Ea.zc(h.x,h.y,aa,me):Ea.zc(h.x,h.y,aa,me,new z(ad,Jh,Tb,Tg)))}else{Ea.pi();Ea.kc.Na();var Uf=Ea.kc;Uf.x=Yd.type===Cl?Rg:Zc;Uf.y=Yd.type===Dl?Sf:Oc;Uf.width=De.width;Uf.height=De.height;Ea.kc.freeze();Al(Ea,!1)}}v.Wj(md);for(nb=0;nb<Pg;nb++)Ea=f[nb],Yd=Ea instanceof
C?Ea:null,null===Yd||Yd.type!==Cl&&Yd.type!==Dl||(Uf=Ea.kc,Ea.Jc.Na(),Ea.Jc.m(0,0,Uf.width,Uf.height),Ea.Jc.freeze());break;case "Viewbox":var sg=f[0],tg=sg.Ba,Pb=sg.margin,Vf=Pb.top+Pb.bottom,Wf=Math.max(tg.width+(Pb.right+Pb.left),0),Zd=Math.max(tg.height+Vf,0),ne=sg.alignment;ne.Oc()&&(ne=this.dl);ne.yd()||(ne=Kb);h.x=e.width*ne.x-Wf*ne.x+ne.offsetX;h.y=e.height*ne.y-Zd*ne.y+ne.offsetY;h.width=tg.width;h.height=tg.height;sg.zc(h.x,h.y,h.width,h.height);break;case "Link":var vm=f.length,Kh=this instanceof
mf?this.Sh:this;if(Kh instanceof W){var Fe=this instanceof mf?null:Kh.path,Ge=this.ej.n,pd=0;if(null!==Fe&&pd<this.ej.count){var tc=Ge[pd];pd++;Fe.zc(tc.x-this.Ji.x,tc.y-this.Ji.y,tc.width,tc.height)}for(var $d=0;$d<vm;$d++){var gk=f[$d];gk!==Fe&&pd<this.ej.count&&(tc=Ge[pd],pd++,gk.zc(tc.x-this.Ji.x,tc.y-this.Ji.y,tc.width,tc.height))}var hk=Kh.points,Ei=hk.count;if(2<=Ei&&this.we)for(var Ug=this.Mf;Ug.next();){var uc=Ug.value,ob=Ei,oe=hk,Qc=uc.pe,Vg=uc.qx,pe=uc.Pj,cb=uc.Pt,Wg=uc.hF,gc=0,tf=0,ug=
0;if(Qc<-ob||Qc>=ob){var vc=this.HE,vg=this.GE;cb!==gh&&(ug=this.computeAngle(uc,cb,vg),uc.angle=ug);gc=vc.x;tf=vc.y}else{var qd=void 0,qe=void 0;if(0<=Qc)qd=oe.n[Qc],qe=Qc<ob-1?oe.n[Qc+1]:qd;else var uf=ob+Qc,qd=oe.n[uf],qe=0<uf?oe.n[uf-1]:qd;vg=0<=Qc?qd.Wg(qe):qe.Wg(qd);cb!==gh&&(ug=this.computeAngle(uc,cb,vg),uc.angle=ug);gc=qd.x+(qe.x-qd.x)*Vg;tf=qd.y+(qe.y-qd.y)*Vg}if(pe.L(xb))uc.location=new w(gc,tf);else{pe.me()&&(pe=Kb);var Ye=v.nh();Ye.reset();Ye.scale(uc.scale,uc.scale);Ye.rotate(uc.angle,
0,0);var Fi=uc.Fa,Ed=v.ek(0,0,Fi.width,Fi.height),Rc=v.M();Rc.St(Ed,pe);Ye.xb(Rc);var Yg=-Rc.x,Zg=-Rc.y,hc=Wg.copy();isNaN(hc.x)&&(hc.x=0<=Qc?Rc.x+3:-(Rc.x+3));isNaN(hc.y)&&(hc.y=-(Rc.y+3));hc.rotate(vg);gc+=hc.x;tf+=hc.y;Ye.DF(Ed);var Yg=Yg+Ed.x,Zg=Zg+Ed.y,$g=v.Rb(gc+Yg,tf+Zg);uc.move($g);v.v($g);v.v(Rc);v.fc(Ed);v.Xe(Ye)}}this instanceof mf?this.wt(!1):Kh.wt(!1)}break;case "Grid":break;case "TableRow":case "TableColumn":v.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
break;default:v.k("Unknown panel type: "+t)}v.fc(h)}};C.prototype.Rj=function(a){var b=this.Fa;if(sb(0,0,b.width,b.height,a.x,a.y)){for(var b=this.wa.n,c=b.length,d=v.Rb(0,0);c--;){var e=b[c];if(e.visible||e===this.ac)if(Xa(d.set(a),e.transform),e.Ca(d))return v.v(d),!0}v.v(d);return null===this.Jb&&null===this.lc?!1:!0}return!1};C.prototype.Dw=function(a){if(this.qn===a)return this;for(var b=this.wa.n,c=b.length,d=0;d<c;d++){var e=b[d].Dw(a);if(null!==e)return e}return null};
function Zm(a,b,c){c(a,b);if(b instanceof C){b=b.wa.n;for(var d=b.length,e=0;e<d;e++)Zm(a,b[e],c)}}function Tj(a,b){$m(a,a,b)}function $m(a,b,c){c(b);b=b.wa.n;for(var d=b.length,e=0;e<d;e++){var f=b[e];f instanceof C&&$m(a,f,c)}}C.prototype.walkVisualTree=function(a){an(this,this,a)};function an(a,b,c){c(b);if(b instanceof C){b=b.wa.n;for(var d=b.length,e=0;e<d;e++)an(a,b[e],c)}}C.prototype.findInVisualTree=C.prototype.Vs=function(a){return bn(this,this,a)};
function bn(a,b,c){if(c(b))return b;if(b instanceof C){b=b.wa.n;for(var d=b.length,e=0;e<d;e++){var f=bn(a,b[e],c);if(null!==f)return f}}return null}C.prototype.findObject=C.prototype.Yd=function(a){if(this.name===a)return this;for(var b=this.wa.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof C)if(null===e.si&&null===e.ag){if(e=e.Yd(a),null!==e)return e}else if(Ck(e)&&(e=e.wa.first(),null!==e&&(e=e.Yd(a),null!==e)))return e}return null};
function cn(a){a=a.wa.n;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof C)c=Math.max(c,cn(e));else if(e instanceof X){a:{if(!e.Qg)switch(e.Mn){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.Sg/2*e.vm*e.Si()}c=Math.max(c,e)}}return c}g=C.prototype;g.Vf=function(){return!(this.type===Cl||this.type===Dl)};
g.le=function(a,b,c){if(!1===this.yg)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(Kj(this))return null;var d=this.Fa,e=1/this.Si(),f=this.Vf(),h=f?a:Xa(v.Rb(a.x,a.y),this.transform),k=this.g,l=10,m=5;null!==k&&(l=k.Wo("extraTouchArea"),m=l/2);if(sb(-(m*e),-(m*e),d.width+l*e,d.height+l*e,h.x,h.y)){if(!this.Ig){var e=this.wa.n,n=e.length,k=v.M(),m=(l=this.qE)?this.If():null;if(l&&(m.Vf()?Xa(k.set(a),m.transform):k.set(a),!m.Ca(k)))return v.v(k),f||v.v(h),null;for(;n--;){var p=e[n];if(p.visible||
p===this.ac)if(p.Vf()?Xa(k.set(a),p.transform):k.set(a),!l||p!==m){var q=null;p instanceof C?q=p.le(k,b,c):!0===p.yg&&p.Ca(k)&&(q=p);if(null!==q&&(null!==b&&(q=b(q)),null!==q&&(null===c||c(q))))return v.v(k),f||v.v(h),q}}v.v(k)}if(null===this.background&&null===this.Cm)return f||v.v(h),null;a=sb(0,0,d.width,d.height,h.x,h.y)?this:null;f||v.v(h);return a}f||v.v(h);return null};
g.Ys=function(a,b,c,d){if(!1===this.yg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof G||d instanceof H||(d=new G(R));var e=this.Fa,f=this.Vf(),h=f?a:Xa(v.Rb(a.x,a.y),this.transform);if(sb(0,0,e.width,e.height,h.x,h.y)){if(!this.Ig){for(var e=this.wa.n,k=e.length,l=v.M();k--;){var m=e[k];if(m.visible||m===this.ac){m.Vf()?Xa(l.set(a),m.transform):l.set(a);var n=m,m=m instanceof C?m:null;(null!==m?m.Ys(l,b,c,d):n.Ca(l))&&!1!==n.yg&&(null!==b&&(n=b(n)),null===n||null!==c&&!c(n)||d.add(n))}}v.v(l)}f||
v.v(h);return null!==this.background||null!==this.Cm}f||v.v(h);return!1};
g.Vj=function(a,b,c,d,e,f){if(!1===this.yg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=f;void 0===f&&(h=v.nh(),h.reset());h.multiply(this.transform);if(this.Hm(a,h))return dn(this,b,c,e),void 0===f&&v.Xe(h),!0;if(this.tg(a,h)){if(!this.Ig)for(var k=this.wa.n,l=k.length;l--;){var m=k[l];if(m.visible||m===this.ac){var n=m.Z,p=this.Fa;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=m;m=m instanceof C?m:null;p=v.nh();p.set(h);if(null!==m?m.Vj(a,b,c,d,e,p):xl(n,a,d,p))null!==
b&&(n=b(n)),null===n||null!==c&&!c(n)||e.add(n);v.Xe(p)}}}void 0===f&&v.Xe(h);return d}void 0===f&&v.Xe(h);return!1};function dn(a,b,c,d){for(var e=a.wa.n,f=e.length;f--;){var h=e[f];if(h.visible){var k=h.Z,l=a.Fa;k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height||(h instanceof C&&dn(h,b,c,d),null!==b&&(h=b(h)),null===h||null!==c&&!c(h)||d.add(h))}}}
g.Om=function(a,b,c,d,e,f){if(!1===this.yg)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var h=this.Fa,k=this.Vf(),l=k?a:Xa(v.Rb(a.x,a.y),this.transform),m=k?b:Xa(v.Rb(b.x,b.y),this.transform),n=l.Tj(m),p=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height||Ya(l.x,l.y,0,0,0,h.height)<n||Ya(l.x,l.y,0,h.height,h.width,h.height)<n||Ya(l.x,l.y,h.width,h.height,h.width,0)<n||Ya(l.x,l.y,h.width,0,0,0)<n,h=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height&&Ya(l.x,l.y,0,0,0,h.height)<n&&Ya(l.x,l.y,0,h.height,h.width,h.height)<
n&&Ya(l.x,l.y,h.width,h.height,h.width,0)<n&&Ya(l.x,l.y,h.width,0,0,0)<n;k||(v.v(l),v.v(m));if(p){if(!this.Ig){k=v.M();l=v.M();m=this.wa.n;for(n=m.length;n--;){var q=m[n];if(q.visible||q===this.ac){var r=q.Z,s=this.Fa;r.x>s.width||r.y>s.height||0>r.x+r.width||0>r.y+r.height||(q.Vf()?(r=q.transform,Xa(k.set(a),r),Xa(l.set(b),r)):(k.set(a),l.set(b)),r=q,q=q instanceof C?q:null,null!==q?!q.Om(k,l,c,d,e,f):!r.$D(k,l,e))||(null!==c&&(r=c(r)),null===r||null!==d&&!d(r)||f.add(r))}}v.v(k);v.v(l)}return e?
p:h}return!1};function Um(a){var b=a.A;if(void 0===b||b===yc)b=null;null===b&&a instanceof X&&(a=a.Ta,null!==a&&(b=a.A));null===b&&(b=zb);return b}function Vm(a){var b=a.B;if(void 0===b||b===yc)b=null;null===b&&a instanceof X&&(a=a.Ta,null!==a&&(b=a.B));null===b&&(b=Vb);return b}C.prototype.add=C.prototype.add=function(a){v.C(a,R,C,"add:element");this.xd(this.wa.count,a)};C.prototype.elt=C.prototype.ha=function(a){return this.wa.ha(a)};
C.prototype.insertAt=C.prototype.xd=function(a,b){b instanceof J&&v.k("Cannot add a Part to a Panel: "+b);if(this===b||this.rl(b))this===b&&v.k("Cannot make a Panel contain itself: "+this.toString()),v.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.T;null!==c&&c!==this&&v.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.ia!==kj||b instanceof X||v.k("Can only add Shapes to a Grid Panel, not: "+b);b.Al(this);b.km=null;if(null!==this.yE){var d=b.data;null!==d&&"object"===typeof d&&(null===this.$f&&(this.$f=new ma(Object,C)),this.$f.add(d,b))}var e=this.wa,d=-1;if(c===this){for(var f=-1,h=this.wa.n,k=h.length,l=0;l<k;l++)if(h[l]===b){f=l;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.Rc(f);d=f}else v.k("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>
a||a>e.count)a=e.count;e.xd(a,b);this.P();b.P();null!==b.Od?this.Bh=!0:b instanceof C&&!0===b.Bh&&(this.Bh=!0);c=this.V;null!==c&&(c.Mk=null,c.vj=NaN,this.Bh&&c instanceof S&&(c.Bh=!0),c.Bh&&(c.Sd=null),e=this.g,null!==e&&e.ja.ib||(-1!==d&&c.Ec(be,"elements",this,b,null,d,null),c.Ec(Qd,"elements",this,null,b,null,a)))};C.prototype.remove=C.prototype.remove=function(a){v.C(a,R,C,"remove:element");for(var b=this.wa.n,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.Ke(d)};
C.prototype.removeAt=C.prototype.Rc=function(a){0<=a&&this.Ke(a)};C.prototype.Ke=function(a){var b=this.wa,c=b.ha(a);c.km=null;c.Al(null);if(null!==this.$f){var d=c.data;"object"===typeof d&&this.$f.remove(d)}b.Rc(a);Dj(this,!1);this.P();this.wm===c&&(this.wm=null);b=this.V;null!==b&&(b.Mk=null,b.vj=NaN,d=this.g,null!==d&&d.ja.ib||b.Ec(be,"elements",this,c,null,a,null))};v.u(C,{zp:"rowCount"},function(){return void 0===this.Gd?0:this.Gd.length});
C.prototype.getRowDefinition=C.prototype.bd=function(a){0>a&&v.ua(a,">= 0",C,"getRowDefinition:idx");a=Math.round(a);var b=this.Gd;if(void 0===b[a]){var c=new Ue;c.Al(this);c.ae=!0;c.index=a;b[a]=c}return b[a]};C.prototype.removeRowDefinition=C.prototype.VE=function(a){0>a&&v.ua(a,">= 0",C,"removeRowDefinition:idx");a=Math.round(a);var b=this.Gd;this.Ec(be,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.P()};v.u(C,{Ko:"columnCount"},function(){return void 0===this.Cd?0:this.Cd.length});
C.prototype.getColumnDefinition=C.prototype.ad=function(a){0>a&&v.ua(a,">= 0",C,"getColumnDefinition:idx");a=Math.round(a);var b=this.Cd;if(void 0===b[a]){var c=new Ue;c.Al(this);c.ae=!1;c.index=a;b[a]=c}return b[a]};C.prototype.removeColumnDefinition=C.prototype.RE=function(a){0>a&&v.ua(a,">= 0",C,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Cd;this.Ec(be,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.P()};
v.defineProperty(C,{OI:"rowSizing"},function(){return void 0===this.qm?Qm:this.qm},function(a){if(void 0!==this.qm){var b=this.qm;b!==a&&(a!==Qm&&a!==Xm&&v.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.qm=a,this.P(),this.h("rowSizing",b,a))}});
v.defineProperty(C,{IG:"columnSizing"},function(){return void 0===this.Ml?Qm:this.Ml},function(a){if(void 0!==this.Ml){var b=this.Ml;b!==a&&(a!==Qm&&a!==Xm&&v.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.Ml=a,this.P(),this.h("columnSizing",b,a))}});
v.defineProperty(C,{qL:"topIndex"},function(){return void 0===this.Ii?0:this.Ii},function(a){if(void 0!==this.Ii){var b=this.Ii;b!==a&&((!isFinite(a)||0>a)&&v.k("Panel.topIndex must be greater than zero and a real number, not: "+a),this.Ii=a,this.P(),this.h("topIndex",b,a))}});
v.defineProperty(C,{AK:"leftIndex"},function(){return void 0===this.ui?0:this.ui},function(a){if(void 0!==this.ui){var b=this.ui;b!==a&&((!isFinite(a)||0>a)&&v.k("Panel.leftIndex must be greater than zero and a real number, not: "+a),this.ui=a,this.P(),this.h("leftIndex",b,a))}});C.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==Ql)return NaN;for(var b=0,c=this.Gd,d=c.length,e=this.Ii;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
C.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==Ql)return NaN;for(var b=0,c=this.Cd,d=c.length,e=this.ui;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
v.defineProperty(C,{data:"data"},function(){return this.uh},function(a){var b=this.uh;if(b!==a){var c=this instanceof J&&!(this instanceof mf);c&&v.j(a,"object",C,"data");of(this);this.uh=a;var d=this.g;null!==d&&(c?this instanceof W?(null!==b&&d.vk.remove(b),null!==a&&d.vk.add(a,this)):this instanceof J&&(null!==b&&d.ki.remove(b),null!==a&&d.ki.add(a,this)):(c=this.T,null!==c&&null!==c.$f&&(null!==b&&c.$f.remove(b),null!==a&&c.$f.add(a,this))));this.h("data",b,a);null!==d&&d.ja.ib||null!==a&&this.Ib()}});
v.defineProperty(C,{UH:"itemIndex"},function(){return this.Xq},function(a){var b=this.Xq;b!==a&&(this.Xq=a,this.h("itemIndex",b,a))});function $l(a){a=a.Kl;return null!==a&&a.Ea}
function of(a){var b=a.Kl;if(null===b)null!==a.data&&v.k("Template cannot have .data be non-null: "+a),a.Kl=b=new G(cf);else if(b.Ea)return;var c=new G(R);Zm(a,a,function(a,d){var e=d.Hc;if(null!==e)for(Ul(d,!1),e=e.i;e.next();){var f=e.value;f.mode===ef&&Ul(d,!0);if(null!==f.dn){var h=ff(f,a,d);null!==h&&(c.add(h),null===h.ro&&(h.ro=new G(cf)),h.ro.add(f))}b.add(f)}if(d instanceof C&&d.type===Ql){if(0<d.Gd.length)for(e=d.Gd,f=e.length,h=0;h<f;h++){var k=e[h];if(void 0!==k&&null!==k.Hc)for(var l=
k.Hc.i;l.next();){var u=l.value;u.ig=k;u.$y=2;u.Xv=k.index;b.add(u)}}if(0<d.Cd.length)for(e=d.Cd,f=e.length,h=0;h<f;h++)if(k=e[h],void 0!==k&&null!==k.Hc)for(l=k.Hc.i;l.next();)u=l.value,u.ig=k,u.$y=1,u.Xv=k.index,b.add(u)}});for(var d=c.i;d.next();){var e=d.value;if(null!==e.ro){Ul(e,!0);for(var f=e.ro.i;f.next();){var h=f.value;null===e.Hc&&(e.Hc=new G(cf));e.Hc.add(h)}}e.ro=null}for(d=b.i;d.next();)if(e=d.value,f=e.ig,null!==f){e.ig=null;var k=e.Ax,l=k.indexOf(".");0<l&&f instanceof C&&(h=k.substring(0,
l),k=k.substr(l+1),l=f.Yd(h),null!==l?(f=l,e.Ax=k):v.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+e.toString()));f instanceof Ue?(e.Dl=v.cd(f.T),f.T.qn=e.Dl):(e.Dl=v.cd(f),f.qn=e.Dl)}b.freeze();a instanceof J&&a.Ld()&&(Rh(a,Infinity,Infinity),a.zc())}
C.prototype.updateTargetBindings=C.prototype.Ib=function(a){var b=this.Kl;if(null!==b)for(void 0===a&&(a=""),b=b.i;b.next();){var c=b.value,d=c.qF;if(""===a||""===d||d===a)if(d=c.Ax,null!==c.OG||""!==d){var d=this.data,e=c.dn;if(null!==e)d=""===e?this:"."===e?this:".."===e?this:this.Yd(e);else{var f=this.g;null!==f&&c.$t&&(d=f.da.yt)}if(null!==d){var f=this,h=c.Dl;if(-1!==h){if(f=this.Dw(h),null===f)continue}else null!==c.ig&&(f=c.ig);"."===e?d=f:".."===e&&(d=f.T);e=c.$y;if(0!==e){if(!(f instanceof
C))continue;h=f;1===e?f=h.ad(c.Xv):2===e&&(f=h.bd(c.Xv))}void 0!==f&&c.GF(f,d)}}}};v.defineProperty(C,{yE:"itemArray"},function(){return this.si},function(a){var b=this.si;if(b!==a){var c=this.g;null!==c&&null!==b&&Zj(c,this);this.si=a;null!==c&&null!==a&&Vj(c,this);this.h("itemArray",b,a);null!==c&&c.ja.ib||this.qA()}});function Ck(a){return a.type===rh||a.type===gj||a.type===dh||a.type===Ql&&0<a.wa.length&&(a=a.wa.ha(0),a.Lf&&a instanceof C&&(a.type===Cl||a.type===Dl))?!0:!1}
C.prototype.rebuildItemElements=C.prototype.qA=function(){var a=0;for(Ck(this)&&(a=1);this.wa.length>a;)this.Ke(a);a=this.yE;if(null!==a)for(var b=v.Va(a),c=0;c<b;c++)Bk(this,v.Pa(a,c),c)};C.prototype.findItemPanelForData=C.prototype.jH=function(a){if(void 0===a||null===a||null===this.$f)return null;v.j(a,"object",C,"findItemPanelForData");return this.$f.la(a)};
function Bk(a,b,c){if(!(void 0===b||null===b||0>c)){var d;d=en(a,b);var e=a.VH,f=null;null!==e&&(f=e.la(d));null===f&&(fn||(fn=!0,v.trace('No item template Panel found for category "'+d+'" on '+a),v.trace("  Using default item template."),d=new C,e=new ra,e.bind(new cf("text","",ce)),d.add(e),gn=d),f=gn);d=f;null!==d&&(of(d),d=d.copy(),"object"===typeof b&&(null===a.$f&&(a.$f=new ma(Object,C)),a.$f.add(b,d)),e=c,Ck(a)&&e++,a.xd(e,d),Dk(a,e,c),d.data=b)}}
function Dk(a,b,c){for(a=a.wa;b<a.length;){var d=a.ha(b);if(d instanceof C){var e=b,f=c;d.type===Cl?d.bc=e:d.type===Dl&&(d.column=e);d.UH=f}b++;c++}}function Ai(a){a=a.wa.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];if(d instanceof hn||d instanceof C&&Ai(d))return!0}return!1}
v.defineProperty(C,{xK:"itemTemplate"},function(){return null===this.ag?null:this.ag.la("")},function(a){if(null===this.ag){if(null===a)return;this.ag=new ma("string",C)}var b=this.ag.la("");b!==a&&(v.C(a,C,C,"itemTemplate"),(a instanceof J||a.Lf)&&v.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.ag.add("",a),this.h("itemTemplate",b,a),a=this.g,null!==a&&a.ja.ib||this.qA())});
v.defineProperty(C,{VH:"itemTemplateMap"},function(){return this.ag},function(a){var b=this.ag;if(b!==a){v.C(a,ma,C,"itemTemplateMap");for(var c=a.i;c.next();){var d=c.value;(d instanceof J||d.Lf)&&v.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.ag=a;this.h("itemTemplateMap",b,a);a=this.g;null!==a&&a.ja.ib||this.qA()}});
v.defineProperty(C,{wK:"itemCategoryProperty"},function(){return this.Yn},function(a){var b=this.Yn;b!==a&&("string"!==typeof a&&"function"!==typeof a&&v.Ad(a,"string or function",C,"itemCategoryProperty"),this.Yn=a,this.h("itemCategoryProperty",b,a))});
function en(a,b){if(null===b)return"";var c=a.Yn,d="";if("function"===typeof c)d=c(b);else if("string"===typeof c&&"object"===typeof b){if(""===c)return"";d=v.kb(b,c)}else return"";if(void 0===d)return"";if("string"===typeof d)return d;v.k("Panel.getCategoryForItemData found a non-string category for "+b+": "+d);return""}var fn=!1,gn=null;v.defineProperty(C,{pK:"isAtomic"},function(){return this.Ig},function(a){var b=this.Ig;b!==a&&(v.j(a,"boolean",C,"isAtomic"),this.Ig=a,this.h("isAtomic",b,a))});
v.defineProperty(C,{qE:"isClipping"},function(){return this.Kq},function(a){var b=this.Kq;b!==a&&(v.j(a,"boolean",C,"isClipping"),this.Kq=a,this.h("isClipping",b,a))});function Ue(){v.cc(this);this.Pg=null;this.dv=!0;this.Ic=0;this.Se=NaN;this.zj=0;this.xj=Infinity;this.te=yc;this.Xa=this.ab=0;this.Hc=null;this.ks=jn;this.Ph=ml;this.fs=this.Dj=null;this.gs=NaN;this.Jb=this.Jh=null;this.jq=!1}v.ga("RowColumnDefinition",Ue);
Ue.prototype.copy=function(){var a=new Ue;a.dv=this.dv;a.Ic=this.Ic;a.Se=this.Se;a.zj=this.zj;a.xj=this.xj;a.te=this.te;a.ab=this.ab;a.Xa=this.Xa;a.Ph=this.Ph;a.ks=this.ks;a.Dj=null===this.Dj?null:this.Dj.aa();a.fs=this.fs;a.gs=this.gs;a.Jh=null;null!==this.Jh&&(a.Jh=v.$k(this.Jh));a.Jb=this.Jb;a.jq=this.jq;a.Hc=this.Hc;return a};
Ue.prototype.Ss=function(a){v.C(a,Ue,Ue,"copyFrom:pd");a.ae?this.height=a.height:this.width=a.width;this.Vi=a.Vi;this.bf=a.bf;this.alignment=a.alignment;this.stretch=a.stretch;this.Vt=a.Vt;this.Dj=null===a.Dj?null:a.Dj.aa();this.Ap=a.Ap;this.Bp=a.Bp;this.Jh=null;a.Jh&&(this.Jh=v.$k(a.Jh));this.background=a.background;this.Az=a.Az;this.Hc=a.Hc};Ue.prototype.toString=function(){return"RowColumnDefinition "+(this.ae?"(Row ":"(Column ")+this.index+") #"+v.cd(this)};var jn;
Ue.Default=jn=v.p(Ue,"Default",0);var Xm;Ue.None=Xm=v.p(Ue,"None",1);var Qm;Ue.ProportionalExtra=Qm=v.p(Ue,"ProportionalExtra",2);Ue.prototype.Al=function(a){this.Pg=a};Ue.prototype.computeEffectiveSpacingTop=Ue.prototype.GD=function(){var a=0;if(0!==this.index){var b=this.Pg,c=this.Ap;null===c&&null!==b&&(c=this.ae?b.li:b.vh);null!==c&&(a=this.Bp,isNaN(a)&&(a=null!==b?this.ae?b.xh:b.wh:0))}b=this.jF;if(null===b)if(b=this.Pg,null!==b)b=b.fj;else return a;return a+(this.ae?b.top:b.left)};
Ue.prototype.computeEffectiveSpacing=Ue.prototype.mg=function(){var a=0;if(0!==this.index){var b=this.Pg,c=this.Ap;null===c&&null!==b&&(c=this.ae?b.li:b.vh);null!==c&&(a=this.Bp,isNaN(a)&&(a=null!==b?this.ae?b.xh:b.wh:0))}b=this.jF;if(null===b)if(b=this.Pg,null!==b)b=b.fj;else return a;return a+(this.ae?b.top+b.bottom:b.left+b.right)};
Ue.prototype.Xc=function(a,b,c,d,e){var f=this.Pg;if(null!==f&&(f.Ec(Od,a,this,b,c,d,e),null!==this.Hc&&(b=f.So(),null!==b&&(b=b.data,null!==b))))for(c=this.Hc.i;c.next();)c.value.Bx(this,b,a,null)};v.u(Ue,{T:"panel"},function(){return this.Pg});v.defineProperty(Ue,{ae:"isRow"},function(){return this.dv},function(a){this.dv=a});v.defineProperty(Ue,{index:"index"},function(){return this.Ic},function(a){this.Ic=a});
v.defineProperty(Ue,{height:"height"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(0>a&&v.ua(a,">= 0",Ue,"height"),this.Se=a,this.Ra=this.ab,null!==this.T&&this.T.P(),this.Xc("height",b,a))});v.defineProperty(Ue,{width:"width"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(0>a&&v.ua(a,">= 0",Ue,"width"),this.Se=a,this.Ra=this.ab,null!==this.T&&this.T.P(),this.Xc("width",b,a))});
v.defineProperty(Ue,{Vi:"minimum"},function(){return this.zj},function(a){var b=this.zj;b!==a&&((0>a||!isFinite(a))&&v.ua(a,">= 0",Ue,"minimum"),this.zj=a,this.Ra=this.ab,null!==this.T&&this.T.P(),this.Xc("minimum",b,a))});v.defineProperty(Ue,{bf:"maximum"},function(){return this.xj},function(a){var b=this.xj;b!==a&&(0>a&&v.ua(a,">= 0",Ue,"maximum"),this.xj=a,this.Ra=this.ab,null!==this.T&&this.T.P(),this.Xc("maximum",b,a))});
v.defineProperty(Ue,{alignment:"alignment"},function(){return this.te},function(a){var b=this.te;b.L(a)||(this.te=a.aa(),null!==this.T&&this.T.P(),this.Xc("alignment",b,a))});v.defineProperty(Ue,{stretch:"stretch"},function(){return this.Ph},function(a){var b=this.Ph;b!==a&&(this.Ph=a,null!==this.T&&this.T.P(),this.Xc("stretch",b,a))});
v.defineProperty(Ue,{jF:"separatorPadding"},function(){return this.Dj},function(a){"number"===typeof a&&(a=new tb(a));var b=this.Dj;null!==a&&null!==b&&b.L(a)||(null!==a&&(a=a.aa()),this.Dj=a,null!==this.T&&this.T.P(),this.Xc("separatorPadding",b,a))});v.defineProperty(Ue,{Ap:"separatorStroke"},function(){return this.fs},function(a){var b=this.fs;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.fs=a,null!==this.T&&this.T.P(),this.Xc("separatorStroke",b,a))});
v.defineProperty(Ue,{Bp:"separatorStrokeWidth"},function(){return this.gs},function(a){var b=this.gs;b!==a&&(this.gs=a,null!==this.T&&this.T.P(),this.Xc("separatorStrokeWidth",b,a))});
v.defineProperty(Ue,{TI:"separatorDashArray"},function(){return this.Jh},function(a){var b=this.Jh;if(b!==a){null===a||Array.isArray(a)||v.Ad(a,"Array",Ue,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("separatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Jh=a;null!==this.T&&this.T.pa();this.Xc("separatorDashArray",b,a)}});
v.defineProperty(Ue,{background:"background"},function(){return this.Jb},function(a){var b=this.Jb;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.Jb=a,null!==this.T&&this.T.pa(),this.Xc("background",b,a))});v.defineProperty(Ue,{Az:"coversSeparators"},function(){return this.jq},function(a){var b=this.jq;b!==a&&(v.j(a,"boolean",Ue,"coversSeparators"),this.jq=a,null!==this.T&&this.T.pa(),this.Xc("coversSeparators",b,a))});
v.defineProperty(Ue,{Vt:"sizing"},function(){return this.ks},function(a){var b=this.ks;b!==a&&(this.ks=a,null!==this.T&&this.T.P(),this.Xc("sizing",b,a))});function Wm(a){if(a.Vt===jn){var b=a.Pg;return a.ae?b.OI:b.IG}return a.Vt}v.defineProperty(Ue,{Ra:"actual"},function(){return this.ab},function(a){this.ab=isNaN(this.Se)?Math.max(Math.min(this.xj,a),this.zj):Math.max(Math.min(this.xj,this.Se),this.zj)});
v.defineProperty(Ue,{total:"total"},function(){return this.ab+this.mg()},function(a){this.ab=isNaN(this.Se)?Math.max(Math.min(this.xj,a),this.zj):Math.max(Math.min(this.xj,this.Se),this.zj);this.ab=Math.max(0,this.ab-this.mg())});v.defineProperty(Ue,{position:"position"},function(){return this.Xa},function(a){this.Xa=a});
Ue.prototype.bind=Ue.prototype.bind=function(a){a.ig=this;var b=this.T;if(null!==b){var c=b.So();null!==c&&$l(c)&&v.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+b)}null===this.Hc&&(this.Hc=new G(cf));this.Hc.add(a)};
function X(){R.call(this);this.Ta=null;this.Mn="None";this.Qg=!1;this.Dq=ml;this.tk=null;this.yc=this.qd="black";this.Sg=1;this.vo="butt";this.wo="miter";this.vm=10;this.um=null;this.nd=0;this.Gi=this.Fi=yc;this.Dr=this.Cr=NaN;this.Lq=!1;this.Qq=!0;this.Fr=null;this.Pn=this.xo="None";this.Iq=1}v.Ga(X,R);v.ga("Shape",X);
X.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.Ta=this.Ta;a.Mn=this.Mn;a.Qg=this.Qg;a.Dq=this.Dq;a.tk=this.tk;a.qd=this.qd;a.yc=this.yc;a.Sg=this.Sg;a.vo=this.vo;a.wo=this.wo;a.vm=this.vm;a.um=null;null!==this.um&&(a.um=v.$k(this.um));a.nd=this.nd;a.Fi=this.Fi.aa();a.Gi=this.Gi.aa();a.Cr=this.Cr;a.Dr=this.Dr;a.Lq=this.Lq;a.Qq=this.Qq;a.Fr=this.Fr;a.xo=this.xo;a.Pn=this.Pn;a.Iq=this.Iq};
X.prototype.toString=function(){return"Shape("+("None"!==this.Cb?this.Cb:"None"!==this.Hp?this.Hp:this.Gz)+")#"+v.cd(this)};
function kn(a,b,c,d){var e=.001,f=d.Ba,h=f.width,f=f.height,k=0,l=0,m=0,n=0,e=c.length;if(!(4>e)){for(var k=c[0],l=c[1],p=0,q=0,r=0,s=m=0,t=q=0,u=v.jb(),x=2;x<e;x+=2)m=c[x],n=c[x+1],p=m-k,q=n-l,0===p&&(p=.001),r=q/p,s=Math.atan2(q,p),q=Math.sqrt(p*p+q*q),k=[],k[0]=p,k[1]=s,k[2]=r,k[3]=q,u.push(k),t+=q,k=m,l=n;k=c[0];l=c[1];c=0;for(var e=h,n=h/2,x=0===n?!1:!0,q=0,m=u[q],p=m[0],s=m[1],r=m[2],m=m[3],y=0;.1<=t;){0===y&&(x?(e=h,c++,e-=n,t-=n,x=!1):(e=h,c++),0===e&&(e=1));if(e>t){v.ra(u);return}e>m?(y=
e-m,e=m):y=0;var A=Math.sqrt(e*e/(1+r*r));0>p&&(A=-A);k+=A;l+=r*A;a.translate(k,l);a.rotate(s);a.translate(-(h/2),-(f/2));0===y&&d.Uj(a,b);a.translate(h/2,f/2);a.rotate(-s);a.translate(-k,-l);t-=e;m-=e;if(0!==y){q++;if(q===u.length){v.ra(u);return}m=u[q];p=m[0];s=m[1];r=m[2];m=m[3];e=y}}v.ra(u)}}
X.prototype.Uj=function(a,b){if(null!==this.yc||null!==this.qd){null!==this.qd&&Jl(this,a,this.qd,!0,!1);null!==this.yc&&Jl(this,a,this.yc,!1,!1);var c=this.Sg;if(0===c){var d=this.V;d instanceof mf&&d.type===dh&&d.ec instanceof X&&(c=d.ec.nb)}a.lineWidth=c;a.lineJoin=this.wo;a.lineCap=this.vo;a.miterLimit=this.vm;var e=!1;this.V&&b.Yj("drawShadows")&&(e=this.V.tl);var f=!0;null!==this.yc&&null===this.qd&&(f=!1);var d=!1,h=!0,k=this.sF;null!==k&&(d=!0,void 0!==a.setLineDash?(a.setLineDash(k),a.lineDashOffset=
this.nd):void 0!==a.webkitLineDash?(a.webkitLineDash=k,a.webkitLineDashOffset=this.nd):void 0!==a.mozDash?(a.mozDash=k,a.mozDashOffset=this.nd):h=!1);var l=this.Ta;if(null!==l){if(l.ia===fd)a.beginPath(),d&&!h?tl(a,l.tc,l.xc,l.yb,l.Db,k,this.nd):(a.moveTo(l.tc,l.xc),a.lineTo(l.yb,l.Db)),null!==this.qd&&Kl(a,this.qd),0!==c&&null!==this.yc&&Ml(a);else if(l.ia===gd){var m=l.tc,n=l.xc,p=l.yb,q=l.Db,l=Math.min(m,p),r=Math.min(n,q),m=Math.abs(p-m),n=Math.abs(q-n);null!==this.qd&&(a.beginPath(),a.rect(l,
r,m,n),Kl(a,this.qd));if(null!==this.yc){var s=p=0,t=0;f&&e&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);d&&!h?(h=v.jb(),h.push(l),h.push(r),h.push(l+m),h.push(r),h.push(l+m),h.push(r+n),h.push(l),h.push(r+n),h.push(l),h.push(r),a.beginPath(),ln(a,h,k,this.nd),Ml(a),v.ra(h)):0!==c&&(a.beginPath(),a.rect(l,r,m,n),Ml(a));f&&e&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t)}}else if(l.ia===hd)m=l.tc,n=l.xc,p=l.yb,q=l.Db,l=Math.abs(p-m)/
2,r=Math.abs(q-n)/2,m=Math.min(m,p)+l,n=Math.min(n,q)+r,a.beginPath(),a.moveTo(m,n-r),a.bezierCurveTo(m+K.za*l,n-r,m+l,n-K.za*r,m+l,n),a.bezierCurveTo(m+l,n+K.za*r,m+K.za*l,n+r,m,n+r),a.bezierCurveTo(m-K.za*l,n+r,m-l,n+K.za*r,m-l,n),a.bezierCurveTo(m-l,n-K.za*r,m-K.za*l,n-r,m,n-r),a.closePath(),null!==this.qd&&Kl(a,this.qd),d&&!h&&(h=v.jb(),K.De(m,n-r,m+K.za*l,n-r,m+l,n-K.za*r,m+l,n,.5,h),K.De(m+l,n,m+l,n+K.za*r,m+K.za*l,n+r,m,n+r,.5,h),K.De(m,n+r,m-K.za*l,n+r,m-l,n+K.za*r,m-l,n,.5,h),K.De(m-l,n,
m-l,n-K.za*r,m-K.za*l,n-r,m,n-r,.5,h),a.beginPath(),ln(a,h,k,this.nd),v.ra(h)),0!==c&&null!==this.yc&&(t=s=p=0,f&&e&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Ml(a),f&&e&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t));else if(l.ia===cd){r=l.hj;n=r.length;for(q=0;q<n;q++){m=r.n[q];a.beginPath();a.moveTo(m.Ia,m.Ja);for(var p=m.vb.n,s=p.length,u=null,t=0;t<s;t++){var x=p[t];switch(x.ia){case Ad:a.moveTo(x.J,x.K);break;case sd:a.lineTo(x.J,
x.K);break;case Bd:a.bezierCurveTo(x.md,x.Ae,x.gg,x.hg,x.yb,x.Db);break;case Cd:a.quadraticCurveTo(x.md,x.Ae,x.yb,x.Db);break;case Dd:if(x.radiusX===x.radiusY)u=Math.PI/180,a.arc(x.md,x.Ae,x.radiusX,x.Ne*u,(x.Ne+x.Sf)*u,0>x.Sf);else{var u=Gd(x,m),y=u.length;if(0===y){a.lineTo(x.oa,x.va);break}for(var A=0;A<y;A++){var B=u[A];0===A&&a.lineTo(B[0],B[1]);a.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7])}}break;case Fd:A=y=0;if(null!==u&&u.type===Dd){u=Gd(u,m);B=u.length;if(0===B){a.lineTo(x.oa,x.va);break}u=
u[B-1]||null;null!==u&&(y=u[6],A=u[7])}else y=null!==u?u.J:m.Ia,A=null!==u?u.K:m.Ja;u=Hd(x,m,y,A);y=u.length;if(0===y){a.lineTo(x.oa,x.va);break}for(A=0;A<y;A++)B=u[A],a.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7]);break;default:v.k("Segment not of valid type: "+x.ia)}x.Dh&&a.closePath();u=x}e?(t=s=p=0,m.Wn?(!0===m.Sl&&null!==this.qd?(Kl(a,this.qd),f=!0):f=!1,0!==c&&null!==this.yc&&(f&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||Ml(a),
f&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(f&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===m.Sl&&null!==this.qd&&Kl(a,this.qd),0!==c&&null!==this.yc&&(d&&!h||Ml(a)),f&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(!0===m.Sl&&null!==this.qd&&Kl(a,this.qd),0===c||null===this.yc||d&&!h||Ml(a))}if(d&&!h)for(c=f,f=l.hj,h=f.length,l=0;l<h;l++){r=f.n[l];a.beginPath();n=v.jb();n.push(r.Ia);n.push(r.Ja);q=r.Ia;m=r.Ja;
p=q;s=m;t=r.vb.n;x=t.length;for(u=0;u<x;u++){y=t[u];switch(y.ia){case Ad:ln(a,n,k,this.nd);n.length=0;n.push(y.J);n.push(y.K);q=y.J;m=y.K;p=q;s=m;break;case sd:n.push(y.J);n.push(y.K);q=y.J;m=y.K;break;case Bd:K.De(q,m,y.md,y.Ae,y.gg,y.hg,y.yb,y.Db,.5,n);q=y.J;m=y.K;break;case Cd:K.rp(q,m,y.md,y.Ae,y.yb,y.Db,.5,n);q=y.J;m=y.K;break;case Dd:A=Gd(y,r);B=A.length;if(0===B){n.push(y.oa);n.push(y.va);q=y.oa;m=y.va;break}for(var I=0;I<B;I++){var D=A[I];K.De(q,m,D[2],D[3],D[4],D[5],D[6],D[7],.5,n);q=D[6];
m=D[7]}break;case Fd:A=Hd(y,r,q,m);B=A.length;if(0===B){n.push(y.oa);n.push(y.va);q=y.oa;m=y.va;break}for(I=0;I<B;I++)D=A[I],K.De(q,m,D[2],D[3],D[4],D[5],D[6],D[7],.5,n),q=D[6],m=D[7];break;default:v.k("Segment not of valid type: "+y.ia)}y.Dh&&(n.push(p),n.push(s),ln(a,n,k,this.nd))}ln(a,n,k,this.nd);v.ra(n);null!==this.yc&&(q=n=r=0,c&&e&&(r=a.shadowOffsetX,n=a.shadowOffsetY,q=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Ml(a),c&&e&&(a.shadowOffsetX=r,a.shadowOffsetY=n,a.shadowBlur=
q))}}d&&(void 0!==a.setLineDash?(a.setLineDash(v.qh),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=v.qh,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0));if(null!==this.NE){d=this.NE;Rh(d,Infinity,Infinity);k=d.Ba;d.zc(0,0,k.width,k.height);a.save();k=this.Uo.Ub.first();a.beginPath();c=v.jb();c.push(k.Ia);c.push(k.Ja);e=k.Ia;f=k.Ja;h=e;l=f;r=k.vb.n;n=r.length;for(q=0;q<n;q++){m=r[q];switch(m.ia){case Ad:kn(a,b,c,d);c.length=0;c.push(m.J);c.push(m.K);
e=m.J;f=m.K;h=e;l=f;break;case sd:c.push(m.J);c.push(m.K);e=m.J;f=m.K;break;case Bd:K.De(e,f,m.md,m.Ae,m.gg,m.hg,m.yb,m.Db,.5,c);e=m.J;f=m.K;break;case Cd:K.rp(e,f,m.md,m.Ae,m.yb,m.Db,.5,c);e=m.J;f=m.K;break;case Dd:p=Gd(m,k);s=p.length;if(0===s){c.push(m.oa);c.push(m.va);e=m.oa;f=m.va;break}for(t=0;t<s;t++)x=p[t],K.De(e,f,x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;case Fd:p=Hd(m,k,e,f);s=p.length;if(0===s){c.push(m.oa);c.push(m.va);e=m.oa;f=m.va;break}for(t=0;t<s;t++)x=p[t],K.De(e,f,
x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;default:v.k("Segment not of valid type: "+m.ia)}m.Dh&&(c.push(h),c.push(l),kn(a,b,c,d))}kn(a,b,c,d);v.ra(c);a.restore()}}}};
function ln(a,b,c,d){var e=.001,f=c.length,h=0,k=0,l=0,m=0,e=b.length;if(!(4>e))if(h=b[0],k=b[1],4===e)tl(a,h,k,b[2],b[3],c,d);else{a.moveTo(h,k);for(var n=0,p=0,q=0,r=p=l=0,s=v.jb(),t=2;t<e;t+=2)l=b[t],m=b[t+1],n=l-h,p=m-k,0===n&&(n=.001),q=p/n,p=Math.sqrt(n*n+p*p),h=[],h[0]=n,h[1]=q,h[2]=p,s.push(h),r+=p,h=l,k=m;h=b[0];k=b[1];b=0;for(var m=!0,e=c[b%f],t=0!==d,p=0,l=s[p],n=l[0],q=l[1],l=l[2],u=0;.1<=r;){0===u&&(e=c[b%f],b++,t&&(d%=e,e-=d,t=!1));e>r&&(e=r);e>l?(u=e-l,e=l):u=0;var x=Math.sqrt(e*e/
(1+q*q));0>n&&(x=-x);h+=x;k+=q*x;m?a.lineTo(h,k):a.moveTo(h,k);r-=e;l-=e;if(0!==u){p++;if(p===s.length){v.ra(s);return}l=s[p];n=l[0];q=l[1];l=l[2];e=u}else m=!m}v.ra(s)}}X.prototype.getDocumentPoint=X.prototype.fb=function(a,b){void 0===b&&(b=new w);a.me()&&v.k("getDocumentPoint Spot must be a real, specific Spot, not: "+a.toString());var c=this.Fa,d=this.nb;b.m(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.Ef.xb(b);return b};
X.prototype.Rj=function(a,b){var c=this.Ta;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.pb,e=this.nb/2;c.type!==fd||b||(e+=2);var f=v.Uf();f.assign(d);f.Kf(e+2,e+2);if(!f.Ca(a))return v.fc(f),!1;d=e+1E-4;if(c.type===fd){if(null===this.stroke)return!1;d=(c.J-c.Ia)*(a.x-c.Ia)+(c.K-c.Ja)*(a.y-c.Ja);if(0>(c.Ia-c.J)*(a.x-c.J)+(c.Ja-c.K)*(a.y-c.K)||0>d)return!1;v.fc(f);return K.zd(c.Ia,c.Ja,c.J,c.K,e,a.x,a.y)}if(c.type===gd){var h=c.Ia,k=c.Ja,l=c.J,m=c.K,c=Math.min(h,l),n=Math.min(k,
m),h=Math.abs(l-h),k=Math.abs(m-k);f.x=c;f.y=n;f.width=h;f.height=k;if(null===this.fill){f.Kf(-d,-d);if(f.Ca(a))return v.fc(f),!1;f.Kf(d,d)}null!==this.stroke&&f.Kf(e,e);e=f.Ca(a);v.fc(f);return e}if(c.type===hd){h=c.Ia;k=c.Ja;l=c.J;m=c.K;c=Math.min(h,l);n=Math.min(k,m);h=Math.abs(l-h);k=Math.abs(m-k);h/=2;k/=2;c=a.x-(c+h);n=a.y-(n+k);if(null===this.fill){h-=d;k-=d;if(0>=h||0>=k||1>=c*c/(h*h)+n*n/(k*k))return v.fc(f),!1;h+=d;k+=d}null!==this.stroke&&(h+=e,k+=e);v.fc(f);return 0>=h||0>=k?!1:1>=c*c/
(h*h)+n*n/(k*k)}if(c.type===cd)return v.fc(f),null===this.fill?Jd(c,a.x,a.y,e):c.Ca(a,e,1<this.nb,b);v.k("Unknown Geometry type: "+c.type);return!1};
X.prototype.ip=function(a,b,c,d){var e=this.xa,f=this.Sg;a=Math.max(a,0);b=Math.max(b,0);var h;if(this.Qg)h=this.Ta.pb;else{var k=this.Cb,l=K.Jx[k];if(void 0===l){var m=K.sg[k];"string"===typeof m&&(m=K.sg[m]);"function"===typeof m?(l=m(null,100,100),K.Jx[k]=l):v.k("Unsupported Figure: "+k)}h=l.pb}var k=h.width,l=h.height,m=h.width,n=h.height;switch(yl(this,!0)){case th:d=c=0;break;case ed:m=Math.max(a-f,0);n=Math.max(b-f,0);break;case ol:m=Math.max(a-f,0);d=0;break;case nl:c=0,n=Math.max(b-f,0)}isFinite(e.width)&&
(m=e.width);isFinite(e.height)&&(n=e.height);e=this.af;h=this.ug;c=Math.max(c,h.width)-f;d=Math.max(d,h.height)-f;m=Math.min(e.width,m);n=Math.min(e.height,n);m=isFinite(m)?Math.max(c,m):Math.max(k,c);n=isFinite(n)?Math.max(d,n):Math.max(l,d);c=uh(this);switch(c){case th:break;case ed:k=m;l=n;break;case vh:c=Math.min(m/k,n/l);isFinite(c)||(c=1);k*=c;l*=c;break;default:v.k(c+" is not a valid geometryStretch.")}if(this.Qg)h=this.Uo,e=k,d=l,c=h.copy(),h=h.pb,e/=h.width,d/=h.height,isFinite(e)||(e=1),
isFinite(d)||(d=1),1===e&&1===d||c.scale(e,d),this.Ta=c;else if(null===this.Ta||this.Ta.Vn!==a-f||this.Ta.Tn!==b-f)this.Ta=K.makeGeometry(this,k,l);h=this.Ta.pb;Infinity===a||Infinity===b?vl(this,h.x-f/2,h.y-f/2,0===a&&0===k?0:h.width+f,0===b&&0===l?0:h.height+f):vl(this,-(f/2),-(f/2),m+f,n+f)};
function Ym(a,b,c){if(!1!==Jj(a)){a.Vc.Na();var d=a.Sg;if(0===d){var e=a.V;e instanceof mf&&e.type===dh&&e.ec instanceof X&&(d=e.ec.nb)}d*=a.Tb;vl(a,-(d/2),-(d/2),b+d,c+d);b=a.Vc;c=a.af;d=a.ug;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Vc.freeze();a.Vc.H()||v.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Vc.toString());Dj(a,!1)}}
function uh(a){var b=a.Hz;return a.Qg?b===ml?ed:b:b===ml?K.Jx[a.Cb].Hd:b}X.prototype.Li=function(a,b,c,d){zl(this,a,b,c,d)};X.prototype.getNearestIntersectionPoint=X.prototype.ml=function(a,b,c){return this.Xo(a.x,a.y,b.x,b.y,c)};
X.prototype.Xo=function(a,b,c,d,e){var f=this.transform,h=1/(f.m11*f.m22-f.m12*f.m21),k=f.m22*h,l=-f.m12*h,m=-f.m21*h,n=f.m11*h,p=h*(f.m21*f.dy-f.m22*f.dx),q=h*(f.m12*f.dx-f.m11*f.dy),f=a*k+b*m+p,h=a*l+b*n+q,k=c*k+d*m+p,l=c*l+d*n+q,m=this.nb/2,p=this.Ta;null===p&&(Rh(this,Infinity,Infinity),p=this.Ta);q=p.pb;n=!1;if(p.type===fd)if(1.5>=this.nb)n=K.bh(p.tc,p.xc,p.yb,p.Db,f,h,k,l,e);else{var r=0,s=0;p.tc===p.yb?(r=m,s=0):(b=(p.Db-p.xc)/(p.yb-p.tc),s=m/Math.sqrt(1+b*b),r=s*b);d=v.jb();b=new w;K.bh(p.tc+
r,p.xc+s,p.yb+r,p.Db+s,f,h,k,l,b)&&d.push(b);b=new w;K.bh(p.tc-r,p.xc-s,p.yb-r,p.Db-s,f,h,k,l,b)&&d.push(b);b=new w;K.bh(p.tc+r,p.xc+s,p.tc-r,p.xc-s,f,h,k,l,b)&&d.push(b);b=new w;K.bh(p.yb+r,p.Db+s,p.yb-r,p.Db-s,f,h,k,l,b)&&d.push(b);b=d.length;if(0===b)return v.ra(d),!1;n=!0;s=Infinity;for(r=0;r<b;r++){var k=d[r],t=(k.x-f)*(k.x-f)+(k.y-h)*(k.y-h);t<s&&(s=t,e.x=k.x,e.y=k.y)}v.ra(d)}else if(p.type===gd)b=q.x-m,n=K.ml(b,q.y-m,q.x+q.width+m,q.y+q.height+m,f,h,k,l,e);else if(p.type===hd)a:if(b=q.copy().Kf(m,
m),0===b.width)n=K.bh(b.x,b.y,b.x,b.y+b.height,f,h,k,l,e);else if(0===b.height)n=K.bh(b.x,b.y,b.x+b.width,b.y,f,h,k,l,e);else{a=b.width/2;var u=b.height/2;d=b.x+a;b=b.y+u;c=9999;f!==k&&(c=(h-l)/(f-k));if(9999>Math.abs(c)){n=h-b-c*(f-d);if(0>a*a*c*c+u*u-n*n){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(a*a*c*c+u*u-n*n);k=(-(a*a*c*n)+a*u*m)/(u*u+a*a*c*c)+d;a=(-(a*a*c*n)-a*u*m)/(u*u+a*a*c*c)+d;l=c*(k-d)+n+b;b=c*(a-d)+n+b;d=Math.abs((f-k)*(f-k))+Math.abs((h-l)*(h-l));h=Math.abs((f-a)*(f-a))+Math.abs((h-b)*
(h-b));d<h?(e.x=k,e.y=l):(e.x=a,e.y=b)}else{k=u*u;l=f-d;k-=k/(a*a)*l*l;if(0>k){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(k);l=b+m;b-=m;d=Math.abs(l-h);h=Math.abs(b-h);d<h?(e.x=f,e.y=l):(e.x=f,e.y=b)}n=!0}else if(p.type===cd){var x=0,y=0,A=t=0,q=v.M(),r=k-f,s=l-h,s=r*r+s*s;e.x=k;e.y=l;for(r=0;r<p.Ub.count;r++)for(var B=p.Ub.n[r],I=B.vb,x=B.Ia,y=B.Ja,D=x,V=y,ba=0;ba<I.count;ba++){var U=I.n[ba],N=U.type,t=U.J,A=U.K,Z=!1;switch(N){case Ad:D=t;V=A;break;case sd:Z=mn(x,y,t,A,f,h,k,l,q);break;case Bd:var Z=
U.ic,N=U.Qc,Ga=U.ih,ta=U.jh,Z=K.Ms(x,y,Z,N,Ga,ta,t,A,f,h,k,l,.5,q);break;case Cd:Z=(x+2*U.ic)/3;N=(y+2*U.Qc)/3;Ga=(2*U.ic+t)/3;ta=(2*U.ic+t)/3;Z=K.Ms(x,y,Z,N,Ga,ta,t,A,f,h,k,l,.5,q);break;case Dd:case Fd:N=U.type===Dd?Gd(U,B):Hd(U,B,x,y);Ga=N.length;if(0===Ga){Z=mn(x,y,U.oa,U.va,f,h,k,l,q);break}for(A=0;A<Ga;A++)u=N[A],0===A&&mn(x,y,u[0],u[1],f,h,k,l,q)&&(t=nn(f,h,q,s,e),t<s&&(s=t,n=!0)),K.Ms(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],f,h,k,l,.5,q)&&(t=nn(f,h,q,s,e),t<s&&(s=t,n=!0));t=u[6];A=u[7];break;
default:v.k("Unknown Segment type: "+N)}x=t;y=A;Z&&(t=nn(f,h,q,s,e),t<s&&(s=t,n=!0));U.Ow&&(t=D,A=V,mn(x,y,t,A,f,h,k,l,q)&&(t=nn(f,h,q,s,e),t<s&&(s=t,n=!0)))}f=c-a;h=d-b;b=Math.sqrt(f*f+h*h);0!==b&&(f/=b,h/=b);e.x-=f*m;e.y-=h*m;v.v(q)}else v.k("Unknown Geometry type: "+p.type);if(!n)return!1;this.transform.xb(e);return!0};function nn(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function mn(a,b,c,d,e,f,h,k,l){var m=!1,n=(e-h)*(b-d)-(f-k)*(a-c);if(0===n)return!1;l.x=((e*k-f*h)*(a-c)-(e-h)*(a*d-b*c))/n;l.y=((e*k-f*h)*(b-d)-(f-k)*(a*d-b*c))/n;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(l.y>e||K.sb(l.y,e))&&(l.y<a||K.sb(l.y,a))&&(m=!0)):(e=a<c?a:c,a=a<c?c:a,(l.x>e||K.sb(l.x,e))&&(l.x<a||K.sb(l.x,a))&&(m=!0));return m}
X.prototype.containedInRect=X.prototype.Hm=function(a,b){if(void 0===b)return a.Sj(this.Z);var c=this.Ta;null===c&&(Rh(this,Infinity,Infinity),c=this.Ta);var c=c.pb,d=this.nb/2,e=!1,f=v.M();f.m(c.x-d,c.y-d);a.Ca(b.xb(f))&&(f.m(c.x-d,c.bottom+d),a.Ca(b.xb(f))&&(f.m(c.right+d,c.bottom+d),a.Ca(b.xb(f))&&(f.m(c.right+d,c.y-d),a.Ca(b.xb(f))&&(e=!0))));v.v(f);return e};
X.prototype.intersectsRect=X.prototype.tg=function(a,b){if(this.Hm(a,b)||void 0===b&&(b=this.transform,a.Sj(this.Z)))return!0;var c=v.nh();c.set(b);c.Pz();var d=a.left,e=a.right,f=a.top,h=a.bottom,k=v.M();k.m(d,f);c.xb(k);if(this.Rj(k,!0))return v.v(k),!0;k.m(e,f);c.xb(k);if(this.Rj(k,!0))return v.v(k),!0;k.m(d,h);c.xb(k);if(this.Rj(k,!0))return v.v(k),!0;k.m(e,h);c.xb(k);if(this.Rj(k,!0))return v.v(k),!0;var l=v.M(),m=v.M();c.set(b);c.JE(this.transform);c.Pz();l.x=e;l.y=f;l.transform(c);k.x=d;k.y=
f;k.transform(c);var n=!1;on(this,k,l,m)?n=!0:(k.x=e,k.y=h,k.transform(c),on(this,k,l,m)?n=!0:(l.x=d,l.y=h,l.transform(c),on(this,k,l,m)?n=!0:(k.x=d,k.y=f,k.transform(c),on(this,k,l,m)&&(n=!0))));v.v(k);v.Xe(c);v.v(l);v.v(m);return n};function on(a,b,c,d){if(!a.ml(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var f=d.x;d=d.y;if(a===e){var h=0;a=0;b<c?(h=b,a=c):(h=c,a=b);return d>=h&&d<=a}a<e?(h=a,a=e):h=e;return f>=h&&f<=a}
X.prototype.$D=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.Po(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.Rj(a,!0))return!0;var e=a.Tj(b);b=e;1.5<this.nb&&(e=this.nb/2+Math.sqrt(e),e*=e);var f=this.Ta;null===f&&(Rh(this,Infinity,Infinity),f=this.Ta);if(!c){var h=f.pb,k=h.x,l=h.y,m=h.x+h.width,h=h.y+h.height;if(Za(a.x,a.y,k,l)<=e&&Za(a.x,a.y,m,l)<=e&&Za(a.x,a.y,k,h)<=e&&Za(a.x,a.y,m,h)<=e)return!0}k=f.tc;l=f.xc;m=f.yb;h=f.Db;if(f.type===fd){if(c=Ya(a.x,a.y,
k,l,m,h),f=(k-m)*(a.x-m)+(l-h)*(a.y-h),c<=(0<=(m-k)*(a.x-k)+(h-l)*(a.y-l)&&0<=f?e:b))return!0}else{if(f.type===gd)return b=!1,c&&(b=Ya(a.x,a.y,k,l,k,h)<=e||Ya(a.x,a.y,k,l,m,l)<=e||Ya(a.x,a.y,m,l,m,h)<=e||Ya(a.x,a.y,k,h,m,h)<=e),b;if(f.type===hd){b=a.x-(k+m)/2;var f=a.y-(l+h)/2,n=Math.abs(m-k)/2,p=Math.abs(h-l)/2;if(0===n||0===p)return c=Ya(a.x,a.y,k,l,m,h),c<=e?!0:!1;if(c){if(a=K.bH(n,p,b,f),a*a<=e)return!0}else return Za(b,f,-n,0)>=e||Za(b,f,0,-p)>=e||Za(b,f,0,p)>=e||Za(b,f,n,0)>=e?!1:!0}else if(f.type===
cd){h=f.pb;k=h.x;l=h.y;m=h.x+h.width;h=h.y+h.height;if(a.x>m&&a.x<k&&a.y>h&&a.y<l&&Ya(a.x,a.y,k,l,k,h)>e&&Ya(a.x,a.y,k,l,m,l)>e&&Ya(a.x,a.y,m,h,k,h)>e&&Ya(a.x,a.y,m,h,m,l)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?Jd(f,a.x,a.y,b):f.Ca(a,b,!0))return!0}else{c=f.Ub;for(b=0;b<c.count;b++){k=c.n[b];n=k.Ia;p=k.Ja;if(a.Po(n,p)>e)return!1;l=k.vb.n;m=l.length;for(h=0;h<m;h++){var q=l[h];switch(q.type){case Ad:case sd:n=q.J;p=q.K;if(a.Po(n,p)>e)return!1;break;case Bd:f=v.jb();K.De(n,p,q.ic,q.Qc,
q.ih,q.jh,q.J,q.K,.8,f);n=d(f,a);v.ra(f);if(n)return!1;n=q.J;p=q.K;if(a.Po(n,p)>e)return!1;break;case Cd:f=v.jb();K.rp(n,p,q.ic,q.Qc,q.J,q.K,.8,f);n=d(f,a);v.ra(f);if(n)return!1;n=q.J;p=q.K;if(a.Po(n,p)>e)return!1;break;case Dd:case Fd:var r=q.type===Dd?Gd(q,k):Hd(q,k,n,p),s=r.length;if(0===s){n=q.oa;p=q.va;if(a.Po(n,p)>e)return!1;break}q=null;f=v.jb();for(b=0;b<s;b++)if(q=r[b],f.length=0,K.De(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.8,f),d(f,a))return v.ra(f),!1;v.ra(f);null!==q&&(n=q[6],p=q[7]);
break;default:v.k("Unknown Segment type: "+q.type)}}}return!0}}}return!1};v.defineProperty(X,{Uo:"geometry"},function(){return this.tk?this.tk:this.Ta},function(a){var b=this.Ta;if(b!==a){this.tk=null!==a?this.Ta=a.freeze():this.Ta=null;var c=this.V;null!==c&&(c.vj=NaN);this.Qg=!0;this.P();this.h("geometry",b,a);a=this.V;null!==a&&0!==(this.fa&1024)&&ul(this,a,"geometryString")}});
v.defineProperty(X,{rH:"geometryString"},function(){return null===this.Uo?"":this.Uo.toString()},function(a){var b=ud(a);a=b.normalize();this.Uo=b;var b=v.M(),c=this.position;c.H()?b.m(c.x-a.x,c.y-a.y):b.m(-a.x,-a.y);this.position=b;v.v(b)});v.defineProperty(X,{sE:"isGeometryPositioned"},function(){return this.Lq},function(a){var b=this.Lq;b!==a&&(this.Lq=a,this.P(),this.h("isGeometryPositioned",b,a))});X.prototype.Ye=function(){this.Qg?this.tk=null:this.Ta=null;this.P()};
v.defineProperty(X,{fill:"fill"},function(){return this.qd},function(a){var b=this.qd;b!==a&&(a instanceof ha&&a.freeze(),this.qd=a,this.pa(),this.h("fill",b,a))});v.defineProperty(X,{stroke:"stroke"},function(){return this.yc},function(a){var b=this.yc;b!==a&&(a instanceof ha&&a.freeze(),this.yc=a,this.pa(),this.h("stroke",b,a))});
v.defineProperty(X,{nb:"strokeWidth"},function(){return this.Sg},function(a){var b=this.Sg;if(b!==a)if(0<=a){this.Sg=a;this.P();var c=this.V;null!==c&&(c.vj=NaN);this.h("strokeWidth",b,a)}else v.ua(a,"value >= 0",X,"strokeWidth:value")});v.defineProperty(X,{jL:"strokeCap"},function(){return this.vo},function(a){var b=this.vo;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?v.ua(a,'"butt", "round", or "square"',X,"strokeCap"):(this.vo=a,this.pa(),this.h("strokeCap",b,a)))});
v.defineProperty(X,{lL:"strokeJoin"},function(){return this.wo},function(a){var b=this.wo;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?v.ua(a,'"miter", "bevel", or "round"',X,"strokeJoin"):(this.wo=a,this.pa(),this.h("strokeJoin",b,a)))});v.defineProperty(X,{mL:"strokeMiterLimit"},function(){return this.vm},function(a){var b=this.vm;if(b!==a)if(0<a){this.vm=a;this.pa();var c=this.V;null!==c&&(c.vj=NaN);this.h("strokeMiterLimit",b,a)}else v.ua(a,"value > 0",X,"strokeWidth:value")});
v.defineProperty(X,{sF:"strokeDashArray"},function(){return this.um},function(a){var b=this.um;if(b!==a){null===a||Array.isArray(a)||v.Ad(a,"Array",X,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("strokeDashArray:value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.um=a;this.pa();this.h("strokeDashArray",b,a)}});
v.defineProperty(X,{kL:"strokeDashOffset"},function(){return this.nd},function(a){var b=this.nd;b!==a&&0<=a&&(this.nd=a,this.pa(),this.h("strokeDashOffset",b,a))});v.defineProperty(X,{Cb:"figure"},function(){return this.Mn},function(a){var b=this.Mn;if(b!==a){var c=K.sg[a];"function"===typeof c?c=a:(c=K.sg[a.toLowerCase()])||v.k("Unknown Shape.figure: "+a);b!==c&&(a=this.V,null!==a&&(a.vj=NaN),this.Mn=c,this.Qg=!1,this.Ye(),this.h("figure",b,c))}});
v.defineProperty(X,{Hp:"toArrow"},function(){return this.xo},function(a){var b=this.xo;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=K.AD(a);null===c?v.k("Unknown Shape.toArrow: "+a):b!==c&&(this.xo=c,this.Qg=!1,this.Ye(),pn(this),this.h("toArrow",b,c))}});
v.defineProperty(X,{Gz:"fromArrow"},function(){return this.Pn},function(a){var b=this.Pn;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=K.AD(a);null===c?v.k("Unknown Shape.fromArrow: "+a):b!==c&&(this.Pn=c,this.Qg=!1,this.Ye(),pn(this),this.h("fromArrow",b,c))}});function pn(a){var b=a.g;null!==b&&b.ja.ib||(a.Pt=qn,"None"!==a.xo?(a.pe=-1,a.Pj=Bc):"None"!==a.Pn&&(a.pe=0,a.Pj=new L(1-Bc.x,Bc.y)))}
v.defineProperty(X,{A:"spot1"},function(){return this.Fi},function(a){v.C(a,L,X,"spot1");var b=this.Fi;b.L(a)||(this.Fi=a=a.aa(),this.P(),this.h("spot1",b,a))});v.defineProperty(X,{B:"spot2"},function(){return this.Gi},function(a){v.C(a,L,X,"spot2");var b=this.Gi;b.L(a)||(this.Gi=a=a.aa(),this.P(),this.h("spot2",b,a))});v.defineProperty(X,{vc:"parameter1"},function(){return this.Cr},function(a){var b=this.Cr;b!==a&&(this.Cr=a,this.Ye(),this.h("parameter1",b,a))});
v.defineProperty(X,{Gt:"parameter2"},function(){return this.Dr},function(a){var b=this.Dr;b!==a&&(this.Dr=a,this.Ye(),this.h("parameter2",b,a))});v.u(X,{Fa:"naturalBounds"},function(){if(null!==this.Ta)return this.Jc.assign(this.Ta.pb),this.Jc;var a=this.xa;return new z(0,0,a.width,a.height)});v.defineProperty(X,{sK:"isRectangular"},function(){return this.Qq},function(a){var b=this.Qq;b!==a&&(this.Qq=a,this.P(),this.h("isRectangular",b,a))});
v.defineProperty(X,{NE:"pathObject"},function(){return this.Fr},function(a){var b=this.Fr;b!==a&&(this.Fr=a,this.pa(),this.h("pathObject",b,a))});v.defineProperty(X,{Hz:"geometryStretch"},function(){return this.Dq},function(a){var b=this.Dq;b!==a&&(v.qb(a,R,X,"geometryStretch"),this.Dq=a,this.h("geometryStretch",b,a))});
v.defineProperty(X,{interval:"interval"},function(){return this.Iq},function(a){var b=this.Iq;a=Math.floor(a);b!==a&&0<=a&&(this.Iq=a,null!==this.g&&Ej(this.g),this.P(),this.h("interval",b,a))});X.getFigureGenerators=function(){var a=new ma("string","function"),b;for(b in K.sg)if(b!==b.toLowerCase()){var c=K.sg[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
X.defineFigureGenerator=function(a,b){v.j(a,"string",X,"defineFigureGenerator:name");"string"===typeof b?""!==b&&K.sg[b]||v.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):v.j(b,"function",X,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);var d=K.sg;d[a]=b;d[c]=a};
X.getArrowheadGeometries=function(){var a=new ma("string",Xc),b;for(b in K.aj)if(b!==b.toLowerCase()){var c=K.aj[b];c instanceof Xc&&a.add(b,c)}a.freeze();return a};
X.defineArrowheadGeometry=function(a,b){v.j(a,"string",X,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(v.j(b,"string",X,"defineArrowheadGeometry:pathstr"),c=ud(b,!1)):(v.C(b,Xc,X,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||v.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);var e=K.aj;e[a]=c;e[d]=a};
function ra(){R.call(this);this.ie="";this.yc="black";this.Gg="13px sans-serif";this.vd="start";this.Nq=!0;this.Ul=this.Vl=!1;this.Pk=rn;this.ym=sn;this.lv=this.xe=0;this.On=this.Ky=this.Ly=null;this.sj=new tn;this.xq=!1;this.hf=this.Rk=this.ss=null;this.Gj=this.Fj=0;this.vi=Infinity;this.gv=0}v.Ga(ra,R);v.ga("TextBlock",ra);var un=new pa,vn=0,wn=new pa,xn=0,yn="...",zn="",An=v.createElement("canvas").getContext("2d");ra.getEllipsis=function(){return yn};
ra.setEllipsis=function(a){yn=a;wn=new pa;xn=0};ra.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.ie=this.ie;a.yc=this.yc;a.Gg=this.Gg;a.vd=this.vd;a.Nq=this.Nq;a.Vl=this.Vl;a.Ul=this.Ul;a.ym=this.ym;a.Pk=this.Pk;a.xe=this.xe;a.lv=this.lv;a.Ly=this.Ly;a.Ky=this.Ky;a.On=this.On;a.sj.Ss(this.sj);a.xq=this.xq;a.ss=this.ss;a.Rk=this.Rk;a.hf=this.hf;a.Fj=this.Fj;a.Gj=this.Gj;a.vi=this.vi;a.gv=this.gv};
ra.prototype.toString=function(){return 22<this.ie.length?'TextBlock("'+this.ie.substring(0,20)+'"...)':'TextBlock("'+this.ie+'")'};var Bn;ra.None=Bn=v.p(ra,"None",0);var Cn;ra.WrapFit=Cn=v.p(ra,"WrapFit",1);var sn;ra.WrapDesiredSize=sn=v.p(ra,"WrapDesiredSize",2);var rn;ra.OverflowClip=rn=v.p(ra,"OverflowClip",0);var Dn;ra.OverflowEllipsis=Dn=v.p(ra,"OverflowEllipsis",1);ra.prototype.P=function(){R.prototype.P.call(this);this.Ky=this.Ly=null};
v.defineProperty(ra,{font:"font"},function(){return this.Gg},function(a){var b=this.Gg;b!==a&&(this.Gg=a,this.On=null,this.P(),this.h("font",b,a))});ra.isValidFont=function(a){var b=An.font;if(a===b||"10px sans-serif"===a)return!0;An.font="10px sans-serif";var c;An.font=a;var d=An.font;if("10px sans-serif"!==d)return An.font=b,!0;An.font="19px serif";c=An.font;An.font=a;d=An.font;An.font=b;return d!==c};
v.defineProperty(ra,{text:"text"},function(){return this.ie},function(a){var b=this.ie;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.ie=a,this.P(),this.h("text",b,a))});v.defineProperty(ra,{textAlign:"textAlign"},function(){return this.vd},function(a){var b=this.vd;b!==a&&("start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.vd=a,this.pa(),this.h("textAlign",b,a)):v.ua(a,'"start", "end", "left", "right", or "center"',ra,"textAlign"))});
v.u(ra,{Fa:"naturalBounds"},function(){if(!this.Jc.H()){var a=En(this,this.ie,this.sj,999999).width,b=Fn(this,a,this.sj),c=this.xa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);eb(this.Jc,a,b)}return this.Jc});v.defineProperty(ra,{Sw:"isMultiline"},function(){return this.Nq},function(a){var b=this.Nq;b!==a&&(this.Nq=a,this.P(),this.h("isMultiline",b,a))});
v.defineProperty(ra,{vK:"isUnderline"},function(){return this.Vl},function(a){var b=this.Vl;b!==a&&(this.Vl=a,this.pa(),this.h("isUnderline",b,a))});v.defineProperty(ra,{tK:"isStrikethrough"},function(){return this.Ul},function(a){var b=this.Ul;b!==a&&(this.Ul=a,this.pa(),this.h("isStrikethrough",b,a))});v.defineProperty(ra,{JF:"wrap"},function(){return this.ym},function(a){var b=this.ym;b!==a&&(this.ym=a,this.P(),this.h("wrap",b,a))});
v.defineProperty(ra,{overflow:"overflow"},function(){return this.Pk},function(a){var b=this.Pk;b!==a&&(this.Pk=a,this.P(),this.h("overflow",b,a))});v.defineProperty(ra,{stroke:"stroke"},function(){return this.yc},function(a){var b=this.yc;b!==a&&(a instanceof ha&&a.freeze(),this.yc=a,this.pa(),this.h("stroke",b,a))});v.u(ra,{$H:"lineCount"},function(){return this.xe});v.defineProperty(ra,{Dz:"editable"},function(){return this.xq},function(a){var b=this.xq;b!==a&&(this.xq=a,this.h("editable",b,a))});
v.defineProperty(ra,{tF:"textEditor"},function(){return this.ss},function(a){var b=this.ss;b!==a&&(a instanceof HTMLElement||v.k("textEditor must be an HTMLElement, not: "+a),this.ss=a,this.h("textEditor",b,a))});v.defineProperty(ra,{Ez:"errorFunction"},function(){return this.hf},function(a){var b=this.hf;b!==a&&(null!==a&&v.j(a,"function",ra,"errorFunction"),this.hf=a,this.h("errorFunction",b,a))});function Gl(a,b){var c=a.Gg;null!==c&&b.gu!==c&&(b.font=c,b.gu=c)}
ra.prototype.Uj=function(a,b){if(null!==this.yc&&0!==this.ie.length&&null!==this.Gg){var c=this.Fa.width,d=Gn(this);a.textAlign=this.vd;Jl(this,a,this.yc,!0,!1);(this.Vl||this.Ul)&&Jl(this,a,this.yc,!1,!1);var e=this.sj,f=0,h=!1,k=v.Rb(0,0);this.Ef.xb(k);var l=v.Rb(0,d);this.Ef.xb(l);var m=k.Tj(l);v.v(k);v.v(l);k=b.scale;8>m*k*k&&(h=!0);b.Fg!==a&&(h=!1);!1===b.Yj("textGreeking")&&(h=!1);for(var m=this.Fj,k=this.Gj,l=this.xe,n=0;n<l;n++){var p=e.ff[n],q=e.ue[n];p>c&&(p=c);var f=f+m,r=q,q=a,s=f,t=c,
u=d,x=0;h?("start"===this.vd||"left"===this.vd?x=0:"end"===this.vd||"right"===this.vd?x=t-p:"center"===this.vd?x=(t-p)/2:v.k("textAlign must be start, end, left, right, or center: "+this.vd),q.fillRect(0+x,s+.25*u,p,1)):("start"===this.vd||"left"===this.vd?x=0:"end"===this.vd||"right"===this.vd?x=t:"center"===this.vd?x=t/2:v.k("textAlign must be start, end, left, right, or center: "+this.vd),q.fillText(r,0+x,s+u-.25*u),r=u/20|0,0===r&&(r=1),"end"===this.vd||"right"===this.vd?x-=p:"center"===this.vd&&
(x-=p/2),this.Vl&&(q.beginPath(),q.lineWidth=r,q.moveTo(0+x,s+u-.2*u),q.lineTo(0+x+p,s+u-.2*u),q.stroke()),this.Ul&&(q.beginPath(),q.lineWidth=r,s=s+u-u/2.2|0,0!==r%2&&(s+=.5),q.moveTo(0+x,s),q.lineTo(0+x+p,s),q.stroke()));f+=d+k}}};
ra.prototype.ip=function(a,b,c,d){this.gv=a;var e=this.sj;e.reset();var f=0,h=0;if(isNaN(this.xa.width)){f=this.ie.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===f.length)f=0;else if(this.Sw){for(var k=h=0,l=!1;!l;){var m=f.indexOf("\n",k);-1===m&&(m=f.length,l=!0);k=Hn(f.substr(k,m-k).replace(/^\s+|\s+$/g,""),this.Gg);k>h&&(h=k);k=m+1}f=h}else h=f.indexOf("\n",0),0<=h&&(f=f.substr(0,h)),f=k=Hn(f,this.Gg);f=Math.min(f,a/this.scale);f=Math.max(8,f)}else f=this.xa.width;null!==this.T&&(f=Math.min(f,
this.T.af.width),f=Math.max(f,this.T.ug.width));h=Fn(this,f,e);m=h=isNaN(this.xa.height)?Math.min(h,b/this.scale):this.xa.height;if(0!==e.Qe&&1!==e.ue.length&&this.Pk===Dn&&(b=this.Gg,l=this.Pk===Dn?In(b):0,k=this.Fj+this.Gj,k=Math.max(0,Gn(this)+k),m=Math.max(Math.floor(m/k)-1,0),!(m+1>=e.ue.length))){k=e.ue[m];for(a=Math.max(1,a-l);Hn(k,b)>a&&1<k.length;)k=k.substr(0,k.length-1);k+=yn;a=Hn(k,b);e.ue[m]=k;e.ue=e.ue.slice(0,m+1);e.ff[m]=a;e.ff=e.ff.slice(0,m+1);e.Ki=e.ue.length;e.Qe=Math.max(e.Qe,
a);this.xe=e.Ki}if(this.JF===Cn||isNaN(this.xa.width))f=e.Qe,isNaN(this.xa.width)&&(f=Math.max(8,f));f=Math.max(c,f);h=Math.max(d,h);eb(this.Jc,f,h);vl(this,0,0,f,h)};ra.prototype.Li=function(a,b,c,d){zl(this,a,b,c,d)};
function En(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,f=0,h=0,k=a.Gg,f=a.Fj+a.Gj,l=Math.max(0,Gn(a)+f),h=a.Pk===Dn?In(k):0;if(a.xe>=a.vi)return new ia(0,l);if(a.ym===Bn){c.Ki=1;f=Hn(b,k);if(0===h||f<=d)return c.Qe=f,c.ff.push(c.Qe),c.ue.push(b),new ia(f,l);var m=Jn(b);b=b.substr(m.length);for(var n=Jn(b),f=Hn(m+n,k);0<n.length&&f<=d;)m+=n,b=b.substr(n.length),n=Jn(b),f=Hn((m+n).replace(/^\s+|\s+$/g,""),k);m+=n.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-h);Hn(m,k)>d&&1<m.length;)m=m.substr(0,
m.length-1);m+=yn;h=Hn(m,k);c.ff.push(h);c.Qe=h;c.ue.push(m);return new ia(h,l)}var p=0;0===b.length&&(p=1,c.ff.push(0),c.ue.push(b));for(;0<b.length;){m=Jn(b);for(b=b.substr(m.length);Hn(m,k)>d;){n=1;f=Hn(m.substr(0,n),k);for(h=0;f<=d;)n++,h=f,f=Hn(m.substr(0,n),k);1===n?(c.ff[a.xe+p]=f,e=Math.max(e,f)):(c.ff[a.xe+p]=h,e=Math.max(e,h));n--;1>n&&(n=1);c.ue[a.xe+p]=m.substr(0,n);p++;m=m.substr(n);if(a.xe+p>a.vi)break}n=Jn(b);for(f=Hn(m+n,k);0<n.length&&f<=d;)m+=n,b=b.substr(n.length),n=Jn(b),f=Hn((m+
n).replace(/^\s+|\s+$/g,""),k);m=m.replace(/^\s+|\s+$/g,"");if(""!==m&&(0===n.length?(c.ff.push(f),e=Math.max(e,f)):(h=Hn(m,k),c.ff.push(h),e=Math.max(e,h)),c.ue.push(m),p++,a.xe+p>a.vi))break}c.Ki=Math.min(a.vi,p);c.Qe=Math.max(c.Qe,e);return new ia(c.Qe,l*c.Ki)}function Jn(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function Hn(a,b){zn!==b&&(zn=An.font=b);return An.measureText(a).width}
function Gn(a){if(null!==a.On)return a.On;var b=a.Gg;zn!==b&&(zn=An.font=b);var c=0;void 0!==un[b]&&5E3>vn?c=un[b]:(c=1.3*An.measureText("M").width,un[b]=c,vn++);return a.On=c}function In(a){zn!==a&&(zn=An.font=a);var b=0;void 0!==wn[a]&&5E3>xn?b=wn[a]:(b=An.measureText(yn).width,wn[a]=b,xn++);return b}
function Fn(a,b,c){var d=a.ie.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.Fj+a.Gj,e=Math.max(0,Gn(a)+e);if(0===d.length)return c.Qe=0,a.xe=1,e;if(!a.Sw){var f=d.indexOf("\n",0);0<=f&&(d=d.substr(0,f))}for(var f=0,h=a.xe=0,k=-1,l=!1;!l;)k=d.indexOf("\n",h),-1===k&&(k=d.length,l=!0),h<=k&&(h=d.substr(h,k-h),a.ym!==Bn?(c.Ki=0,h=En(a,h,c,b),f+=h.height,a.xe+=c.Ki):(En(a,h,c,b),f+=e,a.xe++),a.xe===a.vi&&(l=!0)),h=k+1;return a.lv=f}
v.defineProperty(ra,{JA:"textValidation"},function(){return this.Rk},function(a){var b=this.Rk;b!==a&&(null!==a&&v.j(a,"function",ra,"textValidation"),this.Rk=a,this.h("textValidation",b,a))});v.defineProperty(ra,{gL:"spacingAbove"},function(){return this.Fj},function(a){var b=this.Fj;b!==a&&(this.Fj=a,this.h("spacingAbove",b,a))});v.defineProperty(ra,{hL:"spacingBelow"},function(){return this.Gj},function(a){var b=this.Gj;b!==a&&(this.Gj=a,this.h("spacingBelow",b,a))});
v.defineProperty(ra,{JK:"maxLines"},function(){return this.vi},function(a){var b=this.vi;b!==a&&(a=Math.floor(a),0>=a&&v.ua(a,"> 0",ra,"maxLines"),this.vi=a,this.h("maxLines",b,a),this.P())});v.u(ra,{KK:"metrics"},function(){return this.sj});function tn(){this.Qe=this.Ki=0;this.ff=[];this.ue=[]}tn.prototype.reset=function(){this.Qe=this.Ki=0;this.ff=[];this.ue=[]};tn.prototype.Ss=function(a){this.Ki=a.Ki;this.Qe=a.Qe;this.ff=v.$k(a.ff);this.ue=v.$k(a.ue)};v.u(tn,{OJ:"arrSize"},function(){return this.ff});
v.u(tn,{PJ:"arrText"},function(){return this.ue});v.u(tn,{IK:"maxLineWidth"},function(){return this.Qe});function Zi(){R.call(this);this.Oe=null;this.ms="";this.Ej=(new z(NaN,NaN,NaN,NaN)).freeze();this.Qn=ed;this.rs=this.Hj=this.hf=null;this.By=!1;this.qo=null;this.pC=0}v.Ga(Zi,R);v.ga("Picture",Zi);var Kn=new pa,Ln=0,Ti=[];
function Mn(){var a=Ti;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.W&&a.push(e.parentElement.W)}return a}var Nn;Zi.clearCache=Nn=function(a){void 0===a&&(a="");v.j(a,"string",Zi,"clearCache:url");""!==a?Kn[a]&&(delete Kn[a],Ln--):(Kn=new pa,Ln=0)};
Zi.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.element=this.Oe;a.ms=this.ms;a.Ej.assign(this.Ej);a.Qn=this.Qn;a.hf=this.hf;a.Hj=this.Hj;a.qo=this.qo};Zi.prototype.toString=function(){return"Picture("+this.source+")#"+v.cd(this)};
v.defineProperty(Zi,{element:"element"},function(){return this.Oe},function(a){var b=this.Oe;b!==a&&(null===a||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||v.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+a),this.By=a instanceof HTMLCanvasElement,this.Oe=a,null!==a&&(!0===a.complete||void 0===a.complete?(a.Uu instanceof Event&&null!==this.hf&&this.hf(this,a.Uu),!0===a.Dy&&null!==this.Hj&&this.Hj(this,null),a.Dy=!0,this.xa.H()||
(Dj(this,!1),this.P())):a.OB||(a.addEventListener("load",function(b){On(a,b)}),a.addEventListener("error",function(b){Pn(a,b)}),a.OB=!0)),this.h("element",b,a),this.pa())});
v.defineProperty(Zi,{source:"source"},function(){return this.ms},function(a){var b=this.ms;if(b!==a){v.j(a,"string",Zi,"source");this.ms=a;var c=Kn,d=this.g;if(void 0!==c[a])var e=c[a].Do[0].source;else{30<Ln&&(Nn(),c=Kn);e=v.createElement("img");e.addEventListener("load",function(a){On(e,a)});e.addEventListener("error",function(a){Pn(e,a)});e.OB=!0;e.src=a;var f=this.qo;null!==f&&(e.crossOrigin=f(this));c[a]=new Qn(e);Ln++}null!==d&&Fk(d,this);this.element=e;null!==d&&Ek(d,this);this.pa();this.h("source",
b,a)}});function On(a,b){a.Dy=!0;a.Uu=!1;for(var c=null,d=Mn(),e=d.length,f=0;f<e;f++){var h=d[f],k=h.ko.la(a.src);if(null!==k){e=k.length;for(f=0;f<e;f++)c=k[f],c.xa.H()||(h.BC.add(c),h.de()),null!==c.Hj&&c.Hj(c,b);h.pa()}}}function Pn(a,b){a.Uu=b;for(var c=null,d=Mn(),e=d.length,f=0;f<e;f++)if(c=d[f].ko.la(a.src),null!==c){for(var e=c.length,h=v.jb(),f=0;f<e;f++)h.push(c[f]);for(f=0;f<e;f++)c=h[f],null!==c.hf&&c.hf(c,b);v.ra(h)}}
v.defineProperty(Zi,{fL:"sourceCrossOrigin"},function(){return this.qo},function(a){if(this.qo!==a&&(null!==a&&v.j(a,"function",Zi,"sourceCrossOrigin"),this.qo=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this))}});v.defineProperty(Zi,{Wi:"sourceRect"},function(){return this.Ej},function(a){var b=this.Ej;b.L(a)||(v.C(a,z,Zi,"sourceRect"),this.Ej=a=a.aa(),this.pa(),this.h("sourceRect",b,a))});
v.defineProperty(Zi,{EH:"imageStretch"},function(){return this.Qn},function(a){var b=this.Qn;b!==a&&(v.qb(a,R,Zi,"imageStretch"),this.Qn=a,this.pa(),this.h("imageStretch",b,a))});v.defineProperty(Zi,{Ez:"errorFunction"},function(){return this.hf},function(a){var b=this.hf;b!==a&&(null!==a&&v.j(a,"function",Zi,"errorFunction"),this.hf=a,this.h("errorFunction",b,a))});
v.defineProperty(Zi,{pL:"successFunction"},function(){return this.Hj},function(a){var b=this.Hj;b!==a&&(null!==a&&v.j(a,"function",Zi,"successFunction"),this.Hj=a,this.h("successFunction",b,a))});
Zi.prototype.Uj=function(a,b){var c=this.Oe;if(null!==c){var d=c.src;null!==d&&""!==d||v.k('Element has no source ("src") attribute: '+c);if(!(c.Uu instanceof Event)&&!0===c.Dy){var d=this.Fa,e=0,f=0,h=this.By,k=h?+c.width:c.naturalWidth,h=h?+c.height:c.naturalHeight;void 0===k&&c.videoWidth&&(k=c.videoWidth);void 0===h&&c.videoHeight&&(h=c.videoHeight);k=k||d.width;h=h||d.height;if(0!==k&&0!==h){var l=k,m=h;this.Wi.H()&&(e=this.Ej.x,f=this.Ej.y,k=this.Ej.width,h=this.Ej.height);var n=k,p=h,q=this.Qn;
switch(q){case th:if(this.Wi.H())break;e+=Math.max((n-d.width)/2,0);f+=Math.max((p-d.height)/2,0);k=Math.min(d.width,n);h=Math.min(d.height,p);break;case ed:n=d.width;p=d.height;break;case vh:case wh:var r=0;q===vh?(r=Math.min(d.height/p,d.width/n),n*=r,p*=r):q===wh&&(r=Math.max(d.height/p,d.width/n),n*=r,p*=r,e+=(n-d.width)/2,f+=(p-d.height)/2,k*=1/(n/d.width),h*=1/(p/d.height),n=d.width,p=d.height)}this.pC=k*h;var q=this.Si()*b.scale,s=this.pC/(n*q*p*q),r=Kn[this.source],q=null;if(void 0!==r&&16<
s){2>r.Do.length&&(Rn(r,4,l,m),Rn(r,16,l,m));for(var l=r.Do,m=l.length,q=l[0],t=0;t<m;t++)if(l[t].sp*l[t].sp<s)q=l[t];else break}if(!b.Jn){if(null===this.rs)if(null===this.Oe)this.rs=!1;else{l=v.createElement("canvas").getContext("2d");l.drawImage(this.Oe,0,0);try{l.getImageData(0,0,1,1),this.rs=!1}catch(u){this.rs=!0}}if(this.rs)return}if(b.Yj("pictureRatioOptimization")&&!b.Cy&&void 0!==r&&null!==q&&1!==q.sp){a.save();r=q.sp;try{a.drawImage(q.source,e/r,f/r,Math.min(q.source.width,k/r),Math.min(q.source.height,
h/r),Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(x){}a.restore()}else try{a.drawImage(c,e,f,k,h,Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(y){}}}}};v.u(Zi,{Fa:"naturalBounds"},function(){return this.Jc});
Zi.prototype.ip=function(a,b,c,d){var e=this.xa,f=yl(this,!0),h=this.Oe,k=this.By;if(k||!this.Jy&&h&&h.complete)this.Jy=!0;null===h&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||f===ed||f===ol?(isFinite(a)||(a=this.Wi.H()?this.Wi.width:k?+h.width:h.naturalWidth),c=0):null!==h&&!1!==this.Jy&&(a=this.Wi.H()?this.Wi.width:k?+h.width:h.naturalWidth);isFinite(e.height)||f===ed||f===nl?(isFinite(b)||(b=this.Wi.H()?this.Wi.height:k?+h.height:h.naturalHeight),d=0):null!==h&&!1!==this.Jy&&(b=
this.Wi.H()?this.Wi.height:k?+h.height:h.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.af;f=this.ug;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===h||h.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));eb(this.Jc,a,b);vl(this,0,0,a,b)};Zi.prototype.Li=function(a,b,c,d){zl(this,a,b,c,d)};function Qn(a){this.Do=[new Sn(a,1)]}
function Rn(a,b,c,d){var e=new oa(null),f=e.getContext("2d"),h=1/b;e.width=c/b;e.height=d/b;b=new Sn(e.Kd,b);c=a.Do[a.Do.length-1];f.setTransform(h*c.sp,0,0,h*c.sp,0,0);f.drawImage(c.source,0,0);a.Do.push(b)}function Sn(a,b){this.source=a;this.sp=b}function ka(){this.o=new Xc;this.Sb=null}g=ka.prototype;g.reset=function(){this.o=new Xc;this.Sb=null};
function M(a,b,c,d,e,f){null===a.o&&v.k("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.Sb&&v.k("Need to call beginFigure first"),d=new Kd(Ad),d.J=b,d.K=c,a.Sb.vb.add(d)):(a.Sb=new dd,a.Sb.Ia=b,a.Sb.Ja=c,a.Sb.mt=d,a.o.Ub.add(a.Sb));void 0!==f&&(a.Sb.Wn=f)}function P(a){null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Sb&&v.k("Need to call beginFigure first");var b=a.Sb.vb.length;0<b&&a.Sb.vb.ha(b-1).close()}
function xd(a){null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Sb&&v.k("Need to call beginFigure first");0<a.Sb.vb.length&&(a.Sb.mt=!0)}g.Ya=function(a){null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Sb&&v.k("Need to call beginFigure first");this.Sb.tl=a};g.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Sb&&v.k("Need to call beginFigure first");var d=new Kd(Ad);d.J=a;d.K=b;c&&d.close();this.Sb.vb.add(d)};
g.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Sb&&v.k("Need to call beginFigure first");var d=new Kd(sd);d.J=a;d.K=b;c&&d.close();this.Sb.vb.add(d)};function O(a,b,c,d,e,f,h,k){void 0===k&&(k=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Sb&&v.k("Need to call beginFigure first");var l=new Kd(Bd);l.ic=b;l.Qc=c;l.ih=d;l.jh=e;l.J=f;l.K=h;k&&l.close();a.Sb.vb.add(l)}
function vd(a,b,c,d,e){var f;void 0===f&&(f=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Sb&&v.k("Need to call beginFigure first");var h=new Kd(Cd);h.ic=b;h.Qc=c;h.J=d;h.K=e;f&&h.close();a.Sb.vb.add(h)}g.arcTo=function(a,b,c,d,e,f,h){void 0===f&&(f=0);void 0===h&&(h=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Sb&&v.k("Need to call beginFigure first");var k=new Kd(Dd);k.Ne=a;k.Sf=b;k.oa=c;k.va=d;k.radiusX=e;k.radiusY=0!==f?f:e;h&&k.close();this.Sb.vb.add(k)};
function wd(a,b,c,d,e,f,h,k){var l;void 0===l&&(l=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Sb&&v.k("Need to call beginFigure first");b=new Kd(Fd,h,k,b,c,d,e,f);l&&b.close();a.Sb.vb.add(b)}
K.makeGeometry=function(a,b,c){var d=a.xa,e=d.width,d=d.height;void 0!==b&&!isNaN(b)&&isFinite(b)&&(e=b);void 0!==c&&!isNaN(c)&&isFinite(c)&&(d=c);isFinite(e)||(e=100);isFinite(d)||(d=100);b=null;"None"!==a.Hp?b=K.aj[a.Hp]:"None"!==a.Gz?b=K.aj[a.Gz]:(c=K.sg[a.Cb],"string"===typeof c&&(c=K.sg[c]),void 0===c&&v.k("Unknown Shape.figure: "+a.Cb),b=c(a,e,d),b.Vn=e,b.Tn=d);null===b&&(c=K.sg.Rectangle,"function"===typeof c&&(b=c(a,e,d)));return b};
K.Ni=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var s=1-l;a=a*s+c*l;b=b*s+d*l;c=c*s+e*l;d=d*s+f*l;e=e*s+h*l;f=f*s+k*l;k=a*s+c*l;h=b*s+d*l;c=c*s+e*l;d=d*s+f*l;m.x=a;m.y=b;n.x=k;n.y=h;p.x=k*s+c*l;p.y=h*s+d*l;q.x=c;q.y=d;r.x=e;r.y=f};K.Mo=function(a){a=K.Lm(a);var b=v.jb();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;v.ra(a);return b};
K.Lm=function(a){var b=K.al(a),c=v.jb(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var f=0;f<e;f++){var h=b[f],k=b[f+1],l=b[(d+f-1)%e],m=b[(d+f+a)%e];c[2*f]=h;c[2*f+1]=K.ll(h.x,h.y,l.x,l.y,k.x,k.y,m.x,m.y,new w)}c[c.length]=c[0];v.ra(b);return c};K.ll=function(a,b,c,d,e,f,h,k,l){c=a-c;var m=e-h,n=h=0;0===c||0===m?0===c?(k=(f-k)/m,h=a,n=k*h+(f-k*e)):(d=(b-d)/c,h=e,n=d*h+(b-d*a)):(d=(b-d)/c,k=(f-k)/m,a=b-d*a,h=(f-k*e-a)/(d-k),n=d*h+a);l.m(h,n);return l};
K.al=function(a){for(var b=v.jb(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new w(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b};K.VA=(new L(.156,.156)).Ma();K.WA=(new L(.844,.844)).Ma();
K.sg={None:"Rectangle",Rectangle:function(a,b,c){a=new Xc;a.type=gd;a.Ia=0;a.Ja=0;a.J=b;a.K=c;return a},Square:function(a,b,c){a=new Xc;a.Hd=vh;a.type=gd;a.Ia=0;a.Ja=0;a.J=Math.min(b,c);a.K=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new Xc;a.type=hd;a.Ia=0;a.Ja=0;a.J=b;a.K=c;a.A=K.VA;a.B=K.WA;return a},Circle:function(a,b,c){a=new Xc;a.Hd=vh;a.type=hd;a.Ia=0;a.Ja=0;a.J=Math.min(b,c);a.K=Math.min(b,c);a.A=K.VA;a.B=K.WA;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Xc;var d=
new dd,e=new Kd;e.J=b;e.K=.5*c;d.vb.add(e);b=new Kd;b.J=0;b.K=c;d.vb.add(b.close());a.Ub.add(d);a.A=new L(0,.25);a.B=new L(.5,.75);return a},TriangleDown:function(a,b,c){a=new Xc;var d=new dd,e=new Kd;e.J=b;e.K=0;d.vb.add(e);e=new Kd;e.J=.5*b;e.K=c;d.vb.add(e.close());a.Ub.add(d);a.A=new L(.25,0);a.B=new L(.75,.5);return a},TriangleLeft:function(a,b,c){a=new Xc;var d=new dd;d.Ia=b;d.Ja=c;var e=new Kd;e.J=0;e.K=.5*c;d.vb.add(e);c=new Kd;c.J=b;c.K=0;d.vb.add(c.close());a.Ub.add(d);a.A=new L(.5,.25);
a.B=new L(1,.75);return a},TriangleUp:function(a,b,c){a=new Xc;var d=new dd;d.Ia=b;d.Ja=c;var e=new Kd;e.J=0;e.K=c;d.vb.add(e);c=new Kd;c.J=.5*b;c.K=0;d.vb.add(c.close());a.Ub.add(d);a.A=new L(.25,.5);a.B=new L(.75,1);return a},Line1:function(a,b,c){a=new Xc;a.type=fd;a.Ia=0;a.Ja=0;a.J=b;a.K=c;return a},Line2:function(a,b,c){a=new Xc;a.type=fd;a.Ia=b;a.Ja=0;a.J=0;a.K=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Xc;a.type=fd;a.Ia=0;a.Ja=c/2;a.J=b;a.K=c/2;return a},LineV:function(a,b,c){a=
new Xc;a.type=fd;a.Ia=b/2;a.Ja=0;a.J=b/2;a.K=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){var d=K.za;a=v.q();M(a,0,0,!1);O(a,d*b,0,1*b,(1-d)*c,b,c);b=a.o;v.s(a);return b},Curve2:function(a,b,c){var d=K.za;a=v.q();M(a,0,0,!1);O(a,0,d*c,(1-d)*b,c,b,c);b=a.o;v.s(a);return b},Curve3:function(a,b,c){var d=K.za;a=v.q();M(a,1*b,0,!1);O(a,1*b,d*c,d*b,1*c,0,1*c);b=a.o;v.s(a);return b},Curve4:function(a,b,c){var d=K.za;a=v.q();M(a,1*b,0,!1);O(a,(1-d)*b,0,0,(1-d)*c,0,1*c);b=a.o;v.s(a);
return b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=v.q();M(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.o;b.A=new L(.25,.5);b.B=new L(.75,1);v.s(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.o;b.A=new L(.25,.25);b.B=new L(.75,.75);v.s(a);return b},Pentagon:function(a,b,c){var d=K.al(5);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);
v.ra(d);P(a);b=a.o;b.A=new L(.2,.22);b.B=new L(.8,.9);v.s(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=K.al(6);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.07,.25);b.B=new L(.93,.75);v.s(a);return b},Heptagon:function(a,b,c){var d=K.al(7);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.2,.15);b.B=new L(.8,.85);v.s(a);return b},Octagon:function(a,
b,c){var d=K.al(8);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.15,.15);b.B=new L(.85,.85);v.s(a);return b},Nonagon:function(a,b,c){var d=K.al(9);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.17,.13);b.B=new L(.82,.82);v.s(a);return b},Decagon:function(a,b,c){var d=K.al(10);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);
b=a.o;b.A=new L(.16,.16);b.B=new L(.84,.84);v.s(a);return b},Dodecagon:function(a,b,c){var d=K.al(12);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.16,.16);b.B=new L(.84,.84);v.s(a);return b},FivePointedStar:function(a,b,c){var d=K.Lm(5);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.312,.383);b.B=new L(.693,.765);v.s(a);return b},SixPointedStar:function(a,b,c){var d=
K.Lm(6);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.17,.251);b.B=new L(.833,.755);v.s(a);return b},SevenPointedStar:function(a,b,c){var d=K.Lm(7);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.363,.361);b.B=new L(.641,.709);v.s(a);return b},EightPointedStar:function(a,b,c){var d=K.Lm(8);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*
c);v.ra(d);P(a);b=a.o;b.A=new L(.252,.255);b.B=new L(.75,.75);v.s(a);return b},NinePointedStar:function(a,b,c){var d=K.Lm(9);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.355,.361);b.B=new L(.645,.651);v.s(a);return b},TenPointedStar:function(a,b,c){var d=K.Lm(10);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.281,.261);b.B=new L(.723,.748);v.s(a);return b},FivePointedBurst:function(a,
b,c){var d=K.Mo(5);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.312,.383);b.B=new L(.693,.765);v.s(a);return b},SixPointedBurst:function(a,b,c){var d=K.Mo(6);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.17,.251);b.B=new L(.833,.755);v.s(a);return b},SevenPointedBurst:function(a,
b,c){var d=K.Mo(7);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.363,.361);b.B=new L(.641,.709);v.s(a);return b},EightPointedBurst:function(a,b,c){var d=K.Mo(8);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.252,.255);b.B=new L(.75,.75);v.s(a);return b},NinePointedBurst:function(a,
b,c){var d=K.Mo(9);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.355,.361);b.B=new L(.645,.651);v.s(a);return b},TenPointedBurst:function(a,b,c){var d=K.Mo(10);a=v.q();M(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.ra(d);P(a);b=a.o;b.A=new L(.281,.261);b.B=new L(.723,.748);v.s(a);return b},Cloud:function(a,b,c){a=
v.q();M(a,.08034461*b,.1944299*c,!0);O(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c);O(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);O(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);O(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);O(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);O(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);O(a,1.032337*b,.5771781*c,1.018411*
b,.8120651*c,.9212406*b,.8217117*c);O(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c);O(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);O(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);O(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);O(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);O(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);O(a,-.01606892*b,.3892545*c,-.01205169*
b,.1944299*c,.08034461*b,.1944299*c);P(a);b=a.o;b.A=new L(.1,.1);b.B=new L(.9,.9);v.s(a);return b},Gate:"Crescent",Crescent:function(a,b,c){a=v.q();M(a,0,0,!0);O(a,1*b,0,1*b,1*c,0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;b.A=new L(.511,.19);b.B=new L(.776,.76);v.s(a);return b},FramedRectangle:function(a,b,c){var d=v.q(),e=a?a.vc:NaN;a=a?a.Gt:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);M(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-
e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.o;b.A=new L(e,a);b.B=new L(1-e,1-a);v.s(d);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=K.za;a=v.q();M(a,0,0,!0);O(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c);O(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c);P(a);b=a.o;b.A=new L(0,.2);b.B=new L(.75,.8);v.s(a);return b},Heart:function(a,b,c){a=v.q();M(a,.5*b,1*c,!0);O(a,.1*b,.8*c,0,.5*c,0*b,.3*c);O(a,0*b,0,.45*b,0,.5*b,.3*c);O(a,.55*b,0,1*b,0,1*b,.3*c);O(a,b,.5*c,.9*b,.8*c,.5*b,1*c);P(a);b=a.o;b.A=new L(.15,.29);
b.B=new L(.86,.68);v.s(a);return b},Spade:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);O(a,.6*b,.2*c,b,.25*c,b,.5*c);O(a,b,.8*c,.6*b,.8*c,.55*b,.7*c);O(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);O(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);O(a,.4*b,.8*c,0,.8*c,0,.5*c);O(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);P(a);b=a.o;b.A=new L(.19,.26);b.B=new L(.8,.68);v.s(a);return b},Club:function(a,b,c){a=v.q();M(a,.4*b,.6*c,!0);O(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);O(a,.55*b,
.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,h=4*(Math.SQRT2-1)/3*d;O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-h+f-.02)*c,.65*b,.36771243*c);d=.2;e=0;f=-.3;h=4*(Math.SQRT2-1)/3*d;O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+
f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,.35*b,.36771243*c);d=.2;e=-.3;f=0;h=4*(Math.SQRT2-1)/3*d;O(a,(.5+d+e-.05)*b,(.5-h+f-.02)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,.4*b,.6*c);P(a);b=a.o;b.A=new L(.06,.39);
b.B=new L(.93,.58);v.s(a);return b},Ring:function(a,b,c){a=v.q();var d=4*(Math.SQRT2-1)/3*.5;M(a,b,.5*c,!0);O(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);O(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);O(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);O(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;M(a,.5*b,.1*c,!0,!0);O(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);O(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);O(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);O(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.o;b.A=new L(.146,.146);b.B=new L(.853,
.853);b.Hd=vh;v.s(a);return b},YinYang:function(a,b,c){var d=.5;a=v.q();d=.5;M(a,.5*b,0,!0);a.arcTo(270,180,.5*b,.5*b,.5*b);O(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,e=.25;M(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);P(a);M(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.Ya(!1);e=.75;M(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);P(a);b=a.o;b.Hd=vh;v.s(a);return b},Peace:function(a,b,c){a=v.q();var d=4*(Math.SQRT2-1)/3*.5;M(a,b,.5*c,!0);O(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);O(a,(.5-d)*b,0,0,(.5-
d)*c,0,.5*c);O(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);O(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;M(a,.5*b,.1*c,!0,!0);O(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);O(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);O(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);O(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,f=-.707*.11,h=4*(Math.SQRT2-1)/3*d;M(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*
b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=-.707*.11;f=.707*.11;h=4*(Math.SQRT2-1)/3*d;M(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*
c);d=.07;e=.707*.11;f=.707*.11;h=4*(Math.SQRT2-1)/3*d;M(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);b=a.o;b.A=new L(.146,.146);b.B=new L(.853,.853);b.Hd=vh;v.s(a);return b},NotAllowed:function(a,b,c){var d=K.za,e=.5*d,f=.5;a=v.q();M(a,.5*b,(.5-
f)*c,!0);O(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);O(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);O(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);var f=.4,e=.4*d,d=v.M(),h=v.M(),k=v.M(),l=v.M();K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,h,k,l,l);var m=v.M(),n=v.M(),p=v.M();K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,l,l,p,m,n);var q=v.M(),r=v.M(),s=v.M();K.Ni(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,q,r,s,l,l);
var t=v.M(),u=v.M(),x=v.M();K.Ni(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,l,l,x,t,u);M(a,x.x*b,x.y*c,!0,!0);O(a,t.x*b,t.y*c,u.x*b,u.y*c,(.5-f)*b,.5*c);O(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c);O(a,d.x*b,d.y*c,h.x*b,h.y*c,k.x*b,k.y*c);a.lineTo(x.x*b,x.y*c);P(a);M(a,s.x*b,s.y*c,!0,!0);a.lineTo(p.x*b,p.y*c);O(a,m.x*b,m.y*c,n.x*b,n.y*c,(.5+f)*b,.5*c);O(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,q.x*b,q.y*c,r.x*b,r.y*c,s.x*b,s.y*c);P(a);v.v(d);v.v(h);v.v(k);v.v(l);v.v(m);v.v(n);
v.v(p);v.v(q);v.v(r);v.v(s);v.v(t);v.v(u);v.v(x);b=a.o;v.s(a);b.Hd=vh;return b},Fragile:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);O(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);O(a,.25*b,.5*c,0,.25*c,0,0);P(a);b=a.o;b.A=
new L(.25,0);b.B=new L(.75,.4);v.s(a);return b},HourGlass:function(a,b,c){a=v.q();M(a,.65*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);P(a);b=a.o;v.s(a);return b},Lightning:function(a,b,c){a=v.q();M(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);P(a);b=a.o;v.s(a);return b},Parallelogram1:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=v.q();M(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-
a)*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.A=new L(a,0);b.B=new L(1-a,1);v.s(d);return b},Input:"Output",Output:function(a,b,c){a=v.q();M(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);P(a);b=a.o;b.A=new L(.1,0);b.B=new L(.9,1);v.s(a);return b},Parallelogram2:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.25);var d=v.q();M(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.A=new L(a,0);b.B=new L(1-a,1);v.s(d);return b},ThickCross:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&
(a=.25);var d=v.q();M(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);P(d);b=d.o;b.A=new L(.5-a/2,.5-a/2);b.B=new L(.5+a/2,.5+a/2);v.s(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=v.q();M(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);
d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);P(d);b=d.o;b.A=new L(.5-a,.5-a);b.B=new L(.5+a,.5+a);v.s(d);return b},ThinCross:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=.1);a=v.q();M(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*
b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-d/2)*b,(.5-d/2)*c);P(a);b=a.o;v.s(a);return b},ThinX:function(a,b,c){a=v.q();M(a,.1*b,0,!0);a.lineTo(.5*b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);P(a);return a.o},RightTriangle:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(1*b,
1*c);a.lineTo(0,1*c);P(a);b=a.o;b.A=new L(0,.5);b.B=new L(.5,1);v.s(a);return b},RoundedIBeam:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(1*b,0);O(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;v.s(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*K.za;var e=v.q();M(e,d,0,!0);e.lineTo(b-d,0);O(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);O(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);O(e,a,c,0,c-a,0,c-d);e.lineTo(0,
d);O(e,0,a,a,0,d,0);P(e);b=e.o;1<a?(b.A=new L(0,0,a,a),b.B=new L(1,1,-a,-a)):(b.A=zb,b.B=Vb);v.s(e);return b},Border:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=v.q();M(a,d,0,!0);a.lineTo(b-d,0);O(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);O(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);O(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);O(a,0,0,0,0,d,0);P(a);b=a.o;b.A=zb;b.B=Vb;v.s(a);return b},SquareIBeam:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=.2);a=v.q();M(a,0,0,!0);a.lineTo(1*b,0);
a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);P(a);b=a.o;v.s(a);return b},Trapezoid:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.2);var d=v.q();M(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.A=new L(a,0);b.B=new L(1-a,1);v.s(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=
a?a.vc:NaN;isNaN(d)&&(d=0);a=v.q();M(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);P(a);b=a.o;b.A=new L(.1,0);b.B=new L(.9,1);v.s(a);return b},GenderMale:function(a,b,c){a=v.q();var d=K.za,e=.4*d,f=.4,h=v.M(),k=v.M(),l=v.M(),m=v.M();M(a,(.5-f)*b,.5*c,!0);O(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c);K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,l,m,k,h,h);O(a,l.x*b,l.y*c,m.x*b,m.y*c,k.x*b,k.y*c);var n=v.Rb(k.x,k.y);K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,
h,h,k,l,m);var p=v.Rb(k.x,k.y);a.lineTo((.1*n.x+.855)*b,.1*n.y*c);a.lineTo(.85*b,.1*n.y*c);a.lineTo(.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*p.x+.9)*b,.15*c);a.lineTo((.1*p.x+.9)*b,(.1*p.y+.05*.9)*c);a.lineTo(p.x*b,p.y*c);O(a,l.x*b,l.y*c,m.x*b,m.y*c,(.5+f)*b,.5*c);O(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);f=.35;e=.35*d;M(a,.5*b,(.5-f)*c,!0,!0);O(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);O(a,(.5-f)*b,(.5+
e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);O(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);M(a,(.5-f)*b,.5*c,!0);v.v(h);v.v(k);v.v(l);v.v(m);v.v(n);v.v(p);b=a.o;b.A=new L(.202,.257);b.B=new L(.692,.839);b.Hd=vh;v.s(a);return b},GenderFemale:function(a,b,c){a=v.q();var d=.375,e=0,f=-.125,h=4*(Math.SQRT2-1)/3*d;M(a,(.525+e)*b,(.5+d+f)*c,!0);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*
b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);P(a);d=.325;e=0;f=-.125;h=4*(Math.SQRT2-1)/3*d;M(a,(.5+d+e)*b,(.5+f)*c,!0,!0);O(a,(.5+d+e)*b,(.5+h+f)*c,(.5+
h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5-h+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5-h+f)*c,(.5-h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5+h+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-h+f)*c,(.5+d+e)*b,(.5+f)*c);M(a,(.525+e)*b,(.5+d+f)*c,!0);b=a.o;b.A=new L(.232,.136);b.B=new L(.782,.611);b.Hd=vh;v.s(a);return b},PlusLine:function(a,b,c){a=v.q();M(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.o;v.s(a);return b},XLine:function(a,b,c){a=v.q();
M(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},AsteriskLine:function(a,b,c){a=v.q();var d=.2/Math.SQRT2;M(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0*c);a.lineTo(.5*b,1*c);b=a.o;v.s(a);return b},CircleLine:function(a,b,c){var d=.5*K.za;a=v.q();M(a,1*b,.5*c,!1);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);
O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.A=new L(.146,.146);b.B=new L(.853,.853);b.Hd=vh;v.s(a);return b},Pie:function(a,b,c){a=v.q();var d=4*(Math.SQRT2-1)/3*.5;M(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);O(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);O(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);O(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);O(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.s(a);return b},PiePiece:function(a,b,c){var d=K.za/Math.SQRT2*.5,e=Math.SQRT2/2,f=1-
Math.SQRT2/2;a=v.q();M(a,b,c,!0);O(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c);a.lineTo(0,c);P(a);b=a.o;v.s(a);return b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=v.q();M(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);P(d);b=d.o;b.A=new L(a/2,a/2);b.B=new L(1-a/2,1-a/2);v.s(d);return b},LogicImplies:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=.2);a=v.q();M(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-
d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.o;b.A=zb;b.B=new L(.8,.5);v.s(a);return b},LogicIff:function(a,b,c){var d=a?a.vc:NaN;isNaN(d)&&(d=.2);a=v.q();M(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*b,c);b=a.o;b.A=new L(.2,0);b.B=new L(.8,.5);v.s(a);return b},LogicNot:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},LogicAnd:function(a,b,c){a=v.q();M(a,0,1*c,!1);
a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.o;b.A=new L(.25,.5);b.B=new L(.75,1);v.s(a);return b},LogicOr:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.o;b.A=new L(.219,0);b.B=new L(.78,.409);v.s(a);return b},LogicXor:function(a,b,c){a=v.q();M(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);var d=.5*K.za;O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.o;
b.Hd=vh;v.s(a);return b},LogicTruth:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.o;v.s(a);return b},LogicFalsity:function(a,b,c){a=v.q();M(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.o;v.s(a);return b},LogicThereExists:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.o;v.s(a);return b},LogicForAll:function(a,b,c){a=v.q();M(a,0,0,!1);
a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.o;b.A=new L(.25,0);b.B=new L(.75,.5);v.s(a);return b},LogicIsDefinedAs:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.o;b.A=new L(.01,.01);b.B=new L(.99,.49);v.s(a);return b},LogicIntersect:function(a,b,c){var d=.5*K.za;a=v.q();M(a,0,1*c,!1);a.lineTo(0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=
a.o;b.A=new L(0,.5);b.B=Vb;v.s(a);return b},LogicUnion:function(a,b,c){var d=.5*K.za;a=v.q();M(a,1*b,0,!1);a.lineTo(1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.o;b.A=zb;b.B=new L(1,.5);v.s(a);return b},Arrow:function(a,b,c){var d=a?a.vc:NaN,e=a?a.Gt:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=v.q();M(a,0,(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,
(.5+e/2)*c);P(a);b=a.o;b.A=new L(0,.5-e/2);d=K.ll(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,v.M());b.B=new L(d.x,d.y);v.v(d);v.s(a);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.s(a);return b},DoubleArrow:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.3*b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);P(a);M(a,.3*b,.214*c,!1);
a.lineTo(.3*b,.786*c);a.Ya(!1);b=a.o;v.s(a);return b},DoubleEndArrow:function(a,b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);P(a);b=a.o;c=K.ll(0,.5,.3,0,0,.3,.3,.3,v.M());b.A=new L(c.x,c.y);c=K.ll(.7,1,1,.5,.7,.7,1,.7,c);b.B=new L(c.x,c.y);v.v(c);v.s(a);return b},IBeamArrow:function(a,b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*
b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);P(a);b=a.o;b.A=new L(0,.3);c=K.ll(.7,1,1,.5,.7,.7,1,.7,v.M());b.B=new L(c.x,c.y);v.v(c);v.s(a);return b},Pointer:function(a,b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);P(a);b=a.o;b.A=new L(.2,.35);c=K.ll(.2,.65,1,.65,0,1,1,.5,v.M());b.B=new L(c.x,c.y);v.v(c);v.s(a);return b},RoundedPointer:function(a,b,c){a=v.q();
M(a,1*b,.5*c,!0);a.lineTo(0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;b.A=new L(.4,.35);c=K.ll(.2,.65,1,.65,0,1,1,.5,v.M());b.B=new L(c.x,c.y);v.v(c);v.s(a);return b},SplitEndArrow:function(a,b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);P(a);b=a.o;b.A=new L(.2,.3);c=K.ll(.7,1,1,.5,.7,.7,1,.7,v.M());b.B=new L(c.x,c.y);v.v(c);v.s(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,
b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);P(a);b=a.o;b.A=zb;b.B=new L(.7,1);v.s(a);return b},Cone1:function(a,b,c){var d=K.za;a=.5*d;var e=.1*d,d=v.q();M(d,0,.9*c,!0);d.lineTo(.5*b,0);d.lineTo(1*b,.9*c);O(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);O(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);P(d);b=d.o;b.A=new L(.25,.5);b.B=new L(.75,.97);v.s(d);return b},Cone2:function(a,b,c){a=v.q();M(a,0,.9*c,!0);O(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,
0);a.lineTo(0,.9*c);P(a);M(a,0,.9*c,!1);O(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.Ya(!1);b=a.o;b.A=new L(.25,.5);b.B=new L(.75,.82);v.s(a);return b},Cube1:function(a,b,c){a=v.q();M(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);P(a);M(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.Ya(!1);b=a.o;b.A=new L(0,.3);b.B=new L(.5,.85);v.s(a);return b},Cube2:function(a,b,c){a=v.q();M(a,
0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);P(a);M(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.Ya(!1);b=a.o;b.A=new L(0,.3);b.B=new L(.7,1);v.s(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=K.za;a=.5*d;var e=.1*d,d=v.q();M(d,0,.1*c,!0);O(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);O(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c);d.lineTo(b,.9*c);O(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);O(d,(.5-
a)*b,1*c,0,(.9+e)*c,0,.9*c);d.lineTo(0,.1*c);M(d,0,.1*c,!1);O(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c);O(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);d.Ya(!1);b=d.o;b.A=new L(0,.2);b.B=new L(1,.9);v.s(d);return b},Cylinder2:function(a,b,c){var d=K.za;a=.5*d;var e=.1*d,d=v.q();M(d,0,.9*c,!0);d.lineTo(0,.1*c);O(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);O(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c);d.lineTo(1*b,.9*c);O(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);O(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);M(d,0,.9*c,!1);O(d,0,(.9-e)*c,(.5-
a)*b,.8*c,.5*b,.8*c);O(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);d.Ya(!1);b=d.o;b.A=new L(0,.1);b.B=new L(1,.8);v.s(d);return b},Cylinder3:function(a,b,c){var d=K.za;a=.1*d;var e=.5*d,d=v.q();M(d,.1*b,0,!0);d.lineTo(.9*b,0);O(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);O(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);O(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);O(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);M(d,.1*b,0,!1);O(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*b,.5*c);O(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c);d.Ya(!1);b=d.o;b.A=
new L(.2,0);b.B=new L(.9,1);v.s(d);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=K.za;a=.1*d;var e=.5*d,d=v.q();M(d,.9*b,0,!0);O(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);O(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);O(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);O(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);d.lineTo(.9*b,0);M(d,.9*b,0,!1);O(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);O(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c);d.Ya(!1);b=d.o;b.A=new L(.1,0);b.B=new L(.8,1);v.s(d);return b},Prism1:function(a,
b,c){a=v.q();M(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);P(a);M(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.Ya(!1);b=a.o;b.A=new L(.408,.172);b.B=new L(.833,.662);v.s(a);return b},Prism2:function(a,b,c){a=v.q();M(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);P(a);M(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.Ya(!1);b=a.o;b.A=new L(.25,.5);b.B=new L(.75,.75);v.s(a);return b},
Pyramid1:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);P(a);M(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.Ya(!1);b=a.o;b.A=new L(.25,.367);b.B=new L(.75,.875);v.s(a);return b},Pyramid2:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);P(a);M(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.Ya(!1);b=a.o;b.A=new L(.25,.367);b.B=new L(.75,.875);v.s(a);return b},Actor:function(a,
b,c){var d=K.za,e=.2*d,f=.1*d,h=.5,k=.1;a=v.q();M(a,h*b,(k+.1)*c,!0);O(a,(h-e)*b,(k+.1)*c,(h-.2)*b,(k+f)*c,(h-.2)*b,k*c);O(a,(h-.2)*b,(k-f)*c,(h-e)*b,(k-.1)*c,h*b,(k-.1)*c);O(a,(h+e)*b,(k-.1)*c,(h+.2)*b,(k-f)*c,(h+.2)*b,k*c);O(a,(h+.2)*b,(k+f)*c,(h+e)*b,(k+.1)*c,h*b,(k+.1)*c);e=.05;f=d*e;M(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);h=.95;k=.25;O(a,(h+f)*b,(k-e)*c,(h+e)*b,(k-f)*c,(h+e)*b,k*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);e=.025;f=d*e;h=.825;k=.35;O(a,(h+e)*b,(k-f)*c,(h+f)*
b,(k-e)*c,h*b,(k-e)*c);O(a,(h-f)*b,(k-e)*c,(h-e)*b,(k-f)*c,(h-e)*b,k*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);e=.05;f=d*e;h=.5;k=.7;O(a,(h+e)*b,(k-f)*c,(h+f)*b,(k-e)*c,h*b,(k-e)*c);O(a,(h-f)*b,(k-e)*c,(h-e)*b,(k-f)*c,(h-e)*b,k*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);e=.025;f=d*e;h=.175;k=.35;O(a,(h+e)*b,(k-f)*c,(h+f)*b,(k-e)*c,h*b,(k-e)*c);O(a,(h-f)*b,(k-e)*c,(h-e)*b,(k-f)*c,(h-e)*b,k*c);a.lineTo(.15*b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);e=.05;
f=d*e;h=.05;k=.25;O(a,(h-e)*b,(k-f)*c,(h-f)*b,(k-e)*c,h*b,(k-e)*c);a.lineTo(.5*b,.2*c);b=a.o;b.A=new L(.2,.2);b.B=new L(.8,.65);v.s(a);return b},Card:function(a,b,c){a=v.q();M(a,1*b,0*c,!0);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);P(a);b=a.o;b.A=new L(0,.2);b.B=Vb;v.s(a);return b},Collate:function(a,b,c){a=v.q();M(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);M(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);b=a.o;b.A=new L(.25,
0);b.B=new L(.75,.25);v.s(a);return b},CreateRequest:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);M(d,0,a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.Ya(!1);b=d.o;b.A=new L(0,a);b.B=new L(1,1-a);v.s(d);return b},Database:function(a,b,c){a=v.q();var d=K.za,e=.5*d,d=.1*d;M(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);O(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);O(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);
O(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);O(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);M(a,1*b,.1*c,!1);O(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);O(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c);a.moveTo(1*b,.2*c);O(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);O(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.moveTo(1*b,.3*c);O(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c);O(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c);a.Ya(!1);b=a.o;b.A=new L(0,.4);b.B=new L(1,.9);v.s(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=v.q();M(a,0,0,!0);
a.lineTo(.75*b,0);O(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);O(a,.25*b,.9*c,.25*b,.1*c,0,0);P(a);b=a.o;b.A=new L(.226,0);b.B=new L(.81,1);v.s(a);return b},DiskStorage:function(a,b,c){a=v.q();var d=K.za,e=.5*d,d=.1*d;M(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);O(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);O(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);O(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);O(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);M(a,1*b,.1*c,!1);O(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);O(a,(.5-e)*b,.2*c,0,(.1+
d)*c,0,.1*c);a.moveTo(1*b,.2*c);O(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);O(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.Ya(!1);b=a.o;b.A=new L(0,.3);b.B=new L(1,.9);v.s(a);return b},Display:function(a,b,c){a=v.q();M(a,.25*b,0,!0);a.lineTo(.75*b,0);O(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);P(a);b=a.o;b.A=new L(.25,0);b.B=new L(.75,1);v.s(a);return b},DividedEvent:function(a,b,c){a=a?a.vc:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=v.q(),e=.2*K.za;M(d,0,.2*c,!0);O(d,0,(.2-e)*c,(.2-e)*b,
0,.2*b,0);d.lineTo(.8*b,0);O(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);O(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);O(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);M(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ya(!1);b=d.o;b.A=new L(0,a);b.B=new L(1,1-a);v.s(d);return b},DividedProcess:function(a,b,c){a=a?a.vc:NaN;if(isNaN(a)||.1>a)a=.1;var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);M(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ya(!1);b=d.o;b.A=new L(0,a);b.B=
Vb;v.s(d);return b},Document:function(a,b,c){c/=.8;a=v.q();M(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);b=a.o;b.A=zb;b.B=new L(1,.6);v.s(a);return b},ExternalOrganization:function(a,b,c){a=a?a.vc:NaN;if(isNaN(a)||.2>a)a=.2;var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);M(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-
a)*c);d.Ya(!1);b=d.o;b.A=new L(a/2,a/2);b.B=new L(1-a/2,1-a/2);v.s(d);return b},ExternalProcess:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);P(a);M(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.Ya(!1);b=a.o;b.A=new L(.25,.25);b.B=new L(.75,.75);v.s(a);return b},File:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);
a.lineTo(1*b,1*c);a.lineTo(0,1*c);P(a);M(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.Ya(!1);b=a.o;b.A=new L(0,.25);b.B=Vb;v.s(a);return b},Interrupt:function(a,b,c){a=v.q();M(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);M(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);M(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.o;b.A=new L(0,.25);b.B=new L(.5,.75);v.s(a);return b},InternalStorage:function(a,b,c){var d=a?a.vc:NaN;a=a?a.Gt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=v.q();M(e,0,0,!0);e.lineTo(1*
b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);P(e);M(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.Ya(!1);b=e.o;b.A=new L(d,a);b.B=Vb;v.s(e);return b},Junction:function(a,b,c){a=v.q();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*K.za;M(a,1*b,.5*c,!0);O(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c);O(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c);O(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0);O(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c);M(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.Ya(!1);
b=a.o;b.Hd=vh;v.s(a);return b},LinedDocument:function(a,b,c){c/=.8;a=v.q();M(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);M(a,.1*b,0,!1);a.lineTo(.1*b,.75*c);a.Ya(!1);b=a.o;b.A=new L(.1,0);b.B=new L(1,.6);v.s(a);return b},LoopLimit:function(a,b,c){a=v.q();M(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);P(a);b=a.o;b.A=new L(0,.25);b.B=Vb;v.s(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,
b,c){a=v.q();var d=.5*K.za;M(a,.5*b,1*c,!0);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.o;b.A=new L(.15,.15);b.B=new L(.85,.8);v.s(a);return b},ManualInput:function(a,b,c){a=v.q();M(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);P(a);b=a.o;b.A=new L(0,.25);b.B=Vb;v.s(a);return b},MessageFromUser:function(a,b,c){a=a?a.vc:
NaN;isNaN(a)&&(a=.7);var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.A=zb;b.B=new L(a,1);v.s(d);return b},MicroformProcessing:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.25);var d=v.q();M(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);P(d);b=d.o;b.A=new L(0,a);b.B=new L(1,1-a);v.s(d);return b},MicroformRecording:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*
c);a.lineTo(1*b,.85*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);P(a);b=a.o;b.A=new L(0,.25);b.B=new L(1,.75);v.s(a);return b},MultiDocument:function(a,b,c){c/=.8;a=v.q();M(a,b,0,!0);a.lineTo(b,.5*c);O(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);O(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);O(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);P(a);M(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*
c);a.moveTo(.2*b,.1*c);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.44*c);a.Ya(!1);b=a.o;b.A=new L(0,.25);b.B=new L(.8,.77);v.s(a);return b},MultiProcess:function(a,b,c){a=v.q();M(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);P(a);M(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*
b,.9*c);a.Ya(!1);b=a.o;b.A=new L(0,.2);b.B=new L(.8,1);v.s(a);return b},OfflineStorage:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=1-a,e=v.q();M(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(.5*b,1*c);P(e);M(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.Ya(!1);b=e.o;b.A=new L(d/4+.5*a,a);b.B=new L(3*d/4+.5*a,a+.5*d);v.s(e);return b},OffPageConnector:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);P(a);b=a.o;b.A=zb;b.B=new L(.75,1);v.s(a);return b},
Or:function(a,b,c){a=v.q();var d=.5*K.za;M(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);M(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.Ya(!1);b=a.o;b.Hd=vh;v.s(a);return b},PaperTape:function(a,b,c){c/=.8;a=v.q();M(a,0,.7*c,!0);a.lineTo(0,.3*c);O(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);b=a.o;b.A=new L(0,.49);b.B=
new L(1,.75);v.s(a);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.vc:NaN;a=a?a.Gt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=v.q();M(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);P(e);b=e.o;b.A=new L(d,0);b.B=new L(1-a,1);v.s(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.vc:NaN;a=a?a.Gt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=v.q();M(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);P(e);b=e.o;b.A=new L(d,
0);b.B=new L(1-a,1);v.s(e);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);M(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.Ya(!1);b=d.o;b.A=new L(a,0);b.B=new L(1-a,1);v.s(d);return b},Process:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);M(d,a*b,0,!1);d.lineTo(a*b,1*c);d.Ya(!1);
b=d.o;b.A=new L(a,0);b.B=Vb;v.s(d);return b},Sort:function(a,b,c){a=v.q();M(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);P(a);M(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.Ya(!1);b=a.o;b.A=new L(.25,.25);b.B=new L(.75,.5);v.s(a);return b},Start:function(a,b,c){a=v.q();M(a,.25*b,0,!0);M(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);M(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.Ya(!1);b=a.o;b.A=new L(.25,0);b.B=
new L(.75,1);v.s(a);return b},Terminator:function(a,b,c){a=v.q();M(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.o;b.A=new L(.23,0);b.B=new L(.77,1);v.s(a);return b},TransmittalTape:function(a,b,c){a=a?a.vc:NaN;isNaN(a)&&(a=.1);var d=v.q();M(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);P(d);b=d.o;b.A=zb;b.B=new L(1,1-a);v.s(d);return b},AndGate:function(a,b,c){a=v.q();var d=.5*K.za;M(a,0,0,!0);a.lineTo(.5*
b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);P(a);b=a.o;b.A=zb;b.B=new L(.55,1);v.s(a);return b},Buffer:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);P(a);b=a.o;b.A=new L(0,.25);b.B=new L(.5,.75);v.s(a);return b},Clock:function(a,b,c){a=v.q();var d=.5*K.za;M(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);
M(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);M(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*b,.75*c);a.Ya(!1);b=a.o;b.Hd=vh;v.s(a);return b},Ground:function(a,b,c){a=v.q();M(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.o;v.s(a);return b},Inverter:function(a,b,c){a=v.q();var d=.1*K.za;M(a,.8*
b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);M(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);O(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);O(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);O(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.A=new L(0,.25);b.B=new L(.4,.75);v.s(a);return b},NandGate:function(a,b,c){a=v.q();var d=K.za,e=.5*d,f=.4*d,d=.1*d;M(a,.8*b,.5*c,!0);O(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);O(a,(.4+e)*b,0,.8*b,(.5-f)*
c,.8*b,.5*c);M(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);O(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);O(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);O(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.A=new L(0,.05);b.B=new L(.55,.95);v.s(a);return b},NorGate:function(a,b,c){a=v.q();var d=K.za,e=.5,f=d*e,h=0,k=.5;M(a,.8*b,.5*c,!0);O(a,.7*b,(k+f)*c,(h+f)*b,(k+e)*c,0,1*c);O(a,.25*b,.75*c,.25*b,.25*c,0,0);O(a,(h+f)*b,(k-e)*c,.7*b,(k-f)*c,.8*b,.5*c);e=.1;f=.1*d;h=.9;k=.5;M(a,(h-e)*b,k*c,!0);O(a,
(h-e)*b,(k-f)*c,(h-f)*b,(k-e)*c,h*b,(k-e)*c);O(a,(h+f)*b,(k-e)*c,(h+e)*b,(k-f)*c,(h+e)*b,k*c);O(a,(h+e)*b,(k+f)*c,(h+f)*b,(k+e)*c,h*b,(k+e)*c);O(a,(h-f)*b,(k+e)*c,(h-e)*b,(k+f)*c,(h-e)*b,k*c);b=a.o;b.A=new L(.2,.25);b.B=new L(.6,.75);v.s(a);return b},OrGate:function(a,b,c){a=v.q();var d=.5*K.za;M(a,0,0,!0);O(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);O(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);O(a,.25*b,.75*c,.25*b,.25*c,0,0);P(a);b=a.o;b.A=new L(.2,.25);b.B=new L(.75,.75);v.s(a);return b},XnorGate:function(a,
b,c){a=v.q();var d=K.za,e=.5,f=d*e,h=.2,k=.5;M(a,.1*b,0,!1);O(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);M(a,.8*b,.5*c,!0);O(a,.7*b,(k+f)*c,(h+f)*b,(k+e)*c,.2*b,1*c);O(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);O(a,(h+f)*b,(k-e)*c,.7*b,(k-f)*c,.8*b,.5*c);e=.1;f=.1*d;h=.9;k=.5;M(a,(h-e)*b,k*c,!0);O(a,(h-e)*b,(k-f)*c,(h-f)*b,(k-e)*c,h*b,(k-e)*c);O(a,(h+f)*b,(k-e)*c,(h+e)*b,(k-f)*c,(h+e)*b,k*c);O(a,(h+e)*b,(k+f)*c,(h+f)*b,(k+e)*c,h*b,(k+e)*c);O(a,(h-f)*b,(k+e)*c,(h-e)*b,(k+f)*c,(h-e)*b,k*c);b=a.o;b.A=new L(.4,.25);
b.B=new L(.65,.75);v.s(a);return b},XorGate:function(a,b,c){a=v.q();var d=.5*K.za;M(a,.1*b,0,!1);O(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);M(a,.2*b,0,!0);O(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);O(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c);O(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);P(a);b=a.o;b.A=new L(.4,.25);b.B=new L(.8,.75);v.s(a);return b},Capacitor:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},Resistor:function(a,b,c){a=v.q();M(a,0,.5*c,!1);a.lineTo(.1*
b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.o;v.s(a);return b},Inductor:function(a,b,c){a=v.q();var d=.1*K.za,e=.1;M(a,(e-.5*d)*b,c,!1);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;O(a,(e+.1)*b,0,(e+d)*b,c,
(e+.5*d)*b,c);b=a.o;v.s(a);return b},ACvoltageSource:function(a,b,c){a=v.q();var d=.5*K.za;M(a,0*b,.5*c,!1);O(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);O(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);O(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.o;b.Hd=vh;v.s(a);return b},DCvoltageSource:function(a,b,c){a=v.q();M(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},Diode:function(a,b,
c){a=v.q();M(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.o;b.A=new L(0,.25);b.B=new L(.5,.75);v.s(a);return b},Wifi:function(a,b,c){var d=b,e=c;b*=.38;c*=.6;a=v.q();var f=K.za,h=.8*f,k=.8,l=0,m=.5,d=(d-b)/2,e=(e-c)/2;M(a,l*b+d,(m+k)*c+e,!0);O(a,(l-h)*b+d,(m+k)*c+e,(l-k)*b+d,(m+h)*c+e,(l-k)*b+d,m*c+e);O(a,(l-k)*b+d,(m-h)*c+e,(l-h)*b+d,(m-k)*c+e,l*b+d,(m-k)*c+e);O(a,l*b+d,(m-k)*c+e,(l-k+.5*h)*b+d,(m-h)*c+e,(l-k+.5*h)*b+d,m*c+e);O(a,(l-k+.5*h)*
b+d,(m+h)*c+e,l*b+d,(m+k)*c+e,l*b+d,(m+k)*c+e);P(a);h=.4*f;k=.4;l=.2;m=.5;M(a,l*b+d,(m+k)*c+e,!0);O(a,(l-h)*b+d,(m+k)*c+e,(l-k)*b+d,(m+h)*c+e,(l-k)*b+d,m*c+e);O(a,(l-k)*b+d,(m-h)*c+e,(l-h)*b+d,(m-k)*c+e,l*b+d,(m-k)*c+e);O(a,l*b+d,(m-k)*c+e,(l-k+.5*h)*b+d,(m-h)*c+e,(l-k+.5*h)*b+d,m*c+e);O(a,(l-k+.5*h)*b+d,(m+h)*c+e,l*b+d,(m+k)*c+e,l*b+d,(m+k)*c+e);P(a);h=.2*f;k=.2;m=l=.5;M(a,(l-k)*b+d,m*c+e,!0);O(a,(l-k)*b+d,(m-h)*c+e,(l-h)*b+d,(m-k)*c+e,l*b+d,(m-k)*c+e);O(a,(l+h)*b+d,(m-k)*c+e,(l+k)*b+d,(m-h)*c+e,
(l+k)*b+d,m*c+e);O(a,(l+k)*b+d,(m+h)*c+e,(l+h)*b+d,(m+k)*c+e,l*b+d,(m+k)*c+e);O(a,(l-h)*b+d,(m+k)*c+e,(l-k)*b+d,(m+h)*c+e,(l-k)*b+d,m*c+e);h=.4*f;k=.4;l=.8;m=.5;M(a,l*b+d,(m-k)*c+e,!0);O(a,(l+h)*b+d,(m-k)*c+e,(l+k)*b+d,(m-h)*c+e,(l+k)*b+d,m*c+e);O(a,(l+k)*b+d,(m+h)*c+e,(l+h)*b+d,(m+k)*c+e,l*b+d,(m+k)*c+e);O(a,l*b+d,(m+k)*c+e,(l+k-.5*h)*b+d,(m+h)*c+e,(l+k-.5*h)*b+d,m*c+e);O(a,(l+k-.5*h)*b+d,(m-h)*c+e,l*b+d,(m-k)*c+e,l*b+d,(m-k)*c+e);P(a);h=.8*f;k=.8;l=1;m=.5;M(a,l*b+d,(m-k)*c+e,!0);O(a,(l+h)*b+d,(m-
k)*c+e,(l+k)*b+d,(m-h)*c+e,(l+k)*b+d,m*c+e);O(a,(l+k)*b+d,(m+h)*c+e,(l+h)*b+d,(m+k)*c+e,l*b+d,(m+k)*c+e);O(a,l*b+d,(m+k)*c+e,(l+k-.5*h)*b+d,(m+h)*c+e,(l+k-.5*h)*b+d,m*c+e);O(a,(l+k-.5*h)*b+d,(m-h)*c+e,l*b+d,(m-k)*c+e,l*b+d,(m-k)*c+e);P(a);b=a.o;v.s(a);return b},Email:function(a,b,c){a=v.q();M(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);P(a);M(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.Ya(!1);
b=a.o;v.s(a);return b},Ethernet:function(a,b,c){a=v.q();M(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*b,0);P(a);M(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);P(a);M(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);P(a);M(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*
b,.6*c);a.Ya(!1);b=a.o;v.s(a);return b},Power:function(a,b,c){a=v.q();var d=K.za,e=.4*d,f=.4,h=v.M(),k=v.M(),l=v.M(),m=v.M();K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,h,h,k,l,m);var n=v.Rb(k.x,k.y);M(a,k.x*b,k.y*c,!0);O(a,l.x*b,l.y*c,m.x*b,m.y*c,(.5+f)*b,.5*c);O(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);K.Ni(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,l,m,k,h,h);O(a,l.x*b,l.y*c,m.x*b,m.y*c,k.x*b,k.y*c);e=.3*d;f=.3;K.Ni(.5-f,.5,.5-f,.5-
e,.5-e,.5-f,.5,.5-f,.5,l,m,k,h,h);a.lineTo(k.x*b,k.y*c);O(a,m.x*b,m.y*c,l.x*b,l.y*c,(.5-f)*b,.5*c);O(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);O(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);K.Ni(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,h,h,k,l,m);O(a,m.x*b,m.y*c,l.x*b,l.y*c,k.x*b,k.y*c);P(a);M(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);P(a);v.v(h);v.v(k);v.v(l);v.v(m);v.v(n);b=a.o;b.A=new L(.25,.55);b.B=new L(.75,.8);v.s(a);return b},Fallout:function(a,
b,c){a=v.q();var d=.5*K.za;M(a,0*b,.5*c,!0);O(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);O(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);var e=d=0;M(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;P(a);M(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;P(a);M(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+
d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);P(a);b=a.o;b.Hd=vh;v.s(a);return b},IrritationHazard:function(a,b,c){a=v.q();M(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);P(a);b=a.o;b.A=new L(.3,.3);b.B=new L(.7,.7);v.s(a);return b},ElectricalHazard:function(a,b,c){a=v.q();M(a,.37*b,0*c,!0);a.lineTo(.5*
b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*b,.56*c);a.lineTo(0*b,.68*c);P(a);b=a.o;v.s(a);return b},FireHazard:function(a,b,c){a=v.q();M(a,.1*b,1*c,!0);O(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);O(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);O(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);O(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);O(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*
c);O(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);P(a);b=a.o;b.A=new L(.05,.645);b.B=new L(.884,.908);v.s(a);return b},BpmnActivityLoop:function(a,b,c){a=v.q();var d=4*(Math.SQRT2-1)/3*.5;M(a,.65*b,1*c,!1);O(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);O(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);O(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);O(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.o;v.s(a);return b},BpmnActivityParallel:function(a,b,c){a=v.q();
M(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},BpmnActivitySequential:function(a,b,c){a=v.q();M(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.o;v.s(a);return b},BpmnActivityAdHoc:function(a,b,c){a=v.q();M(a,0,0,!1);M(a,1*b,1*c,!1);M(a,0,.5*c,!1);O(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);O(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.o;v.s(a);return b},BpmnActivityCompensation:function(a,
b,c){a=v.q();M(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);P(a);b=a.o;v.s(a);return b},BpmnTaskMessage:function(a,b,c){a=v.q();M(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);P(a);M(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.Ya(!1);b=a.o;v.s(a);return b},BpmnTaskScript:function(a,b,c){a=v.q();M(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);O(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,
0);O(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);P(a);M(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.Ya(!1);b=a.o;v.s(a);return b},BpmnTaskUser:function(a,b,c){a=v.q();M(a,0,0,!1);M(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);O(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);O(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*
b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;O(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c);O(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c);O(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c);O(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);M(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);M(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.o;v.s(a);
return b},BpmnEventConditional:function(a,b,c){a=v.q();M(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);P(a);M(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,.4*c);a.lineTo(.8*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.Ya(!1);b=a.o;v.s(a);return b},BpmnEventError:function(a,b,c){a=v.q();M(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);P(a);b=a.o;v.s(a);return b},BpmnEventEscalation:function(a,
b,c){a=v.q();M(a,0,0,!1);M(a,1*b,1*c,!1);M(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.s(a);return b},BpmnEventTimer:function(a,b,c){a=v.q();var d=.5*K.za;M(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);M(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*
b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.Ya(!1);b=a.o;b.Hd=vh;v.s(a);return b}};for(var Tn in K.sg)K.sg[Tn.toLowerCase()]=Tn;
K.qw={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",
BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};K.WI=function(){if(null!==K.qw){for(var a in K.qw){var b=ud(K.qw[a],!1);K.aj[a]=b;a.toLowerCase()!==a&&(K.aj[a.toLowerCase()]=a)}K.qw=null}};
K.AD=function(a){K.WI();var b=K.aj[a];if(void 0===b){b=a.toLowerCase();if("none"===b)return"None";b=K.aj[b]}return"string"===typeof b?b:b instanceof Xc?a:null};
function J(a){0===arguments.length?C.call(this):C.call(this,a);this.Q=311807;this.Gk=this.ei="";this.Tr=this.Qr=this.cs=this.Zq=null;this.es="";this.ci=this.ds=this.sm=null;this.Sr="";this.mo=null;this.Rr=(new ia(NaN,NaN)).freeze();this.Ur="";this.no=null;this.ie="";this.hv=this.eq=this.uk=null;this.Kg=(new w(NaN,NaN)).freeze();this.dr="";this.Kk=null;this.er=zb;this.or=K.NF;this.hr=K.MF;this.uq=null;this.$q=Un;this.tm=(new w(6,6)).freeze();this.Rg="gray";this.Mh=4;this.hC=-1;this.Es=NaN;this.VF=
new z;this.Mk=null;this.vj=NaN}v.Ga(J,C);v.ga("Part",J);
J.prototype.cloneProtected=function(a){C.prototype.cloneProtected.call(this,a);a.Q=this.Q&-4097|49152;a.ei=this.ei;a.Gk=this.Gk;a.Zq=this.Zq;a.cs=this.cs;a.Qr=this.Qr;a.Tr=this.Tr;a.es=this.es;a.ds=this.ds;a.ci=null;a.Sr=this.Sr;a.Rr.assign(this.Rr);a.Ur=this.Ur;a.ie=this.ie;a.eq=this.eq;a.Kg.assign(this.Kg);a.dr=this.dr;a.er=this.er.aa();a.or=this.or.aa();a.hr=this.hr.aa();a.uq=this.uq;a.$q=this.$q;a.tm.assign(this.tm);a.Rg=this.Rg;a.Mh=this.Mh;a.Es=this.Es};
J.prototype.Vh=function(a){C.prototype.Vh.call(this,a);a.ol();a.sm=null;a.mo=null;a.no=null;a.Kk=null;a.Mk=null};J.prototype.toString=function(){var a=v.nf(Object.getPrototypeOf(this))+"#"+v.cd(this);null!==this.data&&(a+="("+ce(this.data)+")");return a};J.LayoutNone=0;var Sj;J.LayoutAdded=Sj=1;var ak;J.LayoutRemoved=ak=2;J.LayoutShown=4;J.LayoutHidden=8;J.LayoutNodeSized=16;var Sk;J.LayoutGroupLayout=Sk=32;J.LayoutNodeReplaced=64;var Un;J.LayoutStandard=Un=Sj|ak|28|Sk|64;J.LayoutAll=16777215;
J.prototype.bn=function(a,b,c,d,e,f,h){var k=this.g;null!==k&&(a===Qd&&"elements"===b?e instanceof C?Tj(e,function(a){Vj(k,a);Uj(k,a)}):e instanceof Zi&&Ek(k,e):a===be&&"elements"===b&&(e instanceof C?Tj(e,function(a){Zj(k,a);Yj(k,a)}):e instanceof Zi&&Fk(k,e)),k.Ec(a,b,c,d,e,f,h))};J.prototype.updateTargetBindings=J.prototype.Ib=function(a){C.prototype.Ib.call(this,a);if(null!==this.data){a=this.wa.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof C&&Tj(d,function(a){null!==a.data&&a.Ib()})}}};
J.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.da;if(c instanceof Q){var d=c.Rm(a),b=b.mH(d),e=this.Sa;b!==e&&(b=null!==e?c.mb(e.data):void 0,e=c.pp,"function"===typeof e?e(a,b):a[e]=b,c.ux(a,d))}}}};v.u(J,{iw:"adornments"},function(){return null===this.ci?Ia:this.ci.zE});J.prototype.findAdornment=J.prototype.Qo=function(a){var b=this.ci;return null===b?null:b.la(a)};
J.prototype.addAdornment=J.prototype.Uk=function(a,b){if(null!==b){var c=null,d=this.ci;null!==d&&(c=d.la(a));if(c!==b){if(null!==c){var e=c.g;null!==e&&e.remove(c)}null===d&&(this.ci=d=new ma("string",mf));b.ei!==a&&(b.Mc=a);d.add(a,b);c=this.g;null!==c&&(c.add(b),b.data=this.data)}}};J.prototype.removeAdornment=J.prototype.yl=function(a){var b=this.ci;if(null!==b){var c=b.la(a);if(null!==c){var d=c.g;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.ci=null)}};
J.prototype.clearAdornments=J.prototype.Os=function(){var a=this.ci;if(null!==a){for(var b=v.jb(),a=a.i;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.yl(b[c]);v.ra(b)}};
J.prototype.updateAdornments=function(){var a=this.g;if(null!==a){a:{if(this.hb&&this.QI){var b=this.Qt;if(!(null!==b&&this.Z.H()&&this.isVisible()&&b.ul()&&b.Z.H()))break a;var c=this.Qo("Selection");if(null===c){c=this.RI;null===c&&(c=this instanceof W?a.dI:this instanceof T?a.zH:a.tI);if(!(c instanceof mf))break a;of(c);c=c.copy();null!==c&&(c.Mc="Selection",c.ec=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.Si(),f=0;b instanceof X&&(f=b.nb);var h=v.El();h.m((b.Fa.width+f)*e,(b.Fa.height+
f)*e);d.xa=h;v.Wj(h)}c.angle=b.jl();c.type!==dh&&(d=v.M(),c.location=b.fb(zb,d),v.v(d));this.Uk("Selection",c);break a}}this.yl("Selection")}Vn(this,a);for(a=this.iw;a.next();)b=a.value,b.Ib(),b.P()}};function Vn(a,b){b.wb.df.each(function(b){b.isEnabled&&b.updateAdornments(a)})}v.u(J,{layer:"layer"},function(){return this.hv});v.u(J,{g:"diagram"},function(){var a=this.hv;return null!==a?a.g:null});
v.defineProperty(J,{tf:"layerName"},function(){return this.Gk},function(a){var b=this.Gk;if(b!==a){v.j(a,"string",J,"layerName");var c=this.g;if(null===c||null!==c.Ws(a)&&!c.ln)if(this.Gk=a,null!==c&&c.oc(),this.h("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.g,null!==c&&(a=c.Ws(a),null!==a&&a!==b))){var d=b.Ke(-1,this,!0);0<=d&&c.Ec(be,"parts",b,this,null,d,!0);d=a.Zo(99999999,this,!0);0<=d&&c.Ec(Qd,"parts",a,null,this,!0,d);d=this.qt;if(null!==d){var e=c.Qa;c.Qa=!0;d(this,b,a);c.Qa=e}}}});
v.defineProperty(J,{qt:"layerChanged"},function(){return this.Zq},function(a){var b=this.Zq;b!==a&&(null!==a&&v.j(a,"function",J,"layerChanged"),this.Zq=a,this.h("layerChanged",b,a))});v.defineProperty(J,{Kp:"zOrder"},function(){return this.Es},function(a){var b=this.Es;if(b!==a){v.j(a,"number",J,"zOrder");this.Es=a;var c=this.layer;null!==c&&Qi(c,-1,this);this.h("zOrder",b,a);a=this.g;null!==a&&a.pa()}});
J.prototype.invalidateAdornments=J.prototype.Zd=function(){var a=this.g;null!==a&&(lj(a),0!==(this.Q&16384)!==!0&&(this.Q|=16384,a.de()))};function zi(a){0!==(a.Q&16384)!==!1&&(a.updateAdornments(),a.Q&=-16385)}function Vl(a,b){if(!1===Lj(a)){var c=a.g;null!==c&&(c.Zf.add(a),a instanceof S&&!c.ja.ib&&a.invalidateConnectedLinks(),b||c.de());Wn(a,!0);a.pi()}}
function Xn(a){if(!1!==Lj(a)){var b=a.position,c=a.location;c.H()&&b.H()||Yn(a,b,c);var b=a.Xa,c=a.kc,d=c.copy();c.Na();c.x=b.x;c.y=b.y;c.freeze();a.bx(d,c);Wn(a,!1)}}v.u(J,{ac:"locationObject"},function(){if(null===this.Kk){var a=this.Yz;""!==a?(a=this.Yd(a),this.Kk=null!==a?a:this):this.Kk=this instanceof mf?this.type!==dh&&null!==this.placeholder?this.placeholder:this:this}return this.Kk.visible?this.Kk:this});
v.defineProperty(J,{mI:"minLocation"},function(){return this.or},function(a){var b=this.or;b.L(a)||(this.or=a=a.aa(),this.h("minLocation",b,a))});v.defineProperty(J,{hI:"maxLocation"},function(){return this.hr},function(a){var b=this.hr;b.L(a)||(this.hr=a=a.aa(),this.h("maxLocation",b,a))});v.defineProperty(J,{Yz:"locationObjectName"},function(){return this.dr},function(a){var b=this.dr;b!==a&&(this.dr=a,this.Kk=null,Pl(this),this.h("locationObjectName",b,a))});
v.defineProperty(J,{Ze:"locationSpot"},function(){return this.er},function(a){var b=this.er;b.L(a)||(this.er=a=a.aa(),Pl(this),this.h("locationSpot",b,a))});J.prototype.move=function(a){this.position=a};J.prototype.moveTo=J.prototype.moveTo=function(a,b){var c=v.Rb(a,b);this.move(c);v.v(c)};
J.prototype.isVisible=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.g;if(null!==a&&(a=a.Oa,a.pf&&(a=a.ay.la(this),null!==a&&a.kx)))return!0;a=this.Sa;return null===a||a.be&&a.isVisible()?!0:!1};J.prototype.oe=function(a){var b=this.g;a?(this.G(4),this.Zd(),null!==b&&b.Zf.add(this)):(this.G(8),this.Os());this.ol();null!==b&&(b.oc(),b.pa())};
J.prototype.findObject=J.prototype.Yd=function(a){if(this.name===a)return this;var b=this.Mk;null===b&&(this.Mk=b=new pa);if(void 0!==b[a])return b[a];for(var c=this.wa.n,d=c.length,e=0;e<d;e++){var f=c[e];if(f.name===a)return b[a]=f;if(f instanceof C)if(null===f.si&&null===f.ag){if(f=f.Yd(a),null!==f)return b[a]=f}else if(Ck(f)&&(f=f.wa.first(),null!==f&&f.name===a))return b[a]=f}return b[a]=null};
function Zn(a,b,c,d){void 0===d&&(d=new w);c.me()&&(c=Kb);var e=b.Fa;d.m(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.xb(d);for(b=b.T;null!==b&&b!==a;)b.transform.xb(d),b=b.T;a.Jk.xb(d);d.offset(-a.Vc.x,-a.Vc.y);return d}J.prototype.ensureBounds=J.prototype.mf=function(){Rh(this,Infinity,Infinity);this.zc()};
function Pi(a,b){var c;c=a.VF;var d;isNaN(a.vj)&&(a.vj=cn(a));d=a.vj;var e=2*d;if(!a.tl)return c.m(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,f=b.width,h=b.height,k=a.shadowBlur,l=a.XI,f=f+k,h=h+k;d-=k/2;e-=k/2;0<l.x?f+=l.x:(d+=l.x,f-=l.x);0<l.y?h+=l.y:(e+=l.y,h-=l.y);c.m(d-1,e-1,f+2,h+2);return c}
J.prototype.zc=function(){this.pi();if(!1===Kj(this))Xn(this);else{var a=this.kc,b=v.Uf();b.assign(a);a.Na();var c=yi(this);this.Li(0,0,this.Vc.width,this.Vc.height);var d=this.position;Yn(this,d,this.location);a.x=d.x;a.y=d.y;a.freeze();this.bx(b,a);b.L(a)?this.uf(c):!this.Ld()||K.D(b.width,a.width)&&K.D(b.height,a.height)||0<=this.hC&&this.G(16);v.fc(b);Wn(this,!1)}};
J.prototype.bx=function(a,b){Al(this,!1);var c=this.g;if(null!==c){var d=!1,e=a.H();if(!1===c.nj){var f=c.Wd,h=c.padding,k=f.x+h.left,l=f.y+h.top,m=f.width-2*h.right,f=f.height-2*h.bottom;e&&a.x>k&&a.y>l&&a.right<m&&a.bottom<f&&b.x>k&&b.y>l&&b.right<m&&b.bottom<f&&(d=!0)}0!==(this.Q&65536)!==!0&&a.L(b)||Wj(this,d,c);c.pa();a.L(b)||this.ol()}};
v.defineProperty(J,{location:"location"},function(){return this.Kg},function(a){var b=this.Kg;if(!b.L(a)){a=a.aa();var c;c=a;if(this instanceof W)c=!1;else{this.Kg=c;if(!1===Kj(this)){var d=this.Xa,e=d.copy();d.m(d.x+(c.x-b.x),d.y+(c.y-b.y));Vl(this,!1);$n(this,this.g,d,e);this.h("position",e,d)}c=!0}c&&this.h("location",b,a)}});
J.prototype.CA=function(a,b){if(this instanceof W||!a.H())return!1;var c=this.g;if(null!==c&&($n(this,c,a,b),!0===c.ja.ib))return!0;this.Xa=a;var c=this.Kg,d=c.copy();c.m(c.x+(a.x-b.x),c.y+(a.y-b.y));!1===Lj(this)&&!1===Kj(this)&&(Vl(this,!1),Xn(this));this.h("location",d,c);return!0};function $n(a,b,c,d){null===b||a instanceof mf||(b=a.g.Oa,b.sc&&c.H()&&mi(b,a,"position",d.copy(),c.copy(),!1))}
J.prototype.DA=function(a,b){var c=this.Kg;!1===Lj(this)&&!1===Kj(this)?this.Kg.m(c.x+a-this.Xa.x,c.y+b-this.Xa.y):c.m(NaN,NaN);this.Xa.m(a,b);Vl(this,!0)};
function Yn(a,b,c){var d=NaN,e=NaN,f=v.M(),h=a.Ze,k=a.ac;h.me()&&v.k("determineOffset: Part's locationSpot must be real: "+h.toString());var l=k.Fa,d=0;k.nb&&(d=k.Sg);f.Ut(0,0,l.width+d,l.height+d,h);if(k!==a)for(k.nb&&f.offset(-d/2,-d/2),k.transform.xb(f),h=k.T;null!==h&&h!==a;)h.transform.xb(f),h=h.T;a.Jk.xb(f);f.offset(-a.Vc.x,-a.Vc.y);h=a.g;c.H()?(k=b.x,l=b.y,d=c.x-f.x,e=c.y-f.y,b.m(d,e),c=!1,null!==h&&(d=h.Oa,d.oj?c=!0:!d.sc||a instanceof mf||mi(d,a,"position",new w(k,l),b,!1),c||b.x===k&&b.y===
l||(d=h.lb,h.lb=!0,a.h("position",new w(k,l),b),h.lb=d))):b.H()&&(d=b.x,e=b.y,b=c.copy(),c.m(d+f.x,e+f.y),c.L(b)||null===h||(d=h.lb,h.lb=!0,a.h("location",b,c),h.lb=d));v.v(f);a.pi()}function Wj(a,b,c){Bl(a,!1);a instanceof S&&$k(c,a);a.layer.Bc||b||c.oc();b=a.kc;var d=c.tb;d.H()?(yi(a)?qb(b,d)||a.uf(!1):b.tg(d)&&a.uf(!0),a.updateAdornments()):c.Dk=!0}J.prototype.sl=function(){return!0};
function Bi(a,b){var c=a.kc;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)&&a.isVisible()){var d=a.transform,e=a.T,f=a.nn;f.reset();null!==e&&(e.Vf()?f.multiply(e.Ef):null!==e.T&&f.multiply(e.T.Ef));f.multiply(a.Td);null!==a.lc&&(Jl(a,b,a.lc,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.lc&&null===a.Jb&&(Jl(a,b,"rgba(0,0,0,0.4)",!0,!1),b.fillRect(c.x,c.y,c.width,c.height));null!==a.Jb&&(d.nt()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Fa,c=e.width,e=e.height,Jl(a,b,a.Jb,
!0,!1),b.fillRect(0,0,c+0,e+0),d.nt()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}J.prototype.Ld=function(){return!0};
v.defineProperty(J,{Mc:"category"},function(){return this.ei},function(a){var b=this.ei;if(b!==a){v.j(a,"string",J,"category");var c=this.g,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof mf)){var f=c.da.ja;f.isEnabled&&!f.ib&&(e=this.clone(),e.wa.Yc(this.wa))}this.ei=a;this.h("category",b,a);null===c||null===d||this instanceof mf?(e=this.Sh,null!==e&&(a=e.ci,null!==a&&a.remove(b),e.Uk(this.Mc,this))):(f=c.da,f.ja.ib||(this instanceof W?(f instanceof Q?f.kF(d,a):f instanceof te&&f.UI(d,
a),c=Mk(c,a),null!==c&&(of(c),c=c.copy(),null!==c&&ao(this,c,b,a))):(null!==f&&f.sx(d,a),c=Jk(c,d,a),null!==c&&(of(c),c=c.copy(),null===c||c instanceof W||(c.location=this.location,ao(this,c,b,a)))),null!==e&&(b=this.clone(),b.wa.Yc(this.wa),this.h("self",e,b))))}});v.defineProperty(J,{self:"self"},function(){return this},function(a){ao(this,a,this.Mc,a.Mc)});var bo=!1;
function ao(a,b,c,d){b.constructor===a.constructor||bo||(bo=!0,v.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),v.trace("  Old class: "+v.nf(a)+", new class: "+v.nf(b)+", part: "+a.toString()));a.Os();var e=a.data;c=a.tf;var f=a.hb,h=a.Yg,k=!0,l=!0,m=!1;if(a instanceof S)var n=a,k=n.Ui,l=n.od,m=n.cu;b.Vh(a);b.cloneProtected(a);a.ei=d;a.P();a.pa();b=a.g;d=!0;null!==b&&(d=b.lb,b.lb=!0);a.uh=e;null!==e&&a.Ib();null!==b&&(b.lb=d);e=a.tf;e!==c&&(a.Gk=c,
a.tf=e);a instanceof S&&(n=a,n.Ui=k,n.od=l,n.cu=m,n.Ld()&&n.G(64));a.hb=f;a.Yg=h}J.prototype.canCopy=function(){if(!this.SG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Qj)return!1;a=a.g;return null===a?!0:a.Qj?!0:!1};J.prototype.canDelete=function(){if(!this.ZG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Am)return!1;a=a.g;return null===a?!0:a.Am?!0:!1};
J.prototype.canEdit=function(){if(!this.dJ)return!1;var a=this.layer;if(null===a)return!0;if(!a.nw)return!1;a=a.g;return null===a?!0:a.nw?!0:!1};J.prototype.canGroup=function(){if(!this.AH)return!1;var a=this.layer;if(null===a)return!0;if(!a.kw)return!1;a=a.g;return null===a?!0:a.kw?!0:!1};J.prototype.canMove=function(){if(!this.rI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Yk)return!1;a=a.g;return null===a?!0:a.Yk?!0:!1};
J.prototype.canReshape=function(){if(!this.FI)return!1;var a=this.layer;if(null===a)return!0;if(!a.lw)return!1;a=a.g;return null===a?!0:a.lw?!0:!1};J.prototype.canResize=function(){if(!this.GI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Ls)return!1;a=a.g;return null===a?!0:a.Ls?!0:!1};J.prototype.canRotate=function(){if(!this.JI)return!1;var a=this.layer;if(null===a)return!0;if(!a.mw)return!1;a=a.g;return null===a?!0:a.mw?!0:!1};
J.prototype.canSelect=function(){if(!this.zl)return!1;var a=this.layer;if(null===a)return!0;if(!a.lf)return!1;a=a.g;return null===a?!0:a.lf?!0:!1};v.defineProperty(J,{SG:"copyable"},function(){return 0!==(this.Q&1)},function(a){var b=0!==(this.Q&1);b!==a&&(this.Q^=1,this.h("copyable",b,a))});v.defineProperty(J,{ZG:"deletable"},function(){return 0!==(this.Q&2)},function(a){var b=0!==(this.Q&2);b!==a&&(this.Q^=2,this.h("deletable",b,a))});
v.defineProperty(J,{dJ:"textEditable"},function(){return 0!==(this.Q&4)},function(a){var b=0!==(this.Q&4);b!==a&&(this.Q^=4,this.h("textEditable",b,a),this.Zd())});v.defineProperty(J,{AH:"groupable"},function(){return 0!==(this.Q&8)},function(a){var b=0!==(this.Q&8);b!==a&&(this.Q^=8,this.h("groupable",b,a))});v.defineProperty(J,{rI:"movable"},function(){return 0!==(this.Q&16)},function(a){var b=0!==(this.Q&16);b!==a&&(this.Q^=16,this.h("movable",b,a))});
v.defineProperty(J,{QI:"selectionAdorned"},function(){return 0!==(this.Q&32)},function(a){var b=0!==(this.Q&32);b!==a&&(this.Q^=32,this.h("selectionAdorned",b,a),this.Zd())});v.defineProperty(J,{Sz:"isInDocumentBounds"},function(){return 0!==(this.Q&64)},function(a){var b=0!==(this.Q&64);if(b!==a){this.Q^=64;var c=this.g;null!==c&&c.oc();this.h("isInDocumentBounds",b,a)}});
v.defineProperty(J,{wE:"isLayoutPositioned"},function(){return 0!==(this.Q&128)},function(a){var b=0!==(this.Q&128);b!==a&&(this.Q^=128,this.h("isLayoutPositioned",b,a),this.G(a?4:8))});v.defineProperty(J,{zl:"selectable"},function(){return 0!==(this.Q&256)},function(a){var b=0!==(this.Q&256);b!==a&&(this.Q^=256,this.h("selectable",b,a),this.Zd())});
v.defineProperty(J,{FI:"reshapable"},function(){return 0!==(this.Q&512)},function(a){var b=0!==(this.Q&512);b!==a&&(this.Q^=512,this.h("reshapable",b,a),this.Zd())});v.defineProperty(J,{GI:"resizable"},function(){return 0!==(this.Q&1024)},function(a){var b=0!==(this.Q&1024);b!==a&&(this.Q^=1024,this.h("resizable",b,a),this.Zd())});v.defineProperty(J,{JI:"rotatable"},function(){return 0!==(this.Q&2048)},function(a){var b=0!==(this.Q&2048);b!==a&&(this.Q^=2048,this.h("rotatable",b,a),this.Zd())});
v.defineProperty(J,{hb:"isSelected"},function(){return 0!==(this.Q&4096)},function(a){var b=0!==(this.Q&4096);if(b!==a){var c=this.g;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.iI)){this.Q^=4096;var d=!1;if(null!==c){d=c.lb;c.lb=!0;var e=c.selection;e.Na();a?e.add(this):e.remove(this);e.freeze()}this.h("isSelected",b,a);this.Zd();a=this.SI;null!==a&&a(this);null!==c&&(c.de(),c.lb=d)}}});
v.defineProperty(J,{Yg:"isHighlighted"},function(){return 0!==(this.Q&524288)},function(a){var b=0!==(this.Q&524288);if(b!==a){this.Q^=524288;var c=this.g;null!==c&&(c=c.Kw,c.Na(),a?c.add(this):c.remove(this),c.freeze());this.h("isHighlighted",b,a);this.pa()}});v.defineProperty(J,{tl:"isShadowed"},function(){return 0!==(this.Q&8192)},function(a){var b=0!==(this.Q&8192);b!==a&&(this.Q^=8192,this.h("isShadowed",b,a),this.pa())});function Lj(a){return 0!==(a.Q&32768)}
function Wn(a,b){a.Q=b?a.Q|32768:a.Q&-32769}function Bl(a,b){a.Q=b?a.Q|65536:a.Q&-65537}function yi(a){return 0!==(a.Q&131072)}J.prototype.uf=function(a){this.Q=a?this.Q|131072:this.Q&-131073};function co(a,b){a.Q=b?a.Q|1048576:a.Q&-1048577}v.defineProperty(J,{oE:"isAnimated"},function(){return 0!==(this.Q&262144)},function(a){var b=0!==(this.Q&262144);b!==a&&(this.Q^=262144,this.h("isAnimated",b,a))});
v.defineProperty(J,{yA:"selectionObjectName"},function(){return this.es},function(a){var b=this.es;b!==a&&(this.es=a,this.sm=null,this.h("selectionObjectName",b,a))});v.defineProperty(J,{RI:"selectionAdornmentTemplate"},function(){return this.cs},function(a){var b=this.cs;b!==a&&(this instanceof W&&(a.type=dh),this.cs=a,this.h("selectionAdornmentTemplate",b,a))});
v.u(J,{Qt:"selectionObject"},function(){if(null===this.sm){var a=this.yA;null!==a&&""!==a?(a=this.Yd(a),this.sm=null!==a?a:this):this instanceof W?(a=this.path,this.sm=null!==a?a:this):this.sm=this}return this.sm});v.defineProperty(J,{SI:"selectionChanged"},function(){return this.ds},function(a){var b=this.ds;b!==a&&(null!==a&&v.j(a,"function",J,"selectionChanged"),this.ds=a,this.h("selectionChanged",b,a))});
v.defineProperty(J,{YE:"resizeAdornmentTemplate"},function(){return this.Qr},function(a){var b=this.Qr;b!==a&&(this.Qr=a,this.h("resizeAdornmentTemplate",b,a))});v.defineProperty(J,{$E:"resizeObjectName"},function(){return this.Sr},function(a){var b=this.Sr;b!==a&&(this.Sr=a,this.mo=null,this.h("resizeObjectName",b,a))});v.u(J,{ZE:"resizeObject"},function(){if(null===this.mo){var a=this.$E;null!==a&&""!==a?(a=this.Yd(a),this.mo=null!==a?a:this):this.mo=this}return this.mo});
v.defineProperty(J,{HI:"resizeCellSize"},function(){return this.Rr},function(a){var b=this.Rr;b.L(a)||(this.Rr=a=a.aa(),this.h("resizeCellSize",b,a))});v.defineProperty(J,{KI:"rotateAdornmentTemplate"},function(){return this.Tr},function(a){var b=this.Tr;b!==a&&(this.Tr=a,this.h("rotateAdornmentTemplate",b,a))});v.defineProperty(J,{LI:"rotateObjectName"},function(){return this.Ur},function(a){var b=this.Ur;b!==a&&(this.Ur=a,this.no=null,this.h("rotateObjectName",b,a))});
v.u(J,{bF:"rotateObject"},function(){if(null===this.no){var a=this.LI;null!==a&&""!==a?(a=this.Yd(a),this.no=null!==a?a:this):this.no=this}return this.no});v.defineProperty(J,{text:"text"},function(){return this.ie},function(a){var b=this.ie;b!==a&&(this.ie=a,this.h("text",b,a))});
v.defineProperty(J,{Sa:"containingGroup"},function(){return this.uk},function(a){if(this.Ld()){var b=this.uk;if(b!==a){null===a||this!==a&&!a.Yh(this)||(this===a&&v.k("Cannot make a Group a member of itself: "+this.toString()),v.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.G(ak);var c=this.g;null!==b?eo(b,this):this instanceof T&&null!==c&&c.Sk.remove(this);this.uk=a;null!==a?fo(a,this):this instanceof T&&null!==c&&c.Sk.add(this);this.G(Sj);
if(null!==c){var d=this.data,e=c.da;null!==d&&e instanceof Q&&e.ux(d,e.mb(null!==a?a.data:null))}d=this.JD;null!==d&&(e=!0,null!==c&&(e=c.Qa,c.Qa=!0),d(this,b,a),null!==c&&(c.Qa=e));if(this instanceof T)for(c=new H(J),lf(c,this,!0,0,!0),c=c.i;c.next();)if(d=c.value,d instanceof S)for(d=d.ne;d.next();)Hk(d.value);if(this instanceof S)for(d=this.ne;d.next();)Hk(d.value);this.h("containingGroup",b,a);null!==a&&(b=a.layer,null!==b&&Qi(b,-1,a))}}else v.k("cannot set the Part.containingGroup of a Link or Adornment")});
g=J.prototype;g.ol=function(){var a=this.Sa;null!==a&&(a.P(),null!==a.Hb&&a.Hb.P(),a.invalidateConnectedLinks())};g.pa=function(){var a=this.g;null!==a&&!Kj(this)&&!Lj(this)&&this.isVisible()&&this.kc.H()&&a.pa(Pi(this,this.kc))};g.it=function(a){a||(a=this.uk,null!==a&&fo(a,this))};g.jt=function(a){a||(a=this.uk,null!==a&&eo(a,this))};g.Nm=function(){var a=this.data;if(null!==a){var b=this.g;null!==b&&(b=b.da,null!==b&&b.mx(a))}};
v.defineProperty(J,{JD:"containingGroupChanged"},function(){return this.eq},function(a){var b=this.eq;b!==a&&(null!==a&&v.j(a,"function",J,"containingGroupChanged"),this.eq=a,this.h("containingGroupChanged",b,a))});J.prototype.findSubGraphLevel=function(){return ho(this,this)};function ho(a,b){var c=b.Sa;return null!==c?1+ho(a,c):b instanceof S&&(c=b.ce,null!==c)?ho(a,c):0}J.prototype.findTopLevelPart=function(){return io(this,this)};
function io(a,b){var c=b.Sa;return null!==c?io(a,c):b instanceof S&&(c=b.ce,null!==c)?io(a,c):b}v.u(J,{bp:"isTopLevel"},function(){return null!==this.Sa||this instanceof S&&this.qf?!1:!0});J.prototype.isMemberOf=J.prototype.Yh=function(a){return a instanceof T?jo(this,this,a):!1};function jo(a,b,c){if(b===c||null===c)return!1;var d=b.Sa;return null===d||d!==c&&!jo(a,d,c)?b instanceof S&&(b=b.ce,null!==b)?jo(a,b,c):!1:!0}
J.prototype.findCommonContainingGroup=J.prototype.iH=function(a){if(null===a)return null;if(this===a)return this.Sa;for(var b=this;null!==b;)b instanceof T&&co(b,!0),b=b.Sa;for(var c=null,b=a;null!==b;){if(0!==(b.Q&1048576)){c=b;break}b=b.Sa}for(b=this;null!==b;)b instanceof T&&co(b,!1),b=b.Sa;return c};v.defineProperty(J,{ZH:"layoutConditions"},function(){return this.$q},function(a){var b=this.$q;b!==a&&(this.$q=a,this.h("layoutConditions",b,a))});
J.prototype.canLayout=function(){if(!this.wE||!this.isVisible())return!1;var a=this.layer;return null!==a&&a.Bc||this instanceof S&&this.qf?!1:!0};J.prototype.invalidateLayout=J.prototype.G=function(a){void 0===a&&(a=16777215);var b;this.wE&&0!==(a&this.ZH)?(b=this.layer,null!==b&&b.Bc||this instanceof S&&this.qf?b=!1:(b=this.g,b=null!==b&&b.ja.ib?!1:!0)):b=!1;if(b)if(b=this.uk,null!==b){var c=b.Pb;null!==c?c.G():b.G(a)}else a=this.g,null!==a&&(c=a.Pb,null!==c&&c.G())};
function Xj(a){if(!a.isVisible())return!1;a=a.layer;return null!==a&&a.Bc?!1:!0}v.defineProperty(J,{UD:"dragComputation"},function(){return this.uq},function(a){var b=this.uq;b!==a&&(null!==a&&v.j(a,"function",J,"dragComputation"),this.uq=a,this.h("dragComputation",b,a))});v.defineProperty(J,{XI:"shadowOffset"},function(){return this.tm},function(a){var b=this.tm;b.L(a)||(this.tm=a=a.aa(),this.pa(),this.h("shadowOffset",b,a))});
v.defineProperty(J,{shadowColor:"shadowColor"},function(){return this.Rg},function(a){var b=this.Rg;b!==a&&(this.Rg=a,this.pa(),this.h("shadowColor",b,a))});v.defineProperty(J,{shadowBlur:"shadowBlur"},function(){return this.Mh},function(a){var b=this.Mh;b!==a&&(this.Mh=a,this.pa(),this.h("shadowBlur",b,a))});function mf(a){0===arguments.length?J.call(this,yh):J.call(this,a);this.tf="Adornment";this.Eb=null;this.Q&=-257;this.Kg=new w(NaN,NaN);this.ej=new G(z);this.Hb=null}v.Ga(mf,J);
v.ga("Adornment",mf);mf.prototype.toString=function(){var a=this.Sh;return"Adornment("+this.Mc+")"+(null!==a?a.toString():"")};mf.prototype.updateRelationshipsFromData=function(){};mf.prototype.wt=function(a){var b=this.ec.V,c=this.ec;if(b instanceof W&&c instanceof X){var d=b.path,c=d.Ta;b.wt(a);c=d.Ta;a=this.wa.n;b=a.length;for(d=0;d<b;d++){var e=a[d];e.Lf&&e instanceof X&&(e.Ta=c)}}};v.u(mf,{placeholder:"placeholder"},function(){return this.Hb});
v.defineProperty(mf,{ec:"adornedObject"},function(){return this.Eb},function(a){var b=this.Sh,c=null;null!==a&&(c=a.V);null===b||null!==a&&b===c||b.yl(this.Mc);this.Eb=a;null!==c&&c.Uk(this.Mc,this)});v.u(mf,{Sh:"adornedPart"},function(){var a=this.Eb;return null!==a?a.V:null});mf.prototype.sl=function(){var a=this.Eb;if(null===a)return!0;a=a.V;return null===a||!Kj(a)};mf.prototype.Ld=function(){return!1};v.u(mf,{Sa:"containingGroup"},function(){return null});
mf.prototype.bn=function(a,b,c,d,e,f,h){if(a===Qd&&"elements"===b)if(e instanceof sh){var k=e;null===this.Hb?this.Hb=k:this.Hb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof C&&(k=e.Vs(function(a){return a instanceof sh}),k instanceof sh&&(null===this.Hb?this.Hb=k:this.Hb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===be&&"elements"===b&&null!==this.Hb&&(d===this.Hb?this.Hb=null:d instanceof C&&
this.Hb.rl(d)&&(this.Hb=null));J.prototype.bn.call(this,a,b,c,d,e,f,h)};mf.prototype.updateAdornments=function(){};mf.prototype.Nm=function(){};function S(a){0===arguments.length?J.call(this,yh):J.call(this,a);this.dc=new G(W);this.Zn=this.Ik=this.br=this.ar=null;this.Tq=!0;this.Bs=!1;this.ws=null;this.Yp=this.Uq=!0;this.Zp=K.QF;this.Sd=this.rh=null;this.Ir=ko;this.Nj=!1}v.Ga(S,J);v.ga("Node",S);
S.prototype.cloneProtected=function(a){J.prototype.cloneProtected.call(this,a);a.ar=this.ar;a.br=this.br;a.Ik=this.Ik;a.Tq=this.Tq;a.Bs=this.Bs;a.ws=this.ws;a.Uq=this.Uq;a.Yp=this.Yp;a.Zp=this.Zp.aa();a.Ir=this.Ir};S.prototype.Vh=function(a){J.prototype.Vh.call(this,a);a.invalidateConnectedLinks();a.rh=this.rh;a.Sd=null};var lo;S.DirectionDefault=lo=v.p(S,"DirectionDefault",0);S.DirectionAbsolute=v.p(S,"DirectionAbsolute",1);var mo;S.DirectionRotatedNode=mo=v.p(S,"DirectionRotatedNode",2);var sl;
S.DirectionRotatedNodeOrthogonal=sl=v.p(S,"DirectionRotatedNodeOrthogonal",3);S.SpreadingNone=v.p(S,"SpreadingNone",10);var ko;S.SpreadingEvenly=ko=v.p(S,"SpreadingEvenly",11);var no;S.SpreadingPacked=no=v.p(S,"SpreadingPacked",12);function oo(a,b){null!==b&&(null===a.rh&&(a.rh=new H($i)),a.rh.add(b))}
function po(a,b,c,d){if(null===b||null===a.rh)return null;for(var e=a.rh.i;e.next();){var f=e.value;if(f.op===a&&f.Ct===b&&f.gx===c&&f.hx===d||f.op===b&&f.Ct===a&&f.gx===d&&f.hx===c)return f}return null}S.prototype.invalidateLinkBundle=function(a,b,c){if(void 0===b||null===b)b="";if(void 0===c||null===c)c="";a=po(this,a,b,c);null!==a&&a.Tm()};
S.prototype.bn=function(a,b,c,d,e,f,h){a===Qd&&"elements"===b?this.Sd=null:a===be&&"elements"===b&&(null===this.g?this.Sd=null:d instanceof R&&Zm(this,d,function(a,b){Wl(a,b,!0)}));J.prototype.bn.call(this,a,b,c,d,e,f,h)};S.prototype.invalidateConnectedLinks=function(a){void 0===a&&(a=null);for(var b=this.ne;b.next();){var c=b.value;null!==a&&a.contains(c)||(qo(this,c.$c),qo(this,c.Bd),c.gc())}};function qo(a,b){if(null!==b){b.lm=null;var c=a.Sa;null===c||c.be||qo(c,c.hl(""))}}S.prototype.sl=function(){return!0};
v.defineProperty(S,{zI:"portSpreading"},function(){return this.Ir},function(a){var b=this.Ir;b!==a&&(this.Ir=a,this.h("portSpreading",b,a),a=this.g,null!==a&&a.ja.ib||this.invalidateConnectedLinks())});v.defineProperty(S,{zD:"avoidable"},function(){return this.Yp},function(a){var b=this.Yp;if(b!==a){this.Yp=a;var c=this.g;null!==c&&$k(c,this);this.h("avoidable",b,a)}});
v.defineProperty(S,{AG:"avoidableMargin"},function(){return this.Zp},function(a){"number"===typeof a?a=new tb(a):v.C(a,tb,S,"avoidableMargin");var b=this.Zp;if(!b.L(a)){this.Zp=a=a.aa();var c=this.g;null!==c&&$k(c,this);this.h("avoidableMargin",b,a)}});S.prototype.canAvoid=function(){return this.zD&&!this.qf};S.prototype.getAvoidableRect=function(a){a.set(this.Z);a.hw(this.AG);return a};S.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.isVisible();)a=a.Sa;return a};
S.prototype.isVisible=function(){if(!J.prototype.isVisible.call(this))return!1;var a=!0,b=!0,c=this.g;if(null!==c){a=c.Oa;if(a.pf&&(a=a.ay.la(this),null!==a&&a.kx))return!0;a=c.Md;b=c.MA===Wi}if(b){if(c=this.Pm(),null!==c&&!c.od)return!1}else if(c=a?this.kH():this.lH(),0<c.count&&c.all(function(a){return!a.od}))return!1;c=this.ce;return null!==c?c.isVisible():!0};S.prototype.oe=function(a){J.prototype.oe.call(this,a);for(var b=this.ne;b.next();)b.value.oe(a)};v.u(S,{ne:"linksConnected"},function(){return this.dc.i});
S.prototype.findLinksConnected=S.prototype.YD=function(a){void 0===a&&(a=null);if(null===a)return this.dc.i;var b=new La(this.dc),c=this;b.$m=function(b){return b.U===c&&b.rg===a||b.ba===c&&b.oh===a};return b};S.prototype.findLinksOutOf=S.prototype.Fw=function(a){void 0===a&&(a=null);var b=new La(this.dc),c=this;b.$m=function(b){return b.U!==c?!1:null===a?!0:b.rg===a};return b};
S.prototype.findLinksInto=S.prototype.qg=function(a){void 0===a&&(a=null);var b=new La(this.dc),c=this;b.$m=function(b){return b.ba!==c?!1:null===a?!0:b.oh===a};return b};
S.prototype.findNodesConnected=S.prototype.ZD=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.dc.i;d.next();){var e=d.value;if(e.U===this){if(null===a||e.rg===a)e=e.ba,null!==b?b.add(e):null!==c&&c!==e?(b=new H(S),b.add(c),b.add(e)):c=e}else e.ba!==this||null!==a&&e.oh!==a||(e=e.U,null!==b?b.add(e):null!==c&&c!==e?(b=new H(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ja(c):Ia};
S.prototype.findNodesOutOf=S.prototype.lH=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.dc.i;d.next();){var e=d.value;e.U!==this||null!==a&&e.rg!==a||(e=e.ba,null!==b?b.add(e):null!==c&&c!==e?(b=new H(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ja(c):Ia};
S.prototype.findNodesInto=S.prototype.kH=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.dc.i;d.next();){var e=d.value;e.ba!==this||null!==a&&e.oh!==a||(e=e.U,null!==b?b.add(e):null!==c&&c!==e?(b=new H(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ja(c):Ia};
S.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new La(this.dc),e=this;d.$m=function(d){return(d.U!==e||d.ba!==a||null!==b&&d.rg!==b||null!==c&&d.oh!==c)&&(d.U!==a||d.ba!==e||null!==c&&d.rg!==c||null!==b&&d.oh!==b)?!1:!0};return d};S.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new La(this.dc),e=this;d.$m=function(d){return d.U!==e||d.ba!==a||null!==b&&d.rg!==b||null!==c&&d.oh===c?!1:!0};return d};
v.defineProperty(S,{aI:"linkConnected"},function(){return this.ar},function(a){var b=this.ar;b!==a&&(null!==a&&v.j(a,"function",S,"linkConnected"),this.ar=a,this.h("linkConnected",b,a))});v.defineProperty(S,{bI:"linkDisconnected"},function(){return this.br},function(a){var b=this.br;b!==a&&(null!==a&&v.j(a,"function",S,"linkDisconnected"),this.br=a,this.h("linkDisconnected",b,a))});
v.defineProperty(S,{Yw:"linkValidation"},function(){return this.Ik},function(a){var b=this.Ik;b!==a&&(null!==a&&v.j(a,"function",S,"linkValidation"),this.Ik=a,this.h("linkValidation",b,a))});
function ro(a,b,c){qo(a,c);if(!a.dc.contains(b)){a.dc.add(b);var d=a.aI;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.Qa,f.Qa=!0);d(a,b,c);null!==f&&(f.Qa=e)}b.Cc&&(c=b.U,b=b.ba,null!==c&&null!==b&&c!==b&&(d=!0,f=a.g,null!==f&&(d=f.Md),a=d?b:c,e=d?c:b,a.Nj||(a.Nj=e),!e.Ui||null!==f&&f.ja.ib||(d?c===e&&(e.Ui=!1):b===e&&(e.Ui=!1))))}}
function so(a,b,c){qo(a,c);if(a.dc.remove(b)){var d=a.bI,e=a.g;if(null!==d){var f=!0;null!==e&&(f=e.Qa,e.Qa=!0);d(a,b,c);null!==e&&(e.Qa=f)}b.Cc&&(c=!0,null!==e&&(c=e.Md),a=c?b.ba:b.U,b=c?b.U:b.ba,null!==a&&(a.Nj=!1),null===b||b.Ui||(0===b.dc.count?(b.Nj=null,null!==e&&e.ja.ib||(b.Ui=!0)):Tk(b)))}}
function Tk(a){a.Nj=!1;if(0!==a.dc.count){var b=!0,c=a.g;if(null===c||!c.ja.ib){null!==c&&(b=c.Md);for(c=a.dc.i;c.next();){var d=c.value;if(d.Cc)if(b){if(d.U===a){a.Ui=!1;return}}else if(d.ba===a){a.Ui=!1;return}}a.Ui=!0}}}
S.prototype.updateRelationshipsFromData=function(){J.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.da;if(c instanceof te){var d=c.Sm(a),b=b.We(d),e=this.Pm();b!==e&&(b=null!==e?c.mb(e.data):void 0,e=c.qp,"function"===typeof e?e(a,b):a[e]=b,c.mh(a,d))}}}};S.prototype.it=function(a){J.prototype.it.call(this,a);a||(Tk(this),a=this.Zn,null!==a&&to(a,this))};
S.prototype.jt=function(a){J.prototype.jt.call(this,a);a||(a=this.Zn,null!==a&&null!==a.we&&(a.we.remove(this),a.P()))};S.prototype.Nm=function(){if(0<this.dc.count){var a=this.g;if(null!==a)for(var b=a.rb.TD,c=this.dc.copy().i;c.next();){var d=c.value;b?a.remove(d):(d.U===this&&(d.U=null),d.ba===this&&(d.ba=null))}}this.ce=null;J.prototype.Nm.call(this)};v.u(S,{qf:"isLinkLabel"},function(){return null!==this.Zn});
v.defineProperty(S,{ce:"labeledLink"},function(){return this.Zn},function(a){var b=this.Zn;if(b!==a){var c=this.g,d=this.data;if(null!==b&&(null!==b.we&&(b.we.remove(this),b.P()),null!==c&&null!==d&&!c.ja.ib)){var e=b.data,f=c.da;if(null!==e&&f instanceof Q){var h=f.mb(d);void 0!==h&&f.TE(e,h)}}this.Zn=a;null!==a&&(to(a,this),null===c||null===d||c.ja.ib||(e=a.data,f=c.da,null!==e&&f instanceof Q&&(h=f.mb(d),void 0!==h&&f.jz(e,h))));Pl(this);this.h("labeledLink",b,a)}});
S.prototype.findPort=S.prototype.hl=function(a){if(null===this.Sd){if(""===a&&!1===this.Bh)return this;Xl(this)}var b=this.Sd.la(a);return null!==b||""!==a&&(b=this.Sd.la(""),null!==b)?b:this};v.u(S,{port:"port"},function(){return this.hl("")});v.u(S,{ports:"ports"},function(){null===this.Sd&&Xl(this);return this.Sd.zE});function Xl(a){null===a.Sd?a.Sd=new ma("string",R):a.Sd.clear();Zm(a,a,function(a,c){var d=c.Od;null!==d&&a.Sd.add(d,c)});0===a.Sd.count&&a.Sd.add("",a)}
function Wl(a,b,c){var d=b.Od;if(null!==d&&(null!==a.Sd&&a.Sd.remove(d),b=a.g,null!==b&&c)){c=null;for(d=a.YD(d);d.next();)a=d.value,null===c&&(c=v.jb()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);v.ra(c)}}}
S.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.g;null!==c&&(b=c.Md);c=this;if(b)for(;c!==a;){for(var b=null,d=c.dc.i;d.next();){var e=d.value;if(e.Cc&&(b=e.U,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.dc.i;d.next()&&(e=d.value,!e.Cc||(b=e.ba,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
S.prototype.findTreeRoot=function(){var a=!0,b=this.g;null!==b&&(a=b.Md);b=this;if(a)for(;;){for(var a=null,c=b.dc.i;c.next();){var d=c.value;if(d.Cc&&(a=d.U,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.dc.i;c.next()&&(d=c.value,!d.Cc||(a=d.ba,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
S.prototype.findCommonTreeParent=function(a){if(null===a)return null;if(this===a)return this;for(var b=this;null!==b;)co(b,!0),b=b.Pm();for(var c=null,b=a;null!==b;){if(0!==(b.Q&1048576)){c=b;break}b=b.Pm()}for(b=this;null!==b;)co(b,!1),b=b.Pm();return c};S.prototype.findTreeParentLink=S.prototype.$s=function(){var a=!0,b=this.g;null!==b&&(a=b.Md);b=this.dc.i;if(a)for(;b.next();){if(a=b.value,a.Cc&&a.U!==this)return a}else for(;b.next();)if(a=b.value,a.Cc&&a.ba!==this)return a;return null};
S.prototype.findTreeParentNode=S.prototype.Pm=function(){var a=this.Nj;if(null===a)return null;if(a instanceof S)return a;var b=!0,a=this.g;null!==a&&(b=a.Md);a=this.dc.i;if(b)for(;a.next();){if(b=a.value,b.Cc&&(b=b.U,b!==this))return this.Nj=b}else for(;a.next();)if(b=a.value,b.Cc&&(b=b.ba,b!==this))return this.Nj=b;return this.Nj=null};S.prototype.findTreeLevel=function(){return uo(this,this)};function uo(a,b){var c=b.Pm();return null===c?0:1+uo(a,c)}
S.prototype.findTreeChildrenLinks=S.prototype.Hw=function(){var a=!0,b=this.g;null!==b&&(a=b.Md);if(a){var a=new La(this.dc),c=this;a.$m=function(a){return a.Cc&&a.U===c?!0:!1}}else a=new La(this.dc),c=this,a.$m=function(a){return a.Cc&&a.ba===c?!0:!1};return a};
S.prototype.findTreeChildrenNodes=S.prototype.aE=function(){var a=!0,b=this.g;null!==b&&(a=b.Md);var c=b=null,d=this.dc.i;if(a)for(;d.next();)a=d.value,a.Cc&&a.U===this&&(a=a.ba,null!==b?b.add(a):null!==c&&c!==a?(b=new G(S),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Cc&&a.ba===this&&(a=a.U,null!==b?b.add(a):null!==c&&c!==a?(b=new G(S),b.add(c),b.add(a)):c=a);return null!==b?b.i:null!==c?new Ja(c):Ia};
S.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);v.j(a,"number",S,"collapseTree:level");var b=new H(J);lf(b,this,!1,a,!0);return b};S.prototype.collapseTree=S.prototype.collapseTree=function(a){void 0===a&&(a=1);v.Te(a,S,"collapseTree:level");1>a&&(a=1);var b=this.g;if(null!==b&&!b.Xg){b.Xg=!0;var c=new H(S);c.add(this);vo(this,c,b.Md,a,b.Oa,this,b.MA===Wi);b.Xg=!1}};
function vo(a,b,c,d,e,f,h){if(1<d)for(var k=c?a.Fw():a.qg();k.next();){var l=k.value;l.Cc&&(l=l.Jz(a),null===l||l===a||b.contains(l)||(b.add(l),vo(l,b,c,d-1,e,f,h)))}else wo(a,b,c,e,f,h)}function wo(a,b,c,d,e,f){for(var h=e===a?!0:a.od,k=c?a.Fw():a.qg();k.next();){var l=k.value;l.Cc&&(l=l.Jz(a),null===l||l===a||b.contains(l)||(b.add(l),h&&(f&&vi(d,l,e),l.ol(),l.oe(!1)),l.od&&(l.cu=l.od,wo(l,b,c,d,e,f))))}a.od=!1}
S.prototype.expandTree=S.prototype.expandTree=function(a){void 0===a&&(a=2);v.Te(a,S,"expandTree:level");2>a&&(a=2);var b=this.g;if(null!==b&&!b.Xg){b.Xg=!0;var c=new H(S);c.add(this);xo(this,c,b.Md,a,b.Oa,this,b.MA===Wi);b.Xg=!1}};function xo(a,b,c,d,e,f,h){for(var k=f===a?!1:a.od,l=c?a.Fw():a.qg();l.next();){var m=l.value;m.Cc&&(k||m.Df||m.gc(),m=m.Jz(a),null!==m&&m!==a&&!b.contains(m)&&(b.add(m),k||(m.oe(!0),m.ol(),h&&ui(e,m,f)),2<d||m.cu))&&(m.cu=!1,xo(m,b,c,d-1,e,f,h))}a.od=!0}
v.defineProperty(S,{od:"isTreeExpanded"},function(){return this.Tq},function(a){var b=this.Tq;if(b!==a){this.Tq=a;var c=this.g;this.h("isTreeExpanded",b,a);b=this.kJ;if(null!==b){var d=!0;null!==c&&(d=c.Qa,c.Qa=!0);b(this);null!==c&&(c.Qa=d)}null!==c&&c.ja.ib||(a?this.expandTree():this.collapseTree())}});v.defineProperty(S,{cu:"wasTreeExpanded"},function(){return this.Bs},function(a){var b=this.Bs;b!==a&&(this.Bs=a,this.h("wasTreeExpanded",b,a))});
v.defineProperty(S,{kJ:"treeExpandedChanged"},function(){return this.ws},function(a){var b=this.ws;b!==a&&(null!==a&&v.j(a,"function",S,"treeExpandedChanged"),this.ws=a,this.h("treeExpandedChanged",b,a))});v.defineProperty(S,{Ui:"isTreeLeaf"},function(){return this.Uq},function(a){var b=this.Uq;b!==a&&(this.Uq=a,this.h("isTreeLeaf",b,a))});
function W(){J.call(this,dh);this.Yf=null;this.Ah="";this.jg=this.Cq=null;this.Qh="";this.vs=null;this.Pr=this.Nr=this.Mr=!1;this.Vq=!0;this.Sp=gh;this.iq=0;this.lq=gh;this.mq=NaN;this.nm=gm;this.ls=.5;this.we=null;this.Wc=(new G(w)).freeze();this.oo=this.ye=null;this.Df=!1;this.Cv=null;this.Zy=!1;this.En=this.An=this.di=this.oi=this.Ta=null;this.ej=new G(z);this.cz=new w;this.WC=this.UC=null;this.Wx=!1;this.S=null}v.Ga(W,J);v.ga("Link",W);
W.prototype.cloneProtected=function(a){J.prototype.cloneProtected.call(this,a);a.Ah=this.Ah;a.Cq=this.Cq;a.Qh=this.Qh;a.vs=this.vs;a.Mr=this.Mr;a.Nr=this.Nr;a.Pr=this.Pr;a.Vq=this.Vq;a.Sp=this.Sp;a.iq=this.iq;a.lq=this.lq;a.mq=this.mq;a.nm=this.nm;a.ls=this.ls;a.S=null!==this.S?this.S.copy():null};W.prototype.Vh=function(a){J.prototype.Vh.call(this,a);this.Ah=a.Ah;this.Qh=a.Qh;a.ye=null;a.gc();a.di=this.di};var gm;W.Normal=gm=v.p(W,"Normal",1);W.Orthogonal=v.p(W,"Orthogonal",2);
W.AvoidsNodes=v.p(W,"AvoidsNodes",6);var yo;W.AvoidsNodesStraight=yo=v.p(W,"AvoidsNodesStraight",7);var gh;W.None=gh=v.p(W,"None",0);var nh;W.Bezier=nh=v.p(W,"Bezier",9);var fh;W.JumpGap=fh=v.p(W,"JumpGap",10);var eh;W.JumpOver=eh=v.p(W,"JumpOver",11);var dm;W.End=dm=v.p(W,"End",17);var em;W.Scale=em=v.p(W,"Scale",18);var fm;W.Stretch=fm=v.p(W,"Stretch",19);var qn;W.OrientAlong=qn=v.p(W,"OrientAlong",21);var zo;W.OrientPlus90=zo=v.p(W,"OrientPlus90",22);var Ao;
W.OrientMinus90=Ao=v.p(W,"OrientMinus90",23);var Bo;W.OrientOpposite=Bo=v.p(W,"OrientOpposite",24);var Co;W.OrientUpright=Co=v.p(W,"OrientUpright",25);var Do;W.OrientPlus90Upright=Do=v.p(W,"OrientPlus90Upright",26);var Eo;W.OrientMinus90Upright=Eo=v.p(W,"OrientMinus90Upright",27);var Fo;W.OrientUpright45=Fo=v.p(W,"OrientUpright45",28);W.prototype.Je=function(){this.S=new rl};
W.prototype.sl=function(){var a=this.U;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(Kj(a)||Lj(a))return!1}a=this.ba;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Kj(a)||Lj(a))?!1:!0};W.prototype.CA=function(){return!1};W.prototype.Ld=function(){return!1};
W.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case gh:a=0;break;case qn:a=c;break;case zo:a=c+90;break;case Ao:a=c-90;break;case Bo:a=c+180;break;case Co:a=K.Et(c);90<a&&270>a&&(a-=180);break;case Do:a=K.Et(c+90);90<a&&270>a&&(a-=180);break;case Eo:a=K.Et(c-90);90<a&&270>a&&(a-=180);break;case Fo:a=K.Et(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return K.Et(a)};
v.defineProperty(W,{U:"fromNode"},function(){return this.Yf},function(a){var b=this.Yf;if(b!==a){var c=this.$c;null!==b&&(this.jg!==b&&so(b,this,c),Go(this),this.G(ak));this.Yf=a;this.oi=null;this.gc();var d=this.g;if(null!==d){var e=this.data,f=d.da;if(null!==e)if(f instanceof Q){var h=null!==a?a.data:null;f.tx(e,f.mb(h))}else f instanceof te&&(h=null!==a?a.data:null,d.Md?f.mh(e,f.mb(h)):(null!==b&&f.mh(b.data,void 0),f.mh(h,f.mb(null!==this.jg?this.jg.data:null))))}e=this.$c;f=this.dE;null!==f&&
(h=!0,null!==d&&(h=d.Qa,d.Qa=!0),f(this,c,e),null!==d&&(d.Qa=h));null!==a&&(this.jg!==a&&ro(a,this,e),Ho(this),this.G(Sj));this.h("fromNode",b,a);Hk(this)}});
v.defineProperty(W,{rg:"fromPortId"},function(){return this.Ah},function(a){var b=this.Ah;if(b!==a){var c=this.$c;null!==c&&qo(this.U,c);Go(this);this.Ah=a;var d=this.$c;null!==d&&qo(this.U,d);var e=this.g;if(null!==e){var f=this.data,h=e.da;null!==f&&h instanceof Q&&h.AA(f,a)}c!==d&&(this.oi=null,this.gc(),f=this.dE,null!==f&&(h=!0,null!==e&&(h=e.Qa,e.Qa=!0),f(this,c,d),null!==e&&(e.Qa=h)));Ho(this);this.h("fromPortId",b,a)}});v.u(W,{$c:"fromPort"},function(){var a=this.Yf;return null===a?null:a.hl(this.Ah)});
v.defineProperty(W,{dE:"fromPortChanged"},function(){return this.Cq},function(a){var b=this.Cq;b!==a&&(null!==a&&v.j(a,"function",W,"fromPortChanged"),this.Cq=a,this.h("fromPortChanged",b,a))});
v.defineProperty(W,{ba:"toNode"},function(){return this.jg},function(a){var b=this.jg;if(b!==a){var c=this.Bd;null!==b&&(this.Yf!==b&&so(b,this,c),Go(this),this.G(ak));this.jg=a;this.oi=null;this.gc();var d=this.g;if(null!==d){var e=this.data,f=d.da;if(null!==e)if(f instanceof Q){var h=null!==a?a.data:null;f.wx(e,f.mb(h))}else f instanceof te&&(h=null!==a?a.data:null,d.Md?(null!==b&&f.mh(b.data,void 0),f.mh(h,f.mb(null!==this.Yf?this.Yf.data:null))):f.mh(e,f.mb(h)))}e=this.Bd;f=this.vF;null!==f&&
(h=!0,null!==d&&(h=d.Qa,d.Qa=!0),f(this,c,e),null!==d&&(d.Qa=h));null!==a&&(this.Yf!==a&&ro(a,this,e),Ho(this),this.G(Sj));this.h("toNode",b,a);Hk(this)}});
v.defineProperty(W,{oh:"toPortId"},function(){return this.Qh},function(a){var b=this.Qh;if(b!==a){var c=this.Bd;null!==c&&qo(this.ba,c);Go(this);this.Qh=a;var d=this.Bd;null!==d&&qo(this.ba,d);var e=this.g;if(null!==e){var f=this.data,h=e.da;null!==f&&h instanceof Q&&h.EA(f,a)}c!==d&&(this.oi=null,this.gc(),f=this.vF,null!==f&&(h=!0,null!==e&&(h=e.Qa,e.Qa=!0),f(this,c,d),null!==e&&(e.Qa=h)));Ho(this);this.h("toPortId",b,a)}});v.u(W,{Bd:"toPort"},function(){var a=this.jg;return null===a?null:a.hl(this.Qh)});
v.defineProperty(W,{vF:"toPortChanged"},function(){return this.vs},function(a){var b=this.vs;b!==a&&(null!==a&&v.j(a,"function",W,"toPortChanged"),this.vs=a,this.h("toPortChanged",b,a))});v.defineProperty(W,{Ab:"fromSpot"},function(){return null!==this.S?this.S.lj:yc},function(a){null===this.S&&this.Je();var b=this.S.lj;b.L(a)||(a=a.aa(),this.S.lj=a,this.h("fromSpot",b,a),this.gc())});
v.defineProperty(W,{il:"fromEndSegmentLength"},function(){return null!==this.S?this.S.jj:NaN},function(a){null===this.S&&this.Je();var b=this.S.jj;b!==a&&(0>a&&v.ua(a,">= 0",W,"fromEndSegmentLength"),this.S.jj=a,this.h("fromEndSegmentLength",b,a),this.gc())});v.defineProperty(W,{dt:"fromEndSegmentDirection"},function(){return null!==this.S?this.S.ij:lo},function(a){null===this.S&&this.Je();var b=this.S.ij;b!==a&&(this.S.ij=a,this.h("fromEndSegmentDirection",b,a),this.gc())});
v.defineProperty(W,{et:"fromShortLength"},function(){return null!==this.S?this.S.kj:NaN},function(a){null===this.S&&this.Je();var b=this.S.kj;b!==a&&(this.S.kj=a,this.h("fromShortLength",b,a),this.gc())});v.defineProperty(W,{Bb:"toSpot"},function(){return null!==this.S?this.S.Mj:yc},function(a){null===this.S&&this.Je();var b=this.S.Mj;b.L(a)||(a=a.aa(),this.S.Mj=a,this.h("toSpot",b,a),this.gc())});
v.defineProperty(W,{Fl:"toEndSegmentLength"},function(){return null!==this.S?this.S.Kj:NaN},function(a){null===this.S&&this.Je();var b=this.S.Kj;b!==a&&(0>a&&v.ua(a,">= 0",W,"toEndSegmentLength"),this.S.Kj=a,this.h("toEndSegmentLength",b,a),this.gc())});v.defineProperty(W,{Zt:"toEndSegmentDirection"},function(){return null!==this.S?this.S.Jj:lo},function(a){null===this.S&&this.Je();var b=this.S.Jj;b!==a&&(this.S.Jj=a,this.h("toEndSegmentDirection",b,a),this.gc())});
v.defineProperty(W,{au:"toShortLength"},function(){return null!==this.S?this.S.Lj:NaN},function(a){null===this.S&&this.Je();var b=this.S.Lj;b!==a&&(this.S.Lj=a,this.h("toShortLength",b,a),this.gc())});function Hk(a){var b=a.U,c=a.ba;null!==b?null!==c?Io(a,b.iH(c)):Io(a,null):Io(a,null)}function Io(a,b){var c=a.uk;if(c!==b){null!==c&&eo(c,a);a.uk=b;null!==b&&fo(b,a);var d=a.JD;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.Qa,f.Qa=!0);d(a,c,b);null!==f&&(f.Qa=e)}!a.Df||a.UC!==c&&a.WC!==c||a.gc()}}
W.prototype.ol=function(){var a=this.Sa;null!==a&&this.U!==a&&this.ba!==a&&J.prototype.ol.call(this)};W.prototype.getOtherNode=W.prototype.Jz=function(a){var b=this.U;return a===b?this.ba:b};W.prototype.getOtherPort=function(a){var b=this.$c;return a===b?this.Bd:b};v.u(W,{rK:"isLabeledLink"},function(){return null===this.we?!1:0<this.we.count});v.u(W,{Mf:"labelNodes"},function(){return null===this.we?Ia:this.we.i});function to(a,b){null===a.we&&(a.we=new H(S));a.we.add(b);a.P()}
W.prototype.it=function(a){J.prototype.it.call(this,a);Jo(this)&&hh(this,this.Z);a||(a=this.Yf,null!==a&&ro(a,this,this.$c),a=this.jg,null!==a&&ro(a,this,this.Bd),Ho(this))};W.prototype.jt=function(a){J.prototype.jt.call(this,a);Jo(this)&&hh(this,this.Z);a||(a=this.Yf,null!==a&&so(a,this,this.$c),a=this.jg,null!==a&&so(a,this,this.Bd),Go(this))};
W.prototype.Nm=function(){this.Df=!0;if(null!==this.we){var a=this.g;if(null!==a)for(var b=this.we.copy().i;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.g,null!==a&&(a=a.da,a instanceof Q?a.lx(b):a instanceof te&&a.mh(b,void 0)))};
W.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.da;if(c instanceof Q){var d=c.kl(a),e=b.We(d),f=this.U;e!==f&&(e=null!==f?c.mb(f.data):void 0,f=c.ep,"function"===typeof f?f(a,e):a[f]=e,c.tx(a,d));d=c.nl(a);e=b.We(d);f=this.ba;e!==f&&(e=null!==f?c.mb(f.data):void 0,f=c.gp,"function"===typeof f?f(a,e):a[f]=e,c.wx(a,d));var h=c.Xj(a);if(0<h.length||0<this.Mf.count){if(1===h.length&&1===this.Mf.count&&(b=h[0],d=this.Mf.first(),c.mb(d.data)===
b))return;var d=(new H).Yc(h),k=new H;this.Mf.each(function(a){null!==a.data&&(a=c.mb(a.data),void 0!==a&&k.add(a))});b=k.copy();b.tA(d);d=d.copy();d.tA(k);if(0<b.count||0<d.count)h.length=0,k.each(function(a){h.push(a)}),b.each(function(b){c.TE(a,b)}),d.each(function(b){c.jz(a,b)})}}}}};
W.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;J.prototype.move.call(this,a);this.vl(c,b);for(a=this.Mf;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};v.defineProperty(W,{CI:"relinkableFrom"},function(){return this.Mr},function(a){var b=this.Mr;b!==a&&(this.Mr=a,this.h("relinkableFrom",b,a),this.Zd())});
v.defineProperty(W,{DI:"relinkableTo"},function(){return this.Nr},function(a){var b=this.Nr;b!==a&&(this.Nr=a,this.h("relinkableTo",b,a),this.Zd())});W.prototype.canRelinkFrom=function(){if(!this.CI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Bm)return!1;a=a.g;return null===a||a.Bm?!0:!1};W.prototype.canRelinkTo=function(){if(!this.DI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Bm)return!1;a=a.g;return null===a||a.Bm?!0:!1};
v.defineProperty(W,{Lt:"resegmentable"},function(){return this.Pr},function(a){var b=this.Pr;b!==a&&(this.Pr=a,this.h("resegmentable",b,a),this.Zd())});v.defineProperty(W,{Cc:"isTreeLink"},function(){return this.Vq},function(a){var b=this.Vq;b!==a&&(this.Vq=a,this.h("isTreeLink",b,a),null!==this.U&&Tk(this.U),null!==this.ba&&Tk(this.ba))});v.u(W,{path:"path"},function(){var a=this.If();return a instanceof X?a:null});
v.u(W,{cn:"routeBounds"},function(){this.updateRoute();var a=new z;var b=Infinity,c=Infinity,d=this.ma;if(0===d)a.m(NaN,NaN,0,0);else{if(1===d)d=this.l(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.m(d.x,d.y,0,0);else if(2===d){var e=this.l(0),f=this.l(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y);a.m(e.x,e.y,0,0);a.Zi(f)}else if(this.computeCurve()===nh&&3<=d&&!this.hc)if(e=this.l(0),b=e.x,c=e.y,a.m(b,c,0,0),3===d)d=this.l(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.l(2),b=Math.min(f.x,b),c=Math.min(f.y,
c),K.Fo(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(var h=3;h<d;h+=3){var k=this.l(h-2);h+3>=d&&(h=d-1);var l=this.l(h-1),f=this.l(h);K.Fo(e.x,e.y,k.x,k.y,l.x,l.y,f.x,f.y,.5,a);b=Math.min(f.x,b);c=Math.min(f.y,c);e=f}else for(e=this.l(0),f=this.l(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.m(e.x,e.y,0,0),a.Zi(f),h=2;h<d;h++)e=this.l(h),b=Math.min(e.x,b),c=Math.min(e.y,c),a.Zi(e);this.cz.m(b-a.x,c-a.y)}return this.Cv=a});v.u(W,{HE:"midPoint"},function(){this.updateRoute();return this.computeMidPoint(new w)});
W.prototype.computeMidPoint=function(a){var b=this.ma;if(0===b)return a.assign(K.OF),a;if(1===b)return a.assign(this.l(0)),a;if(2===b){var c=this.l(0),d=this.l(1);a.m((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===nh&&3<=b&&!this.hc){if(3===b)return this.l(1);var b=(b-1)/3|0,e=3*(b/2|0);1===b%2?(c=this.l(e),d=this.l(e+1),b=this.l(e+2),e=this.l(e+3),K.DG(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.l(e));return a}for(var e=0,f=v.jb(),h=0;h<b-1;h++)c=0,c=this.l(h),d=this.l(h+1),K.sb(c.x,
d.x)?(c=d.y-c.y,0>c&&(c=-c)):K.sb(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Tj(d)),f.push(c),e+=c;for(d=h=c=0;c<e/2&&h<b;){d=f[h];if(c+d>e/2)break;c+=d;h++}v.ra(f);b=this.l(h);f=this.l(h+1);b.x===f.x?b.y>f.y?a.m(b.x,b.y-(e/2-c)):a.m(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.m(b.x-(e/2-c),b.y):a.m(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.m(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y)));return a};v.u(W,{GE:"midAngle"},function(){this.updateRoute();return this.computeMidAngle()});
W.prototype.computeMidAngle=function(){var a=this.ma;if(2>a)return NaN;if(this.computeCurve()===nh&&4<=a&&!this.hc){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.l(c),b=this.l(c+1),d=this.l(c+2),c=this.l(c+3);return K.CG(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(0<c&&c+1<a)return a=this.l(c-1),b=this.l(c+1),a.Wg(b)}d=a/2|0;if(0===a%2)return a=this.l(d-1),b=this.l(d),a.Wg(b);var a=this.l(d-1),b=this.l(d),d=this.l(d+1),c=a.Tj(b),e=b.Tj(d);return c>e+10?a.Wg(b):e>c+10?b.Wg(d):a.Wg(d)};
v.defineProperty(W,{points:"points"},function(){return this.Wc},function(a){var b=this.Wc;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new G(w),d=0;d<a.length/2;d++)e=(new w(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var f=!0,d=0;d<a.length;d++)if(e=a[d],!v.Wa(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){f=!1;break}if(f)for(c=new G(w),d=0;d<a.length;d++)e=
a[d],c.add((new w(e.x,e.y)).freeze());else v.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof G)for(c=a.copy(),a=c.i;a.next();)a.value.freeze();else v.k("Link.points value is not an instance of List or Array: "+a);c.freeze();this.Wc=c;this.Ye();this.P();Ko(this);a=this.g;null!==a&&(a.ja.ib||a.Zw.add(this),a.Oa.sc&&(this.oo=c));this.h("points",b,c)}});v.u(W,{ma:"pointsCount"},function(){return this.Wc.count});
W.prototype.getPoint=W.prototype.l=function(a){return this.Wc.n[a]};W.prototype.setPoint=W.prototype.vf=function(a,b){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.zg(a,b)};W.prototype.setPointAt=W.prototype.Y=function(a,b,c){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.zg(a,new w(b,c))};
W.prototype.insertPoint=function(a,b){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.xd(a,b)};W.prototype.insertPointAt=W.prototype.w=function(a,b,c){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.xd(a,new w(b,c))};W.prototype.addPoint=W.prototype.Rh=function(a){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.add(a)};
W.prototype.addPointAt=W.prototype.Wk=function(a,b){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.add(new w(a,b))};W.prototype.removePoint=W.prototype.UE=function(a){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.Rc(a)};W.prototype.clearPoints=W.prototype.Jo=function(){null===this.ye&&v.k("Call Link.startRoute before modifying the points of the route.");this.Wc.clear()};
W.prototype.movePoints=W.prototype.vl=function(a,b){for(var c=new G(w),d=this.Wc.i;d.next();){var e=d.value;c.add((new w(e.x+a,e.y+b)).freeze())}c.freeze();d=this.Wc;this.Wc=c;this.P();Ko(this);e=this.g;null!==e&&e.Oa.sc&&(this.oo=c);this.h("points",d,c)};W.prototype.startRoute=W.prototype.Bl=function(){null===this.ye&&(this.ye=this.Wc,this.Wc=this.Wc.copy())};
W.prototype.commitRoute=W.prototype.Oi=function(){if(null!==this.ye){for(var a=this.ye,b=this.Wc,c=Infinity,d=Infinity,e=a.n,f=e.length,h=0;h<f;h++)var k=e[h],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.n,p=n.length,h=0;h<p;h++)k=n[h],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(p===f)for(h=0;h<p;h++){if(f=e[h],k=n[h],f.x-c!==k.x-l||f.y-d!==k.y-m){this.P();this.Ye();break}}else this.P(),this.Ye();this.ye=null;c=this.g;null!==c&&c.Oa.sc&&(this.oo=b);Ko(this);
this.h("points",a,b)}};W.prototype.rollbackRoute=W.prototype.II=function(){null!==this.ye&&(this.Wc=this.ye,this.ye=null)};function Ko(a){0===a.Wc.count?a.Df=!1:(a.Df=!0,a.An=a.l(0).copy(),a.En=a.l(a.ma-1).copy(),Lo(a,!1))}W.prototype.invalidateRoute=W.prototype.gc=function(){if(!(this.Zy||this.g&&(this.g.Zw.contains(this)||this.g.ja.ib))){var a=this.path;if(null!==a){if(this.Df){var b=this.$c;null!==b&&(b=b.lm,null!==b&&b.Tm());b=this.Bd;null!==b&&(b=b.lm,null!==b&&b.Tm())}this.Df=!1;this.P();a.P()}}};
v.defineProperty(W,{Gp:"suspendsRouting"},function(){return this.Zy},function(a){this.Zy=a});W.prototype.updateRoute=function(){if(!this.Df&&!this.Wx){var a=!0;try{this.Wx=!0,this.Bl(),a=this.computePoints()}finally{this.Wx=!1,a?this.Oi():this.II()}}};
W.prototype.computePoints=function(){var a=this.g;if(null===a)return!1;var b=this.U,c=null;null===b?(a.om||(a.Dv=new X,a.Dv.xa=K.Np,a.Dv.nb=0,a.om=new S,a.om.add(a.Dv),a.om.mf()),this.An&&(a.om.position=a.om.location=this.An,a.om.mf(),b=a.om,c=a.Dv)):c=this.$c;if(null!==c){var d=Yl(c);d!==b&&b.isVisible()?c=d:(d=b.findVisibleNode(),null!==d&&d!==b?(b=d,c=d.hl("")):b=d)}this.UC=b;if(null===b||null===c||!b.location.H())return!1;var d=this.ba,e=null;null===d?(a.pm||(a.Ev=new X,a.Ev.xa=K.Np,a.Ev.nb=0,
a.pm=new S,a.pm.add(a.Ev),a.pm.mf()),this.En&&(a.pm.position=a.pm.location=this.En,a.pm.mf(),d=a.pm,e=a.Ev)):e=this.Bd;null!==e&&(a=Yl(e),a!==d&&d.isVisible()?e=a:(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.hl("")):d=a));this.WC=d;if(null===d||null===e||!d.location.H())return!1;var a=this.ma,f=Mo(this,c),h=No(this,e),k=c===e&&null!==c,l=this.hc,m=this.Ge===nh;this.oi=k&&!l?m=!0:!1;var n=this.Is===gh||k;if(l||f!==xb||h!==xb||k){m=this.pl;n&&(l&&m||k)&&this.Jo();var p=k?this.computeCurviness():
0,q=this.getLinkPoint(b,c,f,!0,l,d,e),r=0,s=0,t=0;if(l||f!==xb||k){var u=this.computeEndSegmentLength(b,c,f,!0),t=this.getLinkDirection(b,c,q,f,!0,l,d,e);k&&(t-=l?90:30,0>p&&(t-=180));0>t?t+=360:360<=t&&(t-=360);k&&(u+=Math.abs(p));0===t?r=u:90===t?s=u:180===t?r=-u:270===t?s=-u:(r=u*Math.cos(t*Math.PI/180),s=u*Math.sin(t*Math.PI/180));if(f.me()&&k){var x=c.fb(Kb,v.M()),y=v.Rb(x.x+1E3*r,x.y+1E3*s);this.getLinkPointFromPoint(b,c,x,y,!0,q);v.v(x);v.v(y)}}var u=this.getLinkPoint(d,e,h,!1,l,b,c),A=0,B=
0,I=0;if(l||h!==xb||k)x=this.computeEndSegmentLength(d,e,h,!1),I=this.getLinkDirection(d,e,u,h,!1,l,b,c),k&&(I+=l?0:30,0>p&&(I+=180)),0>I?I+=360:360<=I&&(I-=360),k&&(x+=Math.abs(p)),0===I?A=x:90===I?B=x:180===I?A=-x:270===I?B=-x:(A=x*Math.cos(I*Math.PI/180),B=x*Math.sin(I*Math.PI/180)),h.me()&&k&&(x=e.fb(Kb,v.M()),y=v.Rb(x.x+1E3*A,x.y+1E3*B),this.getLinkPointFromPoint(d,e,x,y,!1,u),v.v(x),v.v(y));e=q;if(l||f!==xb||k)e=new w(q.x+r,q.y+s);c=u;if(l||h!==xb||k)c=new w(u.x+A,u.y+B);!n&&!l&&f===xb&&3<a&&
this.adjustPoints(0,q,a-2,c)?this.vf(a-1,u):!n&&!l&&h===xb&&3<a&&this.adjustPoints(1,e,a-1,u)?this.vf(0,q):!n&&!l&&4<a&&this.adjustPoints(1,e,a-2,c)?(this.vf(0,q),this.vf(a-1,u)):!n&&l&&6<=a&&!m&&this.adjustPoints(1,e,a-2,c)?(this.vf(0,q),this.vf(a-1,u)):(this.Jo(),this.Rh(q),(l||f!==xb||k)&&this.Rh(e),l&&this.addOrthoPoints(e,t,c,I,b,d),(l||h!==xb||k)&&this.Rh(c),this.Rh(u))}else f=!1,!n&&3<=a&&(n=this.getLinkPoint(b,c,xb,!0,!1,d,e),h=this.getLinkPoint(d,e,xb,!1,!1,b,c),f=this.adjustPoints(0,n,a-
1,h))&&(n=this.getLinkPoint(b,c,xb,!0,!1,d,e),h=this.getLinkPoint(d,e,xb,!1,!1,b,c),this.adjustPoints(0,n,a-1,h)),f||(this.Jo(),m?(a=this.getLinkPoint(b,c,xb,!0,!1,d,e),n=this.getLinkPoint(d,e,xb,!1,!1,b,c),f=n.x-a.x,h=n.y-a.y,k=this.computeCurviness(),m=l=0,q=a.x+f/3,t=a.y+h/3,r=q,s=t,K.D(h,0)?s=0<f?s-k:s+k:(l=-f/h,m=Math.sqrt(k*k/(l*l+1)),0>k&&(m=-m),r=(0>h?-1:1)*m+q,s=l*(r-q)+t),q=a.x+2*f/3,t=a.y+2*h/3,u=q,A=t,K.D(h,0)?A=0<f?A-k:A+k:(u=(0>h?-1:1)*m+q,A=l*(u-q)+t),this.Jo(),this.Rh(a),this.Wk(r,
s),this.Wk(u,A),this.Rh(n),this.vf(0,this.getLinkPoint(b,c,xb,!0,!1,d,e)),this.vf(3,this.getLinkPoint(d,e,xb,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,xb,!0,!1,a,e),e=this.getLinkPoint(a,e,xb,!1,!1,b,c),this.hasCurviness()?(h=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+h/2,n=d.y+b/2,f=a,k=n,K.D(b,0)?k=0<h?k-c:k+c:(h=-h/b,f=Math.sqrt(c*c/(h*h+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,k=h*(f-a)+n),this.Rh(d),this.Wk(f,k)):this.Rh(d),this.Rh(e)));return!0};
function Oo(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
W.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){void 0===f&&(f=new w);if(null===a||null===b)return f.assign(c),f;a.isVisible()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var h=e=0,k=0,l=0;a=null;e=b.T;null===e||e.Vf()||(e=e.T);if(null===e)e=d.x,h=d.y,k=c.x,l=c.y;else{a=e.Ef;e=1/(a.m11*a.m22-a.m12*a.m21);var k=a.m22*e,l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),q=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;h=d.x*l+d.y*n+q;k=c.x*k+c.y*m+p;l=c.x*l+c.y*n+q}b.Xo(e,h,k,l,
f);null!==a&&f.transform(a);return f};function Po(a,b){var c=b.lm;null===c&&(c=new Qo,c.port=b,c.Dc=b.V,b.lm=c);return Ro(c,a)}
W.prototype.getLinkPoint=function(a,b,c,d,e,f,h,k){void 0===k&&(k=new w);if(c.yd())return b.fb(c,k),k;if(c.ap()&&(c=Po(this,b),null!==c)){k.assign(c.fp);if(e&&this.ox===yo){var l=Po(this,h);if(null!==l&&c.Km<l.Km){c=v.M();var l=v.M(),m=new z(b.fb(zb,c),b.fb(Vb,l)),n=this.computeSpot(!d);a=this.getLinkPoint(f,h,n,!d,e,a,b,l);a.x>=m.x&&a.x<=m.x+m.width?k.x=a.x:a.y>=m.y&&a.y<=m.y+m.height&&(k.y=a.y);v.v(c);v.v(l)}}return k}f=b.fb(Kb,v.M());l=c=null;this.ma>(e?6:2)?(l=d?this.l(1):this.l(this.ma-2),e&&
(l=Oo(f,l.copy()))):(c=v.M(),l=h.fb(Kb,c),e&&(l=Oo(f,l)));this.getLinkPointFromPoint(a,b,f,l,d,k);v.v(f);null!==c&&v.v(c);return k};
W.prototype.getLinkDirection=function(a,b,c,d,e,f,h,k){a:if(d.yd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.ap()){var l=Po(this,b);if(null!==l)switch(l.ee){case v.fd:c=270;break a;case v.Gc:c=180;break a;default:case v.Tc:c=0;break a;case v.Sc:c=90;break a}}var l=b.fb(Kb,v.M()),m=null,n=null;this.ma>(f?6:2)?(n=e?this.l(1):this.l(this.ma-2),n=f?Oo(l,n.copy()):c):(m=v.M(),n=k.fb(Kb,m));c=0;c=Math.abs(n.x-l.x)>Math.abs(n.y-l.y)?n.x>=
l.x?0:180:n.y>=l.y?90:270;v.v(l);null!==m&&v.v(m)}d.me()&&h.Yh(a)&&(c+=180,360<=c&&(c-=360));a=lo;a=e?this.dt:this.Zt;a===lo&&(a=e?b.dt:b.Zt);switch(a){case mo:b=b.jl();c+=b;360<=c&&(c-=360);break;case lo:case sl:b=b.jl();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};
W.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.ap()&&(a=Po(this,b),null!==a))return a.Aw;a=NaN;a=d?this.il:this.Fl;null!==b&&isNaN(a)&&(a=d?b.il:b.Fl);isNaN(a)&&(a=10);return a};W.prototype.computeSpot=function(a){return a?Mo(this,this.$c):No(this,this.Bd)};function Mo(a,b){if(null===b)return Kb;var c=a.Ab;c.Oc()&&(void 0===b&&(b=a.$c),null!==b&&(c=b.Ab));return c===yc?xb:c}
function No(a,b){if(null===b)return Kb;var c=a.Bb;c.Oc()&&(void 0===b&&(b=a.Bd),null!==b&&(c=b.Bb));return c===yc?xb:c}W.prototype.computeOtherPoint=function(a,b){var c=b.fb(Kb),d;d=b.lm;d=null!==d?Ro(d,this):null;null!==d&&(c=d.fp);return c};W.prototype.computeShortLength=function(a){return a?So(this):To(this)};function So(a){var b=a.et;isNaN(b)&&(a=a.$c,null!==a&&(b=a.et));return isNaN(b)?0:b}function To(a){var b=a.au;isNaN(b)&&(a=a.Bd,null!==a&&(b=a.au));return isNaN(b)?0:b}
W.prototype.Vj=function(a,b,c,d,e,f){if(!1===this.yg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=f;void 0===f&&(h=v.nh(),h.reset());h.multiply(this.transform);if(this.Hm(a,h))return dn(this,b,c,e),void 0===f&&v.Xe(h),!0;if(this.tg(a,h)){var k=!1;if(!this.Ig)for(var l=this.wa.n,m=l.length;m--;){var n=l[m];if(n.visible||n===this.ac){var p=n.Z,q=this.Fa;if(!(p.x>q.width||p.y>q.height||0>p.x+p.width||0>p.y+p.height)){p=v.nh();p.set(h);if(n instanceof C)k=n.Vj(a,b,c,d,e,p);else if(this.path===
n){var k=n,r=a,s=d,q=p;if(!1===k.yg)k=!1;else if(q.multiply(k.transform),s)b:{var t=r,u=q;if(k.Hm(t,u))k=!0;else{if(void 0===u&&(u=k.transform,t.Sj(k.Z))){k=!0;break b}var q=t.left,r=t.right,s=t.top,t=t.bottom,x=v.M(),y=v.M(),A=v.M(),B=v.nh();B.set(u);B.JE(k.transform);B.Pz();y.x=r;y.y=s;y.transform(B);x.x=q;x.y=s;x.transform(B);u=!1;on(k,x,y,A)?u=!0:(x.x=r,x.y=t,x.transform(B),on(k,x,y,A)?u=!0:(y.x=q,y.y=t,y.transform(B),on(k,x,y,A)?u=!0:(x.x=q,x.y=s,x.transform(B),on(k,x,y,A)&&(u=!0))));v.Xe(B);
v.v(x);v.v(y);v.v(A);k=u}}else k=k.Hm(r,q)}else k=xl(n,a,d,p);k&&(null!==b&&(n=b(n)),n&&(null===c||c(n))&&e.add(n));v.Xe(p)}}}void 0===f&&v.Xe(h);return k||null!==this.background||null!==this.Cm}void 0===f&&v.Xe(h);return!1};v.u(W,{hc:"isOrthogonal"},function(){return 2===(this.nm.value&2)});v.u(W,{pl:"isAvoiding"},function(){return 4===(this.nm.value&4)});W.prototype.computeCurve=function(){if(null===this.oi){var a=this.$c,b=this.hc;this.oi=null!==a&&a===this.Bd&&!b}return this.oi?nh:this.Ge};
W.prototype.computeCorner=function(){if(this.Ge===nh)return 0;var a=this.yz;if(isNaN(a)||0>a)a=10;return a};W.prototype.findMidLabel=function(){for(var a=this.path,b=this.wa.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e!==a&&!e.Lf&&(-Infinity===e.pe||isNaN(e.pe)))return e}for(a=this.Mf;a.next();)if(b=a.value,-Infinity===b.pe||isNaN(b.pe))return b;return null};
W.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var a;a=Math.max(14,this.computeThickness());var b=this.$c,c=this.Bd;if(null!==b&&null!==c){var d=this.findMidLabel();if(null!==d){var e=d.Fa,f=d.margin,h=isNaN(e.width)?30:e.width*d.scale+f.left+f.right,e=isNaN(e.height)?14:e.height*d.scale+f.top+f.bottom,d=d.Pt;d===qn||d===Co||d===Bo?a=Math.max(a,e):d===Ao||d===Eo||d===zo||d===Do?a=Math.max(a,h):(b=b.fb(Kb).Wg(c.fb(Kb))/180*Math.PI,a=Math.max(a,Math.abs(Math.sin(b)*h)+Math.abs(Math.cos(b)*
e)+1));this.Ge===nh&&(a*=1.333)}}return a};W.prototype.arrangeBundledLinks=function(a,b){if(b)for(var c=0;c<a.length;c++)a[c].gc()};W.prototype.computeCurviness=function(){var a=this.ww;if(isNaN(a)){var a=16,b=this.di;if(null!==b){for(var c=v.jb(),d=0,e=b.links,f=0;f<e.length;f++){var h=e[f],h=h.computeSpacing();c.push(h);d+=h}d=-d/2;for(f=0;f<e.length;f++){h=e[f];if(h===this){a=d+c[f]/2;break}d+=c[f]}b.op===this.U&&(a=-a);v.ra(c)}}return a};
W.prototype.computeThickness=function(){if(!this.isVisible())return 0;var a=this.path;return null!==a?Math.max(a.nb,1):1};W.prototype.hasCurviness=function(){return!isNaN(this.ww)||null!==this.di};
W.prototype.adjustPoints=function(a,b,c,d){var e=this.Is;if(this.hc){if(e===em)return!1;e===fm&&(e=dm)}switch(e){case em:var f=this.l(a),h=this.l(c);if(!f.L(b)||!h.L(d)){var e=f.x,f=f.y,k=h.x-e,l=h.y-f,m=Math.sqrt(k*k+l*l);if(!K.D(m,0)){var n=0;K.D(k,0)?n=0>l?-Math.PI/2:Math.PI/2:(n=Math.atan(l/Math.abs(k)),0>k&&(n=Math.PI-n));var h=b.x,p=b.y,l=d.x-h,q=d.y-p,r=Math.sqrt(l*l+q*q),k=0;K.D(l,0)?k=0>q?-Math.PI/2:Math.PI/2:(k=Math.atan(q/Math.abs(l)),0>l&&(k=Math.PI-k));m=r/m;n=k-n;this.vf(a,b);for(a+=
1;a<c;a++)b=this.l(a),k=b.x-e,l=b.y-f,b=Math.sqrt(k*k+l*l),K.D(b,0)||(q=0,K.D(k,0)?q=0>l?-Math.PI/2:Math.PI/2:(q=Math.atan(l/Math.abs(k)),0>k&&(q=Math.PI-q)),k=q+n,b*=m,this.Y(a,h+b*Math.cos(k),p+b*Math.sin(k)));this.vf(c,d)}}return!0;case fm:f=this.l(a);p=this.l(c);if(!f.L(b)||!p.L(d)){var e=f.x,f=f.y,h=p.x,p=p.y,m=(h-e)*(h-e)+(p-f)*(p-f),k=b.x,n=b.y,l=d.x,q=d.y,r=0,s=1,r=0!==l-k?(q-n)/(l-k):9E9;0!==r&&(s=Math.sqrt(1+1/(r*r)));this.vf(a,b);for(a+=1;a<c;a++){b=this.l(a);var t=b.x,u=b.y,x=.5;0!==m&&
(x=((e-t)*(e-h)+(f-u)*(f-p))/m);var y=e+x*(h-e),A=f+x*(p-f);b=Math.sqrt((t-y)*(t-y)+(u-A)*(u-A));u<r*(t-y)+A&&(b=-b);0<r&&(b=-b);t=k+x*(l-k);x=n+x*(q-n);0!==r?(b=t+b/s,this.Y(a,b,x-(b-t)/r)):this.Y(a,t,x+b)}this.vf(c,d)}return!0;case dm:return this.hc&&(e=this.l(a),f=this.l(a+1),h=this.l(a+2),K.D(e.y,f.y)?K.D(f.x,h.x)?this.Y(a+1,f.x,b.y):K.D(f.y,h.y)&&this.Y(a+1,b.x,f.y):K.D(e.x,f.x)&&(K.D(f.y,h.y)?this.Y(a+1,b.x,f.y):K.D(f.x,h.x)&&this.Y(a+1,f.x,b.y)),e=this.l(c),f=this.l(c-1),h=this.l(c-2),K.D(e.y,
f.y)?K.D(f.x,h.x)?this.Y(c-1,f.x,d.y):K.D(f.y,h.y)&&this.Y(c-1,d.x,f.y):K.D(e.x,f.x)&&(K.D(f.y,h.y)?this.Y(c-1,d.x,f.y):K.D(f.x,h.x)&&this.Y(c-1,f.x,d.y))),this.vf(a,b),this.vf(c,d),!0;default:return!1}};
W.prototype.addOrthoPoints=function(a,b,c,d,e,f){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var h=e.Z.copy(),k=f.Z.copy();if(h.H()&&k.H()){h.Kf(8,8);k.Kf(8,8);h.Zi(a);k.Zi(c);var l,m;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&k.right>a.x||90===d&&c.y>a.y&&k.right>a.x)l=new w(c.x,a.y),m=new w(c.x,(a.y+c.y)/2),180===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x<k.left?this.computeMidOrthoPosition(a.x,
k.left,!1):a.x<k.right&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.right,m.x=l.x,m.y=c.y):0===d&&a.x<k.left&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new w(a.x,c.y);m=new w((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)180===d&&(k.Ca(a)||h.Ca(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,
k.bottom),!0):c.y>a.y&&(180===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x>=h.left&&c.x<=a.x||a.x<=k.right&&a.x>=c.x){if(90===d||270===d)l=new w(Math.max((a.x+c.x)/2,a.x),a.y),m=new w(l.x,c.y)}else l.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,0===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&k.left<a.x||
90===d&&c.y>a.y&&k.left<a.x)l=new w(c.x,a.y),m=new w(c.x,(a.y+c.y)/2),0===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x>k.right?this.computeMidOrthoPosition(a.x,k.right,!1):a.x>k.left&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.left,m.x=l.x,m.y=c.y):180===d&&a.x>k.right&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new w(a.x,c.y);m=new w((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)0===d&&(k.Ca(a)||h.Ca(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,k.bottom),!0):c.y>a.y&&(0===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x<=h.right&&c.x>=a.x||a.x>=k.left&&a.x<=c.x){if(90===d||270===d)l=new w(Math.min((a.x+c.x)/2,a.x),a.y),m=new w(l.x,c.y)}else l.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,180===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&k.bottom>a.y||0===d&&c.x>a.x&&k.bottom>a.y)l=new w(a.x,c.y),m=new w((a.x+c.x)/2,c.y),270===d?(l.y=this.computeMidOrthoPosition(a.y,c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(l.y=a.y<k.top?this.computeMidOrthoPosition(a.y,k.top,!0):a.y<k.bottom&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):k.bottom,m.x=c.x,m.y=l.y):90===d&&a.y<k.top&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new w(c.x,a.y);m=new w(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<h.left||180===d&&c.x>h.right)270===d&&(k.Ca(a)||h.Ca(c))?l.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(270===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,
Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y>=h.top&&c.y<=a.y||a.y<=k.bottom&&a.y>=c.y){if(0===d||180===d)l=new w(a.x,Math.max((a.y+c.y)/2,a.y)),m=new w(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,90===d?h.right:Math.max(h.right,k.right)),m.x=l.x,m.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&k.top<a.y||0===d&&c.x>a.x&&k.top<a.y)l=new w(a.x,c.y),m=new w((a.x+c.x)/2,c.y),90===d?(l.y=this.computeMidOrthoPosition(a.y,
c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(l.y=a.y>k.bottom?this.computeMidOrthoPosition(a.y,k.bottom,!0):a.y>k.top&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?this.computeMidOrthoPosition(a.y,c.y,!0):k.top,m.x=c.x,m.y=l.y):270===d&&a.y>k.bottom&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new w(c.x,a.y);m=new w(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<h.left||180===d&&c.x>h.right)90===d&&(k.Ca(a)||h.Ca(c))?l.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(90===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y<=h.bottom&&c.y>=a.y||a.y>=k.top&&a.y<=c.y){if(0===d||180===d)l=new w(a.x,Math.min((a.y+c.y)/2,a.y)),m=new w(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,270===d?h.right:Math.max(h.right,
k.right)),m.x=l.x,m.y=c.y}var n=l,p=m;if(this.pl){var q=this.g,r;(r=null===q)||(q.Oa.pf?r=!1:(r=q.$a,r=r instanceof wf?!r.Uv||r.LH:!0),r=!r);if(r||h.Ca(c)&&!f.Yh(e)||k.Ca(a)&&!e.Yh(f)||e===f||this.layer.Bc)a=!1;else if(e=Vk(q,!0,this.Sa,null),e.dp(Math.min(a.x,n.x),Math.min(a.y,n.y),Math.abs(a.x-n.x),Math.abs(a.y-n.y))&&e.dp(Math.min(n.x,p.x),Math.min(n.y,p.y),Math.abs(n.x-p.x),Math.abs(n.y-p.y))&&e.dp(Math.min(p.x,c.x),Math.min(p.y,c.y),Math.abs(p.x-c.x),Math.abs(p.y-c.y)))a=!1;else if(h=h.copy().bi(k),
h.Kf(2*e.Io,2*e.Go),Uo(e,a,b,c,d,h),k=Vo(e,c.x,c.y),e.abort||999999!==k||(Yk(e),k=e.pF,h.Kf(e.Io*k,e.Go*k),Uo(e,a,b,c,d,h),k=Vo(e,c.x,c.y)),e.abort||999999!==k||(Yk(e),k=e.AE,h.Kf(e.Io*k,e.Go*k),Uo(e,a,b,c,d,h),k=Vo(e,c.x,c.y)),!e.abort&&999999===k&&e.HF&&(Yk(e),Uo(e,a,b,c,d,e.pb),k=Vo(e,c.x,c.y)),!e.abort&&999999>k&&0!==Vo(e,c.x,c.y)){Wo(this,e,c.x,c.y,d,!0);d=this.l(2);if(4>this.ma)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.Y(2,d.x,d.y),this.w(3,d.x,d.y);else if(c=this.l(3),0===b||
180===b)K.D(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.Y(2,b,a.y),this.Y(3,b,c.y)):K.D(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Go/2&&(this.Y(2,d.x,a.y),this.Y(3,c.x,a.y)),this.w(2,d.x,a.y)):this.Y(2,a.x,d.y);else if(90===b||270===b)K.D(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.Y(2,a.x,b),this.Y(3,c.x,b)):K.D(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Io/2&&(this.Y(2,a.x,d.y),this.Y(3,a.x,c.y)),this.w(2,a.x,d.y)):this.Y(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.Rh(l),this.Rh(m))}};
W.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function fg(a){if(!a.pl)return!1;var b=a.points.n,c=b.length;if(4>c)return!1;a=Vk(a.g,!0,a.Sa,null);for(var d=1;d<c-2;d++){var e=b[d],f=b[d+1];if(!a.dp(Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0}return!1}
function Wo(a,b,c,d,e,f){var h=b.Io,k=b.Go,l=Vo(b,c,d),m=c,n=d;for(0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k;1<l&&Vo(b,m,n)===l-1;)c=m,d=n,0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k,l-=1;if(f){if(1<l)if(180===e||0===e)c=Math.floor(c/h)*h+h/2;else if(90===e||270===e)d=Math.floor(d/k)*k+k/2}else c=Math.floor(c/h)*h+h/2,d=Math.floor(d/k)*k+k/2;1<l&&(f=e,m=c,n=d,0===e?(f=90,n+=k):90===e?(f=180,m-=h):180===e?(f=270,n-=k):270===e&&(f=0,m+=h),Vo(b,m,n)===l-1?Wo(a,b,m,n,f,!1):(m=c,n=d,0===e?(f=270,n-=k):90===
e?(f=0,m+=h):180===e?(f=90,n+=k):270===e&&(f=180,m-=h),Vo(b,m,n)===l-1&&Wo(a,b,m,n,f,!1)));a.Wk(c,d)}W.prototype.findClosestSegment=function(a){var b=a.x;a=a.y;for(var c=this.l(0),d=this.l(1),e=Ya(b,a,c.x,c.y,d.x,d.y),f=0,h=1;h<this.ma-1;h++){var c=this.l(h+1),k=Ya(b,a,d.x,d.y,c.x,c.y),d=c;k<e&&(f=h,e=k)}return f};W.prototype.invalidateGeometry=W.prototype.Ye=function(){this.Ta=null};v.u(W,{Uo:"geometry"},function(){null===this.Ta&&(this.updateRoute(),this.Ta=this.makeGeometry());return this.Ta});
W.prototype.wt=function(a){if(a||null===this.Ta&&!1!==this.Df)if(this.Ta=this.makeGeometry(),a=this.path,null!==a){a.Ta=this.Ta;for(var b=this.wa.n,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.Lf&&e instanceof X&&(e.Ta=this.Ta)}}};
W.prototype.makeGeometry=function(){var a=this.ma;if(2>a){var b=new Xc(cd),c=new dd(0,0);b.Ub.add(c);return b}var d=!1,b=this.g;null!==b&&Jo(this)&&b.Ql.contains(this)&&null!==this.Cv&&(d=!0);var c=b=0,e=this.l(0).copy(),f=e.copy(),b=this.Wc.n,h=this.computeCurve();if(h===nh&&3<=a&&!K.sb(this.Ep,0))if(3===a)var k=this.l(1),b=Math.min(e.x,k.x),c=Math.min(e.y,k.y),k=this.l(2),b=Math.min(b,k.x),c=Math.min(c,k.y);else{if(this.hc)for(k=0;k<a;k++)c=b[k],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);else for(k=
3;k<a;k+=3)k+3>=a&&(k=a-1),b=this.l(k),f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x;c=f.y}else{for(k=0;k<a;k++)c=b[k],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);b=f.x;c=f.y}b-=this.cz.x;c-=this.cz.y;e.x-=b;e.y-=c;if(2===a){var l=this.l(1).copy();l.x-=b;l.y-=c;0!==So(this)&&Xo(this,e,!0,f);0!==To(this)&&Xo(this,l,!1,f);b=new Xc(fd);b.Ia=e.x;b.Ja=e.y;b.J=l.x;b.K=l.y}else{l=v.q();0!==So(this)&&Xo(this,e,!0,f);M(l,e.x,e.y,!1,!1);if(h===nh&&3<=a&&!K.sb(this.Ep,0))if(3===a)k=this.l(1),a=k.x-b,d=k.y-
c,k=this.l(2).copy(),k.x-=b,k.y-=c,0!==To(this)&&Xo(this,k,!1,f),O(l,a,d,a,d,k.x,k.y);else if(this.hc){for(var f=new w(b,c),e=this.l(1).copy(),h=new w(b,c),a=new w(b,c),d=this.l(0),m=null,n=this.Ep/3,k=1;k<this.ma-1;k++){var m=this.l(k),p=d,q=m,r=this.l(Yo(this,m,k,!1));if(!K.sb(p.x,q.x)||!K.sb(q.x,r.x))if(!K.sb(p.y,q.y)||!K.sb(q.y,r.y)){var s=n,t=h,u=a;isNaN(s)&&(s=this.Ep/3);var x=p.x,p=p.y,y=q.x,q=q.y,A=r.x,r=r.y,B=s*Zo(x,p,y,q),s=s*Zo(y,q,A,r);K.sb(p,q)&&K.sb(y,A)&&(y>x?r>q?(t.x=y-B,t.y=q-B,u.x=
y+s,u.y=q+s):(t.x=y-B,t.y=q+B,u.x=y+s,u.y=q-s):r>q?(t.x=y+B,t.y=q-B,u.x=y-s,u.y=q+s):(t.x=y+B,t.y=q+B,u.x=y-s,u.y=q-s));K.sb(x,y)&&K.sb(q,r)&&(q>p?(A>y?(t.x=y-B,t.y=q-B,u.x=y+s):(t.x=y+B,t.y=q-B,u.x=y-s),u.y=q+s):(A>y?(t.x=y-B,t.y=q+B,u.x=y+s):(t.x=y+B,t.y=q+B,u.x=y-s),u.y=q-s));if(K.sb(x,y)&&K.sb(y,A)||K.sb(p,q)&&K.sb(q,r))x=.5*(x+A),p=.5*(p+r),t.x=x,t.y=p,u.x=x,u.y=p;1===k?(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y)):2===k&&K.sb(d.x,this.l(0).x)&&K.sb(d.y,this.l(0).y)&&(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y));
O(l,e.x-b,e.y-c,h.x-b,h.y-c,m.x-b,m.y-c);f.set(h);e.set(a);d=m}}k=d.x;d=d.y;f=this.l(this.ma-1);k=.5*(k+f.x);d=.5*(d+f.y);O(l,a.x-b,a.y-c,k-b,d-c,f.x-b,f.y-c)}else for(k=3;k<a;k+=3)d=this.l(k-2),k+3>=a&&(k=a-1),f=this.l(k-1),e=this.l(k),k===a-1&&0!==To(this)&&(e=e.copy(),Xo(this,e,!1,K.fk)),O(l,d.x-b,d.y-c,f.x-b,f.y-c,e.x-b,e.y-c);else{f=v.M();f.assign(this.l(0));for(k=1;k<a;){k=Yo(this,f,k,1<k);t=this.l(k);if(k>=a-1){f!==t&&(0!==To(this)&&(t=t.copy(),Xo(this,t,!1,K.fk)),$o(this,l,-b,-c,f,t,d));break}k=
Yo(this,t,k+1,k<a-3);e=l;h=-b;m=-c;n=f;u=this.l(k);x=f;p=d;K.D(n.y,t.y)&&K.D(t.x,u.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(t.x-n.x)/2),s=y=Math.min(s,Math.abs(u.y-t.y)/2),K.D(s,0)?($o(this,e,h,m,n,t,p),x.assign(t)):(q=t.x,A=t.y,r=q,B=A,q=t.x>n.x?t.x-s:t.x+s,B=u.y>t.y?t.y+y:t.y-y,$o(this,e,h,m,n,new w(q,A),p),vd(e,t.x+h,t.y+m,r+h,B+m),x.m(r,B))):K.D(n.x,t.x)&&K.D(t.y,u.y)?(s=this.computeCorner(),y=Math.min(s,Math.abs(t.y-n.y)/2),y=s=Math.min(y,Math.abs(u.x-t.x)/2),K.D(s,0)?($o(this,e,h,m,
n,t,p),x.assign(t)):(q=t.x,B=A=t.y,A=t.y>n.y?t.y-y:t.y+y,r=u.x>t.x?t.x+s:t.x-s,$o(this,e,h,m,n,new w(q,A),p),vd(e,t.x+h,t.y+m,r+h,B+m),x.m(r,B))):($o(this,e,h,m,n,t,p),x.assign(t))}v.v(f)}b=l.o;v.s(l)}return b};function Zo(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return K.sb(a,0)?b:K.sb(b,0)?a:Math.sqrt(a*a+b*b)}
function Xo(a,b,c,d){var e=a.ma;if(!(2>e))if(c){var f=a.l(1);c=f.x-d.x;d=f.y-d.y;f=Zo(b.x,b.y,c,d);0!==f&&(e=2===e?.5*f:f,a=So(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)}else f=a.l(e-2),c=f.x-d.x,d=f.y-d.y,f=Zo(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=To(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)}
function Yo(a,b,c,d){for(var e=a.ma,f=b;K.sb(b.x,f.x)&&K.sb(b.y,f.y);){if(c>=e)return e-1;f=a.l(c++)}if(!K.sb(b.x,f.x)&&!K.sb(b.y,f.y))return c-1;for(var h=f;K.sb(b.x,f.x)&&K.sb(f.x,h.x)&&(!d||(b.y>=f.y?f.y>=h.y:f.y<=h.y))||K.sb(b.y,f.y)&&K.sb(f.y,h.y)&&(!d||(b.x>=f.x?f.x>=h.x:f.x<=h.x));){if(c>=e)return e-1;h=a.l(c++)}return c-2}
function $o(a,b,c,d,e,f,h){if(!h&&Jo(a)){h=[];var k=0;a.isVisible()&&(k=ap(a,e,f,h));var l=e.x,l=e.y;if(0<k)if(K.D(e.y,f.y))if(e.x<f.x)for(var m=0;m<k;){var n=Math.max(e.x,Math.min(h[m++]-5,f.x-10));b.lineTo(n+c,f.y+d);for(var l=n+c,p=Math.min(n+10,f.x);m<k;){var q=h[m];if(q<p+10)m++,p=Math.min(q+5,f.x);else break}q=(n+p)/2+c;q=f.y-10+d;n=p+c;p=f.y+d;a.Ge===fh?M(b,n,p,!1,!1):O(b,l,q,n,q,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.x,Math.max(h[m--]+5,f.x+10));b.lineTo(n+c,f.y+d);l=n+c;for(p=Math.max(n-
10,f.x);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,f.x);else break;q=f.y-10+d;n=p+c;p=f.y+d;a.Ge===fh?M(b,n,p,!1,!1):O(b,l,q,n,q,n,p)}else if(K.D(e.x,f.x))if(e.y<f.y)for(m=0;m<k;){n=Math.max(e.y,Math.min(h[m++]-5,f.y-10));b.lineTo(f.x+c,n+d);l=n+d;for(p=Math.min(n+10,f.y);m<k;)if(q=h[m],q<p+10)m++,p=Math.min(q+5,f.y);else break;q=f.x-10+c;n=f.x+c;p+=d;a.Ge===fh?M(b,n,p,!1,!1):O(b,q,l,q,p,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.y,Math.max(h[m--]+5,f.y+10));b.lineTo(f.x+c,n+d);l=n+d;for(p=Math.max(n-
10,f.y);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,f.y);else break;q=f.x-10+c;n=f.x+c;p+=d;a.Ge===fh?M(b,n,p,!1,!1):O(b,q,l,q,p,n,p)}}b.lineTo(f.x+c,f.y+d)}
function ap(a,b,c,d){var e=a.g;if(null===e||b.L(c))return 0;for(e=e.Ww;e.next();){var f=e.value;if(null!==f&&f.visible)for(var f=f.zb.n,h=f.length,k=0;k<h;k++){var l=f[k];if(l instanceof W){if(l===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(l.isVisible()&&Jo(l)){var m=l.cn;m.H()&&a.cn.tg(m)&&!a.usesSamePort(l)&&(m=l.path,null!==m&&m.ul()&&bp(b,c,d,l))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function bp(a,b,c,d){for(var e=K.D(a.y,b.y),f=d.ma,h=d.l(0),k=v.M(),l=1;l<f;l++){var m=d.l(l);if(l<f-1){var n=d.l(l+1);if(h.y===m.y&&m.y===n.y){if(m.x>h.x&&n.x>m.x||m.x<h.x&&n.x<m.x)m=n,l++}else h.x===m.x&&m.x===n.x&&(m.y>h.y&&n.y>m.y||m.y<h.y&&n.y<m.y)&&(m=n,l++)}a:{var n=k,p=a.x,q=a.y,r=b.x,s=b.y,t=h.x,h=h.y,u=m.x,x=m.y;if(!K.D(p,r)){if(K.D(q,s)&&K.D(t,u)&&Math.min(p,r)<t&&Math.max(p,r)>t&&Math.min(h,x)<q&&Math.max(h,x)>q&&!K.D(h,x)){n.x=t;n.y=q;n=!0;break a}}else if(!K.D(q,s)&&K.D(h,x)&&Math.min(q,
s)<h&&Math.max(q,s)>h&&Math.min(t,u)<p&&Math.max(t,u)>p&&!K.D(t,u)){n.x=p;n.y=h;n=!0;break a}n.x=0;n.y=0;n=!1}n&&(e?c.push(k.x):c.push(k.y));h=m}v.v(k)}v.u(W,{at:"firstPickIndex"},function(){return 2>=this.ma?0:this.hc||Mo(this)!==xb?1:0});v.u(W,{Vw:"lastPickIndex"},function(){var a=this.ma;return 0===a?0:2>=a?a-1:this.hc||No(this)!==xb?a-2:a-1});function Jo(a){a=a.Ge;return a===eh||a===fh}function Lo(a,b){if(b||Jo(a)){var c=a.g;null===c||c.Ql.contains(a)||null===a.Cv||c.Ql.add(a,a.Cv)}}
function hh(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.Bc){var d=c.g;if(null!==d)for(var e=!1,d=d.Ww;d.next();){var f=d.value;if(f.visible)if(f===c)for(var e=!0,h=!1,f=f.zb.n,k=f.length,l=0;l<k;l++){var m=f[l];m instanceof W&&(m===a?h=!0:h&&cp(a,m,b))}else if(e)for(f=f.zb.n,k=f.length,l=0;l<k;l++)m=f[l],m instanceof W&&cp(a,m,b)}}}function cp(a,b,c){if(null!==b&&null!==b.Ta&&Jo(b)){var d=b.cn;d.H()&&(a.cn.tg(d)||c.tg(d))&&(a.usesSamePort(b)||b.Ye())}}
W.prototype.usesSamePort=function(a){var b=this.ma,c=a.ma;if(0<b&&0<c){var d=this.l(0),e=a.l(0);if(d.Ie(e))return!0;b=this.l(b-1);a=a.l(c-1);if(b.Ie(a)||d.Ie(a)||b.Ie(e))return!0}else if(this.U===a.U||this.ba===a.ba||this.U===a.ba||this.ba===a.U)return!0;return!1};
W.prototype.isVisible=function(){if(!J.prototype.isVisible.call(this))return!1;var a=this.Sa,b=!0,c=this.g;null!==c&&(b=c.Md);c=this.U;if(null!==c){if(this.Cc&&b&&!c.od)return!1;if(c===a)return!0;c=c.findVisibleNode();if(null===c||c===a)return!1}c=this.ba;if(null!==c){if(this.Cc&&!b&&!c.od)return!1;if(c===a)return!0;b=c.findVisibleNode();if(null===b||b===a)return!1}return!0};W.prototype.oe=function(a){J.prototype.oe.call(this,a);null!==this.di&&this.di.Tm();if(null!==this.we)for(var b=this.we.i;b.next();)b.value.oe(a)};
v.defineProperty(W,{Is:"adjusting"},function(){return this.Sp},function(a){var b=this.Sp;b!==a&&(this.Sp=a,this.h("adjusting",b,a))});v.defineProperty(W,{yz:"corner"},function(){return this.iq},function(a){var b=this.iq;b!==a&&(this.iq=a,this.Ye(),this.h("corner",b,a))});v.defineProperty(W,{Ge:"curve"},function(){return this.lq},function(a){var b=this.lq;b!==a&&(this.lq=a,this.gc(),Lo(this,b===fh||b===eh||a===fh||a===eh),this.h("curve",b,a))});
v.defineProperty(W,{ww:"curviness"},function(){return this.mq},function(a){var b=this.mq;b!==a&&(this.mq=a,this.gc(),this.h("curviness",b,a))});v.defineProperty(W,{ox:"routing"},function(){return this.nm},function(a){var b=this.nm;b!==a&&(this.nm=a,this.oi=null,this.gc(),Lo(this,2===(b.value&2)||2===(a.value&2)),this.h("routing",b,a))});v.defineProperty(W,{Ep:"smoothness"},function(){return this.ls},function(a){var b=this.ls;b!==a&&(this.ls=a,this.Ye(),this.h("smoothness",b,a))});
function Ho(a){var b=a.Yf;if(null!==b){var c=a.jg;if(null!==c){var d=a.Ah;a=a.Qh;for(var e=null,f=null,h=b.dc.n,k=h.length,l=0;l<k;l++){var m=h[l];if(m.Yf===b&&m.Ah===d&&m.jg===c&&m.Qh===a||m.Yf===c&&m.Ah===a&&m.jg===b&&m.Qh===d)null===f?f=m:(null===e&&(e=[],e.push(f)),e.push(m))}if(null!==e){f=po(b,c,d,a);null===f&&(f=new $i,f.op=b,f.gx=d,f.Ct=c,f.hx=a,oo(b,f),oo(c,f));f.links=e;for(l=0;l<e.length;l++)m=e[l],m.di=f;f.Tm()}}}}
function Go(a){var b=a.di;null!==b&&(a.di=null,a=b.links.indexOf(a),0<=a&&(v.Th(b.links,a),b.Tm()))}function $i(){v.cc(this);this.bv=!1;this.hx=this.Ct=this.gx=this.op=null;this.links=[]}$i.prototype.Tm=function(){if(!this.bv){var a=this.links;0<a.length&&(a=a[0].g,null!==a&&a.RB.add(this))}this.bv=!0};
$i.prototype.OA=function(){if(this.bv){this.bv=!1;var a=this.links;if(0<a.length){var b=a[0],c=b.g;b.arrangeBundledLinks(a,null===c||c.ve);1===a.length&&(b.di=null,a.length=0)}0===a.length&&(a=this.op,null!==this&&null!==a.rh&&a.rh.remove(this),a=this.Ct,null!==this&&null!==a.rh&&a.rh.remove(this))}};v.Jd($i,{op:!0,gx:!0,Ct:!0,hx:!0,links:!0,spacing:!0});
function Wk(){v.cc(this);this.FA=this.group=null;this.kt=!0;this.abort=!1;this.eg=this.dg=1;this.jr=this.ir=-1;this.ge=this.fe=8;this.mc=null;this.HF=!1;this.pF=22;this.AE=111}v.Jd(Wk,{group:!0,FA:!0,kt:!0,abort:!0,HF:!0,pF:!0,AE:!0});
Wk.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.dg=Math.floor((a.x-this.fe)/this.fe)*this.fe;this.eg=Math.floor((b-this.ge)/this.ge)*this.ge;this.ir=Math.ceil((c+2*this.fe)/this.fe)*this.fe;this.jr=Math.ceil((d+2*this.ge)/this.ge)*this.ge;a=1+(Math.ceil((this.ir-this.dg)/this.fe)|0);b=1+(Math.ceil((this.jr-this.eg)/this.ge)|0);if(null===this.mc||this.yo<a-1||this.zo<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],f=0;f<=b;f++)e[f]=0;c[d]=e}this.mc=
c;this.yo=a-1;this.zo=b-1}if(null!==this.mc)for(a=0;a<=this.yo;a++)for(b=0;b<=this.zo;b++)this.mc[a][b]=999999}};v.u(Wk,{pb:null},function(){return new z(this.dg,this.eg,this.ir-this.dg,this.jr-this.eg)});v.defineProperty(Wk,{Io:null},function(){return this.fe},function(a){0<a&&a!==this.fe&&(this.fe=a,this.initialize(this.pb))});v.defineProperty(Wk,{Go:null},function(){return this.ge},function(a){0<a&&a!==this.ge&&(this.ge=a,this.initialize(this.pb))});
function dp(a,b,c){return a.dg<=b&&b<=a.ir&&a.eg<=c&&c<=a.jr}function Vo(a,b,c){if(!dp(a,b,c))return 0;b-=a.dg;b/=a.fe;c-=a.eg;c/=a.ge;return a.mc[b|0][c|0]}function Zk(a,b,c){dp(a,b,c)&&(b-=a.dg,b/=a.fe,c-=a.eg,c/=a.ge,a.mc[b|0][c|0]=0)}function Yk(a){if(null!==a.mc)for(var b=0;b<=a.yo;b++)for(var c=0;c<=a.zo;c++)1<=a.mc[b][c]&&(a.mc[b][c]|=999999)}
Wk.prototype.dp=function(a,b,c,d){if(a>this.ir||a+c<this.dg||b>this.jr||b+d<this.eg)return!0;a=(a-this.dg)/this.fe|0;b=(b-this.eg)/this.ge|0;c=Math.max(0,c)/this.fe+1|0;var e=Math.max(0,d)/this.ge+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.yo)|0;for(c=Math.min(b+e-1,this.zo)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.mc[a][e])return!1;return!0};
function ep(a,b,c,d,e,f,h,k,l){if(!(b<f||b>h||c<k||c>l)){var m,n;m=b|0;n=c|0;var p=a.mc[m][n];if(1<=p&&999999>p)for(e?n+=d:m+=d,p+=1;f<=m&&m<=h&&k<=n&&n<=l&&!(p>=a.mc[m][n]);)a.mc[m][n]=p,p+=1,e?n+=d:m+=d;m=e?n:m;if(e)if(0<d)for(c+=d;c<m;c+=d)ep(a,b,c,1,!e,f,h,k,l),ep(a,b,c,-1,!e,f,h,k,l);else for(c+=d;c>m;c+=d)ep(a,b,c,1,!e,f,h,k,l),ep(a,b,c,-1,!e,f,h,k,l);else if(0<d)for(b+=d;b<m;b+=d)ep(a,b,c,1,!e,f,h,k,l),ep(a,b,c,-1,!e,f,h,k,l);else for(b+=d;b>m;b+=d)ep(a,b,c,1,!e,f,h,k,l),ep(a,b,c,-1,!e,f,h,
k,l)}}function fp(a,b,c,d,e,f,h,k,l,m,n){for(var p=b|0,q=c|0,r=a.mc[p][q];0===r&&p>k&&p<l&&q>m&&q<n;)if(h?q+=f:p+=f,r=a.mc[p][q],1>=Math.abs(p-d)&&1>=Math.abs(q-e))return a.abort=!0,0;p=b|0;q=c|0;r=a.mc[p][q];b=1;for(a.mc[p][q]=b;0===r&&p>k&&p<l&&q>m&&q<n;)h?q+=f:p+=f,r=a.mc[p][q],a.mc[p][q]=b,b+=1;return h?q:p}
function Uo(a,b,c,d,e,f){if(null!==a.mc){a.abort=!1;var h=b.x,k=b.y;if(dp(a,h,k)){var h=h-a.dg,h=h/a.fe,k=k-a.eg,k=k/a.ge,l=d.x,m=d.y;if(dp(a,l,m))if(l-=a.dg,l/=a.fe,m-=a.eg,m/=a.ge,1>=Math.abs(h-l)&&1>=Math.abs(k-m))a.abort=!0;else{var n=f.x;b=f.y;d=f.x+f.width;var p=f.y+f.height,n=n-a.dg,n=n/a.fe;b-=a.eg;b/=a.ge;d-=a.dg;d/=a.fe;p-=a.eg;p/=a.ge;f=Math.max(0,Math.min(a.yo,n|0));d=Math.min(a.yo,Math.max(0,d|0));b=Math.max(0,Math.min(a.zo,b|0));var p=Math.min(a.zo,Math.max(0,p|0)),h=h|0,k=k|0,l=l|0,
m=m|0,n=h,q=k,r=0===c||90===c?1:-1;(c=90===c||270===c)?q=fp(a,h,k,l,m,r,c,f,d,b,p):n=fp(a,h,k,l,m,r,c,f,d,b,p);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var r=l|0,s=m|0,t=a.mc[r][s];0===t&&r>f&&r<d&&s>b&&s<p;)if(e?s+=c:r+=c,t=a.mc[r][s],1>=Math.abs(r-h)&&1>=Math.abs(s-k)){a.abort=!0;break a}r=l|0;s=m|0;t=a.mc[r][s];for(a.mc[r][s]=999999;0===t&&r>f&&r<d&&s>b&&s<p;)e?s+=c:r+=c,t=a.mc[r][s],a.mc[r][s]=999999}a.abort||(ep(a,n,q,1,!1,f,d,b,p),ep(a,n,q,-1,!1,f,d,b,p),ep(a,n,q,1,!0,f,d,
b,p),ep(a,n,q,-1,!0,f,d,b,p))}}}}}function Qo(){v.cc(this);this.port=this.Dc=null;this.Qf=[];this.np=!1}v.Jd(Qo,{Dc:!0,port:!0,Qf:!0,np:!0});Qo.prototype.toString=function(){for(var a=this.Qf,b=this.Dc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function gp(a,b,c,d){b=b.offsetY;switch(b){case v.Sc:return 90;case v.Gc:return 180;case v.fd:return 270;case v.Tc:return 0}switch(b){case v.Sc|v.fd:return 180<c?270:90;case v.Gc|v.Tc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case v.Gc|v.fd:return c>a&&c<=180+a?180:270;case v.fd|v.Tc:return c>180-a&&c<=360-a?270:0;case v.Tc|v.Sc:return c>a&&c<=180+a?90:0;case v.Sc|v.Gc:return c>180-a&&c<=360-a?180:90;case v.Gc|v.fd|v.Tc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case v.fd|v.Tc|v.Sc:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case v.Tc|v.Sc|v.Gc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case v.Sc|v.Gc|v.fd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(v.Gc|v.fd|v.Tc|v.Sc)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}Qo.prototype.Tm=function(){this.Qf.length=0};
function Ro(a,b){var c=a.Qf;if(0===c.length){a:if(!a.np){c=a.np;a.np=!0;var d,e=null,f=a.Dc,f=f instanceof T?f:null;if(null===f||f.be)d=a.Dc.YD(a.port.Od);else{if(!f.Z.H()){a.np=c;break a}e=f;d=e.XD()}var h=a.Qf.length=0,k=a.port.fb(zb,v.M()),l=a.port.fb(Vb,v.M()),f=v.ek(k.x,k.y,0,0);f.Zi(l);v.v(k);v.v(l);k=v.Rb(f.x+f.width/2,f.y+f.height/2);for(d=d.i;d.next();)if(l=d.value,l.isVisible()){var m=xb,n=l.$c===a.port||l.U.Yh(e),m=n?Mo(l,a.port):No(l,a.port);if(m.ap()&&(n=n?l.Bd:l.$c,null!==n)){var p=
n.V;if(null!==p){var n=l.computeOtherPoint(p,n),p=k.Wg(n),m=gp(f,m,p,l.hc),q=0;0===m?(q=v.Tc,180<p&&(p-=360)):q=90===m?v.Sc:180===m?v.Gc:v.fd;m=a.Qf[h];void 0===m?(m=new hp(l,p,q),a.Qf[h]=m):(m.link=l,m.angle=p,m.ee=q);m.ex.set(n);h++}}}v.v(k);a.Qf.sort(Qo.prototype.sI);e=a.Qf.length;k=-1;for(h=d=0;h<e;h++)m=a.Qf[h],void 0!==m&&(m.ee!==k&&(k=m.ee,d=0),m.Yo=d,d++);k=-1;d=0;for(h=e-1;0<=h;h--)m=a.Qf[h],void 0!==m&&(m.ee!==k&&(k=m.ee,d=m.Yo+1),m.Km=d);h=a.Qf;n=a.port;e=a.Dc.zI;k=v.M();d=v.M();l=v.M();
m=v.M();n.fb(zb,k);n.fb(Gb,d);n.fb(Vb,l);n.fb(Rb,m);var r=q=p=n=0;if(e===no)for(var s=0;s<h.length;s++){var t=h[s];if(null!==t){var u=t.link.computeThickness();switch(t.ee){case v.Sc:q+=u;break;case v.Gc:r+=u;break;case v.fd:n+=u;break;default:case v.Tc:p+=u}}}for(var x=0,y=0,A=1,s=0;s<h.length;s++)if(t=h[s],null!==t){var B,I;if(x!==t.ee){x=t.ee;switch(x){case v.Sc:B=l;I=m;break;case v.Gc:B=m;I=k;break;case v.fd:B=k;I=d;break;default:case v.Tc:B=d,I=l}var D=I.x-B.x;I=I.y-B.y;switch(x){case v.Sc:q>
Math.abs(D)?(A=Math.abs(D)/q,q=Math.abs(D)):A=1;break;case v.Gc:r>Math.abs(I)?(A=Math.abs(I)/r,r=Math.abs(I)):A=1;break;case v.fd:n>Math.abs(D)?(A=Math.abs(D)/n,n=Math.abs(D)):A=1;break;default:case v.Tc:p>Math.abs(I)?(A=Math.abs(I)/p,p=Math.abs(I)):A=1}y=0}var V=t.fp;if(e===no){u=t.link.computeThickness();u*=A;V.set(B);switch(x){case v.Sc:V.x=B.x+D/2+q/2-y-u/2;break;case v.Gc:V.y=B.y+I/2+r/2-y-u/2;break;case v.fd:V.x=B.x+D/2-n/2+y+u/2;break;default:case v.Tc:V.y=B.y+I/2-p/2+y+u/2}y+=u}else u=.5,
e===ko&&(u=(t.Yo+1)/(t.Km+1)),V.x=B.x+D*u,V.y=B.y+I*u}v.v(k);v.v(d);v.v(l);v.v(m);B=a.Qf;for(D=0;D<B.length;D++)I=B[D],null!==I&&(I.Aw=a.computeEndSegmentLength(I));a.np=c;v.fc(f)}c=a.Qf}for(f=0;f<c.length;f++)if(B=c[f],null!==B&&B.link===b)return B;return null}Qo.prototype.sI=function(a,b){return a===b?0:null===a?-1:null===b?1:a.ee<b.ee?-1:a.ee>b.ee?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
Qo.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Dc,this.port,xb,b.$c===this.port),d=a.Yo;if(0>d)return c;var e=a.Km;if(1>=e||!b.hc)return c;var b=a.ex,f=a.fp;if(a.ee===v.Gc||a.ee===v.Sc)d=e-1-d;return((a=a.ee===v.Gc||a.ee===v.Tc)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)};function hp(a,b,c){this.link=a;this.angle=b;this.ee=c;this.ex=new w;this.Km=this.Yo=0;this.fp=new w;this.Aw=0}
v.Jd(hp,{link:!0,angle:!0,ee:!0,ex:!0,Yo:!0,Km:!0,fp:!0,Aw:!0});hp.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ee.toString()+":"+this.Yo.toString()+"/"+this.Km.toString()+" "+this.fp.toString()+" "+this.Aw.toString()+" "+this.ex.toString()};function rl(){this.Mj=this.lj=yc;this.Kj=this.jj=NaN;this.Jj=this.ij=lo;this.Lj=this.kj=NaN}
rl.prototype.copy=function(){var a=new rl;a.lj=this.lj.aa();a.Mj=this.Mj.aa();a.jj=this.jj;a.Kj=this.Kj;a.ij=this.ij;a.Jj=this.Jj;a.kj=this.kj;a.Lj=this.Lj;return a};function T(a){0===arguments.length?S.call(this,yh):S.call(this,a);this.lr=new H(J);this.eo=new H(T);this.Lk=this.mr=this.kr=null;this.ys=!1;this.Sq=!0;this.As=!1;this.Hb=this.ps=null;this.bq=!1;this.cq=!0;this.Hq=this.dq=!1;this.Qd=new Me;this.Qd.group=this;this.Qy=!1}v.Ga(T,S);v.ga("Group",T);
T.prototype.cloneProtected=function(a){S.prototype.cloneProtected.call(this,a);a.kr=this.kr;a.mr=this.mr;a.Lk=this.Lk;a.ys=this.ys;a.Sq=this.Sq;a.As=this.As;a.ps=this.ps;var b=a.Vs(function(a){return a instanceof sh});a.Hb=b instanceof sh?b:null;a.bq=this.bq;a.cq=this.cq;a.dq=this.dq;a.Hq=this.Hq;null!==this.Qd?(a.Qd=this.Qd.copy(),a.Qd.group=a):(null!==a.Qd&&(a.Qd.group=null),a.Qd=null)};
T.prototype.Vh=function(a){S.prototype.Vh.call(this,a);var b=a.Ro();for(a=a.Pc;a.next();){var c=a.value;c.P();c.G(8);c.Os();if(c instanceof S)c.invalidateConnectedLinks(b);else if(c instanceof W)for(c=c.Mf;c.next();)c.value.invalidateConnectedLinks(b)}};
T.prototype.bn=function(a,b,c,d,e,f,h){if(a===Qd&&"elements"===b)if(e instanceof sh){var k=e;null===this.Hb?this.Hb=k:this.Hb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof C&&(k=e.Vs(function(a){return a instanceof sh}),k instanceof sh&&(null===this.Hb?this.Hb=k:this.Hb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===be&&"elements"===b&&null!==this.Hb&&(d===this.Hb?this.Hb=null:d instanceof C&&this.Hb.rl(d)&&
(this.Hb=null));S.prototype.bn.call(this,a,b,c,d,e,f,h)};T.prototype.Li=function(a,b,c,d){this.Kk=this.Hb;C.prototype.Li.call(this,a,b,c,d)};T.prototype.sl=function(){if(!S.prototype.sl.call(this))return!1;for(var a=this.Pc;a.next();){var b=a.value;if(b instanceof S){if(b.isVisible()&&Kj(b))return!1}else if(b instanceof W&&b.isVisible()&&Kj(b)&&b.U!==this&&b.ba!==this)return!1}return!0};v.u(T,{placeholder:"placeholder"},function(){return this.Hb});
v.defineProperty(T,{HD:"computesBoundsAfterDrag"},function(){return this.bq},function(a){var b=this.bq;b!==a&&(v.j(a,"boolean",T,"computesBoundsAfterDrag"),this.bq=a,this.h("computesBoundsAfterDrag",b,a))});v.defineProperty(T,{LG:"computesBoundsIncludingLinks"},function(){return this.cq},function(a){v.j(a,"boolean",T,"computesBoundsIncludingLinks");var b=this.cq;b!==a&&(this.cq=a,this.h("computesBoundsIncludingLinks",b,a))});
v.defineProperty(T,{MG:"computesBoundsIncludingLocation"},function(){return this.dq},function(a){v.j(a,"boolean",T,"computesBoundsIncludingLocation");var b=this.dq;b!==a&&(this.dq=a,this.h("computesBoundsIncludingLocation",b,a))});v.defineProperty(T,{BH:"handlesDragDropForMembers"},function(){return this.Hq},function(a){v.j(a,"boolean",T,"handlesDragDropForMembers");var b=this.Hq;b!==a&&(this.Hq=a,this.h("handlesDragDropForMembers",b,a))});v.u(T,{Pc:"memberParts"},function(){return this.lr.i});
function fo(a,b){if(a.lr.add(b)){b instanceof T&&a.eo.add(b);var c=a.jI;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.Qa,e.Qa=!0);c(a,b);null!==e&&(e.Qa=d)}a.isVisible()&&a.be||b.oe(!1)}c=a.Hb;null===c&&(c=a);c.P()}function eo(a,b){if(a.lr.remove(b)){b instanceof T&&a.eo.remove(b);var c=a.kI;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.Qa,e.Qa=!0);c(a,b);null!==e&&(e.Qa=d)}a.isVisible()&&a.be||b.oe(!0)}c=a.Hb;null===c&&(c=a);c.P()}
T.prototype.Nm=function(){if(0<this.lr.count){var a=this.g;if(null!==a)for(var b=this.lr.copy().i;b.next();)a.remove(b.value)}S.prototype.Nm.call(this)};v.defineProperty(T,{Pb:"layout"},function(){return this.Qd},function(a){var b=this.Qd;b!==a&&(null!==a&&v.C(a,Me,T,"layout"),null!==b&&(b.g=null,b.group=null),this.Qd=a,null!==a&&(a.g=this.g,a.group=this),this.h("layout",b,a))});
v.defineProperty(T,{jI:"memberAdded"},function(){return this.kr},function(a){var b=this.kr;b!==a&&(null!==a&&v.j(a,"function",T,"memberAdded"),this.kr=a,this.h("memberAdded",b,a))});v.defineProperty(T,{kI:"memberRemoved"},function(){return this.mr},function(a){var b=this.mr;b!==a&&(null!==a&&v.j(a,"function",T,"memberRemoved"),this.mr=a,this.h("memberRemoved",b,a))});
v.defineProperty(T,{$z:"memberValidation"},function(){return this.Lk},function(a){var b=this.Lk;b!==a&&(null!==a&&v.j(a,"function",T,"memberValidation"),this.Lk=a,this.h("memberValidation",b,a))});T.prototype.canAddMembers=function(a){var b=this.g;if(null===b)return!1;b=b.rb;for(a=yf(a).i;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};
T.prototype.addMembers=function(a,b){var c=this.g;if(null===c)return!1;for(var c=c.rb,d=!0,e=yf(a).i;e.next();){var f=e.value;!b||c.isValidMember(this,f)?f.Sa=this:d=!1}return d};v.defineProperty(T,{mJ:"ungroupable"},function(){return this.ys},function(a){var b=this.ys;b!==a&&(v.j(a,"boolean",T,"ungroupable"),this.ys=a,this.h("ungroupable",b,a))});T.prototype.canUngroup=function(){if(!this.mJ)return!1;var a=this.layer;if(null!==a&&!a.ow)return!1;a=a.g;return null===a||a.ow?!0:!1};
T.prototype.invalidateConnectedLinks=function(a){void 0===a&&(a=null);S.prototype.invalidateConnectedLinks.call(this,a);for(var b=this.XD();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.U;null!==d&&d!==this&&d.Yh(this)&&!d.isVisible()?c.gc():(d=c.ba,null!==d&&d!==this&&d.Yh(this)&&!d.isVisible()&&c.gc())}}};
T.prototype.findExternalLinksConnected=T.prototype.XD=function(){var a=this.Ro();a.add(this);for(var b=new H(W),c=a.i;c.next();){var d=c.value;if(d instanceof S)for(d=d.ne;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.i};T.prototype.findExternalNodesConnected=function(){var a=this.Ro();a.add(this);for(var b=new H(S),c=a.i;c.next();){var d=c.value;if(d instanceof S)for(d=d.ne;d.next();){var e=d.value,f=e.U;a.contains(f)&&f!==this||b.add(f);e=e.ba;a.contains(e)&&e!==this||b.add(e)}}return b.i};
T.prototype.findSubGraphParts=T.prototype.Ro=function(){var a=new H(J);lf(a,this,!0,0,!0);a.remove(this);return a};T.prototype.oe=function(a){S.prototype.oe.call(this,a);for(var b=this.Pc;b.next();)b.value.oe(a)};T.prototype.collapseSubGraph=T.prototype.collapseSubGraph=function(){var a=this.g;if(null!==a&&!a.Xg){a.Xg=!0;var b=this.Ro();ip(this,b,a.Oa,this);a.Xg=!1}};
function ip(a,b,c,d){for(var e=a.Pc;e.next();){var f=e.value;f.oe(!1);if(f instanceof T){var h=f;h.be&&(h.QA=h.be,ip(h,b,c,d))}if(f instanceof S)f.invalidateConnectedLinks(b),vi(c,f,d);else if(f instanceof W)for(f=f.Mf;f.next();)f.value.invalidateConnectedLinks(b)}a.be=!1}T.prototype.expandSubGraph=T.prototype.expandSubGraph=function(){var a=this.g;if(null!==a&&!a.Xg){a.Xg=!0;var b=this.Ro();jp(this,b,a.Oa,this);a.Xg=!1}};
function jp(a,b,c,d){for(var e=a.Pc;e.next();){var f=e.value;f.oe(!0);if(f instanceof T){var h=f;h.QA&&(h.QA=!1,jp(h,b,c,d))}if(f instanceof S)f.invalidateConnectedLinks(b),ui(c,f,d);else if(f instanceof W)for(f=f.Mf;f.next();)f.value.invalidateConnectedLinks(b)}a.be=!0}
v.defineProperty(T,{be:"isSubGraphExpanded"},function(){return this.Sq},function(a){var b=this.Sq;if(b!==a){v.j(a,"boolean",T,"isSubGraphExpanded");this.Sq=a;var c=this.g;this.h("isSubGraphExpanded",b,a);b=this.bJ;if(null!==b){var d=!0;null!==c&&(d=c.Qa,c.Qa=!0);b(this);null!==c&&(c.Qa=d)}null!==c&&c.ja.ib?null!==this.Hb&&this.Hb.P():a?this.expandSubGraph():this.collapseSubGraph()}});
v.defineProperty(T,{QA:"wasSubGraphExpanded"},function(){return this.As},function(a){var b=this.As;b!==a&&(v.j(a,"boolean",T,"wasSubGraphExpanded"),this.As=a,this.h("wasSubGraphExpanded",b,a))});v.defineProperty(T,{bJ:"subGraphExpandedChanged"},function(){return this.ps},function(a){var b=this.ps;b!==a&&(null!==a&&v.j(a,"function",T,"subGraphExpandedChanged"),this.ps=a,this.h("subGraphExpandedChanged",b,a))});
T.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=v.Rb(c,b);S.prototype.move.call(this,a);for(a=this.Ro().i;a.next();){var e=a.value;if(!(e instanceof W||e instanceof S&&e.qf)){var f=e.position,h=e.location;f.H()?(d.x=f.x+c,d.y=f.y+b,e.position=d):h.H()&&(d.x=h.x+c,d.y=h.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof W&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));v.v(d)};
function sh(){R.call(this);this.Re=K.Mp;this.Xr=new z(NaN,NaN,NaN,NaN)}v.Ga(sh,R);v.ga("Placeholder",sh);sh.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.Re=this.Re.aa();a.Xr=this.Xr.copy()};sh.prototype.Rj=function(a){if(null===this.background&&null===this.Cm)return!1;var b=this.Fa;return sb(0,0,b.width,b.height,a.x,a.y)};
sh.prototype.ip=function(){var a=this.V;null!==a&&(a instanceof T||a instanceof mf)||v.k("Placeholder is not inside a Group or Adornment.");if(a instanceof T){var b=this.computeBorder(this.Xr),c=this.Jc;eb(c,b.width||0,b.height||0);vl(this,0,0,c.width,c.height);for(var c=a.Pc,d=!1;c.next();)if(c.value.isVisible()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new w,c.St(b,a.Ze),a.location=new w(c.x,c.y))}else{var b=this.xa,c=this.Jc,d=this.padding,e=d.left+d.right,f=d.top+d.bottom;if(b.H())eb(c,b.width+
e||0,b.height+f||0),vl(this,-d.left,-d.top,c.width,c.height);else{var h=a.ec,k=h.fb(zb,v.M()),b=v.ek(k.x,k.y,0,0);b.Zi(h.fb(Vb,k));b.Zi(h.fb(Gb,k));b.Zi(h.fb(Rb,k));a.Kg.m(b.x,b.y);eb(c,b.width+e||0,b.height+f||0);vl(this,-d.left,-d.top,c.width,c.height);v.v(k);v.fc(b)}}};sh.prototype.Li=function(a,b,c,d){var e=this.Z;e.x=a;e.y=b;e.width=c;e.height=d};
sh.prototype.computeBorder=function(a){var b=this.V;if(b instanceof T){var c=b;if(c.HD&&this.Xr.H()){var d=c.g;if(null!==d&&(d=d.$a,d instanceof wf&&!d.vq&&null!==d.$b&&!d.$b.contains(c)))return a.assign(this.Xr),a}}var c=v.Uf(),d=this.computeMemberBounds(c),e=this.padding;a.m(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom);v.fc(c);b instanceof T&&(c=b,c.MG&&c.location.H()&&a.Zi(c.location));return a};
sh.prototype.computeMemberBounds=function(a){if(!(this.V instanceof T))return a.m(0,0,0,0),a;for(var b=this.V,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,h=b.Pc;h.next();){var k=h.value;if(k.isVisible()){if(k instanceof W){var l=k;if(!b.LG)continue;if(Jj(l))continue;if(l.U===b||l.ba===b)continue}k=k.Z;k.left<c&&(c=k.left);k.top<d&&(d=k.top);k.right>e&&(e=k.right);k.bottom>f&&(f=k.bottom)}}isFinite(c)&&isFinite(d)?a.m(c,d,e-c,f-d):(b=b.location,c=this.padding,a.m(b.x+c.left,b.y+c.top,0,0));return a};
v.defineProperty(sh,{padding:"padding"},function(){return this.Re},function(a){"number"===typeof a?((isNaN(a)||0>a)&&v.ua(a,">= 0",sh,"padding"),a=new tb(a)):(v.C(a,tb,sh,"padding"),(isNaN(a.left)||0>a.left)&&v.ua(a.left,">= 0",sh,"padding:value.left"),(isNaN(a.right)||0>a.right)&&v.ua(a.right,">= 0",sh,"padding:value.right"),(isNaN(a.top)||0>a.top)&&v.ua(a.top,">= 0",sh,"padding:value.top"),(isNaN(a.bottom)||0>a.bottom)&&v.ua(a.bottom,">= 0",sh,"padding:value.bottom"));var b=this.Re;b.L(a)||(this.Re=
a=a.aa(),this.h("padding",b,a))});function Me(){0<arguments.length&&v.dd(Me);v.cc(this);this.zy=this.W=null;this.pj=this.Oq=!0;this.Wq=!1;this.Vp=(new w(0,0)).freeze();this.Pq=this.Rq=!0;this.DB="";this.Wl=!1;this.Ry=null}v.ga("Layout",Me);Me.prototype.cloneProtected=function(a){a.Oq=this.Oq;a.pj=this.pj;a.Wq=this.Wq;a.Vp.assign(this.Vp);a.Rq=this.Rq;a.Pq=this.Pq;a.DB=this.DB;this.pj||(a.Wl=!0)};Me.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
Me.prototype.toString=function(){var a=v.nf(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.g&&(a+=" for "+this.g);return a+")"};v.defineProperty(Me,{g:"diagram"},function(){return this.W},function(a){null!==a&&v.C(a,E,Me,"diagram");this.W=a});v.defineProperty(Me,{group:"group"},function(){return this.zy},function(a){this.zy!==a&&(null!==a&&v.C(a,T,Me,"group"),this.zy=a,null!==a&&(this.W=a.g))});
v.defineProperty(Me,{SH:"isOngoing"},function(){return this.Oq},function(a){this.Oq!==a&&(v.j(a,"boolean",Me,"isOngoing"),this.Oq=a)});v.defineProperty(Me,{vE:"isInitial"},function(){return this.pj},function(a){v.j(a,"boolean",Me,"isInitial");this.pj=a;a||(this.Wl=!0)});v.defineProperty(Me,{Tw:"isViewportSized"},function(){return this.Wq},function(a){this.Wq!==a&&(v.j(a,"boolean",Me,"isViewportSized"),(this.Wq=a)&&this.G())});
v.defineProperty(Me,{pt:"isRouting"},function(){return this.Rq},function(a){this.Rq!==a&&(v.j(a,"boolean",Me,"isRouting"),this.Rq=a)});v.defineProperty(Me,{Uz:"isRealtime"},function(){return this.Pq},function(a){this.Pq!==a&&(v.j(a,"boolean",Me,"isRealtime"),this.Pq=a)});v.defineProperty(Me,{sf:"isValidLayout"},function(){return this.Wl},function(a){this.Wl!==a&&(v.j(a,"boolean",Me,"isValidLayout"),this.Wl=a,a||(a=this.g,null!==a&&(a.su=!0)))});
Me.prototype.invalidateLayout=Me.prototype.G=function(){if(this.Wl){var a=this.g;if(null!==a&&!a.ja.ib){var b=a.Oa;!b.Xn&&(b.pf&&b.Xi(),this.SH&&a.ve||this.vE&&!a.ve)&&(this.sf=!1,a.de())}}};v.defineProperty(Me,{network:"network"},function(){return this.Ry},function(a){var b=this.Ry;b!==a&&(null!==a&&v.C(a,wa,Me,"network"),null!==b&&(b.Pb=null),this.Ry=a,null!==a&&(a.Pb=this))});Me.prototype.createNetwork=function(){return new wa};
Me.prototype.makeNetwork=function(a){var b=this.createNetwork();b.Pb=this;a instanceof E?(b.Oj(a.wg,!0),b.Oj(a.links,!0)):a instanceof T?b.Oj(a.Pc):b.Oj(a.i);return b};Me.prototype.updateParts=function(){var a=this.g;if(null===a&&null!==this.network)for(var b=this.network.vertexes.i;b.next();){var c=b.value.Dc;if(null!==c&&(a=c.g,null!==a))break}this.sf=!0;try{null!==a&&a.Qb("Layout"),this.commitLayout()}finally{null!==a&&a.wd("Layout")}};
Me.prototype.commitLayout=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();if(this.pt)for(a=this.network.edges.i;a.next();)a.value.commit()};
Me.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new H(J);a instanceof E?(kp(this,b,a.wg,!0,this.eA,!0,!1,!0),kp(this,b,a.bk,!0,this.eA,!0,!1,!0)):a instanceof T?kp(this,b,a.Pc,!1,this.eA,!0,!1,!0):b.Yc(a.i);var c=b.count;if(0<c){a=this.g;null!==a&&a.Qb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Ud.x,e=d,f=this.Ud.y,h=0,k=0,b=b.i;b.next();){var l=b.value;l.mf();var m=l.Ba,n=m.width,
m=m.height;l.moveTo(e,f);l.Qy=!1;e+=Math.max(n,50)+20;k=Math.max(k,Math.max(m,50));h>=c-1?(h=0,e=d,f+=k+20,k=0):h++}null!==a&&a.wd("Layout")}this.sf=!0};Me.prototype.eA=function(a){return!a.location.H()||a instanceof T&&a.Qy?!0:!1};
function kp(a,b,c,d,e,f,h,k){for(c=c.i;c.next();){var l=c.value;d&&!l.bp||null!==e&&!e(l)||!l.canLayout()||(f&&l instanceof S?l.qf||(l instanceof T?null===l.Pb?kp(a,b,l.Pc,!1,e,f,h,k):b.add(l):b.add(l)):h&&l instanceof W?b.add(l):!k||!l.Ld()||l instanceof S||b.add(l))}}
Me.prototype.collectParts=function(a){var b=new H(J);a instanceof E?(kp(this,b,a.wg,!0,null,!0,!0,!0),kp(this,b,a.links,!0,null,!0,!0,!0),kp(this,b,a.bk,!0,null,!0,!0,!0)):a instanceof T?kp(this,b,a.Pc,!1,null,!0,!0,!0):kp(this,b,a.i,!1,null,!0,!0,!0);return b};v.defineProperty(Me,{Ud:"arrangementOrigin"},function(){return this.Vp},function(a){v.C(a,w,Me,"arrangementOrigin");this.Vp.L(a)||(this.Vp.assign(a),this.G())});
Me.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.fb(zb),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function wa(){v.cc(this);this.Qd=null;this.clear()}v.ga("LayoutNetwork",wa);
wa.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.i;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.i;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new H(ya);this.edges=new H(Aa);this.iA=new ma(S,ya);this.Xz=new ma(W,Aa)};
wa.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.Pb?"("+this.Pb.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.i;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.i;c.next();)b+="\n    "+c.value.toString(a-1)}return b};v.defineProperty(wa,{Pb:"layout"},function(){return this.Qd},function(a){this.Qd=a});wa.prototype.createVertex=function(){return new ya};
wa.prototype.createEdge=function(){return new Aa};
wa.prototype.addParts=wa.prototype.Oj=function(a,b,c){if(null!==a){void 0===b&&(b=!1);v.j(b,"boolean",wa,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof S)return!a.qf;if(a instanceof W){var b=a.U;if(null===b||b.qf)return!1;a=a.ba;return null===a||a.qf?!1:!0}return!1});for(a=a.i;a.next();){var d=a.value;if(d instanceof S&&(!b||d.bp)&&d.canLayout()&&c(d))if(d instanceof T&&null===d.Pb)this.Oj(d.Pc,!1);else if(null===this.Qm(d)){var e=this.createVertex();e.Dc=d;
this.Xk(e)}}for(a.reset();a.next();)if(d=a.value,d instanceof W&&(!b||d.bp)&&d.canLayout()&&c(d)&&null===this.Cw(d)){var f=d.U,e=d.ba;null!==f&&null!==e&&f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.hp(f,e,d))}}};wa.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.Qm(b);if(null!==a)return a;for(b=b.Sa;null!==b;){a=this.Qm(b);if(null!==a)return a;b=b.Sa}return null};
wa.prototype.addVertex=wa.prototype.Xk=function(a){if(null!==a){this.vertexes.add(a);var b=a.Dc;null!==b&&this.iA.add(b,a);a.network=this}};wa.prototype.addNode=wa.prototype.Hs=function(a){if(null===a)return null;var b=this.Qm(a);null===b&&(b=this.createVertex(),b.Dc=a,this.Xk(b));return b};wa.prototype.deleteVertex=wa.prototype.SD=function(a){if(null!==a&&lp(this,a)){for(var b=a.Me,c=b.count-1;0<=c;c--){var d=b.ha(c);this.No(d)}b=a.He;for(c=b.count-1;0<=c;c--)d=b.ha(c),this.No(d)}};
function lp(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.iA.remove(b.Dc),b.network=null);return c}wa.prototype.deleteNode=function(a){null!==a&&(a=this.Qm(a),null!==a&&this.SD(a))};wa.prototype.findVertex=wa.prototype.Qm=function(a){return null===a?null:this.iA.la(a)};wa.prototype.addEdge=wa.prototype.Bo=function(a){if(null!==a){this.edges.add(a);var b=a.link;null!==b&&null===this.Cw(b)&&this.Xz.add(b,a);b=a.toVertex;null!==b&&b.rD(a);b=a.fromVertex;null!==b&&b.qD(a);a.network=this}};
wa.prototype.addLink=function(a){if(null===a)return null;var b=a.U,c=a.ba,d=this.Cw(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.Hs(b)),null!==c&&(d.toVertex=this.Hs(c)),this.Bo(d)):(d.fromVertex=null!==b?this.Hs(b):null,d.toVertex=null!==c?this.Hs(c):null);return d};wa.prototype.deleteEdge=wa.prototype.No=function(a){if(null!==a){var b=a.toVertex;null!==b&&b.RD(a);b=a.fromVertex;null!==b&&b.QD(a);mp(this,a)}};
function mp(a,b){null!==b&&a.edges.remove(b)&&(a.Xz.remove(b.link),b.network=null)}wa.prototype.deleteLink=function(a){null!==a&&(a=this.Cw(a),null!==a&&this.No(a))};wa.prototype.findEdge=wa.prototype.Cw=function(a){return null===a?null:this.Xz.la(a)};wa.prototype.linkVertexes=wa.prototype.hp=function(a,b,c){if(null===a||null===b)return null;if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.Bo(d);return d}return null};
wa.prototype.reverseEdge=wa.prototype.nx=function(a){if(null!==a){var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.QD(a),c.RD(a),a.nx(),b.rD(a),c.qD(a))}};wa.prototype.deleteSelfEdges=wa.prototype.yw=function(){for(var a=v.jb(),b=this.edges.i;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.No(a[c]);v.ra(a)};
wa.prototype.deleteArtificialVertexes=function(){for(var a=v.jb(),b=this.vertexes.i;b.next();){var c=b.value;null===c.Dc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.SD(a[b]);c=v.jb();for(b=this.edges.i;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.No(c[b]);v.ra(a);v.ra(c)};function np(a){for(var b=v.jb(),c=a.edges.i;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.No(b[d]);v.ra(b)}
wa.prototype.splitIntoSubNetworks=wa.prototype.aJ=function(){this.deleteArtificialVertexes();np(this);this.yw();for(var a=new G(wa),b=!0;b;)for(var b=!1,c=this.vertexes.i;c.next();){var d=c.value;if(0<d.Me.count||0<d.He.count){b=this.Pb.createNetwork();a.add(b);op(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function op(a,b,c){if(null!==c&&c.network!==b){lp(a,c);b.Xk(c);for(var d=c.jc;d.next();){var e=d.value;e.network!==b&&(mp(a,e),b.Bo(e),op(a,b,e.fromVertex))}for(d=c.Zb;d.next();)c=d.value,c.network!==b&&(mp(a,c),b.Bo(c),op(a,b,c.toVertex))}}wa.prototype.findAllParts=function(){for(var a=new H(J),b=this.vertexes.i;b.next();)a.add(b.value.Dc);for(b=this.edges.i;b.next();)a.add(b.value.link);return a};
function ya(){v.cc(this);this.network=null;this.ca=(new z(0,0,10,10)).freeze();this.N=(new w(5,5)).freeze();this.clear()}v.ga("LayoutVertex",ya);ya.prototype.clear=function(){this.rd=this.uh=null;this.Me=new G(Aa);this.He=new G(Aa)};
ya.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+v.cd(this);if(0<a&&(b+=null!==this.Dc?"("+this.Dc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.Me.i;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.He.i;d.next();){var f=d.value;c?c=!1:e+=",";e+=f.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
v.defineProperty(ya,{data:"data"},function(){return this.uh},function(a){this.uh=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.N.m(d/2,b/2);this.ca.m(a,c,d,b)}});v.defineProperty(ya,{Dc:"node"},function(){return this.rd},function(a){if(this.rd!==a){this.rd=a;a.mf();var b=a.Z,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.ca.m(c,d,e,b);if(!(a instanceof T)&&(a=a.ac.fb(Kb),a.H())){this.N.m(a.x-c,a.y-d);return}this.N.m(e/2,b/2)}});
v.defineProperty(ya,{pb:"bounds"},function(){return this.ca},function(a){this.ca.L(a)||this.ca.assign(a)});v.defineProperty(ya,{focus:"focus"},function(){return this.N},function(a){this.N.L(a)||this.N.assign(a)});v.defineProperty(ya,{oa:"centerX"},function(){return this.ca.x+this.N.x},function(a){var b=this.ca;b.x+this.N.x!==a&&(b.Na(),b.x=a-this.N.x,b.freeze())});
v.defineProperty(ya,{va:"centerY"},function(){return this.ca.y+this.N.y},function(a){var b=this.ca;b.y+this.N.y!==a&&(b.Na(),b.y=a-this.N.y,b.freeze())});v.defineProperty(ya,{bt:"focusX"},function(){return this.N.x},function(a){var b=this.N;b.x!==a&&(b.Na(),b.x=a,b.freeze())});v.defineProperty(ya,{ct:"focusY"},function(){return this.N.y},function(a){var b=this.N;b.y!==a&&(b.Na(),b.y=a,b.freeze())});
v.defineProperty(ya,{x:"x"},function(){return this.ca.x},function(a){var b=this.ca;b.x!==a&&(b.Na(),b.x=a,b.freeze())});v.defineProperty(ya,{y:"y"},function(){return this.ca.y},function(a){var b=this.ca;b.y!==a&&(b.Na(),b.y=a,b.freeze())});v.defineProperty(ya,{width:"width"},function(){return this.ca.width},function(a){var b=this.ca;b.width!==a&&(b.Na(),b.width=a,b.freeze())});
v.defineProperty(ya,{height:"height"},function(){return this.ca.height},function(a){var b=this.ca;b.height!==a&&(b.Na(),b.height=a,b.freeze())});ya.prototype.commit=function(){var a=this.uh;if(null!==a){var b=this.pb,c=a.bounds;v.Wa(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.Dc,null!==a){b=this.pb;if(!(a instanceof T)){var c=a.Z,d=a.ac.fb(Kb);if(c.H()&&d.H()){a.moveTo(b.x+this.bt-(d.x-c.x),b.y+this.ct-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};
ya.prototype.addSourceEdge=ya.prototype.rD=function(a){null!==a&&(this.Me.contains(a)||this.Me.add(a))};ya.prototype.deleteSourceEdge=ya.prototype.RD=function(a){null!==a&&this.Me.remove(a)};ya.prototype.addDestinationEdge=ya.prototype.qD=function(a){null!==a&&(this.He.contains(a)||this.He.add(a))};ya.prototype.deleteDestinationEdge=ya.prototype.QD=function(a){null!==a&&this.He.remove(a)};v.u(ya,{$I:"sourceVertexes"},function(){for(var a=new H(ya),b=this.jc;b.next();)a.add(b.value.fromVertex);return a.i});
v.u(ya,{aH:"destinationVertexes"},function(){for(var a=new H(ya),b=this.Zb;b.next();)a.add(b.value.toVertex);return a.i});v.u(ya,{vertexes:"vertexes"},function(){for(var a=new H(ya),b=this.jc;b.next();)a.add(b.value.fromVertex);for(b=this.Zb;b.next();)a.add(b.value.toVertex);return a.i});v.u(ya,{jc:"sourceEdges"},function(){return this.Me.i});v.u(ya,{Zb:"destinationEdges"},function(){return this.He.i});
v.u(ya,{edges:"edges"},function(){for(var a=new G(Aa),b=this.jc;b.next();)a.add(b.value);for(b=this.Zb;b.next();)a.add(b.value);return a.i});v.u(ya,{gH:"edgesCount"},function(){return this.Me.count+this.He.count});var pp;ya.standardComparer=pp=function(a,b){var c=a.rd,d=b.rd;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
ya.smartComparer=function(a,b){if(null!==a){if(null!==b){var c=a.rd,d=b.rd;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==f-h)return f-
h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function Aa(){v.cc(this);this.network=null;this.clear()}v.ga("LayoutEdge",Aa);Aa.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
Aa.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+v.cd(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};Aa.prototype.nx=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};Aa.prototype.commit=function(){};
Aa.prototype.getOtherVertex=Aa.prototype.tH=function(a){return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function fl(){0<arguments.length&&v.dd(fl);Me.call(this);this.Tw=!0;this.Cs=this.Ds=NaN;this.cj=(new ia(NaN,NaN)).freeze();this.Oh=(new ia(10,10)).freeze();this.te=om;this.gd=mm;this.Nh=im;this.th=qp}v.Ga(fl,Me);v.ga("GridLayout",fl);
fl.prototype.cloneProtected=function(a){Me.prototype.cloneProtected.call(this,a);a.Ds=this.Ds;a.Cs=this.Cs;a.cj.assign(this.cj);a.Oh.assign(this.Oh);a.te=this.te;a.gd=this.gd;a.Nh=this.Nh;a.th=this.th};
fl.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.Ud=this.initialOrigin(this.Ud);var b=this.g,c=new H(J);a instanceof E?(b=a,kp(this,c,a.wg,!0,null,!0,!0,!0),kp(this,c,a.links,!0,null,!0,!0,!0),kp(this,c,a.bk,!0,null,!0,!0,!0)):a instanceof T?(b=a.g,kp(this,c,a.Pc,!1,null,!0,!0,!0)):c.Yc(a.i);for(a=c.copy().i;a.next();){var d=a.value;if(d instanceof W){var e=d;if(null!==e.U||null!==e.ba){c.remove(e);
continue}}d.mf();if(d instanceof T)for(d=d.Pc;d.next();)c.remove(d.value)}e=c.ed();if(0!==e.length){switch(this.sorting){case lm:e.reverse();break;case im:e.sort(this.comparer);break;case jm:e.sort(this.comparer),e.reverse()}var f=this.pJ;isNaN(f)&&(f=0);var h=this.KF,h=isNaN(h)&&null!==b?Math.max(b.tb.width-b.padding.left-b.padding.right,0):Math.max(this.KF,0);0>=f&&0>=h&&(f=1);c=this.spacing.width;isFinite(c)||(c=0);a=this.spacing.height;isFinite(a)||(a=0);null!==b&&b.Qb("Layout");d=[];switch(this.alignment){case pm:var k=
c,l=a,m=Math.max(this.Ho.width,1);if(!isFinite(m))for(var n=m=0;n<e.length;n++)var p=e[n],q=p.Ba,m=Math.max(m,q.width);var m=Math.max(m+k,1),r=Math.max(this.Ho.height,1);if(!isFinite(r))for(n=r=0;n<e.length;n++)p=e[n],q=p.Ba,r=Math.max(r,q.height);for(var r=Math.max(r+l,1),s=this.Ff,t=this.Ud.x,u=t,x=this.Ud.y,y=0,A=0,n=0;n<e.length;n++){var p=e[n],q=p.Ba,B=Math.ceil((q.width+k)/m)*m,I=Math.ceil((q.height+l)/r)*r,D=0;switch(s){case nm:D=Math.abs(u-q.width);break;default:D=u+q.width}if(0<f&&y>f-1||
0<h&&0<y&&D>h)d.push(new z(0,x,h+k,A)),y=0,u=t,x+=A,A=0;A=Math.max(A,I);I=0;switch(s){case nm:I=-q.width;break;default:I=0}p.moveTo(u+I,x);switch(s){case nm:u-=B;break;default:u+=B}y++}d.push(new z(0,x,h+k,A));break;case om:k=f;l=c;m=a;n=Math.max(this.Ho.width,1);p=x=B=0;q=v.M();for(f=0;f<e.length;f++)r=e[f],s=r.Ba,t=Zn(r,r.ac,r.Ze,q),B=Math.max(B,t.x),x=Math.max(x,s.width-t.x),p=Math.max(p,t.y);u=this.Ff;switch(u){case nm:B+=l;break;default:x+=l}var n=isFinite(n)?Math.max(n+l,1):Math.max(B+x,1),
V=x=this.Ud.x,y=this.Ud.y,A=0;h>=B&&(h-=B);for(var B=I=0,D=Math.max(this.Ho.height,1),ba=p=0,U=!0,N=v.M(),f=0;f<e.length;f++){r=e[f];s=r.Ba;t=Zn(r,r.ac,r.Ze,q);if(0<A)switch(u){case nm:V=Math.floor((V-x-(s.width-t.x))/n)*n+x;break;default:V=Math.ceil((V-x+t.x)/n)*n+x}else switch(u){case nm:I=V+t.x+s.width;break;default:I=V-t.x}var Z=0;switch(u){case nm:Z=-(V+t.x)+I;break;default:Z=V+s.width-t.x-I}if(0<k&&A>k-1||0<h&&0<A&&Z>h){d.push(new z(0,U?y-p:y,h+l,ba+p+m));for(V=0;V<A&&f!==A;V++){var Z=e[f-A+
V],Ga=Zn(Z,Z.ac,Z.Ze,N);Z.moveTo(Z.position.x,Z.position.y+p-Ga.y)}ba+=m;y=U?y+ba:y+(ba+p);A=ba=p=0;V=x;U=!1}V===x&&(B=u===nm?Math.max(B,s.width-t.x):Math.min(B,-t.x));p=Math.max(p,t.y);ba=Math.max(ba,s.height-t.y);isFinite(D)&&(ba=Math.max(ba,Math.max(s.height,D)-t.y));U?r.moveTo(V-t.x,y-t.y):r.moveTo(V-t.x,y);switch(u){case nm:V-=t.x+l;break;default:V+=s.width-t.x+l}A++}d.push(new z(0,y,h+l,(U?ba:ba+p)+m));for(V=0;V<A&&f!==A;V++)Z=e[f-A+V],Ga=Zn(Z,Z.ac,Z.Ze,q),Z.moveTo(Z.position.x,Z.position.y+
p-Ga.y);v.v(q);v.v(N);if(u===nm)for(f=0;f<d.length;f++)e=d[f],e.width+=B,e.x-=B;else for(f=0;f<d.length;f++)e=d[f],e.x>B&&(e.width+=e.x-B,e.x=B)}for(k=f=h=e=0;k<d.length;k++)l=d[k],e=Math.min(e,l.x),h=Math.min(h,l.y),f=Math.max(f,l.x+l.width);this.Ff===nm?this.commitLayers(d,new w(e+c/2-(f+e),h-a/2)):this.commitLayers(d,new w(e-c/2,h-a/2));null!==b&&b.wd("Layout");this.sf=!0}};fl.prototype.commitLayers=function(){};
v.defineProperty(fl,{KF:"wrappingWidth"},function(){return this.Ds},function(a){this.Ds!==a&&(v.j(a,"number",fl,"wrappingWidth"),0<a||isNaN(a))&&(this.Ds=a,this.Tw=isNaN(a),this.G())});v.defineProperty(fl,{pJ:"wrappingColumn"},function(){return this.Cs},function(a){this.Cs!==a&&(v.j(a,"number",fl,"wrappingColumn"),0<a||isNaN(a))&&(this.Cs=a,this.G())});v.defineProperty(fl,{Ho:"cellSize"},function(){return this.cj},function(a){v.C(a,ia,fl,"cellSize");this.cj.L(a)||(this.cj.assign(a),this.G())});
v.defineProperty(fl,{spacing:"spacing"},function(){return this.Oh},function(a){v.C(a,ia,fl,"spacing");this.Oh.L(a)||(this.Oh.assign(a),this.G())});v.defineProperty(fl,{alignment:"alignment"},function(){return this.te},function(a){this.te!==a&&(v.qb(a,fl,fl,"alignment"),a===om||a===pm)&&(this.te=a,this.G())});v.defineProperty(fl,{Ff:"arrangement"},function(){return this.gd},function(a){this.gd!==a&&(v.qb(a,fl,fl,"arrangement"),a===mm||a===nm)&&(this.gd=a,this.G())});
v.defineProperty(fl,{sorting:"sorting"},function(){return this.Nh},function(a){this.Nh!==a&&(v.qb(a,fl,fl,"sorting"),a===km||a===lm||a===im||a===jm)&&(this.Nh=a,this.G())});v.defineProperty(fl,{comparer:"comparer"},function(){return this.th},function(a){this.th!==a&&(v.j(a,"function",fl,"comparer"),this.th=a,this.G())});var qp;fl.standardComparer=qp=function(a,b){var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
fl.smartComparer=function(a,b){if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==f-h)return f-h}}else if(""!==c[e])return 1;return""!==
d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var pm;fl.Position=pm=v.p(fl,"Position",0);var om;fl.Location=om=v.p(fl,"Location",1);var mm;fl.LeftToRight=mm=v.p(fl,"LeftToRight",2);var nm;fl.RightToLeft=nm=v.p(fl,"RightToLeft",3);var km;fl.Forward=km=v.p(fl,"Forward",4);var lm;fl.Reverse=lm=v.p(fl,"Reverse",5);var im;fl.Ascending=im=v.p(fl,"Ascending",6);var jm;fl.Descending=jm=v.p(fl,"Descending",7);
function qm(){0<arguments.length&&v.dd(qm);Me.call(this);this.py=this.Kn=this.Ed=0;this.wq=360;this.oy=Jm;this.wk=0;this.KB=Jm;this.Bu=this.lg=this.eD=0;this.ew=new rp;this.Du=this.im=0;this.eG=600;this.Jr=NaN;this.Xp=1;this.os=0;this.qs=360;this.gd=Jm;this.na=Fm;this.Nh=Cm;this.th=pp;this.Oh=6;this.yr=Mm}v.Ga(qm,Me);v.ga("CircularLayout",qm);
qm.prototype.cloneProtected=function(a){Me.prototype.cloneProtected.call(this,a);a.Jr=this.Jr;a.Xp=this.Xp;a.os=this.os;a.qs=this.qs;a.gd=this.gd;a.na=this.na;a.Nh=this.Nh;a.th=this.th;a.Oh=this.Oh;a.yr=this.yr};qm.prototype.createNetwork=function(){return new sp};
qm.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.oa=0,a.va=0);else{var b=new G(tp);b.Yc(a.i);a=new G(tp);var c=new G(tp),d;d=this.sort(b);var e=this.oy,f=this.KB,h=this.Ed,k=this.Kn,l=this.py,m=this.wq,b=this.wk,n=this.eD,p=this.lg,q=this.Bu,e=this.Ff,f=this.$w,h=this.AI;if(!isFinite(h)||
0>=h)h=NaN;k=this.zG;if(!isFinite(k)||0>=k)k=1;l=this.Ne;isFinite(l)||(l=0);m=this.Sf;if(!isFinite(m)||360<m||1>m)m=360;b=this.spacing;isFinite(b)||(b=NaN);e===Km&&f===Lm?e=Jm:e===Km&&f!==Lm&&(f=Lm,e=this.Ff);if((this.direction===Dm||this.direction===Em)&&this.sorting!==Cm){for(var r=0;!(r>=d.length);r+=2){a.add(d.ha(r));if(r+1>=d.length)break;c.add(d.ha(r+1))}this.direction===Dm?(this.Ff===Km&&a.reverse(),d=new G(tp),d.Yc(a),d.Yc(c)):(this.Ff===Km&&c.reverse(),d=new G(tp),d.Yc(c),d.Yc(a))}for(var s=
d.length,t=n=0,r=0;r<d.length;r++){var p=l+m*t*(this.direction===Fm?1:-1)/s,u=d.ha(r).diameter;isNaN(u)&&(u=up(d.ha(r),p));360>m&&(0===r||r===d.length-1)&&(u/=2);n+=u;t++}if(isNaN(h)||e===Km){isNaN(b)&&(b=6);if(e!==Jm&&e!==Km){u=-Infinity;for(r=0;r<s;r++){var q=d.ha(r),x=d.ha(r===s-1?0:r+1);isNaN(q.diameter)&&up(q,0);isNaN(x.diameter)&&up(x,0);u=Math.max(u,(q.diameter+x.diameter)/2)}q=u+b;e===Hm?(p=2*Math.PI/s,h=(u+b)/p):h=vp(this,q*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180)}else h=vp(this,n+(360<=
m?s:s-1)*(e!==Km?b:1.6*b),k,l*Math.PI/180,m*Math.PI/180);p=h*k}else if(p=h*k,t=wp(this,h,p,l*Math.PI/180,m*Math.PI/180),isNaN(b)){if(e===Jm||e===Km)b=(t-n)/(360<=m?s:s-1)}else if(e===Jm||e===Km)r=(t-n)/(360<=m?s:s-1),r<b?(h=vp(this,n+b*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180),p=h*k):b=r;else{u=-Infinity;for(r=0;r<s;r++)q=d.ha(r),x=d.ha(r===s-1?0:r+1),isNaN(q.diameter)&&up(q,0),isNaN(x.diameter)&&up(x,0),u=Math.max(u,(q.diameter+x.diameter)/2);q=u+b;r=vp(this,q*(360<=m?s:s-1),k,l*Math.PI/180,
m*Math.PI/180);r>h?(h=r,p=h*k):q=t/(360<=m?s:s-1)}this.oy=e;this.KB=f;this.Ed=h;this.Kn=k;this.py=l;this.wq=m;this.wk=b;this.eD=n;this.lg=p;this.Bu=q;b=d;d=this.oy;e=this.Ed;f=this.py;k=this.wq;l=this.wk;m=this.lg;n=this.Bu;if(this.direction!==Dm&&this.direction!==Em||d!==Km)if(this.direction===Dm||this.direction===Em){h=0;switch(d){case Im:h=180*xp(this,e,m,f,n)/Math.PI;break;case Jm:n=b=0;h=a.first();null!==h&&(b=up(h,Math.PI/2));h=c.first();null!==h&&(n=up(h,Math.PI/2));h=180*xp(this,e,m,f,l+(b+
n)/2)/Math.PI;break;case Hm:h=k/b.length}if(this.direction===Dm){switch(d){case Im:yp(this,a,f,Gm);break;case Jm:zp(this,a,f,Gm);break;case Hm:Ap(this,a,k/2,f,Gm)}switch(d){case Im:yp(this,c,f+h,Fm);break;case Jm:zp(this,c,f+h,Fm);break;case Hm:Ap(this,c,k/2,f+h,Fm)}}else{switch(d){case Im:yp(this,c,f,Gm);break;case Jm:zp(this,c,f,Gm);break;case Hm:Ap(this,c,k/2,f,Gm)}switch(d){case Im:yp(this,a,f+h,Fm);break;case Jm:zp(this,a,f+h,Fm);break;case Hm:Ap(this,a,k/2,f+h,Fm)}}}else switch(d){case Im:yp(this,
b,f,this.direction);break;case Jm:zp(this,b,f,this.direction);break;case Hm:Ap(this,b,k,f,this.direction);break;case Km:Bp(this,b,k,f,this.direction)}else Bp(this,b,k,f-k/2,Fm)}this.updateParts();this.network=null;this.sf=!0};
function Ap(a,b,c,d,e){var f=a.wq,h=a.Ed;a=a.lg;d=d*Math.PI/180;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=d+(e===Fm?l*c/(360<=f?k:k-1):-(l*c)/k),n=b.ha(l),p=h*Math.tan(m)/a,p=Math.sqrt((h*h+a*a*p*p)/(1+p*p));n.oa=p*Math.cos(m);n.va=p*Math.sin(m);n.actualAngle=180*m/Math.PI}}
function zp(a,b,c,d){var e=a.Ed,f=a.lg,h=a.wk;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.ha(l),n=b.ha(l===k-1?0:l+1),p=f*Math.sin(c);m.oa=e*Math.cos(c);m.va=p;m.actualAngle=180*c/Math.PI;isNaN(m.diameter)&&up(m,0);isNaN(n.diameter)&&up(n,0);m=xp(a,e,f,d===Fm?c:-c,(m.diameter+n.diameter)/2+h);c+=d===Fm?m:-m}}
function yp(a,b,c,d){var e=a.Ed,f=a.lg,h=a.Bu;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.ha(l);m.oa=e*Math.cos(c);m.va=f*Math.sin(c);m.actualAngle=180*c/Math.PI;m=xp(a,e,f,d===Fm?c:-c,h);c+=d===Fm?m:-m}}function Bp(a,b,c,d,e){var f=a.Du,f=a.wq;a.im=0;a.ew=new rp;if(360>c){for(f=d+(e===Fm?f:-f);0>f;)f+=360;f%=360;180<f&&(f-=360);f*=Math.PI/180;a.Du=f;Cp(a,b,c,d,e)}else Dp(a,b,c,d,e);a.ew.commit(b)}
function Dp(a,b,c,d,e){var f=a.Ed,h=a.wk,k=a.Kn,l=f*Math.cos(d*Math.PI/180),m=a.lg*Math.sin(d*Math.PI/180),n=b.ed();if(3===n.length)n[0].oa=f,n[0].va=0,n[1].oa=n[0].oa-n[0].width/2-n[1].width/2-h,n[1].y=n[0].y,n[2].oa=(n[0].oa+n[1].oa)/2,n[2].y=n[0].y-n[2].height-h;else if(4===n.length)n[0].oa=f,n[0].va=0,n[2].oa=-n[0].oa,n[2].va=n[0].va,n[1].oa=0,n[1].y=Math.min(n[0].y,n[2].y)-n[1].height-h,n[3].oa=0,n[3].y=Math.max(n[0].y+n[0].height+h,n[2].y+n[2].height+h);else{for(var f=v.M(),p=0;p<n.length;p++){n[p].oa=
l;n[p].va=m;if(p>=n.length-1)break;Ep(a,l,m,n,p,e,f)||Fp(a,l,m,n,p,e,f);l=f.x;m=f.y}v.v(f);a.im++;if(!(23<a.im)){var l=n[0].oa,m=n[0].va,f=n[n.length-1].oa,p=n[n.length-1].va,q=Math.abs(l-f)-((n[0].width+n[n.length-1].width)/2+h),r=Math.abs(m-p)-((n[0].height+n[n.length-1].height)/2+h),h=0;1>Math.abs(r)?Math.abs(l-f)<(n[0].width+n[n.length-1].width)/2&&(h=0):h=0<r?r:1>Math.abs(q)?0:q;q=!1;q=Math.abs(f)>Math.abs(p)?0<f!==m>p:0<p!==l<f;if(q=e===Fm?q:!q)h=-Math.abs(h),h=Math.min(h,-n[n.length-1].width),
h=Math.min(h,-n[n.length-1].height);a.ew.compare(h,n);1<Math.abs(h)&&(a.Ed=8>a.im?a.Ed-h/(2*Math.PI):5>n.length&&10<h?a.Ed/2:a.Ed-(0<h?1.7:-2.3),a.lg=a.Ed*k,Dp(a,b,c,d,e))}}}
function Cp(a,b,c,d,e){for(var f=a.Ed,h=a.lg,k=a.Kn,l=f*Math.cos(d*Math.PI/180),m=h*Math.sin(d*Math.PI/180),n=v.M(),p=b.ed(),q=0;q<p.length;q++){p[q].oa=l;p[q].va=m;if(q>=p.length-1)break;Ep(a,l,m,p,q,e,n)||Fp(a,l,m,p,q,e,n);l=n.x;m=n.y}v.v(n);a.im++;if(!(23<a.im)){l=Math.atan2(m,l);l=e===Fm?a.Du-l:l-a.Du;l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI;f=l*(f+h)/2;h=a.ew;if(Math.abs(f)<Math.abs(h.To))for(h.To=f,h.gn=[],h.Jp=[],l=0;l<p.length;l++)h.gn[l]=p[l].pb.x,h.Jp[l]=p[l].pb.y;1<Math.abs(f)&&
(a.Ed=8>a.im?a.Ed-f/(2*Math.PI):a.Ed-(0<f?1.7:-2.3),a.lg=a.Ed*k,Cp(a,b,c,d,e))}}function Ep(a,b,c,d,e,f,h){var k=a.Ed,l=a.lg,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.wk;var p=!1;if(0<=c!==(f===Fm)){if(m=b+a,m>k){m=b-a;if(m<-k)return h.x=m,h.y=n,!1;p=!0}}else if(m=b-a,m<-k){m=b+a;if(m>k)return h.x=m,h.y=n,!1;p=!0}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);if(Math.abs(c-n)>(d[e].height+d[e+1].height)/2)return h.x=m,h.y=n,!1;h.x=m;h.y=n;return!0}
function Fp(a,b,c,d,e,f,h){var k=a.Ed,l=a.lg,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.wk;d=!1;if(0<=b!==(f===Fm)){if(n=c-a,n<-l){n=c+a;if(n>l){h.x=m;h.y=n;return}d=!0}}else if(n=c+a,n>l){n=c-a;if(n<-l){h.x=m;h.y=n;return}d=!0}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==d&&(m=-m);h.x=m;h.y=n}qm.prototype.commitLayout=function(){this.commitNodes();this.pt&&this.commitLinks()};
qm.prototype.commitNodes=function(){for(var a=this.pG,b=this.network.vertexes.i;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};qm.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
function wp(a,b,c,d,e){var f=a.eG;if(.001>Math.abs(a.Kn-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var h=0,k=0,k=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1)),l=0,m=0;m<=f;m++)l=void 0!==d&&void 0!==e?d+m*e/f:m*Math.PI/(2*f),l=Math.sin(l),h+=Math.sqrt(1-a*a*l*l)*k;return void 0!==d&&void 0!==e?(b>c?b:c)*h:4*(b>c?b:c)*h}function vp(a,b,c,d,e){var f=0,f=void 0!==d&&void 0!==e?wp(a,1,c,d,e):wp(a,1,c);return b/f}
function xp(a,b,c,d,e){if(.001>Math.abs(a.Kn-1))return e/b;var f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,h=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var k=0;;k++){var l=Math.sin(d+k*a),h=h+(b>c?b:c)*Math.sqrt(1-f*f*l*l)*a;if(h>=e)return k*a}}
qm.prototype.sort=function(a){switch(this.sorting){case tm:break;case Bm:a.reverse();break;case rm:a.sort(this.comparer);break;case sm:a.sort(this.comparer);a.reverse();break;case Cm:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new G(tp),c=0;c<a.length;c++){var e=-1,f=-1;if(0===c)for(var h=0;h<a.length;h++){var k=a.ha(h).gH;k>e&&(e=k,f=h)}else for(h=0;h<a.length;h++)k=b[h],k>e&&(e=k,f=h);d.add(a.ha(f));b[f]=-1;f=a.ha(f);e=0;for(h=f.jc;h.next();)e=a.indexOf(h.value.fromVertex),0>e||0<=b[e]&&
b[e]++;for(f=f.Zb;f.next();)e=a.indexOf(f.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){h=d.ha(b);a[b]=[];for(var l=0,c=h.Zb;c.next();)l=d.indexOf(c.value.toVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(c=h.jc;c.next();)l=d.indexOf(c.value.fromVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}h=[];for(b=0;b<a.length;b++)h[b]=0;for(var c=[],k=[],m=[],e=[],f=new G(tp),n=0,b=0;b<a.length;b++){var p=a[b].length;if(1===p)e.push(b);else if(0===p)f.add(d.ha(b));else{if(0===n)c.push(b);
else{for(var q=Infinity,r=Infinity,s=-1,t=[],p=0;p<c.length;p++)0>a[c[p]].indexOf(c[p===c.length-1?0:p+1])&&t.push(p===c.length-1?0:p+1);if(0===t.length)for(p=0;p<c.length;p++)t.push(p);for(p=0;p<t.length;p++){var u=t[p],x,l=a[b];x=k;for(var y=m,A=h,B=u,I=c,D=0,V=0;V<x.length;V++){var ba=A[x[V]],U=A[y[V]],N=0,Z=0;ba<U?(N=ba,Z=U):(N=U,Z=ba);if(N<B&&B<=Z)for(ba=0;ba<l.length;ba++)U=l[ba],0>I.indexOf(U)||N<A[U]&&A[U]<Z||N===A[U]||Z===A[U]||D++;else for(ba=0;ba<l.length;ba++)U=l[ba],0>I.indexOf(U)||N<
A[U]&&A[U]<Z&&N!==A[U]&&Z!==A[U]&&D++}x=D;for(A=y=0;A<a[b].length;A++)l=c.indexOf(a[b][A]),0<=l&&(l=Math.abs(u-(l>=u?l+1:l)),y+=l<c.length+1-l?l:c.length+1-l);for(A=0;A<k.length;A++)l=h[k[A]],B=h[m[A]],l>=u&&l++,B>=u&&B++,l>B&&(I=B,B=l,l=I),B-l<(c.length+2)/2===(l<u&&u<=B)&&y++;if(x<q||x===q&&y<r)q=x,r=y,s=u}c.splice(s,0,b);for(p=0;p<c.length;p++)h[c[p]]=p;for(p=0;p<a[b].length;p++)q=a[b][p],0<=c.indexOf(q)&&(k.push(b),m.push(q))}n++}}k=!1;for(m=c.length;;){k=!0;for(h=0;h<e.length;h++)if(b=e[h],n=
a[b][0],l=c.indexOf(n),0<=l){for(r=p=0;r<a[n].length;r++)q=a[n][r],q=c.indexOf(q),0>q||q===l||(s=q>l?q-l:l-q,p+=q<l!==s>m-s?1:-1);c.splice(0>p?l:l+1,0,b);e.splice(h,1);h--}else k=!1;if(k)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],f.add(d.ha(l));return f;default:v.k("Invalid sorting type.")}return a};v.defineProperty(qm,{AI:"radius"},function(){return this.Jr},function(a){this.Jr!==a&&(v.j(a,"number",qm,"radius"),0<a||isNaN(a))&&(this.Jr=a,this.G())});
v.defineProperty(qm,{zG:"aspectRatio"},function(){return this.Xp},function(a){this.Xp!==a&&(v.j(a,"number",qm,"aspectRatio"),0<a&&(this.Xp=a,this.G()))});v.defineProperty(qm,{Ne:"startAngle"},function(){return this.os},function(a){this.os!==a&&(v.j(a,"number",qm,"startAngle"),this.os=a,this.G())});v.defineProperty(qm,{Sf:"sweepAngle"},function(){return this.qs},function(a){this.qs!==a&&(v.j(a,"number",qm,"sweepAngle"),this.qs=0<a&&360>=a?a:360,this.G())});
v.defineProperty(qm,{Ff:"arrangement"},function(){return this.gd},function(a){this.gd!==a&&(v.qb(a,qm,qm,"arrangement"),a===Km||a===Jm||a===Im||a===Hm)&&(this.gd=a,this.G())});v.defineProperty(qm,{direction:"direction"},function(){return this.na},function(a){this.na!==a&&(v.qb(a,qm,qm,"direction"),a===Fm||a===Gm||a===Dm||a===Em)&&(this.na=a,this.G())});
v.defineProperty(qm,{sorting:"sorting"},function(){return this.Nh},function(a){this.Nh!==a&&(v.qb(a,qm,qm,"sorting"),a===tm||a===Bm||a===rm||sm||a===Cm)&&(this.Nh=a,this.G())});v.defineProperty(qm,{comparer:"comparer"},function(){return this.th},function(a){this.th!==a&&(v.j(a,"function",qm,"comparer"),this.th=a,this.G())});v.defineProperty(qm,{spacing:"spacing"},function(){return this.Oh},function(a){this.Oh!==a&&(v.j(a,"number",qm,"spacing"),this.Oh=a,this.G())});
v.defineProperty(qm,{$w:"nodeDiameterFormula"},function(){return this.yr},function(a){this.yr!==a&&(v.qb(a,qm,qm,"nodeDiameterFormula"),a===Mm||a===Lm)&&(this.yr=a,this.G())});v.u(qm,{qG:"actualXRadius"},function(){return this.Ed});v.u(qm,{rG:"actualYRadius"},function(){return this.lg});v.u(qm,{sJ:"actualSpacing"},function(){return this.wk});v.u(qm,{pG:"actualCenter"},function(){return isNaN(this.Ud.x)||isNaN(this.Ud.y)?new w(0,0):new w(this.Ud.x+this.qG,this.Ud.y+this.rG)});var Jm;
qm.ConstantSpacing=Jm=v.p(qm,"ConstantSpacing",0);var Im;qm.ConstantDistance=Im=v.p(qm,"ConstantDistance",1);var Hm;qm.ConstantAngle=Hm=v.p(qm,"ConstantAngle",2);var Km;qm.Packed=Km=v.p(qm,"Packed",3);var Fm;qm.Clockwise=Fm=v.p(qm,"Clockwise",4);var Gm;qm.Counterclockwise=Gm=v.p(qm,"Counterclockwise",5);var Dm;qm.BidirectionalLeft=Dm=v.p(qm,"BidirectionalLeft",6);var Em;qm.BidirectionalRight=Em=v.p(qm,"BidirectionalRight",7);var tm;qm.Forwards=tm=v.p(qm,"Forwards",8);var Bm;
qm.Reverse=Bm=v.p(qm,"Reverse",9);var rm;qm.Ascending=rm=v.p(qm,"Ascending",10);var sm;qm.Descending=sm=v.p(qm,"Descending",11);var Cm;qm.Optimized=Cm=v.p(qm,"Optimized",12);var Mm;qm.Pythagorean=Mm=v.p(qm,"Pythagorean",13);var Lm;qm.Circular=Lm=v.p(qm,"Circular",14);function rp(){this.To=-Infinity;this.Jp=this.gn=null}
rp.prototype.compare=function(a,b){if(0<a&&0>this.To||Math.abs(a)<Math.abs(this.To)&&!(0>a&&0<this.To)){this.To=a;this.gn=[];this.Jp=[];for(var c=0;c<b.length;c++)this.gn[c]=b[c].pb.x,this.Jp[c]=b[c].pb.y}};rp.prototype.commit=function(a){if(null!==this.gn&&null!==this.Jp)for(var b=0;b<this.gn.length;b++){var c=a.ha(b);c.x=this.gn[b];c.y=this.Jp[b]}};function sp(){wa.call(this)}v.Ga(sp,wa);v.ga("CircularNetwork",sp);sp.prototype.createVertex=function(){return new tp};sp.prototype.createEdge=function(){return new Gp};
function tp(){ya.call(this);this.actualAngle=this.diameter=NaN}v.Ga(tp,ya);v.ga("CircularVertex",tp);
function up(a,b){var c=a.network;if(null===c)return NaN;c=c.Pb;if(null===c)return NaN;if(c.Ff===Km)if(c.$w===Lm)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.$w===Lm?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function Gp(){Aa.call(this)}v.Ga(Gp,Aa);v.ga("CircularEdge",Gp);
function Hp(){0<arguments.length&&v.dd(Hp);Me.call(this);this.kg=null;this.Yq=0;this.Wf=(new ia(100,100)).freeze();this.Wp=!1;this.Lh=!0;this.sh=!1;this.co=100;this.yq=1;this.Ch=1E3;this.Kr=Math;this.Dn=.05;this.Cn=50;this.zn=150;this.Bn=0;this.qq=10;this.pq=5}v.Ga(Hp,Me);v.ga("ForceDirectedLayout",Hp);
Hp.prototype.cloneProtected=function(a){Me.prototype.cloneProtected.call(this,a);a.Wf.assign(this.Wf);a.Wp=this.Wp;a.Lh=this.Lh;a.sh=this.sh;a.co=this.co;a.yq=this.yq;a.Ch=this.Ch;a.Kr=this.Kr;a.Dn=this.Dn;a.Cn=this.Cn;a.zn=this.zn;a.Bn=this.Bn;a.qq=this.qq;a.pq=this.pq};Hp.prototype.createNetwork=function(){return new Ip};
Hp.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.Zz;if(0<this.network.vertexes.count){this.network.yw();for(var b=this.network.vertexes.i;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.i;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.lz();this.Yq=0;if(this.needsClusterLayout()){b=this.network;for(c=b.aJ().i;c.next();){this.network=c.value;for(var d=this.network.vertexes.i;d.next();){var e=d.value;e.Rf=e.vertexes.count;e.ak=1;e.Gm=null;e.lh=null}Jp(this,0,a)}this.network=b;c.reset();for(var d=this.wD,f=c.count,h=!0,k=e=0,l=v.jb(),m=0;m<f+b.vertexes.count+2;m++)l[m]=null;f=0;c.reset();for(var n=v.Uf();c.next();)if(m=c.value,this.Ug(m,n),h)h=!1,e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new w(n.x+n.width+d.width,n.y),l[1]=new w(n.x,
n.y+n.height+d.height),f=2;else{var p=Kp(l,f,e,k,n.width,n.height,d),q=l[p],r=new w(q.x+n.width+d.width,q.y),s=new w(q.x,q.y+n.height+d.height);p+1<f&&l.splice(p+1,0,null);l[p]=r;l[p+1]=s;f++;p=q.x-n.x;q=q.y-n.y;for(m=m.vertexes.i;m.next();)r=m.value,r.oa+=p,r.va+=q}v.fc(n);for(m=b.vertexes.i;m.next();)h=m.value,n=h.pb,2>f?(e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new w(n.x+n.width+d.width,n.y),l[1]=new w(n.x,n.y+n.height+d.height),f=2):(p=Kp(l,f,e,k,n.width,n.height,d),q=l[p],r=new w(q.x+n.width+d.width,
q.y),s=new w(q.x,q.y+n.height+d.height),p+1<f&&l.splice(p+1,0,null),l[p]=r,l[p+1]=s,f++,h.oa=q.x+h.width/2,h.va=q.y+h.height/2);v.ra(l);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.i;e.next();)b.Xk(e.value);for(d=d.edges.i;d.next();)b.Bo(d.value)}}Lp(this,a);this.updateParts()}this.co=a;this.network=null;this.sf=!0};
Hp.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().pb,d=this.network.vertexes.i;d.next();){if(d.value.pb.tg(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};Hp.prototype.Ug=function(a,b){for(var c=!0,d=a.vertexes.i;d.next();){var e=d.value;c?(c=!1,b.set(e.pb)):b.bi(e.pb)}return b};
function Jp(a,b,c){if(Mp(a,b)){var d=a.Ch;a.Ch*=1+1/(b+1);var e=Np(a,b),f=Math.max(0,Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10));a.Zz+=f;Jp(a,b+1,c);Lp(a,f);Op(a,e);b=a.kg;null===b?b=new G(Pp):b.clear();b.Yc(e.vertexes);b.sort(function(a,b){return null===a||null===b||a===b?0:b.Rf-a.Rf});for(e=b.i;e.next();)Qp(a,e.value);a.Ch=d}}
function Mp(a,b){if(10<b||3>a.network.vertexes.count)return!1;null===a.kg?a.kg=new G(Pp):a.kg.clear();a.kg.Yc(a.network.vertexes);var c=a.kg;c.sort(function(a,b){return null===a||null===b||a===b?0:b.Rf-a.Rf});for(var d=c.count-1;0<=d&&1>=c.ha(d).Rf;)d--;return 1<c.count-d}
function Np(a,b){for(var c=a.network,d=new Ip,e=a.kg.i;e.next();){var f=e.value;if(1<f.Rf){d.Xk(f);var h=new Rp;h.Hx=f.Rf;h.Kx=f.width;h.Gx=f.height;h.TA=f.N.x;h.UA=f.N.y;null===f.lh&&(f.lh=new G(Rp));f.lh.add(h);f.wA=f.lh.count-1}else break}for(var k=c.edges.i;k.next();)if(e=k.value,e.fromVertex.network===d&&e.toVertex.network===d)d.Bo(e);else if(e.fromVertex.network===d){var l=e.fromVertex.Gm;null===l&&(l=new G(Pp),e.fromVertex.Gm=l);l.add(e.toVertex);e.fromVertex.Rf--;e.fromVertex.ak+=e.toVertex.ak}else e.toVertex.network===
d&&(l=e.toVertex.Gm,null===l&&(l=new G(Pp),e.toVertex.Gm=l),l.add(e.fromVertex),e.toVertex.Rf--,e.toVertex.ak+=e.fromVertex.ak);for(e=d.edges.i;e.next();)f=e.value,f.length*=Math.max(1,K.sqrt((f.fromVertex.ak+f.toVertex.ak)/(4*b+1)));for(e=d.vertexes.i;e.next();)if(f=e.value,l=f.Gm,null!==l&&0<l.count&&(h=f.lh.ha(f.lh.count-1),h=h.Hx-f.Rf,!(0>=h))){for(var m=0,n=0,p=l.count-h;p<l.count;p++){for(var q=l.ha(p),r=null,k=q.edges.i;k.next();){var s=k.value;if(s.tH(q)===f){r=s;break}}null!==r&&(n+=r.length,
m+=q.width*q.height)}l=f.oa;k=f.va;p=f.width;q=f.height;r=f.N;s=p*q;1>s&&(s=1);m=K.sqrt((m+s+n*n*4/(h*h))/s);h=(m-1)*p/2;m=(m-1)*q/2;f.pb=new z(l-r.x-h,k-r.y-m,p+2*h,q+2*m);f.focus=new w(r.x+h,r.y+m)}a.network=d;return c}function Op(a,b){for(var c=a.network.vertexes.i;c.next();){var d=c.value;d.network=b;if(null!==d.lh){var e=d.lh.ha(d.wA);d.Rf=e.Hx;var f=e.TA,h=e.UA;d.pb=new z(d.oa-f,d.va-h,e.Kx,e.Gx);d.focus=new w(f,h);d.wA--}}for(c=a.network.edges.i;c.next();)c.value.network=b;a.network=b}
function Qp(a,b){var c=b.Gm;if(null!==c&&0!==c.count){var d=b.oa,e=b.va,f=b.width,h=b.height;null!==b.lh&&0<b.lh.count&&(h=b.lh.ha(0),f=h.Kx,h=h.Gx);for(var f=K.sqrt(f*f+h*h)/2,k=!1,l=h=0,m=0,n=b.vertexes.i;n.next();){var p=n.value;1>=p.Rf?l++:(k=!0,m++,h+=Math.atan2(b.va-p.va,b.oa-p.oa))}if(0!==l)for(0<m&&(h/=m),n=m=0,m=k?2*Math.PI/(l+1):2*Math.PI/l,0===l%2&&(n=m/2),1<c.count&&c.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),k=0===l%2?0:1,c=c.i;c.next();)if(l=
c.value,!(1<l.Rf||a.isFixed(l))){for(var p=null,q=l.edges.i;q.next();){p=q.value;break}var q=l.width,r=l.height,q=K.sqrt(q*q+r*r)/2,p=f+p.length+q,q=h+(m*(k/2>>1)+n)*(0===k%2?1:-1);l.oa=d+p*Math.cos(q);l.va=e+p*Math.sin(q);k++}}}function Kp(a,b,c,d,e,f,h){var k=9E19,l=-1,m=0;a:for(;m<b;m++){var n=a[m],p=n.x-c,q=n.y-d,p=p*p+q*q;if(p<k){for(q=m-1;0<=q;q--)if(a[q].y>n.y&&a[q].x-n.x<e+h.width)continue a;for(q=m+1;q<b;q++)if(a[q].x>n.x&&a[q].y-n.y<f+h.height)continue a;l=m;k=p}}return l}
Hp.prototype.lz=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Hp.prototype.addComments=function(a){var b=a.Dc;if(null!==b)for(b=b.ZD();b.next();){var c=b.value;if("Comment"===c.Mc&&c.isVisible()){var d=this.network.Qm(c);null===d&&(d=this.network.Hs(c));d.charge=this.VG;for(var c=null,e=d.Zb;e.next();){var f=e.value;if(f.toVertex===a){c=f;break}}if(null===c)for(e=d.jc;e.next();)if(f=e.value,f.fromVertex===a){c=f;break}null===c&&(c=this.network.hp(a,d,null));c.length=this.WG}}};
function Zp(a,b){var c=a.ca,d=c.x,e=c.y,f=c.width,c=c.height,h=b.ca,k=h.x,l=h.y,m=h.width,h=h.height;return d+f<k?e>l+h?(d=d+f-k,e=e-l-h,K.sqrt(d*d+e*e)):e+c<l?(d=d+f-k,e=e+c-l,K.sqrt(d*d+e*e)):k-(d+f):d>k+m?e>l+h?(d=d-k-m,e=e-l-h,K.sqrt(d*d+e*e)):e+c<l?(d=d-k-m,e=e+c-l,K.sqrt(d*d+e*e)):d-(k+m):e>l+h?e-(l+h):e+c<l?l-(e+c):.1}function Lp(a,b){a.kg=null;for(var c=a.Yq+b;a.Yq<c&&(a.Yq++,cq(a)););a.kg=null}
function cq(a){null===a.kg&&(a.kg=new G(Pp),a.kg.Yc(a.network.vertexes));var b=a.kg.n;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.oa,e=d,f=c.va,h=f,c=1;c<b.length;c++){var k=b[c];k.forceX=0;k.forceY=0;var l=k.oa,k=k.va,d=Math.min(d,l),e=Math.max(e,l),f=Math.min(f,k),h=Math.max(h,k)}(f=e-d>h-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.oa-b.oa}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.va-b.va});for(var h=a.Ch,m=0,n=0,p=0,c=0;c<b.length;c++){var k=
b[c],l=k.ca,q=k.N,d=l.x+q.x,l=l.y+q.y,n=k.charge*a.electricalFieldX(d,l),p=k.charge*a.electricalFieldY(d,l),n=n+k.mass*a.gravitationalFieldX(d,l),p=p+k.mass*a.gravitationalFieldY(d,l);k.forceX+=n;k.forceY+=p;for(q=c+1;q<b.length;q++)if(e=b[q],e!==k){var r=e.ca,n=e.N,p=r.x+n.x,r=r.y+n.y;if(d-p>h||p-d>h){if(f)break}else if(l-r>h||r-l>h){if(!f)break}else{var s=Zp(k,e);1>s?(n=a.jx,null===n&&(a.jx=n=new Fa(0)),m=n.random(),s=n.random(),d>p?(n=Math.abs(e.ca.right-k.ca.x),n=(1+n)*m):d<p?(n=Math.abs(e.ca.x-
k.ca.right),n=-(1+n)*m):(n=Math.max(e.width,k.width),n=(1+n)*m-n/2),l>r?(p=Math.abs(e.ca.bottom-k.ca.y),p=(1+p)*s):d<p?(p=Math.abs(e.ca.y-k.ca.bottom),p=-(1+p)*s):(p=Math.max(e.height,k.height),p=(1+p)*s-p/2)):(m=-(k.charge*e.charge)/(s*s),n=(p-d)/s*m,p=(r-l)/s*m);k.forceX+=n;k.forceY+=p;e.forceX-=n;e.forceY-=p}}}for(c=a.network.edges.i;c.next();)f=c.value,k=f.fromVertex,e=f.toVertex,l=k.ca,q=k.N,d=l.x+q.x,l=l.y+q.y,r=e.ca,n=e.N,p=r.x+n.x,r=r.y+n.y,s=Zp(k,e),1>s?(n=a.jx,null===n&&(a.jx=n=new Fa(0)),
m=n.random(),s=n.random(),n=(d>p?1:-1)*(1+(e.width>k.width)?e.width:k.width)*m,p=(l>r?1:-1)*(1+(e.height>k.height)?e.height:k.height)*s):(m=f.stiffness*(s-f.length),n=(p-d)/s*m,p=(r-l)/s*m),k.forceX+=n,k.forceY+=p,e.forceX-=n,e.forceY-=p;c=0;d=Math.max(a.Ch/20,50);for(e=0;e<b.length;e++)k=b[e],a.isFixed(k)?a.moveFixedVertex(k):(f=k.forceX,h=k.forceY,f<-d?f=-d:f>d&&(f=d),h<-d?h=-d:h>d&&(h=d),k.oa+=f,k.va+=h,c=Math.max(c,f*f+h*h));return c>a.WD*a.WD}Hp.prototype.moveFixedVertex=function(){};
Hp.prototype.commitLayout=function(){this.BA();this.commitNodes();this.pt&&this.commitLinks()};Hp.prototype.BA=function(){if(this.Cp)for(var a=this.network.edges.i;a.next();){var b=a.value.link;null!==b&&(b.Ab=yc,b.Bb=yc)}};Hp.prototype.commitNodes=function(){var a=0,b=0;if(this.yG){var c=v.Uf();this.Ug(this.network,c);b=this.Ud;a=b.x-c.x;b=b.y-c.y;v.fc(c)}for(var c=v.Uf(),d=this.network.vertexes.i;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.pb),c.x+=a,c.y+=b,e.pb=c;e.commit()}v.fc(c)};
Hp.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};Hp.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.Dn:a};Hp.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.Cn:a};Hp.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.zn:a};Hp.prototype.electricalFieldX=function(){return 0};Hp.prototype.electricalFieldY=function(){return 0};
Hp.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.Bn:a};Hp.prototype.gravitationalFieldX=function(){return 0};Hp.prototype.gravitationalFieldY=function(){return 0};Hp.prototype.isFixed=function(a){return a.isFixed};v.u(Hp,{UJ:"currentIteration"},function(){return this.Yq});v.defineProperty(Hp,{wD:"arrangementSpacing"},function(){return this.Wf},function(a){v.C(a,ia,Hp,"arrangementSpacing");this.Wf.L(a)||(this.Wf.assign(a),this.G())});
v.defineProperty(Hp,{yG:"arrangesToOrigin"},function(){return this.Wp},function(a){this.Wp!==a&&(v.j(a,"boolean",Hp,"arrangesToOrigin"),this.Wp=a,this.G())});v.defineProperty(Hp,{Cp:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(v.j(a,"boolean",Hp,"setsPortSpots"),this.Lh=a,this.G())});v.defineProperty(Hp,{comments:"comments"},function(){return this.sh},function(a){this.sh!==a&&(v.j(a,"boolean",Hp,"comments"),this.sh=a,this.G())});
v.defineProperty(Hp,{Zz:"maxIterations"},function(){return this.co},function(a){this.co!==a&&(v.j(a,"number",Hp,"maxIterations"),0<=a&&(this.co=a,this.G()))});v.defineProperty(Hp,{WD:"epsilonDistance"},function(){return this.yq},function(a){this.yq!==a&&(v.j(a,"number",Hp,"epsilonDistance"),0<a&&(this.yq=a,this.G()))});v.defineProperty(Hp,{mK:"infinityDistance"},function(){return this.Ch},function(a){this.Ch!==a&&(v.j(a,"number",Hp,"infinityDistance"),1<a&&(this.Ch=a,this.G()))});
v.defineProperty(Hp,{jx:"randomNumberGenerator"},function(){return this.Kr},function(a){this.Kr!==a&&(null!==a&&"function"!==typeof a.random&&v.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.Kr=a)});v.defineProperty(Hp,{gK:"defaultSpringStiffness"},function(){return this.Dn},function(a){this.Dn!==a&&(v.j(a,"number",Hp,"defaultSpringStiffness"),this.Dn=a,this.G())});
v.defineProperty(Hp,{fK:"defaultSpringLength"},function(){return this.Cn},function(a){this.Cn!==a&&(v.j(a,"number",Hp,"defaultSpringLength"),this.Cn=a,this.G())});v.defineProperty(Hp,{$J:"defaultElectricalCharge"},function(){return this.zn},function(a){this.zn!==a&&(v.j(a,"number",Hp,"defaultElectricalCharge"),this.zn=a,this.G())});v.defineProperty(Hp,{aK:"defaultGravitationalMass"},function(){return this.Bn},function(a){this.Bn!==a&&(v.j(a,"number",Hp,"defaultGravitationalMass"),this.Bn=a,this.G())});
v.defineProperty(Hp,{WG:"defaultCommentSpringLength"},function(){return this.qq},function(a){this.qq!==a&&(v.j(a,"number",Hp,"defaultCommentSpringLength"),this.qq=a,this.G())});v.defineProperty(Hp,{VG:"defaultCommentElectricalCharge"},function(){return this.pq},function(a){this.pq!==a&&(v.j(a,"number",Hp,"defaultCommentElectricalCharge"),this.pq=a,this.G())});function Rp(){this.UA=this.TA=this.Gx=this.Kx=this.Hx=0}function Ip(){wa.call(this)}v.Ga(Ip,wa);v.ga("ForceDirectedNetwork",Ip);
Ip.prototype.createVertex=function(){return new Pp};Ip.prototype.createEdge=function(){return new dq};function Pp(){ya.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.ak=this.Rf=this.forceY=this.forceX=0;this.lh=this.Gm=null;this.wA=0}v.Ga(Pp,ya);v.ga("ForceDirectedVertex",Pp);function dq(){Aa.call(this);this.length=this.stiffness=NaN}v.Ga(dq,Aa);v.ga("ForceDirectedEdge",dq);
function hm(){0<arguments.length&&v.dd(hm);Me.call(this);this.Dd=this.am=25;this.na=0;this.yn=eq;this.ao=fq;this.Sn=gq;this.Yl=4;this.mn=hq;this.Bi=iq;this.Lh=!0;this.cr=4;this.Gb=this.kv=this.ob=-1;this.Af=this.nr=0;this.Lb=this.zf=this.bg=this.Jg=this.Pd=null;this.ur=0;this.tr=this.gm=null;this.fg=0;this.vr=null;this.Lg=[];this.Lg.length=100}v.Ga(hm,Me);v.ga("LayeredDigraphLayout",hm);
hm.prototype.cloneProtected=function(a){Me.prototype.cloneProtected.call(this,a);a.am=this.am;a.Dd=this.Dd;a.na=this.na;a.yn=this.yn;a.ao=this.ao;a.Sn=this.Sn;a.Yl=this.Yl;a.mn=this.mn;a.Bi=this.Bi;a.Lh=this.Lh;a.cr=this.cr};hm.prototype.createNetwork=function(){return new jq};
hm.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Ud=this.initialOrigin(this.Ud);this.kv=-1;this.Af=this.nr=0;this.vr=this.tr=this.gm=null;for(a=0;a<this.Lg.length;a++)this.Lg[a]=null;if(0<this.network.vertexes.count){this.network.yw();for(a=this.network.edges.i;a.next();)a.value.rev=!1;switch(this.yn){default:case kq:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.i;d.next();)d.value.valid=!0;for(;null!==lq(this.network);){for(d=mq(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=mq(this.network);for(d=nq(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=nq(this.network);for(var d=null,e=0,f=this.network.vertexes.i;f.next();){var h=f.value;if(h.valid){for(var k=0,l=h.Zb;l.next();)l.value.toVertex.valid&&k++;for(var l=0,m=h.jc;m.next();)m.value.fromVertex.valid&&l++;if(null===d||e<k-l)d=h,e=k-l}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.i;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.nx(b),b.rev=!0);break;case eq:for(b=this.network.vertexes.i;b.next();)a=b.value,a.Oo=-1,a.finish=-1;for(a=this.network.edges.i;a.next();)a.value.forest=!1;this.ur=0;for(b.reset();b.next();)c=b.value,0===c.jc.count&&oq(this,c);for(b.reset();b.next();)c=b.value,-1===c.Oo&&oq(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,f=e.finish,e.Oo<c.Oo&&d<f&&(this.network.nx(b),b.rev=!0))}for(a=this.network.vertexes.i;a.next();)a.value.layer=-1;this.ob=-1;this.assignLayers();for(a.reset();a.next();)this.ob=Math.max(this.ob,a.value.layer);a=[];for(c=this.network.edges.i;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.rd&&null!==b.toVertex.rd||b.fromVertex.layer!==b.toVertex.layer)){l=h=k=f=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){k=b.link;
if(null===k)continue;var n=e.rd,f=d.rd;if(null===n||null===f)continue;var p=k.U,h=k.ba,q=k.$c,l=k.Bd;b.rev&&(k=p,m=q,p=h,q=l,h=k,l=m);var r=e.N,k=b.toVertex.N,s=b.rev?d.ca:e.ca,m=v.M();s.H()?(Zn(p,q,Kb,m),m.H()||m.assign(r)):m.assign(r);n!==p&&s.H()&&p.isVisible()&&(n=e.ca,n.H()&&(m.x+=s.x-n.x,m.y+=s.y-n.y));p=b.rev?e.ca:d.ca;n=v.M();p.H()?(Zn(h,l,Kb,n),n.H()||n.assign(k)):n.assign(k);f!==h&&p.H()&&h.isVisible()&&(f=d.ca,f.H()&&(n.x+=p.x-f.x,n.y+=p.y-f.y));90===this.na||270===this.na?(f=Math.round((m.x-
r.x)/this.Dd),h=m.x,k=Math.round((n.x-k.x)/this.Dd),l=n.x):(f=Math.round((m.y-r.y)/this.Dd),h=m.y,k=Math.round((n.y-k.y)/this.Dd),l=n.y);v.v(m);v.v(n);b.portFromColOffset=f;b.portFromPos=h;b.portToColOffset=k;b.portToPos=l}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;m=e.layer;r=d.layer;n=b;p=0;s=n.link;if(null!==s){var t=s.$c,u=s.Bd;if(null!==t&&null!==u){var x=s.U,q=s.ba;if(null!==x&&null!==q){var y=t.Ab,A=u.Bb;this.Cp||(s.Ab.Oc()||(y=s.Ab),s.Bb.Oc()||(A=s.Bb));if(y.Oc()||
y===xb)y=pq(this,!0);if(A.Oc()||A===xb)A=pq(this,!1);var B=s.hc,I=s.getLinkPoint(x,t,y,!0,B,q,u,v.M()),y=s.getLinkDirection(x,t,I,y,!0,B,q,u);v.v(I);y===qq(this,n,!0)?p+=1:this.Cp&&null!==x&&1===x.ports.count&&n.rev&&(p+=1);I=s.getLinkPoint(q,u,A,!1,B,x,t,v.M());s=s.getLinkDirection(q,u,I,A,!1,B,x,t);v.v(I);s===qq(this,n,!1)?p+=2:this.Cp&&null!==q&&1===q.ports.count&&n.rev&&(p+=2)}}}n=1===p||3===p?!0:!1;if(p=2===p||3===p?!0:!1)q=this.network.createVertex(),q.rd=null,q.Dm=1,q.layer=m,q.near=e,this.network.Xk(q),
e=this.network.hp(e,q,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=h,e.portToPos=0,e=q;s=1;n&&s--;if(m-r>s&&0<m){b.valid=!1;q=this.network.createVertex();q.rd=null;q.Dm=2;q.layer=m-1;this.network.Xk(q);e=this.network.hp(e,q,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=p?0:f;e.portToColOffset=0;e.portFromPos=p?0:h;e.portToPos=0;e=q;for(m--;m-r>s&&0<m;)q=this.network.createVertex(),q.rd=null,q.Dm=3,q.layer=m-1,this.network.Xk(q),e=this.network.hp(e,q,
b.link),e.valid=!0,e.rev=b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=q,m--;e=this.network.hp(q,d,b.link);e.valid=!n;n&&(q.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=k;e.portFromPos=0;e.portToPos=l}else b.valid=!0}b=this.Pd=[];for(c=0;c<=this.ob;c++)b[c]=0;for(a=this.network.vertexes.i;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.kv=-1;for(c=this.Af=this.nr=0;c<=this.ob;c++)b[c]>b[this.Af]&&(this.kv=b[c]-1,this.Af=c),b[c]<b[this.nr]&&
(this.nr=c);this.vr=[];for(c=0;c<b.length;c++)this.vr[c]=[];for(a.reset();a.next();)b=a.value,c=this.vr[b.layer],c[b.index]=b;this.Gb=-1;for(a=0;a<=this.ob;a++){b=rq(this,a);c=0;d=this.Pd[a];for(e=0;e<d;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.Gb=Math.max(this.Gb,c-1);sq(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.sf=!0};
hm.prototype.linkMinLength=function(a){var b=a.toVertex,c=0;for(a=a.fromVertex.Zb;a.next();)a.value.toVertex===b&&c++;return 1<c?2:1};function tq(a){var b=a.fromVertex.rd;a=a.toVertex.rd;return null===b&&null===a?8:null===b||null===a?4:1}hm.prototype.nodeMinLayerSpace=function(a,b){return null===a.rd?0:90===this.na||270===this.na?b?a.N.y+10:a.ca.height-a.N.y+10:b?a.N.x+10:a.ca.width-a.N.x+10};
hm.prototype.nodeMinColumnSpace=function(a,b){if(null===a.rd)return 0;var c=b?a.gA:a.fA;if(null!==c)return c;c=this.na;return 90===c||270===c?b?a.gA=a.N.x/this.Dd+1|0:a.fA=(a.ca.width-a.N.x)/this.Dd+1|0:b?a.gA=a.N.y/this.Dd+1|0:a.fA=(a.ca.height-a.N.y)/this.Dd+1|0};function uq(a){null===a.gm&&(a.gm=[]);for(var b=0,c=a.network.vertexes.i;c.next();){var d=c.value;a.gm[b]=d.layer;b++;a.gm[b]=d.column;b++;a.gm[b]=d.index;b++}return a.gm}
function vq(a,b){for(var c=0,d=a.network.vertexes.i;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function wq(a,b,c){var d=rq(a,b),e=a.Pd[b];if(null===a.tr||a.tr.length<e*e)a.tr=[];for(var f=a.tr,h=0;h<e;h++){var k=0,l=d[h],m=l.near,n=0;if(null!==m&&m.layer===l.layer)if(n=m.index,n>h)for(var p=h+1;p<n;p++)l=d[p],l.near===m&&l.Dm===m.Dm||k++;else for(p=h-1;p>n;p--)l=d[p],l.near===m&&l.Dm===m.Dm||k++;var m=0,q,r=q=p=l=0,s,t=0,u=0;s=0;var x;if(0<=c)for(n=d[h].Me,m=0;m<n.count;m++)if(q=n.n[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=
n.n[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,u=s.portToPos,s=s.portFromPos,p<u&&(l>t||l===t&&q>s)&&k++,u<p&&(t>l||t===l&&s>q)&&k++);if(0>=c)for(n=d[h].He,m=0;m<n.count;m++)if(q=n.n[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.n[r],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,s=s.portFromPos,q<s&&(l>t||l===t&&p>u)&&k++,s<q&&(t>l||t===l&&u>p)&&k++);f[h*e+h]=k;for(n=h+1;n<e;n++){var y=0,A=0;if(0<=c)for(k=
d[h].Me,x=d[n].Me,m=0;m<k.count;m++)if(q=k.n[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,q=q.portFromPos,r=0;r<x.count;r++)s=x.n[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,s=s.portFromPos,(l<t||l===t&&q<s)&&A++,(t<l||t===l&&s<q)&&y++);if(0>=c)for(k=d[h].He,x=d[n].He,m=0;m<k.count;m++)if(q=k.n[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,r=0;r<x.count;r++)s=x.n[r],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,(l<t||l===t&&p<
u)&&A++,(t<l||t===l&&u<p)&&y++);f[h*e+n]=y;f[n*e+h]=A}}sq(a,b,d);return f}hm.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.ob;b++)for(var c=wq(this,b,1),d=this.Pd[b],e=0;e<d;e++)for(var f=e;f<d;f++)a+=c[e*d+f];return a};
function xq(a){for(var b=0,c=0;c<=a.ob;c++){for(var d=a,e=c,f=rq(d,e),h=d.Pd[e],k=0,l=0;l<h;l++){var m=null,m=f[l].He,n,p=0,q=0;if(null!==m)for(var r=0;r<m.count;r++)n=m.n[r],n.valid&&n.toVertex.layer!==e&&(p=n.fromVertex.column+n.portFromColOffset,q=n.toVertex.column+n.portToColOffset,k+=(Math.abs(p-q)+1)*tq(n))}sq(d,e,f);b+=k}return b}
hm.prototype.normalize=function(){var a=Infinity;this.Gb=-1;for(var b=this.network.vertexes.i;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.Gb=Math.max(this.Gb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.Gb-=a};
function yq(a,b,c){for(var d=rq(a,b),e=a.Pd[b],f=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Me);var m=null;0<=c&&(m=k.He);var n=0,p=0,q=k.near;null!==q&&q.layer===k.layer&&(n+=q.column-1,p++);if(null!==l)for(q=0;q<l.count;q++){var k=l.n[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(n+=r.column+k.portFromColOffset,p++)}if(null!==m)for(l=0;l<m.count;l++)k=m.n[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(n+=q.column+k.portToColOffset,p++);f[h]=0===p?-1:n/p}sq(a,b,d);return f}
function zq(a,b,c){for(var d=rq(a,b),e=a.Pd[b],f=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Me);var m=null;0<=c&&(m=k.He);var n=0,p=[],q=k.near;null!==q&&q.layer===k.layer&&(p[n]=q.column-1,n++);if(null!==l)for(q=0;q<l.count;q++){var k=l.n[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(p[n]=r.column+k.portFromColOffset,n++)}if(null!==m)for(l=0;l<m.count;l++)k=m.n[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(p[n]=q.column+k.portToColOffset,n++);0===n?f[h]=-1:(p.sort(function(a,b){return a-b}),
m=n>>1,f[h]=n&1?p[m]:p[m-1]+p[m]>>1)}sq(a,b,d);return f}function Aq(a,b,c,d,e,f){if(b.component===d){b.component=c;var h=0,k=0;if(e)for(var l=b.Zb;l.next();){var k=l.value,m=k.toVertex,h=b.layer-m.layer,k=a.linkMinLength(k);h===k&&Aq(a,m,c,d,e,f)}if(f)for(l=b.jc;l.next();)k=l.value,m=k.fromVertex,h=m.layer-b.layer,k=a.linkMinLength(k),h===k&&Aq(a,m,c,d,e,f)}}
function Bq(a,b,c,d,e,f){if(b.component===d){b.component=c;if(e)for(var h=b.Zb;h.next();)Bq(a,h.value.toVertex,c,d,e,f);if(f)for(b=b.jc;b.next();)Bq(a,b.value.fromVertex,c,d,e,f)}}function lq(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid)return b}return null}function mq(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.Zb;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function nq(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.jc;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function oq(a,b){b.Oo=a.ur;a.ur++;for(var c=b.Zb;c.next();){var d=c.value,e=d.toVertex;-1===e.Oo&&(d.forest=!0,oq(a,e))}b.finish=a.ur;a.ur++}
hm.prototype.assignLayers=function(){switch(this.ao){case Cq:Dq(this);break;case Eq:for(var a=0,b=this.network.vertexes.i;b.next();)a=Fq(this,b.value),this.ob=Math.max(a,this.ob);for(b.reset();b.next();)a=b.value,a.layer=this.ob-a.layer;break;default:case fq:Dq(this);for(b=this.network.vertexes.i;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.jc.count&&Gq(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.ob=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.ob=Math.max(this.ob,c.layer)}}};function Dq(a){for(var b=a.network.vertexes.i;b.next();){var c=Hq(a,b.value);a.ob=Math.max(c,a.ob)}}function Hq(a,b){var c=0;if(-1===b.layer){for(var d=b.Zb;d.next();)var e=d.value,f=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Hq(a,f)+e);b.layer=c}else c=b.layer;return c}function Fq(a,b){var c=0;if(-1===b.layer){for(var d=b.jc;d.next();)var e=d.value,f=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Fq(a,f)+e);b.layer=c}else c=b.layer;return c}
function Gq(a,b){if(!b.valid){b.valid=!0;for(var c=b.Zb;c.next();)Gq(a,c.value.toVertex);for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(var d=b.Me.n,e=d.length,f=0;f<e;f++){var h=d[f],k=a.linkMinLength(h);h.fromVertex.layer-h.toVertex.layer>k&&Aq(a,h.fromVertex,0,-1,!0,!1)}for(Aq(a,b,1,-1,!0,!0);0!==b.component;){for(var k=0,d=Infinity,l=0,m=null,n=a.network.vertexes.i;n.next();){var p=n.value;if(1===p.component){for(var q=0,r=!1,s=p.Me.n,e=s.length,f=0;f<e;f++){var h=s[f],t=h.fromVertex,
q=q+1;1!==t.component&&(k+=1,t=t.layer-p.layer,h=a.linkMinLength(h),d=Math.min(d,t-h))}h=p.He.n;e=h.length;for(f=0;f<e;f++)s=h[f].toVertex,q-=1,1!==s.component?k-=1:r=!0;(null===m||q<l)&&!r&&(m=p,l=q)}}if(0<k){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else m.component=0}for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(Aq(a,b,1,-1,!0,!1);0!==b.component;){f=0;e=Infinity;d=0;k=null;for(l=a.network.vertexes.i;l.next();)if(m=l.value,1===m.component){n=
0;p=!1;h=m.Me.n;q=h.length;for(r=0;r<q;r++)s=h[r].fromVertex,n+=1,1!==s.component?f+=1:p=!0;h=m.He.n;q=h.length;for(r=0;r<q;r++)s=h[r],t=s.toVertex,n-=1,1!==t.component&&(f-=1,t=m.layer-t.layer,s=a.linkMinLength(s),e=Math.min(e,t-s));(null===k||n>d)&&!p&&(k=m,d=n)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else k.component=0}}}
function qq(a,b,c){return 90===a.na?c&&!b.rev||!c&&b.rev?270:90:180===a.na?c&&!b.rev||!c&&b.rev?0:180:270===a.na?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
hm.prototype.initializeIndices=function(){switch(this.Sn){default:case Iq:for(var a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;b.index=this.Pd[c];this.Pd[c]++}break;case gq:a=this.network.vertexes.i;for(b=this.ob;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Jq(this,c);break;case Kq:for(a=this.network.vertexes.i,b=0;b<=this.ob;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Lq(this,c)}};
function Jq(a,b){var c=b.layer;b.index=a.Pd[c];a.Pd[c]++;for(var c=b.He.ed(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var f=c[e],h=c[e+1];f.portFromColOffset>h.portFromColOffset&&(d=!0,c[e]=h,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Jq(a,d))}
function Lq(a,b){var c=b.layer;b.index=a.Pd[c];a.Pd[c]++;for(var c=b.Me.ed(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var f=c[e],h=c[e+1];f.portToColOffset>h.portToColOffset&&(d=!0,c[e]=h,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Lq(a,d))}
hm.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=uq(this),c=0,d=0,e=0,c=0;c<this.Yl;c++){for(d=0;d<=this.ob;d++)Mq(this,d,1),Nq(this,d,1);e=this.countCrossings();e<a&&(a=e,b=uq(this));for(d=this.ob;0<=d;d--)Mq(this,d,-1),Nq(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=uq(this))}vq(this,b);for(c=0;c<this.Yl;c++){for(d=0;d<=this.ob;d++)Mq(this,d,0),Nq(this,d,0);e=this.countCrossings();e<a&&(a=e,b=uq(this));for(d=this.ob;0<=d;d--)Mq(this,d,0),Nq(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=uq(this))}vq(this,b);var f=!1,h=c=0,k=0,d=0;switch(this.mn){case Oq:break;case Pq:for(k=a+1;(d=this.countCrossings())<k;)for(k=d,c=this.ob;0<=c;c--)for(h=0;h<=c;h++){for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,-1)||f;e=this.countCrossings();e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,1)||f;e=this.countCrossings();e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Nq(this,d,1)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,
d=h;d<=c;d++)f=Nq(this,d,-1)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,0)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Nq(this,d,0)||f;e>=a?vq(this,b):(a=e,b=uq(this))}break;default:case hq:for(c=this.ob,h=0,k=a+1;(d=this.countCrossings())<k;){k=d;for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,-1)||f;e=this.countCrossings();e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,1)||f;e=this.countCrossings();
e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Nq(this,d,1)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Nq(this,d,-1)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Nq(this,d,0)||f;e>=a?vq(this,b):(a=e,b=uq(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Nq(this,d,0)||f;e>=a?vq(this,b):(a=e,b=uq(this))}}vq(this,b)};
function Mq(a,b,c){var d=0,e=rq(a,b),f=a.Pd[b],h=zq(a,b,c);c=yq(a,b,c);for(d=0;d<f;d++)-1===c[d]&&(c[d]=e[d].column),-1===h[d]&&(h[d]=e[d].column);for(var k=!0,l;k;)for(k=!1,d=0;d<f-1;d++)if(h[d+1]<h[d]||h[d+1]===h[d]&&c[d+1]<c[d])k=!0,l=h[d],h[d]=h[d+1],h[d+1]=l,l=c[d],c[d]=c[d+1],c[d+1]=l,l=e[d],e[d]=e[d+1],e[d+1]=l;for(d=h=0;d<f;d++)l=e[d],l.index=d,h+=a.nodeMinColumnSpace(l,!0),l.column=h,h+=1,h+=a.nodeMinColumnSpace(l,!1);sq(a,b,e)}
function Nq(a,b,c){var d=rq(a,b),e=a.Pd[b];c=wq(a,b,c);var f=0,h;h=[];for(f=0;f<e;f++)h[f]=-1;var k;k=[];for(f=0;f<e;f++)k[f]=-1;for(var l=!1,m=!0;m;)for(m=!1,f=0;f<e-1;f++){var n=c[d[f].index*e+d[f+1].index],p=c[d[f+1].index*e+d[f].index],q=0,r=0,s=d[f].column,t=d[f+1].column,u=a.nodeMinColumnSpace(d[f],!0),x=a.nodeMinColumnSpace(d[f],!1),y=a.nodeMinColumnSpace(d[f+1],!0),A=a.nodeMinColumnSpace(d[f+1],!1),u=s-u+y,x=t-x+A,y=y=0,B=d[f].jc.i;for(B.reset();B.next();)if(A=B.value,A.valid&&A.fromVertex.layer===
b){A=A.fromVertex;for(y=0;d[y]!==A;)y++;y<f&&(q+=2*(f-y),r+=2*(f+1-y));y===f+1&&(q+=1);y>f+1&&(q+=4*(y-f),r+=4*(y-(f+1)))}B=d[f].Zb.i;for(B.reset();B.next();)if(A=B.value,A.valid&&A.toVertex.layer===b){A=A.toVertex;for(y=0;d[y]!==A;)y++;y===f+1&&(r+=1)}B=d[f+1].jc.i;for(B.reset();B.next();)if(A=B.value,A.valid&&A.fromVertex.layer===b){A=A.fromVertex;for(y=0;d[y]!==A;)y++;y<f&&(q+=2*(f+1-y),r+=2*(f-y));y===f&&(r+=1);y>f+1&&(q+=4*(y-(f+1)),r+=4*(y-f))}B=d[f+1].Zb.i;for(B.reset();B.next();)if(A=B.value,
A.valid&&A.toVertex.layer===b){A=A.toVertex;for(y=0;d[y]!==A;)y++;y===f&&(q+=1)}var y=A=0,B=h[d[f].index],I=k[d[f].index],D=h[d[f+1].index],V=k[d[f+1].index];-1!==B&&(A+=Math.abs(B-s),y+=Math.abs(B-x));-1!==I&&(A+=Math.abs(I-s),y+=Math.abs(I-x));-1!==D&&(A+=Math.abs(D-t),y+=Math.abs(D-u));-1!==V&&(A+=Math.abs(V-t),y+=Math.abs(V-u));if(r<q-.5||r===q&&p<n-.5||r===q&&p===n&&y<A-.5)m=l=!0,d[f].column=x,d[f+1].column=u,n=d[f],d[f]=d[f+1],d[f+1]=n}for(f=0;f<e;f++)d[f].index=f;sq(a,b,d);return l}
hm.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.Bi&Qq),a=this.Bi===iq;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.ob;a++)b[a]=0;for(var d=0,e=this.network.vertexes.i;e.next();){var f=e.value,a=f.layer,d=f.column,f=this.nodeMinColumnSpace(f,!1);b[a]=Math.max(b[a],d+f)}for(e.reset();e.next();)f=e.value,a=f.layer,d=f.column,f.column=(8*(this.Gb-b[a])>>1)+8*d;this.Gb*=8}if(0!==(this.Bi&Rq))for(b=!0;b;){b=!1;for(a=this.Af+1;a<=this.ob;a++)b=Sq(this,a,1)||b;
for(a=this.Af-1;0<=a;a--)b=Sq(this,a,-1)||b;b=Sq(this,this.Af,0)||b}if(0!==(this.Bi&Tq)){for(a=this.Af+1;a<=this.ob;a++)Uq(this,a,1);for(a=this.Af-1;0<=a;a--)Uq(this,a,-1);Uq(this,this.Af,0)}c&&(Vq(this,-1),Vq(this,1));if(0!==(this.Bi&Rq))for(b=!0;b;){b=!1;b=Sq(this,this.Af,0)||b;for(a=this.Af+1;a<=this.ob;a++)b=Sq(this,a,0)||b;for(a=this.Af-1;0<=a;a--)b=Sq(this,a,0)||b}};function Sq(a,b,c){for(var d=!1;Wq(a,b,c);)d=!0;return d}
function Wq(a,b,c){var d=0,e=rq(a,b),f=a.Pd[b],h=yq(a,b,-1);if(0<c)for(d=0;d<f;d++)h[d]=-1;var k=yq(a,b,1);if(0>c)for(d=0;d<f;d++)k[d]=-1;for(var l=!1,m=!0;m;)for(m=!1,d=0;d<f;d++){var n=e[d].column,p=a.nodeMinColumnSpace(e[d],!0),q=a.nodeMinColumnSpace(e[d],!1),r=0,r=0>d-1||n-e[d-1].column-1>p+a.nodeMinColumnSpace(e[d-1],!1)?n-1:n,p=0,p=d+1>=f||e[d+1].column-n-1>q+a.nodeMinColumnSpace(e[d+1],!0)?n+1:n,s=q=0,t=0,u=0,x=0,y=0;if(0>=c)for(var A=e[d].jc.i;A.next();){var B=A.value;B.valid&&B.fromVertex.layer!==
b&&(u=tq(B),x=B.portFromColOffset,y=B.portToColOffset,B=B.fromVertex.column,q+=(Math.abs(n+y-(B+x))+1)*u,s+=(Math.abs(r+y-(B+x))+1)*u,t+=(Math.abs(p+y-(B+x))+1)*u)}if(0<=c)for(A=e[d].Zb.i;A.next();)B=A.value,B.valid&&B.toVertex.layer!==b&&(u=tq(B),x=B.portFromColOffset,y=B.portToColOffset,B=B.toVertex.column,q+=(Math.abs(n+x-(B+y))+1)*u,s+=(Math.abs(r+x-(B+y))+1)*u,t+=(Math.abs(p+x-(B+y))+1)*u);y=x=u=0;A=h[e[d].index];B=k[e[d].index];-1!==A&&(u+=Math.abs(A-n),x+=Math.abs(A-r),y+=Math.abs(A-p));-1!==
B&&(u+=Math.abs(B-n),x+=Math.abs(B-r),y+=Math.abs(B-p));if(s<q||s===q&&x<u)m=l=!0,e[d].column=r;if(t<q||t===q&&y<u)m=l=!0,e[d].column=p}sq(a,b,e);a.normalize();return l}
function Uq(a,b,c){var d=0,e=rq(a,b),f=a.Pd[b],h=zq(a,b,c);c=[];for(d=0;d<f;d++)c[d]=h[d];for(h=!0;h;)for(h=!1,d=0;d<f;d++){var k=e[d].column,l=a.nodeMinColumnSpace(e[d],!0),m=a.nodeMinColumnSpace(e[d],!1),n=0,p=0,q=0,q=p=0;-1===c[d]?0===d&&d===f-1?n=k:0===d?(p=e[d+1].column,n=p-k===m+a.nodeMinColumnSpace(e[d+1],!0)?k-1:k):d===f-1?(q=e[d-1].column,n=k-q===l+a.nodeMinColumnSpace(e[d-1],!1)?k+1:k):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+
1],!0)-m-1,n=(q+p)/2|0):0===d&&d===f-1?n=c[d]:0===d?(p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=Math.min(c[d],p)):d===f-1?(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,n=Math.max(c[d],q)):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,q<c[d]&&c[d]<p?n=c[d]:q>=c[d]?n=q:p<=c[d]&&(n=p));n!==k&&(h=!0,e[d].column=n)}sq(a,b,e);a.normalize()}
function Xq(a,b){for(var c=!0,d=a.network.vertexes.i;d.next();){var e=d.value,f=a.nodeMinColumnSpace(e,!0),h=a.nodeMinColumnSpace(e,!1);if(e.column-f<=b&&e.column+h>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function Yq(a,b){for(var c=b,c=b+1,d=0,e=[],f=[],d=0;d<=a.ob;d++)e[d]=!1,f[d]=!1;for(var h=a.network.vertexes.i;h.next();){var d=h.value,k=d.column-a.nodeMinColumnSpace(d,!0),l=d.column+a.nodeMinColumnSpace(d,!1);k<=b&&l>=b&&(e[d.layer]=!0);k<=c&&l>=c&&(f[d.layer]=!0)}k=!0;c=!1;for(d=0;d<=a.ob;d++)k=k&&!(e[d]&&f[d]);if(k)for(h.reset();h.next();)e=h.value,e.column>b&&(e.column-=1,c=!0);return c}
function Vq(a,b){for(var c=0;c<=a.Gb;c++)for(;Xq(a,c););a.normalize();for(c=0;c<a.Gb;c++)for(;Yq(a,c););a.normalize();var c=0,d,e=0,f=0,h=0;if(0<b)for(c=0;c<=a.Gb;c++)for(d=uq(a),e=xq(a),f=e+1;e<f;)f=e,Zq(a,c,1),h=xq(a),h>e?vq(a,d):h<e&&(e=h,d=uq(a));if(0>b)for(c=a.Gb;0<=c;c--)for(d=uq(a),e=xq(a),f=e+1;e<f;)f=e,Zq(a,c,-1),h=xq(a),h>e?vq(a,d):h<e&&(e=h,d=uq(a));a.normalize()}
function Zq(a,b,c){a.fg=0;for(var d=a.network.vertexes.i;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.fg)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.fg);a.fg++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Bq(a,b,a.fg,-1,!0,!0),a.fg++);var f=0;b=[];for(f=0;f<a.fg*a.fg;f++)b[f]=!1;e=[];for(f=0;f<(a.ob+1)*(a.Gb+1);f++)e[f]=-1;for(d.reset();d.next();)for(var f=
d.value,h=f.layer,k=Math.max(0,f.column-a.nodeMinColumnSpace(f,!0)),l=Math.min(a.Gb,f.column+a.nodeMinColumnSpace(f,!1));k<=l;k++)e[h*(a.Gb+1)+k]=f.component;for(f=0;f<=a.ob;f++){if(0<c)for(k=0;k<a.Gb;k++)-1!==e[f*(a.Gb+1)+k]&&-1!==e[f*(a.Gb+1)+k+1]&&e[f*(a.Gb+1)+k]!==e[f*(a.Gb+1)+k+1]&&(b[e[f*(a.Gb+1)+k]*a.fg+e[f*(a.Gb+1)+k+1]]=!0);if(0>c)for(k=a.Gb;0<k;k--)-1!==e[f*(a.Gb+1)+k]&&-1!==e[f*(a.Gb+1)+k-1]&&e[f*(a.Gb+1)+k]!==e[f*(a.Gb+1)+k-1]&&(b[e[f*(a.Gb+1)+k]*a.fg+e[f*(a.Gb+1)+k-1]]=!0)}e=[];for(f=
0;f<a.fg;f++)e[f]=!0;h=new G("number");h.add(0);for(l=0;0!==h.count;)if(l=h.n[h.count-1],h.Rc(h.count-1),e[l])for(e[l]=!1,f=0;f<a.fg;f++)b[l*a.fg+f]&&h.xd(0,f);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
hm.prototype.commitLayout=function(){if(this.Cp)for(var a=pq(this,!0),b=pq(this,!1),c=this.network.edges.i;c.next();){var d=c.value.link;null!==d&&(d.Ab=a,d.Bb=b)}this.commitNodes();this.qz();this.pt&&this.commitLinks()};function pq(a,b){return 270===a.na?b?zc:Cc:90===a.na?b?Cc:zc:180===a.na?b?Ac:Bc:b?Bc:Ac}
hm.prototype.commitNodes=function(){this.Jg=[];this.bg=[];this.zf=[];this.Lb=[];for(var a=0;a<=this.ob;a++)this.Jg[a]=0,this.bg[a]=0,this.zf[a]=0,this.Lb[a]=0;for(a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;this.Jg[c]=Math.max(this.Jg[c],this.nodeMinLayerSpace(b,!0));this.bg[c]=Math.max(this.bg[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.am,c=0;c<=this.ob;c++){var e=d;0>=this.Jg[c]+this.bg[c]&&(e=0);0<c&&(b+=e/2);90===this.na||0===this.na?(b+=this.bg[c],this.zf[c]=b,b+=this.Jg[c]):
(b+=this.Jg[c],this.zf[c]=b,b+=this.bg[c]);c<this.ob&&(b+=e/2);this.Lb[c]=b}d=b;b=this.Ud;for(c=0;c<=this.ob;c++)270===this.na?this.zf[c]=b.y+this.zf[c]:90===this.na?(this.zf[c]=b.y+d-this.zf[c],this.Lb[c]=d-this.Lb[c]):180===this.na?this.zf[c]=b.x+this.zf[c]:(this.zf[c]=b.x+d-this.zf[c],this.Lb[c]=d-this.Lb[c]);for(a.reset();a.next();){var c=a.value,d=c.layer,e=c.column|0,f=0,h=0;270===this.na||90===this.na?(f=b.x+this.Dd*e,h=this.zf[d]):(f=this.zf[d],h=b.y+this.Dd*e);c.oa=f;c.va=h;c.commit()}};
hm.prototype.qz=function(){for(var a=0,b=this.am,c=0;c<=this.ob;c++)a+=this.Jg[c],a+=this.bg[c];for(var a=a+this.ob*b,b=[],c=this.Dd*this.Gb,d=this.gI;0<=d;d--)270===this.na?0===d?b.push(new z(0,0,c,Math.abs(this.Lb[0]))):b.push(new z(0,this.Lb[d-1],c,Math.abs(this.Lb[d-1]-this.Lb[d]))):90===this.na?0===d?b.push(new z(0,this.Lb[0],c,Math.abs(this.Lb[0]-a))):b.push(new z(0,this.Lb[d],c,Math.abs(this.Lb[d-1]-this.Lb[d]))):180===this.na?0===d?b.push(new z(0,0,Math.abs(this.Lb[0]),c)):b.push(new z(this.Lb[d-
1],0,Math.abs(this.Lb[d-1]-this.Lb[d]),c)):0===d?b.push(new z(this.Lb[0],0,Math.abs(this.Lb[0]-a),c)):b.push(new z(this.Lb[d],0,Math.abs(this.Lb[d-1]-this.Lb[d]),c));this.commitLayers(b,K.fk)};hm.prototype.commitLayers=function(){};
hm.prototype.commitLinks=function(){for(var a=this.network.edges.i,b;a.next();)b=a.value.link,null!==b&&(b.Bl(),b.Jo(),b.Oi());for(a.reset();a.next();)b=a.value.link,null!==b&&b.updateRoute();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.Bl();var d=b,e=d.U,f=d.ba,h=d.$c,k=d.Bd;if(c.valid){if(b.Ge===nh&&4===b.ma){if(c.rev)var l=e,e=f,f=l,m=h,h=k,k=m;if(c.fromVertex.column===c.toVertex.column){var n=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,f,k),p=b.getLinkPoint(f,k,b.computeSpot(!1),
!1,!1,e,h);n.H()||n.set(e.Z.Zk);p.H()||p.set(f.Z.Zk);b.Jo();b.Wk(n.x,n.y);b.Wk((2*n.x+p.x)/3,(2*n.y+p.y)/3);b.Wk((n.x+2*p.x)/3,(n.y+2*p.y)/3);b.Wk(p.x,p.y)}else{var q=!1,r=!1;null!==h&&b.computeSpot(!0)===xb&&(q=!0);null!==k&&b.computeSpot(!1)===xb&&(r=!0);if(q||r){var s=b.l(0).x,t=b.l(0).y,u=b.l(1).x,x=b.l(1).y,y=b.l(2).x,A=b.l(2).y,B=b.l(3).x,I=b.l(3).y;if(q){90===this.na||270===this.na?(u=s,x=(t+I)/2):(u=(s+B)/2,x=t);b.Y(1,u,x);var D=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,f,k);D.H()||D.set(e.Z.Zk);
b.Y(0,D.x,D.y)}r&&(90===this.na||270===this.na?(y=B,A=(t+I)/2):(y=(s+B)/2,A=I),b.Y(2,y,A),D=b.getLinkPoint(f,k,b.computeSpot(!1),!1,!1,e,h),D.H()||D.set(f.Z.Zk),b.Y(3,D.x,D.y))}}}b.Oi()}else if(c.fromVertex.layer===c.toVertex.layer)b.Oi();else{var V=!1,ba=!1,U=0,N=b.at+1;if(b.hc)ba=!0,U=b.ma,4<U&&b.points.removeRange(2,U-3);else if(b.Ge===nh)V=!0,U=b.ma,4<U&&b.points.removeRange(2,U-3),N=2;else{var U=b.ma,Z=b.computeSpot(!0)===xb,Ga=b.computeSpot(!1)===xb;2<U&&Z&&Ga?b.points.removeRange(1,U-2):3<
U&&Z&&!Ga?b.points.removeRange(1,U-3):3<U&&!Z&&Ga?b.points.removeRange(2,U-2):4<U&&!Z&&!Ga&&b.points.removeRange(2,U-3)}var ta=c.fromVertex,Pa=c.toVertex,la,Ca;if(c.rev){for(var qa=0;null!==Pa&&ta!==Pa;){Ca=la=null;for(var cc=Pa.jc.i;cc.next();){var id=cc.value;if(id.link===c.link&&(la=id.fromVertex,Ca=id.toVertex,null===la.rd))break}la!==ta&&(Ta=b.l(N-1).x,fb=b.l(N-1).y,xa=la.oa,za=la.va,ba?180===this.na||0===this.na?2===N?(b.w(N++,Ta,fb),b.w(N++,Ta,za)):(jc=null!==Ca?Ca.va:fb,jc!==za&&(kb=this.Lb[la.layer-
1],b.w(N++,kb,fb),b.w(N++,kb,za))):2===N?(b.w(N++,Ta,fb),b.w(N++,xa,fb)):(ie=null!==Ca?Ca.oa:Ta,ie!==xa&&(kb=this.Lb[la.layer-1],b.w(N++,Ta,kb),b.w(N++,xa,kb))):2===N?V?(Hb=Math.max(10,this.Jg[Pa.layer]),ab=Math.max(10,this.bg[Pa.layer]),180===this.na?(qa=Pa.ca.x,b.w(N++,qa-Hb,za),b.w(N++,qa,za),b.w(N++,qa+ab,za)):90===this.na?(qa=Pa.ca.y+Pa.ca.height,b.w(N++,xa,qa+ab),b.w(N++,xa,qa),b.w(N++,xa,qa-Hb)):270===this.na?(qa=Pa.ca.y,b.w(N++,xa,qa-Hb),b.w(N++,xa,qa),b.w(N++,xa,qa+ab)):(qa=Pa.ca.x+Pa.ca.width,
b.w(N++,qa+ab,za),b.w(N++,qa,za),b.w(N++,qa-Hb,za))):(b.w(N++,Ta,fb),180===this.na||0===this.na?b.w(N++,Ta,za):b.w(N++,xa,fb),b.w(N++,xa,za)):(Hb=Math.max(10,this.Jg[la.layer]),ab=Math.max(10,this.bg[la.layer]),180===this.na?(V&&b.w(N++,xa-Hb,za),b.w(N++,xa,za),V&&b.w(N++,xa+ab,za)):90===this.na?(V&&b.w(N++,xa,za+ab),b.w(N++,xa,za),V&&b.w(N++,xa,za-Hb)):270===this.na?(V&&b.w(N++,xa,za-Hb),b.w(N++,xa,za),V&&b.w(N++,xa,za+ab)):(V&&b.w(N++,xa+ab,za),b.w(N++,xa,za),V&&b.w(N++,xa-Hb,za))));Pa=la}if(null===
k||b.computeSpot(!1)!==xb)if(Ta=b.l(N-1).x,fb=b.l(N-1).y,xa=b.l(N).x,za=b.l(N).y,ba){var Pf=this.bg[ta.layer],dc=0;180===this.na||0===this.na?(dc=fb,dc>=ta.ca.y&&dc<=ta.ca.bottom&&(qa=ta.oa+Pf,dc=dc<ta.ca.y+ta.ca.height/2?ta.ca.y-this.Dd/2:ta.ca.bottom+this.Dd/2,b.w(N++,qa,fb),b.w(N++,qa,dc)),b.w(N++,xa,dc)):(dc=Ta,dc>=ta.ca.x&&dc<=ta.ca.right&&(qa=ta.va+Pf,dc=dc<ta.ca.x+ta.ca.width/2?ta.ca.x-this.Dd/2:ta.ca.right+this.Dd/2,b.w(N++,Ta,qa),b.w(N++,dc,qa)),b.w(N++,dc,za));b.w(N++,xa,za)}else V?(Hb=
Math.max(10,this.Jg[ta.layer]),ab=Math.max(10,this.bg[ta.layer]),180===this.na?(qa=ta.ca.x+ta.ca.width,b.Y(N-2,qa,fb),b.Y(N-1,qa+ab,fb)):90===this.na?(qa=ta.ca.y,b.Y(N-2,Ta,qa),b.Y(N-1,Ta,qa-Hb)):270===this.na?(qa=ta.ca.y+ta.ca.height,b.Y(N-2,Ta,qa),b.Y(N-1,Ta,qa+ab)):(qa=ta.ca.x,b.Y(N-2,qa,fb),b.Y(N-1,qa-Hb,fb))):(180===this.na||0===this.na?b.w(N++,xa,fb):b.w(N++,Ta,za),b.w(N++,xa,za))}else{for(;null!==ta&&ta!==Pa;){Ca=la=null;for(var Ve=ta.Zb.i;Ve.next();){var Qf=Ve.value;if(Qf.link===c.link&&(la=
Qf.toVertex,Ca=Qf.fromVertex,null!==Ca.rd&&(Ca=null),null===la.rd))break}var Ta=0,fb=0,xa=0,za=0,kb=0,Hb=0,ab=0;if(la!==Pa)if(Ta=b.l(N-1).x,fb=b.l(N-1).y,xa=la.oa,za=la.va,ba)if(180===this.na||0===this.na){var jc=null!==Ca?Ca.va:fb;jc!==za&&(kb=this.Lb[la.layer],2===N&&(kb=0===this.na?Math.max(kb,Ta):Math.min(kb,Ta)),b.w(N++,kb,fb),b.w(N++,kb,za))}else{var ie=null!==Ca?Ca.oa:Ta;ie!==xa&&(kb=this.Lb[la.layer],2===N&&(kb=90===this.na?Math.max(kb,fb):Math.min(kb,fb)),b.w(N++,Ta,kb),b.w(N++,xa,kb))}else Hb=
Math.max(10,this.Jg[la.layer]),ab=Math.max(10,this.bg[la.layer]),180===this.na?(b.w(N++,xa+ab,za),V&&b.w(N++,xa,za),b.w(N++,xa-Hb,za)):90===this.na?(b.w(N++,xa,za-Hb),V&&b.w(N++,xa,za),b.w(N++,xa,za+ab)):270===this.na?(b.w(N++,xa,za+ab),V&&b.w(N++,xa,za),b.w(N++,xa,za-Hb)):(b.w(N++,xa-Hb,za),V&&b.w(N++,xa,za),b.w(N++,xa+ab,za));ta=la}ba&&(Ta=b.l(N-1).x,fb=b.l(N-1).y,xa=b.l(N).x,za=b.l(N).y,180===this.na||0===this.na?fb!==za&&(kb=0===this.na?Math.min(Math.max((xa+Ta)/2,this.Lb[Pa.layer]),xa):Math.max(Math.min((xa+
Ta)/2,this.Lb[Pa.layer]),xa),b.w(N++,kb,fb),b.w(N++,kb,za)):Ta!==xa&&(kb=90===this.na?Math.min(Math.max((za+fb)/2,this.Lb[Pa.layer]),za):Math.max(Math.min((za+fb)/2,this.Lb[Pa.layer]),za),b.w(N++,Ta,kb),b.w(N++,xa,kb)))}if(null!==d&&V){if(null!==h){if(b.computeSpot(!0)===xb){var qc=b.l(0),Rd=b.l(2);qc.L(Rd)||b.Y(1,(qc.x+Rd.x)/2,(qc.y+Rd.y)/2)}D=b.getLinkPoint(e,h,xb,!0,!1,f,k);D.H()||D.set(e.Z.Zk);b.Y(0,D.x,D.y)}null!==k&&(b.computeSpot(!1)===xb&&(qc=b.l(b.ma-1),Rd=b.l(b.ma-3),qc.L(Rd)||b.Y(b.ma-
2,(qc.x+Rd.x)/2,(qc.y+Rd.y)/2)),D=b.getLinkPoint(f,k,xb,!1,!1,e,h),D.H()||D.set(f.Z.Zk),b.Y(b.ma-1,D.x,D.y))}b.Oi();c.commit()}}}for(var je=new G(W),We=this.network.edges.i;We.next();){var qf=We.value.link;null!==qf&&qf.hc&&!je.contains(qf)&&je.add(qf)}if(0<je.count)if(90===this.na||270===this.na){for(var Sd=0,Ib=new G($q),Mb,Lc,Og=je.i;Og.next();){var Nb=Og.value;if(null!==Nb&&Nb.hc)for(var Bb=2;Bb<Nb.ma-3;Bb++)if(Mb=Nb.l(Bb),Lc=Nb.l(Bb+1),this.D(Mb.y,Lc.y)&&!this.D(Mb.x,Lc.x)){var ec=new $q;ec.layer=
Math.floor(Mb.y/2);var lb=Nb.l(0),Ae=Nb.l(Nb.ma-1);ec.first=lb.x*lb.x+lb.y;ec.Nd=Ae.x*Ae.x+Ae.y;ec.Ee=Math.min(Mb.x,Lc.x);ec.Vd=Math.max(Mb.x,Lc.x);ec.index=Bb;ec.link=Nb;if(Bb+2<Nb.ma){var Td=Nb.l(Bb-1),qg=Nb.l(Bb+2),Rf=0;Td.y<Mb.y?Rf=qg.y<Mb.y?3:Mb.x<Lc.x?2:1:Td.y>Mb.y&&(Rf=qg.y>Mb.y?0:Lc.x<Mb.x?2:1);ec.ai=Rf}Ib.add(ec)}}if(1<Ib.count){Ib.sort(this.gF);for(var Cb=0;Cb<Ib.count;){for(var jd=Ib.n[Cb].layer,rc=Cb+1;rc<Ib.count&&Ib.n[rc].layer===jd;)rc++;if(1<rc-Cb)for(var yb=Cb;yb<rc;){for(var Mc=
Ib.n[yb].Vd,Ob=Cb+1;Ob<rc&&Ib.n[Ob].Ee<Mc;)Mc=Math.max(Mc,Ib.n[Ob].Vd),Ob++;var Na=Ob-yb;if(1<Na){Ib.Fp(this.px,yb,yb+Na);for(var gb=1,Db=Ib.n[yb].Nd,Bb=yb;Bb<Ob;Bb++){var fc=Ib.n[Bb];fc.Nd!==Db&&(gb++,Db=fc.Nd)}Ib.Fp(this.fF,yb,yb+Na);for(var Ud=1,Db=Ib.n[yb].first,Bb=yb;Bb<Ob;Bb++)fc=Ib.n[Bb],fc.first!==Db&&(Ud++,Db=fc.first);var Vd=!0,rf=Ud;gb<Ud?(Vd=!1,rf=gb,Db=Ib.n[yb].Nd,Ib.Fp(this.px,yb,yb+Na)):Db=Ib.n[yb].first;for(var Be=0,Bb=yb;Bb<Ob;Bb++){fc=Ib.n[Bb];(Vd?fc.first:fc.Nd)!==Db&&(Be++,Db=
Vd?fc.first:fc.Nd);Nb=fc.link;Mb=Nb.l(fc.index);Lc=Nb.l(fc.index+1);var sf=this.BE*(Be-(rf-1)/2);Sd++;Nb.Bl();Nb.Y(fc.index,Mb.x,Mb.y+sf);Nb.Y(fc.index+1,Lc.x,Lc.y+sf);Nb.Oi()}}yb=Ob}Cb=rc}}}else{for(var Sb=0,db=new G($q),sc,Yc,kd=je.i;kd.next();){var bb=kd.value;if(null!==bb&&bb.hc)for(var vb=2;vb<bb.ma-3;vb++)if(sc=bb.l(vb),Yc=bb.l(vb+1),this.D(sc.x,Yc.x)&&!this.D(sc.y,Yc.y)){var kc=new $q;kc.layer=Math.floor(sc.x/2);var ld=bb.l(0),Pg=bb.l(bb.ma-1);kc.first=ld.x+ld.y*ld.y;kc.Nd=Pg.x+Pg.y*Pg.y;kc.Ee=
Math.min(sc.y,Yc.y);kc.Vd=Math.max(sc.y,Yc.y);kc.index=vb;kc.link=bb;if(vb+2<bb.ma){var Qg=bb.l(vb-1),Rg=bb.l(vb+2),Sf=0;Qg.x<sc.x?Sf=Rg.x<sc.x?3:sc.y<Yc.y?2:1:Qg.x>sc.x&&(Sf=Rg.x>sc.x?0:Yc.y<sc.y?2:1);kc.ai=Sf}db.add(kc)}}if(1<db.count){db.sort(this.gF);for(var Nc=0;Nc<db.count;){for(var Zc=db.n[Nc].layer,Oc=Nc+1;Oc<db.count&&db.n[Oc].layer===Zc;)Oc++;if(1<Oc-Nc)for(var mb=Nc;mb<Oc;){for(var ke=db.n[mb].Vd,nb=Nc+1;nb<Oc&&db.n[nb].Ee<ke;)ke=Math.max(ke,db.n[nb].Vd),nb++;var Ec=nb-mb;if(1<Ec){db.Fp(this.px,
mb,mb+Ec);for(var Ce=1,Eb=db.n[mb].Nd,vb=mb;vb<nb;vb++){var Fb=db.n[vb];Fb.Nd!==Eb&&(Ce++,Eb=Fb.Nd)}db.Fp(this.fF,mb,mb+Ec);for(var md=1,Eb=db.n[mb].first,vb=mb;vb<nb;vb++)Fb=db.n[vb],Fb.first!==Eb&&(md++,Eb=Fb.first);var $c=!0,Wd=md;Ce<md?($c=!1,Wd=Ce,Eb=db.n[mb].Nd,db.Fp(this.px,mb,mb+Ec)):Eb=db.n[mb].first;for(var Xd=0,vb=mb;vb<nb;vb++){Fb=db.n[vb];($c?Fb.first:Fb.Nd)!==Eb&&(Xd++,Eb=$c?Fb.first:Fb.Nd);bb=Fb.link;sc=bb.l(Fb.index);Yc=bb.l(Fb.index+1);var Xe=this.BE*(Xd-(Wd-1)/2);Sb++;bb.Bl();bb.Y(Fb.index,
sc.x+Xe,sc.y);bb.Y(Fb.index+1,Yc.x+Xe,Yc.y);bb.Oi()}}mb=nb}Nc=Oc}}}};hm.prototype.gF=function(a,b){return a instanceof $q&&b instanceof $q&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.Ee<b.Ee?-1:a.Ee>b.Ee?1:a.Vd<b.Vd?-1:a.Vd>b.Vd?1:0:0};hm.prototype.fF=function(a,b){return a instanceof $q&&b instanceof $q&&a!==b?a.first<b.first?-1:a.first>b.first||a.ai<b.ai?1:a.ai>b.ai||a.Ee<b.Ee?-1:a.Ee>b.Ee?1:a.Vd<b.Vd?-1:a.Vd>b.Vd?1:0:0};
hm.prototype.px=function(a,b){return a instanceof $q&&b instanceof $q&&a!==b?a.Nd<b.Nd?-1:a.Nd>b.Nd||a.ai<b.ai?1:a.ai>b.ai||a.Ee<b.Ee?-1:a.Ee>b.Ee?1:a.Vd<b.Vd?-1:a.Vd>b.Vd?1:0:0};hm.prototype.D=function(a,b){var c=a-b;return-1<c&&1>c};function rq(a,b){var c,d=a.Pd[b];if(d>=a.Lg.length){c=[];for(var e=0;e<a.Lg.length;e++)c[e]=a.Lg[e];a.Lg=c}void 0===a.Lg[d]||null===a.Lg[d]?c=[]:(c=a.Lg[d],a.Lg[d]=null);d=a.vr[b];for(e=0;e<d.length;e++){var f=d[e];c[f.index]=f}return c}
function sq(a,b,c){a.Lg[a.Pd[b]]=c}v.defineProperty(hm,{layerSpacing:"layerSpacing"},function(){return this.am},function(a){this.am!==a&&(v.j(a,"number",hm,"layerSpacing"),0<=a&&(this.am=a,this.G()))});v.defineProperty(hm,{RJ:"columnSpacing"},function(){return this.Dd},function(a){this.Dd!==a&&(v.j(a,"number",hm,"columnSpacing"),0<=a&&(this.Dd=a,this.G()))});v.defineProperty(hm,{direction:"direction"},function(){return this.na},function(a){this.na!==a&&(v.j(a,"number",hm,"direction"),this.na=a,this.G())});
v.defineProperty(hm,{UG:"cycleRemoveOption"},function(){return this.yn},function(a){this.yn!==a&&(v.qb(a,hm,hm,"cycleRemoveOption"),a===kq||a===eq)&&(this.yn=a,this.G())});v.defineProperty(hm,{YH:"layeringOption"},function(){return this.ao},function(a){this.ao!==a&&(v.qb(a,hm,hm,"layeringOption"),a===fq||a===Cq||a===Eq)&&(this.ao=a,this.G())});
v.defineProperty(hm,{JH:"initializeOption"},function(){return this.Sn},function(a){this.Sn!==a&&(v.qb(a,hm,hm,"initializeOption"),a===gq||a===Kq||a===Iq)&&(this.Sn=a,this.G())});v.defineProperty(hm,{yK:"iterations"},function(){return this.Yl},function(a){this.Yl!==a&&(v.Te(a,jq,"iterations"),0<=a&&(this.Yl=a,this.G()))});v.defineProperty(hm,{wG:"aggressiveOption"},function(){return this.mn},function(a){this.mn!==a&&(v.qb(a,hm,hm,"aggressiveOption"),a===Oq||a===hq||a===Pq)&&(this.mn=a,this.G())});
v.defineProperty(hm,{YK:"packOption"},function(){return this.Bi},function(a){this.Bi!==a&&(v.j(a,"number",hm,"packOption"),0<=a&&8>a&&(this.Bi=a,this.G()))});v.defineProperty(hm,{Cp:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(v.j(a,"boolean",hm,"setsPortSpots"),this.Lh=a,this.G())});v.defineProperty(hm,{BE:"linkSpacing"},function(){return this.cr},function(a){this.cr!==a&&(v.j(a,"number",hm,"linkSpacing"),0<=a&&(this.cr=a,this.G()))});v.u(hm,{gI:"maxLayer"},function(){return this.ob});
v.u(hm,{GK:"maxIndex"},function(){return this.kv});v.u(hm,{FK:"maxColumn"},function(){return this.Gb});v.u(hm,{MK:"minIndexLayer"},function(){return this.nr});v.u(hm,{HK:"maxIndexLayer"},function(){return this.Af});var eq;hm.CycleDepthFirst=eq=v.p(hm,"CycleDepthFirst",0);var kq;hm.CycleGreedy=kq=v.p(hm,"CycleGreedy",1);var fq;hm.LayerOptimalLinkLength=fq=v.p(hm,"LayerOptimalLinkLength",0);var Cq;hm.LayerLongestPathSink=Cq=v.p(hm,"LayerLongestPathSink",1);var Eq;
hm.LayerLongestPathSource=Eq=v.p(hm,"LayerLongestPathSource",2);var gq;hm.InitDepthFirstOut=gq=v.p(hm,"InitDepthFirstOut",0);var Kq;hm.InitDepthFirstIn=Kq=v.p(hm,"InitDepthFirstIn",1);var Iq;hm.InitNaive=Iq=v.p(hm,"InitNaive",2);var Oq;hm.AggressiveNone=Oq=v.p(hm,"AggressiveNone",0);var hq;hm.AggressiveLess=hq=v.p(hm,"AggressiveLess",1);var Pq;hm.AggressiveMore=Pq=v.p(hm,"AggressiveMore",2);hm.PackNone=0;var Qq;hm.PackExpand=Qq=1;var Rq;hm.PackStraighten=Rq=2;var Tq;hm.PackMedian=Tq=4;var iq;
hm.PackAll=iq=7;function $q(){this.index=this.Vd=this.Ee=this.Nd=this.first=this.layer=0;this.link=null;this.ai=0}v.Jd($q,{layer:!0,first:!0,Nd:!0,Ee:!0,Vd:!0,index:!0,link:!0,ai:!0});function jq(){wa.call(this)}v.Ga(jq,wa);v.ga("LayeredDigraphNetwork",jq);jq.prototype.createVertex=function(){return new ar};jq.prototype.createEdge=function(){return new br};
function ar(){ya.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.Oo=NaN;this.Dm=0;this.fA=this.gA=null}v.Ga(ar,ya);v.ga("LayeredDigraphVertex",ar);function br(){Aa.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}v.Ga(br,Aa);v.ga("LayeredDigraphEdge",br);
function Y(){0<arguments.length&&v.dd(Y);Me.call(this);this.td=new H(Object);this.Er=cr;this.yf=dr;this.xs=er;this.iv=fr;this.cB=null;this.sh=!0;this.gd=gr;this.Wf=(new ia(10,10)).freeze();this.ta=new hr;this.sa=new hr;this.az=[]}v.Ga(Y,Me);v.ga("TreeLayout",Y);Y.prototype.cloneProtected=function(a){Me.prototype.cloneProtected.call(this,a);a.Er=this.Er;a.xs=this.xs;a.iv=this.iv;a.sh=this.sh;a.gd=this.gd;a.Wf.assign(this.Wf);a.ta.copyInheritedPropertiesFrom(this.ta);a.sa.copyInheritedPropertiesFrom(this.sa)};
Y.prototype.createNetwork=function(){return new ir};Y.prototype.makeNetwork=function(a){function b(a){if(a instanceof S)return!a.qf&&"Comment"!==a.Mc;if(a instanceof W){var b=a.U;if(null===b||b.qf||"Comment"===b.Mc)return!1;a=a.ba;return null===a||a.qf||"Comment"===a.Mc?!1:!0}return!1}var c=this.createNetwork();c.Pb=this;a instanceof E?(c.Oj(a.wg,!0,b),c.Oj(a.links,!0,b)):a instanceof T?c.Oj(a.Pc,!1,b):c.Oj(a.i,!1,b);return c};
Y.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Ff!==jr&&(this.Ud=this.initialOrigin(this.Ud));var b=this.g;null===b&&a instanceof E&&(b=a);this.yf=this.path===cr&&null!==b?b.Md?dr:kr:this.path===cr?dr:this.path;if(0<this.network.vertexes.count){this.network.yw();for(a=this.network.vertexes.i;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.td.count){a=new H(hr);for(b=this.td.i;b.next();){var c=b.value;c instanceof S?(c=this.network.Qm(c),null!==c&&a.add(c)):c instanceof hr&&a.add(c)}this.td=a}0===this.td.count&&this.findRoots();for(a=this.td.copy().i;a.next();)b=a.value,b.initialized||(b.initialized=!0,lr(this,b));for(a=this.td.i;a.next();)b=a.value,b instanceof hr&&mr(this,b);for(a=this.td.i;a.next();)b=a.value,b instanceof hr&&nr(this,b);for(a=this.td.i;a.next();)b=a.value,b instanceof hr&&
or(this,b);this.lz();if(this.Vz===pr){c=[];for(a=this.network.vertexes.i;a.next();){var d=a.value,b=d.parent;null===b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.cB=c;for(a=this.network.vertexes.i;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===b.angle?(180===b.angle&&(d.bt+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.ct+=c[d.level]-d.height),d.height=
c[d.level])}else if(this.Vz===qr)for(a=this.network.vertexes.i;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var f=c.children[d],e=Math.max(e,b?f.width:f.height);if(0<=e)for(d=0;d<c.children.length;d++)f=c.children[d],b?(180===c.angle&&(f.bt+=e-f.width),f.width=e):(270===c.angle&&(f.ct+=e-f.height),f.height=e)}for(a=this.td.i;a.next();)b=a.value,b instanceof hr&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.td=new H(Object);
this.sf=!0};
Y.prototype.findRoots=function(){for(var a=this.network.vertexes.i;a.next();){var b=a.value;switch(this.yf){case dr:0===b.jc.count&&this.td.add(b);break;case kr:0===b.Zb.count&&this.td.add(b);break;default:v.k("Unhandled path value "+this.yf.toString())}}if(0===this.td.count){for(var a=999999,b=null,c=this.network.vertexes.i;c.next();){var d=c.value;switch(this.yf){case dr:d.jc.count<a&&(a=d.jc.count,b=d);break;case kr:d.Zb.count<a&&(a=d.Zb.count,b=d);break;default:v.k("Unhandled path value "+this.yf.toString())}}null!==
b&&this.td.add(b)}};
function lr(a,b){if(null!==b){switch(a.yf){case dr:if(0<b.Zb.count){for(var c=new G(hr),d=b.aH;d.next();){var e=d.value;rr(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.ed())}break;case kr:if(0<b.jc.count){c=new G(hr);for(d=b.$I;d.next();)e=d.value,rr(a,b,e)&&c.add(e);0<c.count&&(b.children=c.ed())}break;default:v.k("Unhandled path value"+a.yf.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var f=c[e];f.initialized=!0;f.level=b.level+1;f.parent=b;a.td.remove(f)}for(e=0;e<d;e++)f=c[e],lr(a,f)}}
function rr(a,b,c){if(c.initialized){var d;if(null===b)d=!1;else{for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}Y.prototype.removeChild=function(a,b){if(null!==a&&null!==b){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),f=0,e=0;e<c.length;e++)c[e]!==b&&(d[f++]=c[e]);a.children=d}}};
function mr(a,b){if(null!==b){a.initializeTreeVertexValues(b);b.alignment===sr&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Fm,e=0,f=b.children,h=f.length,k=0;k<h;k++){var l=f[k];mr(a,l);c+=l.descendantCount+1;d=Math.max(d,l.maxChildrenCount);e=Math.max(e,l.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function tr(a,b){switch(a.xs){default:case er:return null!==b.parent?b.parent:a.ta;case ur:return null===b.parent?a.ta:null===b.parent.parent?a.sa:b.parent;case vr:if(null!==b.parent)return null!==b.parent.parent?b.parent.parent:a.sa;case wr:var c=!0;if(0===b.Fm)c=!1;else for(var d=b.children,e=d.length,f=0;f<e;f++)if(0<d[f].Fm){c=!1;break}return c&&null!==b.parent?a.sa:null!==b.parent?b.parent:a.ta}}
Y.prototype.initializeTreeVertexValues=function(a){var b=tr(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===sr){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};function nr(a,b){if(null!==b){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)nr(a,c[e])}}Y.prototype.assignTreeVertexValues=function(){};
function or(a,b){if(null!==b){b.alignment!==sr&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)or(a,c[e])}}Y.prototype.sortTreeVertexChildren=function(a){switch(a.sorting){case xr:break;case yr:a.children.reverse();break;case zr:a.children.sort(a.comparer);break;case Ar:a.children.sort(a.comparer);a.children.reverse();break;default:v.k("Unhandled sorting value "+a.sorting.toString())}};Y.prototype.lz=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Y.prototype.addComments=function(a){var b=a.angle,c=a.parent,d=0,e=Br,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Cr(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Fm,f=0,h=0,k=0,l=a.commentSpacing;if(null!==a.Dc)for(var m=a.Dc.ZD();m.next();){var n=m.value;"Comment"===n.Mc&&n.isVisible()&&(null===a.comments&&(a.comments=[]),a.comments.push(n),n.mf(),n=n.Ba,b&&!c||!e&&!d&&c||e&&d&&c?(f=Math.max(f,n.width),h+=n.height+Math.abs(k)):(f+=n.width+Math.abs(k),h=Math.max(h,n.height)),k=l)}null!==a.comments&&
(b&&!c||!e&&!d&&c||e&&d&&c?(f+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),f=Math.max(0,f-a.width)),e=v.ek(0,0,a.ca.width+f,a.ca.height+h),a.pb=e,v.fc(e))};function Cr(a){return a===Dr||a===sr||a===Er||a===Fr}function Gr(a){return a===Dr||a===sr}function Hr(a){var b=a.parent;if(null!==b){var c=b.alignment;if(Cr(c)){if(Gr(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Er)return!0}}return!1}
Y.prototype.layoutComments=function(a){if(null!==a.comments){var b=a.Dc.Ba,c=a.parent,d=a.angle,e=0,f=Br,f=!1;null!==c&&(e=c.angle,f=c.alignment,f=Cr(f));for(var c=90===d||270===d,d=90===e||270===e,h=0===a.Fm,k=Hr(a),l=0,m=a.comments,n=m.length,p=v.M(),q=0;q<n;q++){var r=m[q],s=r.Ba;if(c&&!h||!f&&!d&&h||f&&d&&h){if(135<e&&!f||d&&k)if(0<=a.commentMargin)for(p.m(a.ca.x-a.commentMargin-s.width,a.ca.y+l),r.move(p),r=r.qg();r.next();){var t=r.value;t.Ab=Ac;t.Bb=Bc}else for(p.m(a.ca.x+2*a.N.x-a.commentMargin,
a.ca.y+l),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=Bc,t.Bb=Ac;else if(0<=a.commentMargin)for(p.m(a.ca.x+2*a.N.x+a.commentMargin,a.ca.y+l),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=Bc,t.Bb=Ac;else for(p.m(a.ca.x+a.commentMargin-s.width,a.ca.y+l),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=Ac,t.Bb=Bc;l=0<=a.commentSpacing?l+(s.height+a.commentSpacing):l+(a.commentSpacing-s.height)}else{if(135<e&&!f||!d&&k)if(0<=a.commentMargin)for(p.m(a.ca.x+l,a.ca.y-a.commentMargin-s.height),r.move(p),r=r.qg();r.next();)t=
r.value,t.Ab=zc,t.Bb=Cc;else for(p.m(a.ca.x+l,a.ca.y+2*a.N.y-a.commentMargin),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=Cc,t.Bb=zc;else if(0<=a.commentMargin)for(p.m(a.ca.x+l,a.ca.y+2*a.N.y+a.commentMargin),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=Cc,t.Bb=zc;else for(p.m(a.ca.x+l,a.ca.y+a.commentMargin-s.height),r.move(p),r=r.qg();r.next();)t=r.value,t.Ab=zc,t.Bb=Cc;l=0<=a.commentSpacing?l+(s.width+a.commentSpacing):l+(a.commentSpacing-s.width)}}v.v(p);b=l-a.commentSpacing-(c?b.height:b.width);
if(this.yf===dr)for(e=a.Zb;e.next();)a=e.value.link,null===a||a.pl||(a.il=0<b?b:NaN);else for(e=a.jc;e.next();)a=e.value.link,null===a||a.pl||(a.Fl=0<b?b:NaN)}};
Y.prototype.layoutTree=function(a){if(null!==a){for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Ir:Jr(this,a);break;case Kr:if(a.alignment===sr)Jr(this,a);else if(0===a.Fm){var d=a.parent,b=!1,c=0,e=Br;null!==d&&(c=d.angle,e=d.alignment,b=Cr(e));d=Hr(a);a.ka.m(0,0);a.eb.m(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.La.m(0,0):180===c&&!b||(90===c||270===c)&&d?a.La.m(a.width-2*a.N.x,0):a.La.m(0,a.height-2*a.N.y);a.rt=
null;a.Mt=null}else{for(var f=Lr(a),b=90===f||270===f,h=0,k=a.children,l=k.length,m=0;m<l;m++)var n=k[m],h=Math.max(h,b?n.eb.width:n.eb.height);var p=a.alignment,d=p===Mr,q=p===Nr,r=Cr(p),s=Math.max(0,a.breadthLimit),c=Or(a),t=a.nodeSpacing,u=Pr(a),x=a.rowSpacing,y=0;if(d||q||a.xp||a.yp&&1===a.maxGenerationCount)y=Math.max(0,a.rowIndent);var d=a.width,e=a.height,A=0,B=0,I=0,D=null,V=null,ba=0,U=0,N=0,Z=0,Ga=0,ta=0,Pa=0,la=0,n=0;r&&!Gr(p)&&135<f&&k.reverse();if(Gr(p))if(1<l)for(m=0;m<l;m++)0===m%2&&
m!==l-1?la=Math.max(la,b?k[m].eb.width:k[m].eb.height):0!==m%2&&(n=Math.max(n,b?k[m].eb.width:k[m].eb.height));else 1===l&&(la=b?k[0].eb.width:k[0].eb.height);if(r){switch(p){case Dr:U=135>f?Qr(a,k,la,A,B):Rr(a,k,la,A,B);la=U.x;A=U.width;B=U.height;break;case Er:for(m=0;m<l;m++){var n=k[m],Ca=n.eb,D=0===ta?0:x;b?(n.ka.m(h-Ca.width,Z+D),A=Math.max(A,Ca.width),B=Math.max(B,Z+D+Ca.height),Z+=D+Ca.height):(n.ka.m(N+D,h-Ca.height),A=Math.max(A,N+D+Ca.width),B=Math.max(B,Ca.height),N+=D+Ca.width);ta++}break;
case Fr:for(m=0;m<l;m++)n=k[m],Ca=n.eb,D=0===ta?0:x,b?(n.ka.m(t/2+a.N.x,Z+D),A=Math.max(A,Ca.width),B=Math.max(B,Z+D+Ca.height),Z+=D+Ca.height):(n.ka.m(N+D,t/2+a.N.y),A=Math.max(A,N+D+Ca.width),B=Math.max(B,Ca.height),N+=D+Ca.width),ta++}D=Sr(this,2);V=Sr(this,2);b?(D[0].m(0,0),D[1].m(0,B),V[0].m(A,0)):(D[0].m(0,0),D[1].m(A,0),V[0].m(0,B));V[1].m(A,B)}else for(m=0;m<l;m++){n=k[m];Ca=n.eb;if(b){0<s&&0<ta&&N+t+Ca.width>s&&(N<h&&Yr(a,p,h-N,0,Pa,m-1),Ga++,ta=0,Pa=m,I=B,N=0,Z=135<f?-B-x:B+x);Zr(this,n,
0,Z);var qa=0;if(0===ta){if(D=n.rt,V=n.Mt,ba=Ca.width,U=Ca.height,null===D||null===V||f!==Lr(n))D=Sr(this,2),V=Sr(this,2),D[0].m(0,0),D[1].m(0,U),V[0].m(ba,0),V[1].m(ba,U)}else{var cc=v.jb(),U=$r(this,a,n,D,V,ba,U,cc),qa=U.x,D=cc[0],V=cc[1],ba=U.width,U=U.height;v.ra(cc);N<Ca.width&&0>qa&&(as(a,-qa,0,Pa,m-1),bs(D,-qa,0),bs(V,-qa,0),qa=0)}n.ka.m(qa,Z);A=Math.max(A,ba);B=Math.max(B,I+(0===Ga?0:x)+Ca.height);N=ba}else{0<s&&0<ta&&Z+t+Ca.height>s&&(Z<h&&Yr(a,p,0,h-Z,Pa,m-1),Ga++,ta=0,Pa=m,I=A,Z=0,N=135<
f?-A-x:A+x);Zr(this,n,N,0);qa=0;if(0===ta){if(D=n.rt,V=n.Mt,ba=Ca.width,U=Ca.height,null===D||null===V||f!==Lr(n))D=Sr(this,2),V=Sr(this,2),D[0].m(0,0),D[1].m(ba,0),V[0].m(0,U),V[1].m(ba,U)}else cc=v.jb(),U=$r(this,a,n,D,V,ba,U,cc),qa=U.x,D=cc[0],V=cc[1],ba=U.width,U=U.height,v.ra(cc),Z<Ca.height&&0>qa&&(as(a,0,-qa,Pa,m-1),bs(D,0,-qa),bs(V,0,-qa),qa=0);n.ka.m(N,qa);B=Math.max(B,U);A=Math.max(A,I+(0===Ga?0:x)+Ca.width);Z=U}ta++}0<Ga&&(b?(B+=Math.max(0,c),N<A&&Yr(a,p,A-N,0,Pa,l-1),0<y&&(q||as(a,y,0,
0,l-1),A+=y)):(A+=Math.max(0,c),Z<B&&Yr(a,p,0,B-Z,Pa,l-1),0<y&&(q||as(a,0,y,0,l-1),B+=y)));q=h=0;switch(p){case cs:b?h+=A/2-a.N.x-u/2:q+=B/2-a.N.y-u/2;break;case Br:0<Ga?b?h+=A/2-a.N.x-u/2:q+=B/2-a.N.y-u/2:b?(m=k[0].ka.x+k[0].La.x,la=k[l-1].ka.x+k[l-1].La.x+2*k[l-1].N.x,h+=m+(la-m)/2-a.N.x-u/2):(m=k[0].ka.y+k[0].La.y,la=k[l-1].ka.y+k[l-1].La.y+2*k[l-1].N.y,q+=m+(la-m)/2-a.N.y-u/2);break;case Mr:b?(h-=u,A+=u):(q-=u,B+=u);break;case Nr:b?(h+=A-a.width+u,A+=u):(q+=B-a.height+u,B+=u);break;case Dr:b?
h=1<l?h+(la+t/2-a.N.x):h+(k[0].N.x-a.N.x+k[0].La.x):q=1<l?q+(la+t/2-a.N.y):q+(k[0].N.y-a.N.y+k[0].La.y);break;case Er:b?h+=A+t/2-a.N.x:q+=B+t/2-a.N.y;break;case Fr:break;default:v.k("Unhandled alignment value "+p.toString())}for(m=0;m<l;m++)n=k[m],b?n.ka.m(n.ka.x+n.La.x-h,n.ka.y+(135<f?(r?-B:-n.eb.height)+n.La.y-c:e+c+n.La.y)):n.ka.m(n.ka.x+(135<f?(r?-A:-n.eb.width)+n.La.x-c:d+c+n.La.x),n.ka.y+n.La.y-q);l=k=0;r?b?(A=ds(a,A,h),0>h&&(h=0),135<f&&(q+=B+c),B+=e+c,p===Fr&&(k+=t/2+a.N.x),l+=e+c):(135<f&&
(h+=A+c),A+=d+c,B=es(a,B,q),0>q&&(q=0),p===Fr&&(l+=t/2+a.N.y),k+=d+c):b?(null===a.comments?d>A&&(p=fs(p,d-A,0),k=p.x,l=p.y,A=d,h=0):A=ds(a,A,h),0>h&&(k-=h,h=0),135<f&&(q+=B+c),B=Math.max(Math.max(B,e),B+e+c),l+=e+c):(135<f&&(h+=A+c),A=Math.max(Math.max(A,d),A+d+c),null===a.comments?e>B&&(p=fs(p,0,e-B),k=p.x,l=p.y,B=e,q=0):B=es(a,B,q),0>q&&(l-=q,q=0),k+=d+c);if(0<Ga)f=Sr(this,4),p=Sr(this,4),b?(f[2].m(0,e+c),f[3].m(f[2].x,B),p[2].m(A,f[2].y),p[3].m(p[2].x,f[3].y)):(f[2].m(d+c,0),f[3].m(A,f[2].y),p[2].m(f[2].x,
B),p[3].m(f[3].x,p[2].y));else{f=Sr(this,D.length+2);p=Sr(this,V.length+2);for(m=0;m<D.length;m++)r=D[m],f[m+2].m(r.x+k,r.y+l);for(m=0;m<V.length;m++)r=V[m],p[m+2].m(r.x+k,r.y+l)}b?(f[0].m(h,0),f[1].m(f[0].x,e),f[2].y<f[1].y&&(f[2].x>f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x>f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),p[0].m(h+d,0),p[1].m(p[0].x,e),p[2].y<p[1].y&&(p[2].x<p[0].x?p[2].assign(p[1]):p[1].assign(p[2])),p[3].y<p[2].y&&(p[3].x<p[0].x?p[3].assign(p[2]):p[2].assign(p[3])),
f[2].y-=c/2,p[2].y-=c/2):(f[0].m(0,q),f[1].m(d,f[0].y),f[2].x<f[1].x&&(f[2].y>f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y>f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),p[0].m(0,q+e),p[1].m(d,p[0].y),p[2].x<p[1].x&&(p[2].y<p[0].y?p[2].assign(p[1]):p[1].assign(p[2])),p[3].x<p[2].x&&(p[3].y<p[0].y?p[3].assign(p[2]):p[2].assign(p[3])),f[2].x-=c/2,p[2].x-=c/2);gs(this,D);gs(this,V);a.rt=f;a.Mt=p;a.La.m(h,q);a.eb.m(A,B)}break;default:v.k("Unhandled compaction value "+a.compaction.toString())}}};
function Jr(a,b){if(0===b.Fm){var c=!1,d=0,e=Br;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Cr(e));e=Hr(b);b.ka.m(0,0);b.eb.m(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.La.m(0,0):180===d&&!c||(90===d||270===d)&&e?b.La.m(b.width-2*b.N.x,0):b.La.m(0,b.height-2*b.N.y)}else{for(var c=Lr(b),d=90===c||270===c,f=0,e=b.children,h=e.length,k=0;k<h;k++)var l=e[k],f=Math.max(f,d?l.eb.width:l.eb.height);var m=b.alignment,n=m===Mr,p=m===Nr,q=Cr(m),r=Math.max(0,
b.breadthLimit),s=Or(b),t=b.nodeSpacing,u=Pr(b),x=n||p?0:u/2,y=b.rowSpacing,A=0;if(n||p||b.xp||b.yp&&1===b.maxGenerationCount)A=Math.max(0,b.rowIndent);var n=b.width,B=b.height,I=0,D=0,V=0,ba=0,U=0,N=0,Z=0,Ga=0,ta=0,Pa=0;q&&!Gr(m)&&135<c&&e.reverse();if(Gr(m))if(1<h)for(k=0;k<h;k++){var l=e[k],la=l.eb;0===k%2&&k!==h-1?ta=Math.max(ta,(d?la.width:la.height)+hs(l)-t):0!==k%2&&(Pa=Math.max(Pa,(d?la.width:la.height)+hs(l)-t))}else 1===h&&(ta=d?e[0].eb.width:e[0].eb.height);if(q)switch(m){case Dr:case sr:D=
135>c?Qr(b,e,ta,I,D):Rr(b,e,ta,I,D);ta=D.x;I=D.width;D=D.height;break;case Er:for(k=0;k<h;k++)l=e[k],la=l.eb,r=0===Z?0:y,d?(l.ka.m(f-la.width,U+r),I=Math.max(I,la.width),D=Math.max(D,U+r+la.height),U+=r+la.height):(l.ka.m(ba+r,f-la.height),I=Math.max(I,ba+r+la.width),D=Math.max(D,la.height),ba+=r+la.width),Z++;break;case Fr:for(f=0;f<h;f++)l=e[f],la=l.eb,r=0===Z?0:y,d?(l.ka.m(t/2+b.N.x,U+r),I=Math.max(I,la.width),D=Math.max(D,U+r+la.height),U+=r+la.height):(l.ka.m(ba+r,t/2+b.N.y),I=Math.max(I,ba+
r+la.width),D=Math.max(D,la.height),ba+=r+la.width),Z++}else for(k=0;k<h;k++)l=e[k],la=l.eb,d?(0<r&&0<Z&&ba+t+la.width>r&&(ba<f&&Yr(b,m,f-ba,0,Ga,k-1),N++,Z=0,Ga=k,V=D,ba=0,U=135<c?-D-y:D+y),Pa=0===Z?x:t,Zr(a,l,0,U),l.ka.m(ba+Pa,U),I=Math.max(I,ba+Pa+la.width),D=Math.max(D,V+(0===N?0:y)+la.height),ba+=Pa+la.width):(0<r&&0<Z&&U+t+la.height>r&&(U<f&&Yr(b,m,0,f-U,Ga,k-1),N++,Z=0,Ga=k,V=I,U=0,ba=135<c?-I-y:I+y),Pa=0===Z?x:t,Zr(a,l,ba,0),l.ka.m(ba,U+Pa),D=Math.max(D,U+Pa+la.height),I=Math.max(I,V+(0===
N?0:y)+la.width),U+=Pa+la.height),Z++;0<N&&(d?(D+=Math.max(0,s),ba<I&&Yr(b,m,I-ba,0,Ga,h-1),0<A&&(p||as(b,A,0,0,h-1),I+=A)):(I+=Math.max(0,s),U<D&&Yr(b,m,0,D-U,Ga,h-1),0<A&&(p||as(b,0,A,0,h-1),D+=A)));A=p=0;switch(m){case cs:d?p+=I/2-b.N.x-u/2:A+=D/2-b.N.y-u/2;break;case Br:0<N?d?p+=I/2-b.N.x-u/2:A+=D/2-b.N.y-u/2:d?(m=e[0].ka.x+e[0].La.x,t=e[h-1].ka.x+e[h-1].La.x+2*e[h-1].N.x,p+=m+(t-m)/2-b.N.x-u/2):(m=e[0].ka.y+e[0].La.y,t=e[h-1].ka.y+e[h-1].La.y+2*e[h-1].N.y,A+=m+(t-m)/2-b.N.y-u/2);break;case Mr:d?
(p-=u,I+=u):(A-=u,D+=u);break;case Nr:d?(p+=I-b.width+u,I+=u):(A+=D-b.height+u,D+=u);break;case Dr:case sr:d?p=1<h?p+(ta+t/2-b.N.x):p+(e[0].N.x-b.N.x+e[0].La.x):A=1<h?A+(ta+t/2-b.N.y):A+(e[0].N.y-b.N.y+e[0].La.y);break;case Er:d?p+=I+t/2-b.N.x:A+=D+t/2-b.N.y;break;case Fr:break;default:v.k("Unhandled alignment value "+m.toString())}for(k=0;k<h;k++)l=e[k],d?l.ka.m(l.ka.x+l.La.x-p,l.ka.y+(135<c?(q?-D:-l.eb.height)+l.La.y-s:B+s+l.La.y)):l.ka.m(l.ka.x+(135<c?(q?-I:-l.eb.width)+l.La.x-s:n+s+l.La.x),l.ka.y+
l.La.y-A);d?(I=ds(b,I,p),0>p&&(p=0),135<c&&(A+=D+s),D+=B+s):(135<c&&(p+=I+s),I+=n+s,D=es(b,D,A),0>A&&(A=0));b.La.m(p,A);b.eb.m(I,D)}}
function Qr(a,b,c,d,e){var f=b.length;if(0===f)return new z(c,0,d,e);if(1===f){var h=b[0];d=h.eb.width;e=h.eb.height;return new z(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=90===Lr(a),n=0,p=0,q=0,r=0;r<f;r++)if(!(0!==r%2||1<f&&r===f-1)){var h=b[r],s=h.eb,t=0===n?0:l;if(m){var u=hs(h)-k;h.ka.m(c-(s.width+u),q+t);d=Math.max(d,s.width+u);e=Math.max(e,q+t+s.height);q+=t+s.height}else u=hs(h)-k,h.ka.m(p+t,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,p+t+s.width),p+=t+s.width;n++}var n=
0,x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<f;r++)0!==r%2&&(h=b[r],s=h.eb,t=0===n?0:l,m?(u=hs(h)-k,h.ka.m(p+u,q+t),d=Math.max(d,p+s.width+u),e=Math.max(e,q+t+s.height),q+=t+s.height):(u=hs(h)-k,h.ka.m(p+t,q+u),d=Math.max(d,p+t+s.width),e=Math.max(e,q+s.height+u),p+=t+s.width),n++);1<f&&1===f%2&&(h=b[f-1],s=h.eb,b=is(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ka.m(c+k/2-h.N.x-h.La.x,e+b),m=c+k/2-h.N.x-h.La.x,d=Math.max(d,m+s.width),0>m&&(d-=m),e=Math.max(e,Math.max(y,
q)+b+s.height),0>h.ka.x&&(c=js(a,h.ka.x,!1,c,k))):(h.ka.m(d+b,c+k/2-h.N.y-h.La.y),d=Math.max(d,Math.max(x,p)+b+s.width),m=c+k/2-h.N.y-h.La.y,e=Math.max(e,m+s.height),0>m&&(e-=m),0>h.ka.y&&(c=js(a,h.ka.y,!0,c,k))));return new z(c,0,d,e)}
function Rr(a,b,c,d,e){var f=b.length;if(0===f)return new z(c,0,d,e);if(1===f){var h=b[0];d=h.eb.width;e=h.eb.height;return new z(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=270===Lr(a),n=0,p=0,q=0,r=0;r<f;r++)if(!(0!==r%2||1<f&&r===f-1)){var h=b[r],s=h.eb,t=0===n?0:l;if(m){var u=hs(h)-k,q=q-(t+s.height);h.ka.m(c-(s.width+u),q);d=Math.max(d,s.width+u);e=Math.max(e,Math.abs(q))}else u=hs(h)-k,p-=t+s.width,h.ka.m(p,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,Math.abs(p));n++}var n=0,
x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<f;r++)0!==r%2&&(h=b[r],s=h.eb,t=0===n?0:l,m?(u=hs(h)-k,q-=t+s.height,h.ka.m(p+u,q),d=Math.max(d,p+s.width+u),e=Math.max(e,Math.abs(q))):(u=hs(h)-k,p-=t+s.width,h.ka.m(p,q+u),e=Math.max(e,q+s.height+u),d=Math.max(d,Math.abs(p))),n++);1<f&&1===f%2&&(h=b[f-1],s=h.eb,l=is(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ka.m(c+k/2-h.N.x-h.La.x,-e-s.height-l),p=c+k/2-h.N.x-h.La.x,d=Math.max(d,p+s.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(y,
q))+l+s.height),0>h.ka.x&&(c=js(a,h.ka.x,!1,c,k))):(h.ka.m(-d-s.width-l,c+k/2-h.N.y-h.La.y),d=Math.max(d,Math.abs(Math.min(x,p))+l+s.width),p=c+k/2-h.N.y-h.La.y,e=Math.max(e,p+s.height),0>p&&(e-=p),0>h.ka.y&&(c=js(a,h.ka.y,!0,c,k))));for(r=0;r<f;r++)h=b[r],m?h.ka.m(h.ka.x,h.ka.y+e):h.ka.m(h.ka.x+d,h.ka.y);return new z(c,0,d,e)}function hs(a){return null===a.parent?0:a.parent.nodeSpacing}function is(a){return null===a.parent?0:a.parent.rowSpacing}
function js(a,b,c,d,e){a=a.children;for(var f=a.length,h=0;h<f;h++)c?a[h].ka.m(a[h].ka.x,a[h].ka.y-b):a[h].ka.m(a[h].ka.x-b,a[h].ka.y);b=a[f-1];return Math.max(d,c?b.La.y+b.N.y-e/2:b.La.x+b.N.x-e/2)}
function ds(a,b,c){switch(a.alignment){case Br:case cs:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Mr:return a.width>b?a.width:b;case Nr:return 2*a.N.x>b?a.width:b+a.width-2*a.N.x;case Dr:case sr:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Er:return a.width-a.N.x+a.nodeSpacing/2+b;case Fr:return Math.max(a.width,a.N.x+a.nodeSpacing/2+b);default:return b}}
function es(a,b,c){switch(a.alignment){case Br:case cs:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Mr:return a.height>b?a.height:b;case Nr:return 2*a.N.y>b?a.height:b+a.height-2*a.N.y;case Dr:case sr:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Er:return a.height-a.N.y+a.nodeSpacing/2+b;case Fr:return Math.max(a.height,a.N.y+a.nodeSpacing/2+b);default:return b}}
function fs(a,b,c){switch(a){case cs:b/=2;c/=2;break;case Br:b/=2;c/=2;break;case Mr:c=b=0;break;case Nr:break;default:v.k("Unhandled alignment value "+a.toString())}return new w(b,c)}function Yr(a,b,c,d,e,f){b=fs(b,c,d);as(a,b.x,b.y,e,f)}function as(a,b,c,d,e){if(0!==b||0!==c)for(a=a.children;d<=e;d++){var f=a[d].ka;f.x+=b;f.y+=c}}
function Zr(a,b,c,d){var e=b.parent;switch(a.yf){case dr:for(a=b.jc;a.next();)b=a.value,b.fromVertex===e&&b.Lr.m(c,d);break;case kr:for(a=b.Zb;a.next();)b=a.value,b.toVertex===e&&b.Lr.m(c,d);break;default:v.k("Unhandled path value "+a.yf.toString())}}function bs(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function $r(a,b,c,d,e,f,h,k){var l=Lr(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=f;e=h;var q=c.rt,r=c.Mt;h=c.eb;var s=m?Math.max(e,h.height):Math.max(d,h.width);if(null===q||l!==Lr(c))q=Sr(a,2),r=Sr(a,2),m?(q[0].m(0,0),q[1].m(0,h.height),r[0].m(h.width,0),r[1].m(r[0].x,q[1].y)):(q[0].m(0,0),q[1].m(h.width,0),r[0].m(0,h.height),r[1].m(q[1].x,r[0].y));if(m){c=d;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;){e=p[l];var t=q[m];f=t.x;var u=t.y;f+=
c;var x=e;l+1<p.length&&(x=p[l+1]);var y=t,t=y.x,y=y.y;m+1<q.length&&(y=q[m+1],t=y.x,y=y.y,t+=c);var A=d;e.y===u?A=f-e.x:e.y>u&&e.y<y?A=f+(e.y-u)/(y-u)*(t-f)-e.x:u>e.y&&u<x.y&&(A=f-(e.x+(u-e.y)/(x.y-e.y)*(x.x-e.x)));A<d&&(d=A);x.y<=e.y?l++:y<=u?m++:(x.y<=y&&l++,y<=x.y&&m++)}c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=Sr(a,b.length+l.length);for(d=f=e=0;f<l.length&&l[f].y<b[0].y;)u=l[f++],n[d++].m(u.x+m,u.y);for(;e<b.length;)u=b[e++],n[d++].m(u.x,u.y);for(e=b[b.length-
1].y;f<l.length&&l[f].y<=e;)f++;for(;f<l.length&&l[f].y>e;)u=l[f++],n[d++].m(u.x+m,u.y);l=Sr(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);gs(a,n);d=l}f=r;u=c;if(null===p||2>p.length||null===f||2>f.length)e=null;else{n=Sr(a,p.length+f.length);for(m=x=l=0;l<p.length&&p[l].y<f[0].y;)e=p[l++],n[m++].m(e.x,e.y);for(;x<f.length;)e=f[x++],n[m++].m(e.x+u,e.y);for(f=f[f.length-1].y;l<p.length&&p[l].y<=f;)l++;for(;l<p.length&&p[l].y>f;)e=p[l++],n[m++].m(e.x,e.y);e=Sr(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);gs(a,n)}f=
Math.max(0,c)+h.width;h=s}else{c=e;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;)e=p[l],t=q[m],f=t.x,u=t.y,u+=c,x=e,l+1<p.length&&(x=p[l+1]),y=t,t=y.x,y=y.y,m+1<q.length&&(y=q[m+1],t=y.x,y=y.y,y+=c),A=d,e.x===f?A=u-e.y:e.x>f&&e.x<t?A=u+(e.x-f)/(t-f)*(y-u)-e.y:f>e.x&&f<x.x&&(A=u-(e.y+(f-e.x)/(x.x-e.x)*(x.y-e.y))),A<d&&(d=A),x.x<=e.x?l++:t<=f?m++:(x.x<=t&&l++,t<=x.x&&m++);c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=Sr(a,
b.length+l.length);for(d=f=e=0;f<l.length&&l[f].x<b[0].x;)u=l[f++],n[d++].m(u.x,u.y+m);for(;e<b.length;)u=b[e++],n[d++].m(u.x,u.y);for(e=b[b.length-1].x;f<l.length&&l[f].x<=e;)f++;for(;f<l.length&&l[f].x>e;)u=l[f++],n[d++].m(u.x,u.y+m);l=Sr(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);gs(a,n);d=l}f=r;u=c;if(null===p||2>p.length||null===f||2>f.length)e=null;else{n=Sr(a,p.length+f.length);for(m=x=l=0;l<p.length&&p[l].x<f[0].x;)e=p[l++],n[m++].m(e.x,e.y);for(;x<f.length;)e=f[x++],n[m++].m(e.x,e.y+u);for(f=
f[f.length-1].x;l<p.length&&p[l].x<=f;)l++;for(;l<p.length&&p[l].x>f;)e=p[l++],n[m++].m(e.x,e.y);e=Sr(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);gs(a,n)}f=s;h=Math.max(0,c)+h.height}gs(a,b);gs(a,q);gs(a,p);gs(a,r);k[0]=d;k[1]=e;return new z(c,0,f,h)}function Sr(a,b){var c=a.az[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new w;return c}function gs(a,b){var c=b.length,d=a.az[c];void 0===d&&(d=[],a.az[c]=d);d.push(b)}
Y.prototype.arrangeTrees=function(){if(this.gd===jr)for(var a=this.td.i;a.next();){var b=a.value;if(b instanceof hr){var c=b.Dc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);ks(this,b,c,d)}}}else{c=[];for(a=this.td.i;a.next();)b=a.value,b instanceof hr&&c.push(b);switch(this.sorting){case xr:break;case yr:c.reverse();break;case zr:c.sort(this.comparer);break;case Ar:c.sort(this.comparer);c.reverse();break;default:v.k("Unhandled sorting value "+this.sorting.toString())}b=
this.Ud;a=b.x;b=b.y;for(d=0;d<c.length;d++){var e=c[d];ks(this,e,a+e.La.x,b+e.La.y);switch(this.gd){case gr:b+=e.eb.height+this.Wf.height;break;case ls:a+=e.eb.width+this.Wf.width;break;default:v.k("Unhandled arrangement value "+this.gd.toString())}}}};function ks(a,b,c,d){if(null!==b){b.x=c;b.y=d;b=b.children;for(var e=b.length,f=0;f<e;f++){var h=b[f];ks(a,h,c+h.ka.x,d+h.ka.y)}}}Y.prototype.commitLayout=function(){this.BA();this.commitNodes();this.qz();this.pt&&this.commitLinks()};
Y.prototype.commitNodes=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Y.prototype.qz=function(){if(this.Vz===pr){for(var a=this.cB,b=[],c=null,d=this.network.vertexes.i;d.next();){var e=d.value;null===c?c=e.pb.copy():c.bi(e.pb);var f=b[e.level],f=void 0===f?Or(e):Math.max(f,Or(e));b[e.level]=f}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.Kf(this.nodeSpacing/2,this.layerSpacing),e=new w(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.Kf(this.layerSpacing,this.nodeSpacing/2),e=new w(-this.layerSpacing/2,-this.nodeSpacing/2));var f=
[],c=90===this.angle||270===this.angle?c.width:c.height,h=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)h+=a[d]+b[d];for(d=0;d<a.length;d++){var k=a[d]+b[d];270===this.angle?(h-=k,f.push(new z(0,h,c,k))):90===this.angle?(f.push(new z(0,h,c,k)),h+=k):180===this.angle?(h-=k,f.push(new z(h,0,k,c))):(f.push(new z(h,0,k,c)),h+=k)}this.commitLayers(f,e)}};Y.prototype.commitLayers=function(){};Y.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
Y.prototype.BA=function(){for(var a=this.td.i;a.next();){var b=a.value;b instanceof hr&&ms(this,b)}};function ms(a,b){if(null!==b){a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ms(a,c[e])}}
Y.prototype.setPortSpots=function(a){var b=a.alignment;if(Cr(b)){var c=this.yf===dr,d=Lr(a),e;switch(d){case 0:e=Bc;break;case 90:e=Cc;break;case 180:e=Ac;break;default:e=zc}var f=a.children,h=f.length;switch(b){case Dr:case sr:for(b=0;b<h;b++){var k=f[b],k=(c?k.jc:k.Zb).first();if(null!==k&&(k=k.link,null!==k)){var l=90===d||270===d?Ac:zc;if(1===h||b===h-1&&1===h%2)switch(d){case 0:l=Ac;break;case 90:l=zc;break;case 180:l=Bc;break;default:l=Cc}else 0===b%2&&(l=90===d||270===d?Bc:Cc);c?(a.setsPortSpot&&
(k.Ab=e),a.setsChildPortSpot&&(k.Bb=l)):(a.setsPortSpot&&(k.Ab=l),a.setsChildPortSpot&&(k.Bb=e))}}break;case Er:l=90===d||270===d?Bc:Cc;for(d=c?a.Zb:a.jc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.Ab=e),a.setsChildPortSpot&&(k.Bb=l)):(a.setsPortSpot&&(k.Ab=l),a.setsChildPortSpot&&(k.Bb=e)));break;case Fr:for(l=90===d||270===d?Ac:zc,d=c?a.Zb:a.jc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.Ab=e),a.setsChildPortSpot&&(k.Bb=l)):(a.setsPortSpot&&(k.Ab=l),a.setsChildPortSpot&&
(k.Bb=e)))}}else if(c=Lr(a),this.yf===dr)for(e=a.Zb;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.Oc())switch(c){case 0:d.Ab=Bc;break;case 90:d.Ab=Cc;break;case 180:d.Ab=Ac;break;default:d.Ab=zc}else d.Ab=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Oc())switch(c){case 0:d.Bb=Ac;break;case 90:d.Bb=zc;break;case 180:d.Bb=Bc;break;default:d.Bb=Cc}else d.Bb=a.childPortSpot}}else for(e=a.jc;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.Oc())switch(c){case 0:d.Bb=
Bc;break;case 90:d.Bb=Cc;break;case 180:d.Bb=Ac;break;default:d.Bb=zc}else d.Bb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Oc())switch(c){case 0:d.Ab=Ac;break;case 90:d.Ab=zc;break;case 180:d.Ab=Bc;break;default:d.Ab=Cc}else d.Ab=a.childPortSpot}};function Lr(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Or(a){var b=Lr(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function Pr(a){var b=Lr(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
v.defineProperty(Y,{eL:"roots"},function(){return this.td},function(a){this.td!==a&&(v.C(a,H,Y,"roots"),this.td=a,this.G())});v.defineProperty(Y,{path:"path"},function(){return this.Er},function(a){this.Er!==a&&(v.qb(a,Y,Y,"path"),this.Er=a,this.G())});v.defineProperty(Y,{lJ:"treeStyle"},function(){return this.xs},function(a){this.gd!==a&&(v.qb(a,Y,Y,"treeStyle"),a===er||a===vr||a===wr||a===ur)&&(this.xs=a,this.G())});
v.defineProperty(Y,{Vz:"layerStyle"},function(){return this.iv},function(a){this.gd!==a&&(v.qb(a,Y,Y,"layerStyle"),a===fr||a===qr||a===pr)&&(this.iv=a,this.G())});v.defineProperty(Y,{comments:"comments"},function(){return this.sh},function(a){this.sh!==a&&(v.j(a,"boolean",Y,"comments"),this.sh=a,this.G())});v.defineProperty(Y,{Ff:"arrangement"},function(){return this.gd},function(a){this.gd!==a&&(v.qb(a,Y,Y,"arrangement"),a===gr||a===ls||a===jr)&&(this.gd=a,this.G())});
v.defineProperty(Y,{wD:"arrangementSpacing"},function(){return this.Wf},function(a){v.C(a,ia,Y,"arrangementSpacing");this.Wf.L(a)||(this.Wf.assign(a),this.G())});v.defineProperty(Y,{dL:"rootDefaults"},function(){return this.ta},function(a){this.ta!==a&&(v.C(a,hr,Y,"rootDefaults"),this.ta=a,this.G())});v.defineProperty(Y,{BJ:"alternateDefaults"},function(){return this.sa},function(a){this.sa!==a&&(v.C(a,hr,Y,"alternateDefaults"),this.sa=a,this.G())});
v.defineProperty(Y,{sorting:"sorting"},function(){return this.ta.sorting},function(a){this.ta.sorting!==a&&(v.qb(a,Y,Y,"sorting"),a===xr||a===yr||a===zr||Ar)&&(this.ta.sorting=a,this.G())});v.defineProperty(Y,{comparer:"comparer"},function(){return this.ta.comparer},function(a){this.ta.comparer!==a&&(v.j(a,"function",Y,"comparer"),this.ta.comparer=a,this.G())});
v.defineProperty(Y,{angle:"angle"},function(){return this.ta.angle},function(a){this.ta.angle!==a&&(v.j(a,"number",Y,"angle"),0===a||90===a||180===a||270===a)&&(this.ta.angle=a,this.G())});v.defineProperty(Y,{alignment:"alignment"},function(){return this.ta.alignment},function(a){this.ta.alignment!==a&&(v.qb(a,Y,Y,"alignment"),this.ta.alignment=a,this.G())});
v.defineProperty(Y,{nodeIndent:"nodeIndent"},function(){return this.ta.nodeIndent},function(a){this.ta.nodeIndent!==a&&(v.j(a,"number",Y,"nodeIndent"),0<=a&&(this.ta.nodeIndent=a,this.G()))});v.defineProperty(Y,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ta.nodeIndentPastParent},function(a){this.ta.nodeIndentPastParent!==a&&(v.j(a,"number",Y,"nodeIndentPastParent"),0<=a&&1>=a&&(this.ta.nodeIndentPastParent=a,this.G()))});
v.defineProperty(Y,{nodeSpacing:"nodeSpacing"},function(){return this.ta.nodeSpacing},function(a){this.ta.nodeSpacing!==a&&(v.j(a,"number",Y,"nodeSpacing"),this.ta.nodeSpacing=a,this.G())});v.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.ta.layerSpacing},function(a){this.ta.layerSpacing!==a&&(v.j(a,"number",Y,"layerSpacing"),this.ta.layerSpacing=a,this.G())});
v.defineProperty(Y,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ta.layerSpacingParentOverlap},function(a){this.ta.layerSpacingParentOverlap!==a&&(v.j(a,"number",Y,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.ta.layerSpacingParentOverlap=a,this.G()))});v.defineProperty(Y,{compaction:"compaction"},function(){return this.ta.compaction},function(a){this.ta.compaction!==a&&(v.qb(a,Y,Y,"compaction"),a===Ir||a===Kr)&&(this.ta.compaction=a,this.G())});
v.defineProperty(Y,{breadthLimit:"breadthLimit"},function(){return this.ta.breadthLimit},function(a){this.ta.breadthLimit!==a&&(v.j(a,"number",Y,"breadthLimit"),0<=a&&(this.ta.breadthLimit=a,this.G()))});v.defineProperty(Y,{rowSpacing:"rowSpacing"},function(){return this.ta.rowSpacing},function(a){this.ta.rowSpacing!==a&&(v.j(a,"number",Y,"rowSpacing"),this.ta.rowSpacing=a,this.G())});
v.defineProperty(Y,{rowIndent:"rowIndent"},function(){return this.ta.rowIndent},function(a){this.ta.rowIndent!==a&&(v.j(a,"number",Y,"rowIndent"),0<=a&&(this.ta.rowIndent=a,this.G()))});v.defineProperty(Y,{commentSpacing:"commentSpacing"},function(){return this.ta.commentSpacing},function(a){this.ta.commentSpacing!==a&&(v.j(a,"number",Y,"commentSpacing"),this.ta.commentSpacing=a,this.G())});
v.defineProperty(Y,{commentMargin:"commentMargin"},function(){return this.ta.commentMargin},function(a){this.ta.commentMargin!==a&&(v.j(a,"number",Y,"commentMargin"),this.ta.commentMargin=a,this.G())});v.defineProperty(Y,{setsPortSpot:"setsPortSpot"},function(){return this.ta.setsPortSpot},function(a){this.ta.setsPortSpot!==a&&(v.j(a,"boolean",Y,"setsPortSpot"),this.ta.setsPortSpot=a,this.G())});
v.defineProperty(Y,{portSpot:"portSpot"},function(){return this.ta.portSpot},function(a){v.C(a,L,Y,"portSpot");this.ta.portSpot.L(a)||(this.ta.portSpot=a,this.G())});v.defineProperty(Y,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ta.setsChildPortSpot},function(a){this.ta.setsChildPortSpot!==a&&(v.j(a,"boolean",Y,"setsChildPortSpot"),this.ta.setsChildPortSpot=a,this.G())});
v.defineProperty(Y,{childPortSpot:"childPortSpot"},function(){return this.ta.childPortSpot},function(a){v.C(a,L,Y,"childPortSpot");this.ta.childPortSpot.L(a)||(this.ta.childPortSpot=a,this.G())});v.defineProperty(Y,{MJ:"alternateSorting"},function(){return this.sa.sorting},function(a){this.sa.sorting!==a&&(v.qb(a,Y,Y,"alternateSorting"),a===xr||a===yr||a===zr||Ar)&&(this.sa.sorting=a,this.G())});
v.defineProperty(Y,{AJ:"alternateComparer"},function(){return this.sa.comparer},function(a){this.sa.comparer!==a&&(v.j(a,"function",Y,"alternateComparer"),this.sa.comparer=a,this.G())});v.defineProperty(Y,{uJ:"alternateAngle"},function(){return this.sa.angle},function(a){this.sa.angle!==a&&(v.j(a,"number",Y,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.sa.angle=a,this.G())});
v.defineProperty(Y,{tJ:"alternateAlignment"},function(){return this.sa.alignment},function(a){this.sa.alignment!==a&&(v.qb(a,Y,Y,"alternateAlignment"),this.sa.alignment=a,this.G())});v.defineProperty(Y,{EJ:"alternateNodeIndent"},function(){return this.sa.nodeIndent},function(a){this.sa.nodeIndent!==a&&(v.j(a,"number",Y,"alternateNodeIndent"),0<=a&&(this.sa.nodeIndent=a,this.G()))});
v.defineProperty(Y,{FJ:"alternateNodeIndentPastParent"},function(){return this.sa.nodeIndentPastParent},function(a){this.sa.nodeIndentPastParent!==a&&(v.j(a,"number",Y,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.sa.nodeIndentPastParent=a,this.G()))});v.defineProperty(Y,{GJ:"alternateNodeSpacing"},function(){return this.sa.nodeSpacing},function(a){this.sa.nodeSpacing!==a&&(v.j(a,"number",Y,"alternateNodeSpacing"),this.sa.nodeSpacing=a,this.G())});
v.defineProperty(Y,{CJ:"alternateLayerSpacing"},function(){return this.sa.layerSpacing},function(a){this.sa.layerSpacing!==a&&(v.j(a,"number",Y,"alternateLayerSpacing"),this.sa.layerSpacing=a,this.G())});v.defineProperty(Y,{DJ:"alternateLayerSpacingParentOverlap"},function(){return this.sa.layerSpacingParentOverlap},function(a){this.sa.layerSpacingParentOverlap!==a&&(v.j(a,"number",Y,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.sa.layerSpacingParentOverlap=a,this.G()))});
v.defineProperty(Y,{zJ:"alternateCompaction"},function(){return this.sa.compaction},function(a){this.sa.compaction!==a&&(v.qb(a,Y,Y,"alternateCompaction"),a===Ir||a===Kr)&&(this.sa.compaction=a,this.G())});v.defineProperty(Y,{vJ:"alternateBreadthLimit"},function(){return this.sa.breadthLimit},function(a){this.sa.breadthLimit!==a&&(v.j(a,"number",Y,"alternateBreadthLimit"),0<=a&&(this.sa.breadthLimit=a,this.G()))});
v.defineProperty(Y,{JJ:"alternateRowSpacing"},function(){return this.sa.rowSpacing},function(a){this.sa.rowSpacing!==a&&(v.j(a,"number",Y,"alternateRowSpacing"),this.sa.rowSpacing=a,this.G())});v.defineProperty(Y,{IJ:"alternateRowIndent"},function(){return this.sa.rowIndent},function(a){this.sa.rowIndent!==a&&(v.j(a,"number",Y,"alternateRowIndent"),0<=a&&(this.sa.rowIndent=a,this.G()))});
v.defineProperty(Y,{yJ:"alternateCommentSpacing"},function(){return this.sa.commentSpacing},function(a){this.sa.commentSpacing!==a&&(v.j(a,"number",Y,"alternateCommentSpacing"),this.sa.commentSpacing=a,this.G())});v.defineProperty(Y,{xJ:"alternateCommentMargin"},function(){return this.sa.commentMargin},function(a){this.sa.commentMargin!==a&&(v.j(a,"number",Y,"alternateCommentMargin"),this.sa.commentMargin=a,this.G())});
v.defineProperty(Y,{LJ:"alternateSetsPortSpot"},function(){return this.sa.setsPortSpot},function(a){this.sa.setsPortSpot!==a&&(v.j(a,"boolean",Y,"alternateSetsPortSpot"),this.sa.setsPortSpot=a,this.G())});v.defineProperty(Y,{HJ:"alternatePortSpot"},function(){return this.sa.portSpot},function(a){v.C(a,L,Y,"alternatePortSpot");this.sa.portSpot.L(a)||(this.sa.portSpot=a,this.G())});
v.defineProperty(Y,{KJ:"alternateSetsChildPortSpot"},function(){return this.sa.setsChildPortSpot},function(a){this.sa.setsChildPortSpot!==a&&(v.j(a,"boolean",Y,"alternateSetsChildPortSpot"),this.sa.setsChildPortSpot=a,this.G())});v.defineProperty(Y,{wJ:"alternateChildPortSpot"},function(){return this.sa.childPortSpot},function(a){v.C(a,L,Y,"alternateChildPortSpot");this.sa.childPortSpot.L(a)||(this.sa.childPortSpot=a,this.G())});var cr;Y.PathDefault=cr=v.p(Y,"PathDefault",-1);var dr;
Y.PathDestination=dr=v.p(Y,"PathDestination",0);var kr;Y.PathSource=kr=v.p(Y,"PathSource",1);var xr;Y.SortingForwards=xr=v.p(Y,"SortingForwards",10);var yr;Y.SortingReverse=yr=v.p(Y,"SortingReverse",11);var zr;Y.SortingAscending=zr=v.p(Y,"SortingAscending",12);var Ar;Y.SortingDescending=Ar=v.p(Y,"SortingDescending",13);var cs;Y.AlignmentCenterSubtrees=cs=v.p(Y,"AlignmentCenterSubtrees",20);var Br;Y.AlignmentCenterChildren=Br=v.p(Y,"AlignmentCenterChildren",21);var Mr;
Y.AlignmentStart=Mr=v.p(Y,"AlignmentStart",22);var Nr;Y.AlignmentEnd=Nr=v.p(Y,"AlignmentEnd",23);var Dr;Y.AlignmentBus=Dr=v.p(Y,"AlignmentBus",24);var sr;Y.AlignmentBusBranching=sr=v.p(Y,"AlignmentBusBranching",25);var Er;Y.AlignmentTopLeftBus=Er=v.p(Y,"AlignmentTopLeftBus",26);var Fr;Y.AlignmentBottomRightBus=Fr=v.p(Y,"AlignmentBottomRightBus",27);var Ir;Y.CompactionNone=Ir=v.p(Y,"CompactionNone",30);var Kr;Y.CompactionBlock=Kr=v.p(Y,"CompactionBlock",31);var er;
Y.StyleLayered=er=v.p(Y,"StyleLayered",40);var wr;Y.StyleLastParents=wr=v.p(Y,"StyleLastParents",41);var vr;Y.StyleAlternating=vr=v.p(Y,"StyleAlternating",42);var ur;Y.StyleRootOnly=ur=v.p(Y,"StyleRootOnly",43);var gr;Y.ArrangementVertical=gr=v.p(Y,"ArrangementVertical",50);var ls;Y.ArrangementHorizontal=ls=v.p(Y,"ArrangementHorizontal",51);var jr;Y.ArrangementFixedRoots=jr=v.p(Y,"ArrangementFixedRoots",52);var fr;Y.LayerIndividual=fr=v.p(Y,"LayerIndividual",60);var qr;
Y.LayerSiblings=qr=v.p(Y,"LayerSiblings",61);var pr;Y.LayerUniform=pr=v.p(Y,"LayerUniform",62);function ir(){wa.call(this)}v.Ga(ir,wa);v.ga("TreeNetwork",ir);ir.prototype.createVertex=function(){return new hr};ir.prototype.createEdge=function(){return new ns};
function hr(){ya.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.ka=new w(0,0);this.eb=new ia(0,0);this.La=new w(0,0);this.yp=this.xp=this.NI=!1;this.Mt=this.rt=null;this.sorting=xr;this.comparer=pp;this.angle=0;this.alignment=Br;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Kr;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=yc;this.setsChildPortSpot=!0;this.childPortSpot=yc}v.Ga(hr,ya);v.ga("TreeVertex",hr);
hr.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};v.u(hr,{Fm:"childrenCount"},function(){return this.children.length});v.defineProperty(hr,{cL:"relativePosition"},function(){return this.ka},function(a){this.ka.set(a)});v.defineProperty(hr,{oL:"subtreeSize"},function(){return this.eb},function(a){this.eb.set(a)});
v.defineProperty(hr,{nL:"subtreeOffset"},function(){return this.La},function(a){this.La.set(a)});function ns(){Aa.call(this);this.Lr=new w(0,0)}v.Ga(ns,Aa);v.ga("TreeEdge",ns);
ns.prototype.commit=function(){var a=this.link;if(null!==a&&!a.pl){var b=this.network.Pb,c=null,d=null;switch(b.yf){case dr:c=this.fromVertex;d=this.toVertex;break;case kr:c=this.toVertex;d=this.fromVertex;break;default:v.k("Unhandled path value "+b.yf.toString())}if(null!==c&&null!==d)if(b=this.Lr,0!==b.x||0!==b.y||c.NI){var d=c.pb,e=Lr(c),f=Or(c),h=c.rowSpacing;a.updateRoute();var k=a.Ge===nh,l=a.hc,m=0,n,p;a.Bl();if(l||k){for(m=2;4<a.ma;)a.UE(2);n=a.l(1);p=a.l(2)}else{for(m=1;3<a.ma;)a.UE(1);n=
a.l(0);p=a.l(a.ma-1)}var q=a.l(a.ma-1),r=0;0===e?(c.alignment===Nr?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Pr(c))))):c.alignment===Mr?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Pr(c))))):r=c.xp||c.yp&&1===c.maxGenerationCount?d.top-c.La.y+b.y:d.y+d.height/2+b.y,k?(a.w(m,n.x,r),m++,a.w(m,d.right+f,r),m++,a.w(m,d.right+f+(b.x-h)/3,r),m++,a.w(m,d.right+f+2*(b.x-h)/3,r),m++,a.w(m,d.right+f+(b.x-h),r),m++,a.w(m,p.x,r)):(l&&(a.w(m,d.right+
f/2,n.y),m++),a.w(m,d.right+f/2,r),m++,a.w(m,d.right+f+b.x-(l?h/2:h),r),m++,l&&a.w(m,a.l(m-1).x,p.y))):90===e?(c.alignment===Nr?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Pr(c))))):c.alignment===Mr?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Pr(c))))):r=c.xp||c.yp&&1===c.maxGenerationCount?d.left-c.La.x+b.x:d.x+d.width/2+b.x,k?(a.w(m,r,n.y),m++,a.w(m,r,d.bottom+f),m++,a.w(m,r,d.bottom+f+(b.y-h)/3),m++,a.w(m,r,d.bottom+f+2*(b.y-h)/3),m++,
a.w(m,r,d.bottom+f+(b.y-h)),m++,a.w(m,r,p.y)):(l&&(a.w(m,n.x,d.bottom+f/2),m++),a.w(m,r,d.bottom+f/2),m++,a.w(m,r,d.bottom+f+b.y-(l?h/2:h)),m++,l&&a.w(m,p.x,a.l(m-1).y))):180===e?(c.alignment===Nr?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Pr(c))))):c.alignment===Mr?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Pr(c))))):r=c.xp||c.yp&&1===c.maxGenerationCount?d.top-c.La.y+b.y:d.y+d.height/2+b.y,k?(a.w(m,n.x,r),m++,a.w(m,d.left-f,r),m++,a.w(m,
d.left-f+(b.x+h)/3,r),m++,a.w(m,d.left-f+2*(b.x+h)/3,r),m++,a.w(m,d.left-f+(b.x+h),r),m++,a.w(m,p.x,r)):(l&&(a.w(m,d.left-f/2,n.y),m++),a.w(m,d.left-f/2,r),m++,a.w(m,d.left-f+b.x+(l?h/2:h),r),m++,l&&a.w(m,a.l(m-1).x,p.y))):270===e?(c.alignment===Nr?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Pr(c))))):c.alignment===Mr?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Pr(c))))):r=c.xp||c.yp&&1===c.maxGenerationCount?d.left-c.La.x+b.x:d.x+d.width/
2+b.x,k?(a.w(m,r,n.y),m++,a.w(m,r,d.top-f),m++,a.w(m,r,d.top-f+(b.y+h)/3),m++,a.w(m,r,d.top-f+2*(b.y+h)/3),m++,a.w(m,r,d.top-f+(b.y+h)),m++,a.w(m,r,p.y)):(l&&(a.w(m,n.x,d.top-f/2),m++),a.w(m,r,d.top-f/2),m++,a.w(m,r,d.top-f+b.y+(l?h/2:h)),m++,l&&a.w(m,p.x,a.l(m-1).y))):v.k("Invalid angle "+e);a.Oi()}else e=c,f=d,a=this.link,c=Lr(e),c!==Lr(f)&&(b=Or(e),d=e.pb,e=f.pb,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.updateRoute(),e=a.Ge===
nh,f=a.hc,h=Cr(this.fromVertex.alignment),a.Bl(),0===c?(c=d.right+b/2,e?4===a.ma&&(b=a.l(3).y,a.Y(1,c-20,a.l(1).y),a.w(2,c-20,b),a.w(3,c,b),a.w(4,c+20,b),a.Y(5,a.l(5).x,b)):f?h?a.Y(3,a.l(2).x,a.l(4).y):6===a.ma&&(a.Y(2,c,a.l(2).y),a.Y(3,c,a.l(3).y)):4===a.ma?a.w(2,c,a.l(2).y):3===a.ma?a.Y(1,c,a.l(2).y):2===a.ma&&a.w(1,c,a.l(1).y)):90===c?(b=d.bottom+b/2,e?4===a.ma&&(c=a.l(3).x,a.Y(1,a.l(1).x,b-20),a.w(2,c,b-20),a.w(3,c,b),a.w(4,c,b+20),a.Y(5,c,a.l(5).y)):f?h?a.Y(3,a.l(2).x,a.l(4).y):6===a.ma&&(a.Y(2,
a.l(2).x,b),a.Y(3,a.l(3).x,b)):4===a.ma?a.w(2,a.l(2).x,b):3===a.ma?a.Y(1,a.l(2).x,b):2===a.ma&&a.w(1,a.l(1).x,b)):180===c?(c=d.left-b/2,e?4===a.ma&&(b=a.l(3).y,a.Y(1,c+20,a.l(1).y),a.w(2,c+20,b),a.w(3,c,b),a.w(4,c-20,b),a.Y(5,a.l(5).x,b)):f?h?a.Y(3,a.l(2).x,a.l(4).y):6===a.ma&&(a.Y(2,c,a.l(2).y),a.Y(3,c,a.l(3).y)):4===a.ma?a.w(2,c,a.l(2).y):3===a.ma?a.Y(1,c,a.l(2).y):2===a.ma&&a.w(1,c,a.l(1).y)):270===c&&(b=d.top-b/2,e?4===a.ma&&(c=a.l(3).x,a.Y(1,a.l(1).x,b+20),a.w(2,c,b+20),a.w(3,c,b),a.w(4,c,b-
20),a.Y(5,c,a.l(5).y)):f?h?a.Y(3,a.l(2).x,a.l(4).y):6===a.ma&&(a.Y(2,a.l(2).x,b),a.Y(3,a.l(3).x,b)):4===a.ma?a.w(2,a.l(2).x,b):3===a.ma?a.Y(1,a.l(2).x,b):2===a.ma&&a.w(1,a.l(1).x,b)),a.Oi()))}};v.defineProperty(ns,{bL:"relativePoint"},function(){return this.Lr},function(a){this.Lr.set(a)});function hn(){R.call(this);this.Oe=null}v.Ga(hn,R);hn.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.element=this.Oe.cloneNode(!0)};
hn.prototype.toString=function(){return"HTMLHost("+this.Oe.toString()+")#"+v.cd(this)};hn.prototype.Uj=function(a,b){var c=this.Oe;if(null!==c){var d=this.fb(Kb);d.x-=this.Z.width/2;d.y-=this.Z.height/2;d.x-=this.Z.x;d.y-=this.Z.y;var d=b.CF(d),e=b.fl;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
hn.prototype.ip=function(a,b,c,d){var e=this.xa;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.af,f=this.ug;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.Oe;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);eb(this.Jc,a,b);vl(this,0,0,a,b)};hn.prototype.Li=function(a,b,c,d){zl(this,a,b,c,d)};v.u(hn,{Fa:"naturalBounds"},function(){return this.Jc});
v.defineProperty(hn,{element:"element"},function(){return this.Oe},function(a){var b=this.Oe;b!==a&&(a instanceof HTMLElement||v.k("HTMLHost.element must be an instance of HTMLElement."),this.Oe=a,a.className="HTMLHost",this.h("element",b,a),this.pa())});ea.version="1.6.0-beta3";
window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=ea:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=ea,window.define(ea)):window.go=ea);"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=ea); })(window);
